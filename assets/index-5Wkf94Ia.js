const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/utils-hE2CWlCl.js","assets/vendor-C6wu0P4_.js","assets/FileSaver.min-sg6aKZti.js"])))=>i.map(i=>d[i]);
import{r as E,b as Hc,L as ha,d as qc,e as Kr,E as on,f as fa,h as Kn,m as Gc,S as vi,o as Kc,s as Yc,i as Mo,j as Jc,_ as Yr,D as Jr,k as Do,C as $i,l as $c,n as Xc,p as Qc,q as eu,t as ps,u as pa,v as fe,w as G,x as ke,y as ms,z as ma,F as Nt,A as tu,B as yi,G as ui,H as Hi,I as _a,J as iu,K as nu,M as ga,N as $r,O as ru,T as su,P as ou,Q as au,R as lu,U as cu,V as uu,W as du,X as hu,Y as jo,Z as fu,$ as Xr,a0 as pu,a1 as va,a2 as ya,a3 as mu,a4 as kt,a5 as _u,a6 as gu,a7 as vu,a8 as yu,a9 as wu,aa as bu,ab as xu,ac as Iu,ad as Tu,ae as Pu,af as Eu,ag as Su,ah as zo,ai as wa,aj as an,ak as Zn,al as ku,am as ba,an as Fo,ao as Uo,ap as Cu,aq as Lu,ar as Nu,as as Au,at as Qr,au as es,av as Ru,aw as Ou,ax as Mu,ay as Du,az as ju,aA as zu,aB as Fu,aC as Uu,aD as Bu,aE as Wu,aF as Zu,aG as Vu,aH as Hu,aI as qu,aJ as Gu,aK as Ku,aL as Yu,aM as Ju,aN as $u,aO as Xu,aP as Qu,aQ as ed,c as td,g as id,aR as nd}from"./vendor-C6wu0P4_.js";import{_ as Bn}from"./utils-hE2CWlCl.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))o(l);new MutationObserver(l=>{for(const u of l)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function n(l){const u={};return l.integrity&&(u.integrity=l.integrity),l.referrerPolicy&&(u.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?u.credentials="include":l.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function o(l){if(l.ep)return;l.ep=!0;const u=n(l);fetch(l.href,u)}})();var xa={exports:{}},er={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rd=E,sd=Symbol.for("react.element"),od=Symbol.for("react.fragment"),ad=Object.prototype.hasOwnProperty,ld=rd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cd={key:!0,ref:!0,__self:!0,__source:!0};function Ia(s,t,n){var o,l={},u=null,f=null;n!==void 0&&(u=""+n),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(f=t.ref);for(o in t)ad.call(t,o)&&!cd.hasOwnProperty(o)&&(l[o]=t[o]);if(s&&s.defaultProps)for(o in t=s.defaultProps,t)l[o]===void 0&&(l[o]=t[o]);return{$$typeof:sd,type:s,key:u,ref:f,props:l,_owner:ld.current}}er.Fragment=od;er.jsx=Ia;er.jsxs=Ia;xa.exports=er;var h=xa.exports,ts={},Bo=Hc;ts.createRoot=Bo.createRoot,ts.hydrateRoot=Bo.hydrateRoot;const _s=({className:s})=>h.jsx("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS2YbN6y1YSvCB-uBp2Pz_Dp5t4VeVei16jGg&s",alt:"Logo Sicoob Cooprem",className:s});/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(t,n){this._delegate=t,this.firebase=n,Do(t,new $i("app-compat",()=>this,"PUBLIC")),this.container=t.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this._delegate.automaticDataCollectionEnabled=t}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(t=>{this._delegate.checkDestroyed(),t()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),$c(this._delegate)))}_getService(t,n=Jr){var o;this._delegate.checkDestroyed();const l=this._delegate.container.getProvider(t);return!l.isInitialized()&&((o=l.getComponent())===null||o===void 0?void 0:o.instantiationMode)==="EXPLICIT"&&l.initialize(),l.getImmediate({identifier:n})}_removeServiceInstance(t,n=Jr){this._delegate.container.getProvider(t).clearInstance(n)}_addComponent(t){Do(this._delegate,t)}_addOrOverwriteComponent(t){Xc(this._delegate,t)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},Wo=new on("app-compat","Firebase",dd);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(s){const t={},n={__esModule:!0,initializeApp:u,app:l,registerVersion:Kn,setLogLevel:Yc,onLog:Kc,apps:null,SDK_VERSION:vi,INTERNAL:{registerComponent:_,removeApp:o,useAsService:m,modularAPIs:Gc}};n.default=n,Object.defineProperty(n,"apps",{get:f});function o(w){delete t[w]}function l(w){if(w=w||Jr,!Mo(t,w))throw Wo.create("no-app",{appName:w});return t[w]}l.App=s;function u(w,I={}){const x=Jc(w,I);if(Mo(t,x.name))return t[x.name];const O=new s(x,n);return t[x.name]=O,O}function f(){return Object.keys(t).map(w=>t[w])}function _(w){const I=w.name,x=I.replace("-compat","");if(Yr(w)&&w.type==="PUBLIC"){const O=(V=l())=>{if(typeof V[x]!="function")throw Wo.create("invalid-app-argument",{appName:I});return V[x]()};w.serviceProps!==void 0&&Kr(O,w.serviceProps),n[x]=O,s.prototype[x]=function(...V){return this._getService.bind(this,I).apply(this,w.multipleInstances?V:[])}}return w.type==="PUBLIC"?n[x]:null}function m(w,I){return I==="serverAuth"?null:I}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(){const s=hd(ud);s.INTERNAL=Object.assign(Object.assign({},s.INTERNAL),{createFirebaseNamespace:Ta,extendNamespace:t,createSubscribe:fa,ErrorFactory:on,deepExtend:Kr});function t(n){Kr(s,n)}return s}const fd=Ta();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo=new ha("@firebase/app-compat"),pd="@firebase/app-compat",md="0.2.43";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(s){Kn(pd,md,s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */try{const s=qc();if(s.firebase!==void 0){Zo.warn(`
      Warning: Firebase is already defined in the global scope. Please make sure
      Firebase library is only loaded once.
    `);const t=s.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&Zo.warn(`
        Warning: You are trying to load Firebase while using Firebase Performance standalone script.
        You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
        `)}}catch{}const dt=fd;_d();var gd="firebase",vd="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dt.registerVersion(gd,vd,"app-compat");const Wi={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",TWITTER:"twitter.com"},ci={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yd(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registered for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function Pa(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wd=yd,bd=Pa,Ea=new on("auth","Firebase",Pa());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yn=new ha("@firebase/auth");function xd(s,...t){Yn.logLevel<=ma.WARN&&Yn.warn(`Auth (${vi}): ${s}`,...t)}function Vn(s,...t){Yn.logLevel<=ma.ERROR&&Yn.error(`Auth (${vi}): ${s}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(s,...t){throw vs(s,...t)}function we(s,...t){return vs(s,...t)}function gs(s,t,n){const o=Object.assign(Object.assign({},bd()),{[t]:n});return new on("auth","Firebase",o).create(t,{appName:s.name})}function Pe(s){return gs(s,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function wi(s,t,n){const o=n;if(!(t instanceof o))throw o.name!==t.constructor.name&&Ce(s,"argument-error"),gs(s,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vs(s,...t){if(typeof s!="string"){const n=t[0],o=[...t.slice(1)];return o[0]&&(o[0].appName=s.name),s._errorFactory.create(n,...o)}return Ea.create(s,...t)}function T(s,t,...n){if(!s)throw vs(t,...n)}function ut(s){const t="INTERNAL ASSERTION FAILED: "+s;throw Vn(t),new Error(t)}function Je(s,t){s||ut(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.href)||""}function ys(){return Vo()==="http:"||Vo()==="https:"}function Vo(){var s;return typeof self<"u"&&((s=self.location)===null||s===void 0?void 0:s.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Id(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ys()||pa()||"connection"in navigator)?navigator.onLine:!0}function Td(){if(typeof navigator>"u")return null;const s=navigator;return s.languages&&s.languages[0]||s.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(t,n){this.shortDelay=t,this.longDelay=n,Je(n>t,"Short delay should be less than long delay!"),this.isMobile=eu()||ps()}get(){return Id()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ws(s,t){Je(s.emulator,"Emulator should always be set here");const{url:n}=s.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{static initialize(t,n,o){this.fetchImpl=t,n&&(this.headersImpl=n),o&&(this.responseImpl=o)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ut("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ut("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ut("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pd={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=new ln(3e4,6e4);function ae(s,t){return s.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:s.tenantId}):t}async function le(s,t,n,o,l={}){return ka(s,l,async()=>{let u={},f={};o&&(t==="GET"?f=o:u={body:JSON.stringify(o)});const _=yi(Object.assign({key:s.config.apiKey},f)).slice(1),m=await s._getAdditionalHeaders();m["Content-Type"]="application/json",s.languageCode&&(m["X-Firebase-Locale"]=s.languageCode);const w=Object.assign({method:t,headers:m},u);return nu()||(w.referrerPolicy="no-referrer"),Sa.fetch()(Ca(s,s.config.apiHost,n,_),w)})}async function ka(s,t,n){s._canInitEmulator=!1;const o=Object.assign(Object.assign({},Pd),t);try{const l=new kd(s),u=await Promise.race([n(),l.promise]);l.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw qi(s,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const _=u.ok?f.errorMessage:f.error.message,[m,w]=_.split(" : ");if(m==="FEDERATED_USER_ID_ALREADY_LINKED")throw qi(s,"credential-already-in-use",f);if(m==="EMAIL_EXISTS")throw qi(s,"email-already-in-use",f);if(m==="USER_DISABLED")throw qi(s,"user-disabled",f);const I=o[m]||m.toLowerCase().replace(/[_\s]+/g,"-");if(w)throw gs(s,I,w);Ce(s,I)}}catch(l){if(l instanceof Nt)throw l;Ce(s,"network-request-failed",{message:String(l)})}}async function It(s,t,n,o,l={}){const u=await le(s,t,n,o,l);return"mfaPendingCredential"in u&&Ce(s,"multi-factor-auth-required",{_serverResponse:u}),u}function Ca(s,t,n,o){const l=`${t}${n}?${o}`;return s.config.emulator?ws(s.config,l):`${s.config.apiScheme}://${l}`}function Sd(s){switch(s){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kd{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,o)=>{this.timer=setTimeout(()=>o(we(this.auth,"network-request-failed")),Ed.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function qi(s,t,n){const o={appName:s.name};n.email&&(o.email=n.email),n.phoneNumber&&(o.phoneNumber=n.phoneNumber);const l=we(s,t,o);return l.customData._tokenResponse=n,l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ho(s){return s!==void 0&&s.getResponse!==void 0}function qo(s){return s!==void 0&&s.enterprise!==void 0}class Cd{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],t.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===t)return Sd(n.enforcementState);return null}isProviderEnabled(t){return this.getProviderEnforcementState(t)==="ENFORCE"||this.getProviderEnforcementState(t)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ld(s){return(await le(s,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function Nd(s,t){return le(s,"GET","/v2/recaptchaConfig",ae(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ad(s,t){return le(s,"POST","/v1/accounts:delete",t)}async function Rd(s,t){return le(s,"POST","/v1/accounts:update",t)}async function La(s,t){return le(s,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(s){if(s)try{const t=new Date(Number(s));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Od(s,t=!1){const n=G(s),o=await n.getIdToken(t),l=tr(o);T(l&&l.exp&&l.auth_time&&l.iat,n.auth,"internal-error");const u=typeof l.firebase=="object"?l.firebase:void 0,f=u==null?void 0:u.sign_in_provider;return{claims:l,token:o,authTime:Ki(Zr(l.auth_time)),issuedAtTime:Ki(Zr(l.iat)),expirationTime:Ki(Zr(l.exp)),signInProvider:f||null,signInSecondFactor:(u==null?void 0:u.sign_in_second_factor)||null}}function Zr(s){return Number(s)*1e3}function tr(s){const[t,n,o]=s.split(".");if(t===void 0||n===void 0||o===void 0)return Vn("JWT malformed, contained fewer than 3 sections"),null;try{const l=tu(n);return l?JSON.parse(l):(Vn("Failed to decode base64 JWT payload"),null)}catch(l){return Vn("Caught error parsing JWT payload as JSON",l==null?void 0:l.toString()),null}}function Go(s){const t=tr(s);return T(t,"internal-error"),T(typeof t.exp<"u","internal-error"),T(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xt(s,t,n=!1){if(n)return t;try{return await t}catch(o){throw o instanceof Nt&&Md(o)&&s.auth.currentUser===s&&await s.auth.signOut(),o}}function Md({code:s}){return s==="auth/user-disabled"||s==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const o=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),o}else{this.errorBackoff=3e4;const l=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,l)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ki(this.lastLoginAt),this.creationTime=Ki(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qi(s){var t;const n=s.auth,o=await s.getIdToken(),l=await xt(s,La(n,{idToken:o}));T(l==null?void 0:l.users.length,n,"internal-error");const u=l.users[0];s._notifyReloadListener(u);const f=!((t=u.providerUserInfo)===null||t===void 0)&&t.length?Na(u.providerUserInfo):[],_=zd(s.providerData,f),m=s.isAnonymous,w=!(s.email&&u.passwordHash)&&!(_!=null&&_.length),I=m?w:!1,x={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:_,metadata:new is(u.createdAt,u.lastLoginAt),isAnonymous:I};Object.assign(s,x)}async function jd(s){const t=G(s);await Qi(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function zd(s,t){return[...s.filter(o=>!t.some(l=>l.providerId===o.providerId)),...t]}function Na(s){return s.map(t=>{var{providerId:n}=t,o=ms(t,["providerId"]);return{providerId:n,uid:o.rawId||"",displayName:o.displayName||null,email:o.email||null,phoneNumber:o.phoneNumber||null,photoURL:o.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fd(s,t){const n=await ka(s,{},async()=>{const o=yi({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:l,apiKey:u}=s.config,f=Ca(s,l,"/v1/token",`key=${u}`),_=await s._getAdditionalHeaders();return _["Content-Type"]="application/x-www-form-urlencoded",Sa.fetch()(f,{method:"POST",headers:_,body:o})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Ud(s,t){return le(s,"POST","/v2/accounts:revokeToken",ae(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){T(t.idToken,"internal-error"),T(typeof t.idToken<"u","internal-error"),T(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Go(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){T(t.length!==0,"internal-error");const n=Go(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(T(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:o,refreshToken:l,expiresIn:u}=await Fd(t,n);this.updateTokensAndExpiration(o,l,Number(u))}updateTokensAndExpiration(t,n,o){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+o*1e3}static fromJSON(t,n){const{refreshToken:o,accessToken:l,expirationTime:u}=n,f=new di;return o&&(T(typeof o=="string","internal-error",{appName:t}),f.refreshToken=o),l&&(T(typeof l=="string","internal-error",{appName:t}),f.accessToken=l),u&&(T(typeof u=="number","internal-error",{appName:t}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new di,this.toJSON())}_performRefresh(){return ut("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(s,t){T(typeof s=="string"||typeof s>"u","internal-error",{appName:t})}class vt{constructor(t){var{uid:n,auth:o,stsTokenManager:l}=t,u=ms(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Dd(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=o,this.stsTokenManager=l,this.accessToken=l.accessToken,this.displayName=u.displayName||null,this.email=u.email||null,this.emailVerified=u.emailVerified||!1,this.phoneNumber=u.phoneNumber||null,this.photoURL=u.photoURL||null,this.isAnonymous=u.isAnonymous||!1,this.tenantId=u.tenantId||null,this.providerData=u.providerData?[...u.providerData]:[],this.metadata=new is(u.createdAt||void 0,u.lastLoginAt||void 0)}async getIdToken(t){const n=await xt(this,this.stsTokenManager.getToken(this.auth,t));return T(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Od(this,t)}reload(){return jd(this)}_assign(t){this!==t&&(T(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new vt(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){T(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let o=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),o=!0),n&&await Qi(this),await this.auth._persistUserIfCurrent(this),o&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(fe(this.auth.app))return Promise.reject(Pe(this.auth));const t=await this.getIdToken();return await xt(this,Ad(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var o,l,u,f,_,m,w,I;const x=(o=n.displayName)!==null&&o!==void 0?o:void 0,O=(l=n.email)!==null&&l!==void 0?l:void 0,V=(u=n.phoneNumber)!==null&&u!==void 0?u:void 0,X=(f=n.photoURL)!==null&&f!==void 0?f:void 0,F=(_=n.tenantId)!==null&&_!==void 0?_:void 0,be=(m=n._redirectEventId)!==null&&m!==void 0?m:void 0,Le=(w=n.createdAt)!==null&&w!==void 0?w:void 0,Ee=(I=n.lastLoginAt)!==null&&I!==void 0?I:void 0,{uid:k,emailVerified:A,isAnonymous:j,providerData:Y,stsTokenManager:te}=n;T(k&&te,t,"internal-error");const D=di.fromJSON(this.name,te);T(typeof k=="string",t,"internal-error"),Ct(x,t.name),Ct(O,t.name),T(typeof A=="boolean",t,"internal-error"),T(typeof j=="boolean",t,"internal-error"),Ct(V,t.name),Ct(X,t.name),Ct(F,t.name),Ct(be,t.name),Ct(Le,t.name),Ct(Ee,t.name);const C=new vt({uid:k,auth:t,email:O,emailVerified:A,displayName:x,isAnonymous:j,photoURL:X,phoneNumber:V,tenantId:F,stsTokenManager:D,createdAt:Le,lastLoginAt:Ee});return Y&&Array.isArray(Y)&&(C.providerData=Y.map(ce=>Object.assign({},ce))),be&&(C._redirectEventId=be),C}static async _fromIdTokenResponse(t,n,o=!1){const l=new di;l.updateFromServerResponse(n);const u=new vt({uid:n.localId,auth:t,stsTokenManager:l,isAnonymous:o});return await Qi(u),u}static async _fromGetAccountInfoResponse(t,n,o){const l=n.users[0];T(l.localId!==void 0,"internal-error");const u=l.providerUserInfo!==void 0?Na(l.providerUserInfo):[],f=!(l.email&&l.passwordHash)&&!(u!=null&&u.length),_=new di;_.updateFromIdToken(o);const m=new vt({uid:l.localId,auth:t,stsTokenManager:_,isAnonymous:f}),w={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:u,metadata:new is(l.createdAt,l.lastLoginAt),isAnonymous:!(l.email&&l.passwordHash)&&!(u!=null&&u.length)};return Object.assign(m,w),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=new Map;function Ue(s){Je(s instanceof Function,"Expected a class definition");let t=Ko.get(s);return t?(Je(t instanceof s,"Instance stored in cache mismatched with class"),t):(t=new s,Ko.set(s,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}Aa.type="NONE";const mi=Aa;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(s,t,n){return`firebase:${s}:${t}:${n}`}class hi{constructor(t,n,o){this.persistence=t,this.auth=n,this.userKey=o;const{config:l,name:u}=this.auth;this.fullUserKey=Vt(this.userKey,l.apiKey,u),this.fullPersistenceKey=Vt("persistence",l.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?vt._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,o="authUser"){if(!n.length)return new hi(Ue(mi),t,o);const l=(await Promise.all(n.map(async w=>{if(await w._isAvailable())return w}))).filter(w=>w);let u=l[0]||Ue(mi);const f=Vt(o,t.config.apiKey,t.name);let _=null;for(const w of n)try{const I=await w._get(f);if(I){const x=vt._fromJSON(t,I);w!==u&&(_=x),u=w;break}}catch{}const m=l.filter(w=>w._shouldAllowMigration);return!u._shouldAllowMigration||!m.length?new hi(u,t,o):(u=m[0],_&&await u._set(f,_.toJSON()),await Promise.all(n.map(async w=>{if(w!==u)try{await w._remove(f)}catch{}})),new hi(u,t,o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yo(s){const t=s.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Da(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ra(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ja(t))return"Blackberry";if(za(t))return"Webos";if(Oa(t))return"Safari";if((t.includes("chrome/")||Ma(t))&&!t.includes("edge/"))return"Chrome";if(cn(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,o=s.match(n);if((o==null?void 0:o.length)===2)return o[1]}return"Other"}function Ra(s=ke()){return/firefox\//i.test(s)}function Oa(s=ke()){const t=s.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ma(s=ke()){return/crios\//i.test(s)}function Da(s=ke()){return/iemobile/i.test(s)}function cn(s=ke()){return/android/i.test(s)}function ja(s=ke()){return/blackberry/i.test(s)}function za(s=ke()){return/webos/i.test(s)}function un(s=ke()){return/iphone|ipad|ipod/i.test(s)||/macintosh/i.test(s)&&/mobile/i.test(s)}function Bd(s=ke()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(s)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(s)}function Wd(s=ke()){var t;return un(s)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Zd(){return _a()&&document.documentMode===10}function Fa(s=ke()){return un(s)||cn(s)||za(s)||ja(s)||/windows phone/i.test(s)||Da(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(s,t=[]){let n;switch(s){case"Browser":n=Yo(ke());break;case"Worker":n=`${Yo(ke())}-${s}`;break;default:n=s}const o=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${vi}/${o}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const o=u=>new Promise((f,_)=>{try{const m=t(u);f(m)}catch(m){_(m)}});o.onAbort=n,this.queue.push(o);const l=this.queue.length-1;return()=>{this.queue[l]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const o of this.queue)await o(t),o.onAbort&&n.push(o.onAbort)}catch(o){n.reverse();for(const l of n)try{l()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:o==null?void 0:o.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hd(s,t={}){return le(s,"GET","/v2/passwordPolicy",ae(s,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd=6;class Gd{constructor(t){var n,o,l,u;const f=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=f.minPasswordLength)!==null&&n!==void 0?n:qd,f.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=f.maxPasswordLength),f.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=f.containsLowercaseCharacter),f.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=f.containsUppercaseCharacter),f.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=f.containsNumericCharacter),f.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=f.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(l=(o=t.allowedNonAlphanumericCharacters)===null||o===void 0?void 0:o.join(""))!==null&&l!==void 0?l:"",this.forceUpgradeOnSignin=(u=t.forceUpgradeOnSignin)!==null&&u!==void 0?u:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,o,l,u,f,_;const m={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,m),this.validatePasswordCharacterOptions(t,m),m.isValid&&(m.isValid=(n=m.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),m.isValid&&(m.isValid=(o=m.meetsMaxPasswordLength)!==null&&o!==void 0?o:!0),m.isValid&&(m.isValid=(l=m.containsLowercaseLetter)!==null&&l!==void 0?l:!0),m.isValid&&(m.isValid=(u=m.containsUppercaseLetter)!==null&&u!==void 0?u:!0),m.isValid&&(m.isValid=(f=m.containsNumericCharacter)!==null&&f!==void 0?f:!0),m.isValid&&(m.isValid=(_=m.containsNonAlphanumericCharacter)!==null&&_!==void 0?_:!0),m}validatePasswordLengthOptions(t,n){const o=this.customStrengthOptions.minPasswordLength,l=this.customStrengthOptions.maxPasswordLength;o&&(n.meetsMinPasswordLength=t.length>=o),l&&(n.meetsMaxPasswordLength=t.length<=l)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let o;for(let l=0;l<t.length;l++)o=t.charAt(l),this.updatePasswordCharacterOptionsStatuses(n,o>="a"&&o<="z",o>="A"&&o<="Z",o>="0"&&o<="9",this.allowedNonAlphanumericCharacters.includes(o))}updatePasswordCharacterOptionsStatuses(t,n,o,l,u){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=o)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=l)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(t,n,o,l){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=o,this.config=l,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jo(this),this.idTokenSubscription=new Jo(this),this.beforeStateQueue=new Vd(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ea,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=l.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Ue(n)),this._initializationPromise=this.queue(async()=>{var o,l;if(!this._deleted&&(this.persistenceManager=await hi.create(this,t),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((l=this.currentUser)===null||l===void 0?void 0:l.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await La(this,{idToken:t}),o=await vt._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(o)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(fe(this.app)){const f=this.app.settings.authIdToken;return f?new Promise(_=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(f).then(_,_))}):this.directlySetCurrentUser(null)}const o=await this.assertedPersistence.getCurrentUser();let l=o,u=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const f=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,_=l==null?void 0:l._redirectEventId,m=await this.tryRedirectSignIn(t);(!f||f===_)&&(m!=null&&m.user)&&(l=m.user,u=!0)}if(!l)return this.directlySetCurrentUser(null);if(!l._redirectEventId){if(u)try{await this.beforeStateQueue.runMiddleware(l)}catch(f){l=o,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(f))}return l?this.reloadAndSetCurrentUserOrClear(l):this.directlySetCurrentUser(null)}return T(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===l._redirectEventId?this.directlySetCurrentUser(l):this.reloadAndSetCurrentUserOrClear(l)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await Qi(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Td()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(fe(this.app))return Promise.reject(Pe(this));const n=t?G(t):null;return n&&T(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&T(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return fe(this.app)?Promise.reject(Pe(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return fe(this.app)?Promise.reject(Pe(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ue(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Hd(this),n=new Gd(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new on("auth","Firebase",t())}onAuthStateChanged(t,n,o){return this.registerStateListener(this.authStateSubscription,t,n,o)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,o){return this.registerStateListener(this.idTokenSubscription,t,n,o)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const o=this.onAuthStateChanged(()=>{o(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),o={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(o.tenantId=this.tenantId),await Ud(this,o)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const o=await this.getOrInitRedirectPersistenceManager(n);return t===null?o.removeCurrentUser():o.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Ue(t)||this._popupRedirectResolver;T(n,this,"argument-error"),this.redirectPersistenceManager=await hi.create(this,[Ue(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,o;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((o=this.redirectUser)===null||o===void 0?void 0:o._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const o=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==o&&(this.lastNotifiedUid=o,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,o,l){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const _=this._isInitialized?Promise.resolve():this._initializationPromise;if(T(_,this,"internal-error"),_.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const m=t.addObserver(n,o,l);return()=>{f=!0,m()}}else{const m=t.addObserver(n);return()=>{f=!0,m()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return T(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Ua(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const o=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());o&&(n["X-Firebase-Client"]=o);const l=await this._getAppCheckToken();return l&&(n["X-Firebase-AppCheck"]=l),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&xd(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function oe(s){return G(s)}class Jo{constructor(t){this.auth=t,this.observer=null,this.addObserver=fa(n=>this.observer=n)}get next(){return T(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Yd(s){dn=s}function bs(s){return dn.loadJS(s)}function Jd(){return dn.recaptchaV2Script}function $d(){return dn.recaptchaEnterpriseScript}function Xd(){return dn.gapiScript}function Ba(s){return`__${s}${Math.floor(Math.random()*1e6)}`}const Qd="recaptcha-enterprise",eh="NO_RECAPTCHA";class th{constructor(t){this.type=Qd,this.auth=oe(t)}async verify(t="verify",n=!1){async function o(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,_)=>{Nd(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(m=>{if(m.recaptchaKey===void 0)_(new Error("recaptcha Enterprise site key undefined"));else{const w=new Cd(m);return u.tenantId==null?u._agentRecaptchaConfig=w:u._tenantRecaptchaConfigs[u.tenantId]=w,f(w.siteKey)}}).catch(m=>{_(m)})})}function l(u,f,_){const m=window.grecaptcha;qo(m)?m.enterprise.ready(()=>{m.enterprise.execute(u,{action:t}).then(w=>{f(w)}).catch(()=>{f(eh)})}):_(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((u,f)=>{o(this.auth).then(_=>{if(!n&&qo(window.grecaptcha))l(_,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let m=$d();m.length!==0&&(m+=_),bs(m).then(()=>{l(_,u,f)}).catch(w=>{f(w)})}}).catch(_=>{f(_)})})}}async function $o(s,t,n,o=!1){const l=new th(s);let u;try{u=await l.verify(n)}catch{u=await l.verify(n,!0)}const f=Object.assign({},t);return o?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function en(s,t,n,o){var l;if(!((l=s._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await $o(s,t,n,n==="getOobCode");return o(s,u)}else return o(s,t).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await $o(s,t,n,n==="getOobCode");return o(s,f)}else return Promise.reject(u)})}function ih(s,t){const n=(t==null?void 0:t.persistence)||[],o=(Array.isArray(n)?n:[n]).map(Ue);t!=null&&t.errorMap&&s._updateErrorMap(t.errorMap),s._initializeWithPersistence(o,t==null?void 0:t.popupRedirectResolver)}function nh(s,t,n){const o=oe(s);T(o._canInitEmulator,o,"emulator-config-failed"),T(/^https?:\/\//.test(t),o,"invalid-emulator-scheme");const l=!!(n!=null&&n.disableWarnings),u=Wa(t),{host:f,port:_}=rh(t),m=_===null?"":`:${_}`;o.config.emulator={url:`${u}//${f}${m}/`},o.settings.appVerificationDisabledForTesting=!0,o.emulatorConfig=Object.freeze({host:f,port:_,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:l})}),l||sh()}function Wa(s){const t=s.indexOf(":");return t<0?"":s.substr(0,t+1)}function rh(s){const t=Wa(s),n=/(\/\/)?([^?#/]+)/.exec(s.substr(t.length));if(!n)return{host:"",port:null};const o=n[2].split("@").pop()||"",l=/^(\[[^\]]+\])(:|$)/.exec(o);if(l){const u=l[1];return{host:u,port:Xo(o.substr(u.length+1))}}else{const[u,f]=o.split(":");return{host:u,port:Xo(f)}}}function Xo(s){if(!s)return null;const t=Number(s);return isNaN(t)?null:t}function sh(){function s(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",s):s())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return ut("not implemented")}_getIdTokenResponse(t){return ut("not implemented")}_linkToIdToken(t,n){return ut("not implemented")}_getReauthenticationResolver(t){return ut("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Za(s,t){return le(s,"POST","/v1/accounts:resetPassword",ae(s,t))}async function oh(s,t){return le(s,"POST","/v1/accounts:update",t)}async function ah(s,t){return le(s,"POST","/v1/accounts:signUp",t)}async function lh(s,t){return le(s,"POST","/v1/accounts:update",ae(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ch(s,t){return It(s,"POST","/v1/accounts:signInWithPassword",ae(s,t))}async function ir(s,t){return le(s,"POST","/v1/accounts:sendOobCode",ae(s,t))}async function uh(s,t){return ir(s,t)}async function dh(s,t){return ir(s,t)}async function hh(s,t){return ir(s,t)}async function fh(s,t){return ir(s,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ph(s,t){return It(s,"POST","/v1/accounts:signInWithEmailLink",ae(s,t))}async function mh(s,t){return It(s,"POST","/v1/accounts:signInWithEmailLink",ae(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn extends bi{constructor(t,n,o,l=null){super("password",o),this._email=t,this._password=n,this._tenantId=l}static _fromEmailAndPassword(t,n){return new tn(t,n,"password")}static _fromEmailAndCode(t,n,o=null){return new tn(t,n,"emailLink",o)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return en(t,n,"signInWithPassword",ch);case"emailLink":return ph(t,{email:this._email,oobCode:this._password});default:Ce(t,"internal-error")}}async _linkToIdToken(t,n){switch(this.signInMethod){case"password":const o={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return en(t,o,"signUpPassword",ah);case"emailLink":return mh(t,{idToken:n,email:this._email,oobCode:this._password});default:Ce(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bt(s,t){return It(s,"POST","/v1/accounts:signInWithIdp",ae(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h="http://localhost";class ht extends bi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new ht(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Ce("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:o,signInMethod:l}=n,u=ms(n,["providerId","signInMethod"]);if(!o||!l)return null;const f=new ht(o,l);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(t){const n=this.buildRequest();return bt(t,n)}_linkToIdToken(t,n){const o=this.buildRequest();return o.idToken=n,bt(t,o)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,bt(t,n)}buildRequest(){const t={requestUri:_h,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=yi(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gh(s,t){return le(s,"POST","/v1/accounts:sendVerificationCode",ae(s,t))}async function vh(s,t){return It(s,"POST","/v1/accounts:signInWithPhoneNumber",ae(s,t))}async function yh(s,t){const n=await It(s,"POST","/v1/accounts:signInWithPhoneNumber",ae(s,t));if(n.temporaryProof)throw qi(s,"account-exists-with-different-credential",n);return n}const wh={USER_NOT_FOUND:"user-not-found"};async function bh(s,t){const n=Object.assign(Object.assign({},t),{operation:"REAUTH"});return It(s,"POST","/v1/accounts:signInWithPhoneNumber",ae(s,n),wh)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht extends bi{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,n){return new Ht({verificationId:t,verificationCode:n})}static _fromTokenResponse(t,n){return new Ht({phoneNumber:t,temporaryProof:n})}_getIdTokenResponse(t){return vh(t,this._makeVerificationRequest())}_linkToIdToken(t,n){return yh(t,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return bh(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:n,verificationId:o,verificationCode:l}=this.params;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:o,code:l}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){typeof t=="string"&&(t=JSON.parse(t));const{verificationId:n,verificationCode:o,phoneNumber:l,temporaryProof:u}=t;return!o&&!n&&!l&&!u?null:new Ht({verificationId:n,verificationCode:o,phoneNumber:l,temporaryProof:u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xh(s){switch(s){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Ih(s){const t=ui(Hi(s)).link,n=t?ui(Hi(t)).deep_link_id:null,o=ui(Hi(s)).deep_link_id;return(o?ui(Hi(o)).link:null)||o||n||t||s}class nr{constructor(t){var n,o,l,u,f,_;const m=ui(Hi(t)),w=(n=m.apiKey)!==null&&n!==void 0?n:null,I=(o=m.oobCode)!==null&&o!==void 0?o:null,x=xh((l=m.mode)!==null&&l!==void 0?l:null);T(w&&I&&x,"argument-error"),this.apiKey=w,this.operation=x,this.code=I,this.continueUrl=(u=m.continueUrl)!==null&&u!==void 0?u:null,this.languageCode=(f=m.languageCode)!==null&&f!==void 0?f:null,this.tenantId=(_=m.tenantId)!==null&&_!==void 0?_:null}static parseLink(t){const n=Ih(t);try{return new nr(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(){this.providerId=At.PROVIDER_ID}static credential(t,n){return tn._fromEmailAndPassword(t,n)}static credentialWithLink(t,n){const o=nr.parseLink(n);return T(o,"argument-error"),tn._fromEmailAndCode(t,o.code,o.tenantId)}}At.PROVIDER_ID="password";At.EMAIL_PASSWORD_SIGN_IN_METHOD="password";At.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi extends Tt{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class fi extends xi{static credentialFromJSON(t){const n=typeof t=="string"?JSON.parse(t):t;return T("providerId"in n&&"signInMethod"in n,"argument-error"),ht._fromParams(n)}credential(t){return this._credential(Object.assign(Object.assign({},t),{nonce:t.rawNonce}))}_credential(t){return T(t.idToken||t.accessToken,"argument-error"),ht._fromParams(Object.assign(Object.assign({},t),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(t){return fi.oauthCredentialFromTaggedObject(t)}static credentialFromError(t){return fi.oauthCredentialFromTaggedObject(t.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:o,oauthTokenSecret:l,pendingToken:u,nonce:f,providerId:_}=t;if(!o&&!l&&!n&&!u||!_)return null;try{return new fi(_)._credential({idToken:n,accessToken:o,nonce:f,pendingToken:u})}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot extends xi{constructor(){super("facebook.com")}static credential(t){return ht._fromParams({providerId:ot.PROVIDER_ID,signInMethod:ot.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ot.credentialFromTaggedObject(t)}static credentialFromError(t){return ot.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ot.credential(t.oauthAccessToken)}catch{return null}}}ot.FACEBOOK_SIGN_IN_METHOD="facebook.com";ot.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at extends xi{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return ht._fromParams({providerId:at.PROVIDER_ID,signInMethod:at.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return at.credentialFromTaggedObject(t)}static credentialFromError(t){return at.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:o}=t;if(!n&&!o)return null;try{return at.credential(n,o)}catch{return null}}}at.GOOGLE_SIGN_IN_METHOD="google.com";at.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt extends xi{constructor(){super("github.com")}static credential(t){return ht._fromParams({providerId:lt.PROVIDER_ID,signInMethod:lt.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return lt.credentialFromTaggedObject(t)}static credentialFromError(t){return lt.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return lt.credential(t.oauthAccessToken)}catch{return null}}}lt.GITHUB_SIGN_IN_METHOD="github.com";lt.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th="http://localhost";class _i extends bi{constructor(t,n){super(t,t),this.pendingToken=n}_getIdTokenResponse(t){const n=this.buildRequest();return bt(t,n)}_linkToIdToken(t,n){const o=this.buildRequest();return o.idToken=n,bt(t,o)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,bt(t,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:o,signInMethod:l,pendingToken:u}=n;return!o||!l||!u||o!==l?null:new _i(o,u)}static _create(t,n){return new _i(t,n)}buildRequest(){return{requestUri:Th,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph="saml.";class Jn extends Tt{constructor(t){T(t.startsWith(Ph),"argument-error"),super(t)}static credentialFromResult(t){return Jn.samlCredentialFromTaggedObject(t)}static credentialFromError(t){return Jn.samlCredentialFromTaggedObject(t.customData||{})}static credentialFromJSON(t){const n=_i.fromJSON(t);return T(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{pendingToken:n,providerId:o}=t;if(!n||!o)return null;try{return _i._create(o,n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct extends xi{constructor(){super("twitter.com")}static credential(t,n){return ht._fromParams({providerId:ct.PROVIDER_ID,signInMethod:ct.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return ct.credentialFromTaggedObject(t)}static credentialFromError(t){return ct.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:o}=t;if(!n||!o)return null;try{return ct.credential(n,o)}catch{return null}}}ct.TWITTER_SIGN_IN_METHOD="twitter.com";ct.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(s,t){return It(s,"POST","/v1/accounts:signUp",ae(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,o,l=!1){const u=await vt._fromIdTokenResponse(t,o,l),f=Qo(o);return new qe({user:u,providerId:f,_tokenResponse:o,operationType:n})}static async _forOperation(t,n,o){await t._updateTokensIfNecessary(o,!0);const l=Qo(o);return new qe({user:t,providerId:l,_tokenResponse:o,operationType:n})}}function Qo(s){return s.providerId?s.providerId:"phoneNumber"in s?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eh(s){var t;if(fe(s.app))return Promise.reject(Pe(s));const n=oe(s);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new qe({user:n.currentUser,providerId:null,operationType:"signIn"});const o=await Va(n,{returnSecureToken:!0}),l=await qe._fromIdTokenResponse(n,"signIn",o,!0);return await n._updateCurrentUser(l.user),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n extends Nt{constructor(t,n,o,l){var u;super(n.code,n.message),this.operationType=o,this.user=l,Object.setPrototypeOf(this,$n.prototype),this.customData={appName:t.name,tenantId:(u=t.tenantId)!==null&&u!==void 0?u:void 0,_serverResponse:n.customData._serverResponse,operationType:o}}static _fromErrorAndOperation(t,n,o,l){return new $n(t,n,o,l)}}function Ha(s,t,n,o){return(t==="reauthenticate"?n._getReauthenticationResolver(s):n._getIdTokenResponse(s)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?$n._fromErrorAndOperation(s,u,t,o):u})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qa(s){return new Set(s.map(({providerId:t})=>t).filter(t=>!!t))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sh(s,t){const n=G(s);await rr(!0,n,t);const{providerUserInfo:o}=await Rd(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),l=qa(o||[]);return n.providerData=n.providerData.filter(u=>l.has(u.providerId)),l.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function xs(s,t,n=!1){const o=await xt(s,t._linkToIdToken(s.auth,await s.getIdToken()),n);return qe._forOperation(s,"link",o)}async function rr(s,t,n){await Qi(t);const o=qa(t.providerData),l=s===!1?"provider-already-linked":"no-such-provider";T(o.has(n)===s,t.auth,l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ga(s,t,n=!1){const{auth:o}=s;if(fe(o.app))return Promise.reject(Pe(o));const l="reauthenticate";try{const u=await xt(s,Ha(o,l,t,s),n);T(u.idToken,o,"internal-error");const f=tr(u.idToken);T(f,o,"internal-error");const{sub:_}=f;return T(s.uid===_,o,"user-mismatch"),qe._forOperation(s,l,u)}catch(u){throw(u==null?void 0:u.code)==="auth/user-not-found"&&Ce(o,"user-mismatch"),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(s,t,n=!1){if(fe(s.app))return Promise.reject(Pe(s));const o="signIn",l=await Ha(s,o,t),u=await qe._fromIdTokenResponse(s,o,l);return n||await s._updateCurrentUser(u.user),u}async function sr(s,t){return Ka(oe(s),t)}async function Ya(s,t){const n=G(s);return await rr(!1,n,t.providerId),xs(n,t)}async function Ja(s,t){return Ga(G(s),t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kh(s,t){return It(s,"POST","/v1/accounts:signInWithCustomToken",ae(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ch(s,t){if(fe(s.app))return Promise.reject(Pe(s));const n=oe(s),o=await kh(n,{token:t,returnSecureToken:!0}),l=await qe._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(l.user),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(t,n){this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(t,n){return"phoneInfo"in n?Is._fromServerResponse(t,n):"totpInfo"in n?Ts._fromServerResponse(t,n):Ce(t,"internal-error")}}class Is extends hn{constructor(t){super("phone",t),this.phoneNumber=t.phoneInfo}static _fromServerResponse(t,n){return new Is(n)}}class Ts extends hn{constructor(t){super("totp",t)}static _fromServerResponse(t,n){return new Ts(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function or(s,t,n){var o;T(((o=n.url)===null||o===void 0?void 0:o.length)>0,s,"invalid-continue-uri"),T(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,s,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(T(n.iOS.bundleId.length>0,s,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(T(n.android.packageName.length>0,s,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ps(s){const t=oe(s);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Lh(s,t,n){const o=oe(s),l={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&or(o,l,n),await en(o,l,"getOobCode",dh)}async function Nh(s,t,n){await Za(G(s),{oobCode:t,newPassword:n}).catch(async o=>{throw o.code==="auth/password-does-not-meet-requirements"&&Ps(s),o})}async function Ah(s,t){await lh(G(s),{oobCode:t})}async function $a(s,t){const n=G(s),o=await Za(n,{oobCode:t}),l=o.requestType;switch(T(l,n,"internal-error"),l){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":T(o.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":T(o.mfaInfo,n,"internal-error");default:T(o.email,n,"internal-error")}let u=null;return o.mfaInfo&&(u=hn._fromServerResponse(oe(n),o.mfaInfo)),{data:{email:(o.requestType==="VERIFY_AND_CHANGE_EMAIL"?o.newEmail:o.email)||null,previousEmail:(o.requestType==="VERIFY_AND_CHANGE_EMAIL"?o.email:o.newEmail)||null,multiFactorInfo:u},operation:l}}async function Rh(s,t){const{data:n}=await $a(G(s),t);return n.email}async function Oh(s,t,n){if(fe(s.app))return Promise.reject(Pe(s));const o=oe(s),f=await en(o,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Va).catch(m=>{throw m.code==="auth/password-does-not-meet-requirements"&&Ps(s),m}),_=await qe._fromIdTokenResponse(o,"signIn",f);return await o._updateCurrentUser(_.user),_}function Mh(s,t,n){return fe(s.app)?Promise.reject(Pe(s)):sr(G(s),At.credential(t,n)).catch(async o=>{throw o.code==="auth/password-does-not-meet-requirements"&&Ps(s),o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dh(s,t,n){const o=oe(s),l={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function u(f,_){T(_.handleCodeInApp,o,"argument-error"),_&&or(o,f,_)}u(l,n),await en(o,l,"getOobCode",hh)}function jh(s,t){const n=nr.parseLink(t);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function zh(s,t,n){if(fe(s.app))return Promise.reject(Pe(s));const o=G(s),l=At.credentialWithLink(t,n||Xi());return T(l._tenantId===(o.tenantId||null),o,"tenant-id-mismatch"),sr(o,l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fh(s,t){return le(s,"POST","/v1/accounts:createAuthUri",ae(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uh(s,t){const n=ys()?Xi():"http://localhost",o={identifier:t,continueUri:n},{signinMethods:l}=await Fh(G(s),o);return l||[]}async function Bh(s,t){const n=G(s),l={requestType:"VERIFY_EMAIL",idToken:await s.getIdToken()};t&&or(n.auth,l,t);const{email:u}=await uh(n.auth,l);u!==s.email&&await s.reload()}async function Wh(s,t,n){const o=G(s),u={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await s.getIdToken(),newEmail:t};n&&or(o.auth,u,n);const{email:f}=await fh(o.auth,u);f!==s.email&&await s.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zh(s,t){return le(s,"POST","/v1/accounts:update",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vh(s,{displayName:t,photoURL:n}){if(t===void 0&&n===void 0)return;const o=G(s),u={idToken:await o.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},f=await xt(o,Zh(o.auth,u));o.displayName=f.displayName||null,o.photoURL=f.photoUrl||null;const _=o.providerData.find(({providerId:m})=>m==="password");_&&(_.displayName=o.displayName,_.photoURL=o.photoURL),await o._updateTokensIfNecessary(f)}function Hh(s,t){const n=G(s);return fe(n.auth.app)?Promise.reject(Pe(n.auth)):Xa(n,t,null)}function qh(s,t){return Xa(G(s),null,t)}async function Xa(s,t,n){const{auth:o}=s,u={idToken:await s.getIdToken(),returnSecureToken:!0};t&&(u.email=t),n&&(u.password=n);const f=await xt(s,oh(o,u));await s._updateTokensIfNecessary(f,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(s){var t,n;if(!s)return null;const{providerId:o}=s,l=s.rawUserInfo?JSON.parse(s.rawUserInfo):{},u=s.isNewUser||s.kind==="identitytoolkit#SignupNewUserResponse";if(!o&&(s!=null&&s.idToken)){const f=(n=(t=tr(s.idToken))===null||t===void 0?void 0:t.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(f){const _=f!=="anonymous"&&f!=="custom"?f:null;return new pi(u,_)}}if(!o)return null;switch(o){case"facebook.com":return new Kh(u,l);case"github.com":return new Yh(u,l);case"google.com":return new Jh(u,l);case"twitter.com":return new $h(u,l,s.screenName||null);case"custom":case"anonymous":return new pi(u,null);default:return new pi(u,o,l)}}class pi{constructor(t,n,o={}){this.isNewUser=t,this.providerId=n,this.profile=o}}class Qa extends pi{constructor(t,n,o,l){super(t,n,o),this.username=l}}class Kh extends pi{constructor(t,n){super(t,"facebook.com",n)}}class Yh extends Qa{constructor(t,n){super(t,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class Jh extends pi{constructor(t,n){super(t,"google.com",n)}}class $h extends Qa{constructor(t,n,o){super(t,"twitter.com",n,o)}}function Xh(s){const{user:t,_tokenResponse:n}=s;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:Gh(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(t,n,o){this.type=t,this.credential=n,this.user=o}static _fromIdtoken(t,n){return new Wt("enroll",t,n)}static _fromMfaPendingCredential(t){return new Wt("signin",t)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(t){var n,o;if(t!=null&&t.multiFactorSession){if(!((n=t.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Wt._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(!((o=t.multiFactorSession)===null||o===void 0)&&o.idToken)return Wt._fromIdtoken(t.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(t,n,o){this.session=t,this.hints=n,this.signInResolver=o}static _fromError(t,n){const o=oe(t),l=n.customData._serverResponse,u=(l.mfaInfo||[]).map(_=>hn._fromServerResponse(o,_));T(l.mfaPendingCredential,o,"internal-error");const f=Wt._fromMfaPendingCredential(l.mfaPendingCredential);return new Es(f,u,async _=>{const m=await _._process(o,f);delete l.mfaInfo,delete l.mfaPendingCredential;const w=Object.assign(Object.assign({},l),{idToken:m.idToken,refreshToken:m.refreshToken});switch(n.operationType){case"signIn":const I=await qe._fromIdTokenResponse(o,n.operationType,w);return await o._updateCurrentUser(I.user),I;case"reauthenticate":return T(n.user,o,"internal-error"),qe._forOperation(n.user,n.operationType,w);default:Ce(o,"internal-error")}})}async resolveSignIn(t){const n=t;return this.signInResolver(n)}}function Qh(s,t){var n;const o=G(s),l=t;return T(t.customData.operationType,o,"argument-error"),T((n=l.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,o,"argument-error"),Es._fromError(o,l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(s,t){return le(s,"POST","/v2/accounts/mfaEnrollment:start",ae(s,t))}function tf(s,t){return le(s,"POST","/v2/accounts/mfaEnrollment:finalize",ae(s,t))}function nf(s,t){return le(s,"POST","/v2/accounts/mfaEnrollment:withdraw",ae(s,t))}class Ss{constructor(t){this.user=t,this.enrolledFactors=[],t._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(o=>hn._fromServerResponse(t.auth,o)))})}static _fromUser(t){return new Ss(t)}async getSession(){return Wt._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(t,n){const o=t,l=await this.getSession(),u=await xt(this.user,o._process(this.user.auth,l,n));return await this.user._updateTokensIfNecessary(u),this.user.reload()}async unenroll(t){const n=typeof t=="string"?t:t.uid,o=await this.user.getIdToken();try{const l=await xt(this.user,nf(this.user.auth,{idToken:o,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:u})=>u!==n),await this.user._updateTokensIfNecessary(l),await this.user.reload()}catch(l){throw l}}}const Vr=new WeakMap;function rf(s){const t=G(s);return Vr.has(t)||Vr.set(t,Ss._fromUser(t)),Vr.get(t)}const Xn="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xn,"1"),this.storage.removeItem(Xn),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sf=1e3,of=10;class tl extends el{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Fa(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const o=this.storage.getItem(n),l=this.localCache[n];o!==l&&t(n,l,o)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((f,_,m)=>{this.notifyListeners(f,m)});return}const o=t.key;n?this.detachListener():this.stopPolling();const l=()=>{const f=this.storage.getItem(o);!n&&this.localCache[o]===f||this.notifyListeners(o,f)},u=this.storage.getItem(o);Zd()&&u!==t.newValue&&t.newValue!==t.oldValue?setTimeout(l,of):l()}notifyListeners(t,n){this.localCache[t]=n;const o=this.listeners[t];if(o)for(const l of Array.from(o))l(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,o)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:o}),!0)})},sf)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}tl.type="LOCAL";const ks=tl;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class il extends el{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}il.type="SESSION";const qt=il;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(s){return Promise.all(s.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(l=>l.isListeningto(t));if(n)return n;const o=new ar(t);return this.receivers.push(o),o}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:o,eventType:l,data:u}=n.data,f=this.handlersMap[l];if(!(f!=null&&f.size))return;n.ports[0].postMessage({status:"ack",eventId:o,eventType:l});const _=Array.from(f).map(async w=>w(n.origin,u)),m=await af(_);n.ports[0].postMessage({status:"done",eventId:o,eventType:l,response:m})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}ar.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fn(s="",t=10){let n="";for(let o=0;o<t;o++)n+=Math.floor(Math.random()*10);return s+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lf{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,o=50){const l=typeof MessageChannel<"u"?new MessageChannel:null;if(!l)throw new Error("connection_unavailable");let u,f;return new Promise((_,m)=>{const w=fn("",20);l.port1.start();const I=setTimeout(()=>{m(new Error("unsupported_event"))},o);f={messageChannel:l,onMessage(x){const O=x;if(O.data.eventId===w)switch(O.data.status){case"ack":clearTimeout(I),u=setTimeout(()=>{m(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),_(O.data.response);break;default:clearTimeout(I),clearTimeout(u),m(new Error("invalid_response"));break}}},this.handlers.add(f),l.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:t,eventId:w,data:n},[l.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ve(){return window}function cf(s){ve().location.href=s}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(){return typeof ve().WorkerGlobalScope<"u"&&typeof ve().importScripts=="function"}async function uf(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function df(){var s;return((s=navigator==null?void 0:navigator.serviceWorker)===null||s===void 0?void 0:s.controller)||null}function hf(){return Cs()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nl="firebaseLocalStorageDb",ff=1,Qn="firebaseLocalStorage",rl="fbase_key";class pn{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function lr(s,t){return s.transaction([Qn],t?"readwrite":"readonly").objectStore(Qn)}function pf(){const s=indexedDB.deleteDatabase(nl);return new pn(s).toPromise()}function ns(){const s=indexedDB.open(nl,ff);return new Promise((t,n)=>{s.addEventListener("error",()=>{n(s.error)}),s.addEventListener("upgradeneeded",()=>{const o=s.result;try{o.createObjectStore(Qn,{keyPath:rl})}catch(l){n(l)}}),s.addEventListener("success",async()=>{const o=s.result;o.objectStoreNames.contains(Qn)?t(o):(o.close(),await pf(),t(await ns()))})})}async function ea(s,t,n){const o=lr(s,!0).put({[rl]:t,value:n});return new pn(o).toPromise()}async function mf(s,t){const n=lr(s,!1).get(t),o=await new pn(n).toPromise();return o===void 0?null:o.value}function ta(s,t){const n=lr(s,!0).delete(t);return new pn(n).toPromise()}const _f=800,gf=3;class sl{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ns(),this.db)}async _withRetries(t){let n=0;for(;;)try{const o=await this._openDb();return await t(o)}catch(o){if(n++>gf)throw o;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Cs()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ar._getInstance(hf()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await uf(),!this.activeServiceWorker)return;this.sender=new lf(this.activeServiceWorker);const o=await this.sender._send("ping",{},800);o&&!((t=o[0])===null||t===void 0)&&t.fulfilled&&!((n=o[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||df()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await ns();return await ea(t,Xn,"1"),await ta(t,Xn),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(o=>ea(o,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(o=>mf(o,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ta(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(l=>{const u=lr(l,!1).getAll();return new pn(u).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],o=new Set;if(t.length!==0)for(const{fbase_key:l,value:u}of t)o.add(l),JSON.stringify(this.localCache[l])!==JSON.stringify(u)&&(this.notifyListeners(l,u),n.push(l));for(const l of Object.keys(this.localCache))this.localCache[l]&&!o.has(l)&&(this.notifyListeners(l,null),n.push(l));return n}notifyListeners(t,n){this.localCache[t]=n;const o=this.listeners[t];if(o)for(const l of Array.from(o))l(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_f)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}sl.type="LOCAL";const nn=sl;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(s,t){return le(s,"POST","/v2/accounts/mfaSignIn:start",ae(s,t))}function yf(s,t){return le(s,"POST","/v2/accounts/mfaSignIn:finalize",ae(s,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wf=500,bf=6e4,Wn=1e12;class xf{constructor(t){this.auth=t,this.counter=Wn,this._widgets=new Map}render(t,n){const o=this.counter;return this._widgets.set(o,new If(t,this.auth.name,n||{})),this.counter++,o}reset(t){var n;const o=t||Wn;(n=this._widgets.get(o))===null||n===void 0||n.delete(),this._widgets.delete(o)}getResponse(t){var n;const o=t||Wn;return((n=this._widgets.get(o))===null||n===void 0?void 0:n.getResponse())||""}async execute(t){var n;const o=t||Wn;return(n=this._widgets.get(o))===null||n===void 0||n.execute(),""}}class If{constructor(t,n,o){this.params=o,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const l=typeof t=="string"?document.getElementById(t):t;T(l,"argument-error",{appName:n}),this.container=l,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=Tf(50);const{callback:t,"expired-callback":n}=this.params;if(t)try{t(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},bf)},wf))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function Tf(s){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let o=0;o<s;o++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hr=Ba("rcb"),Pf=new ln(3e4,6e4);class Ef{constructor(){var t;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((t=ve().grecaptcha)===null||t===void 0)&&t.render)}load(t,n=""){return T(Sf(n),t,"argument-error"),this.shouldResolveImmediately(n)&&Ho(ve().grecaptcha)?Promise.resolve(ve().grecaptcha):new Promise((o,l)=>{const u=ve().setTimeout(()=>{l(we(t,"network-request-failed"))},Pf.get());ve()[Hr]=()=>{ve().clearTimeout(u),delete ve()[Hr];const _=ve().grecaptcha;if(!_||!Ho(_)){l(we(t,"internal-error"));return}const m=_.render;_.render=(w,I)=>{const x=m(w,I);return this.counter++,x},this.hostLanguage=n,o(_)};const f=`${Jd()}?${yi({onload:Hr,render:"explicit",hl:n})}`;bs(f).catch(()=>{clearTimeout(u),l(we(t,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(t){var n;return!!(!((n=ve().grecaptcha)===null||n===void 0)&&n.render)&&(t===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function Sf(s){return s.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(s)}class kf{async load(t){return new xf(t)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol="recaptcha",Cf={theme:"light",type:"image"};let Lf=class{constructor(t,n,o=Object.assign({},Cf)){this.parameters=o,this.type=ol,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=oe(t),this.isInvisible=this.parameters.size==="invisible",T(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const l=typeof n=="string"?document.getElementById(n):n;T(l,this.auth,"argument-error"),this.container=l,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new kf:new Ef,this.validateStartingState()}async verify(){this.assertNotDestroyed();const t=await this.render(),n=this.getAssertedRecaptcha(),o=n.getResponse(t);return o||new Promise(l=>{const u=f=>{f&&(this.tokenChangeListeners.delete(u),l(f))};this.tokenChangeListeners.add(u),this.isInvisible&&n.execute(t)})}render(){try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(t=>{throw this.renderPromise=null,t}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(t=>{this.container.removeChild(t)})}validateStartingState(){T(!this.parameters.sitekey,this.auth,"argument-error"),T(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),T(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(t){return n=>{if(this.tokenChangeListeners.forEach(o=>o(n)),typeof t=="function")t(n);else if(typeof t=="string"){const o=ve()[t];typeof o=="function"&&o(n)}}}assertNotDestroyed(){T(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let t=this.container;if(!this.isInvisible){const n=document.createElement("div");t.appendChild(n),t=n}this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)}return this.widgetId}async init(){T(ys()&&!Cs(),this.auth,"internal-error"),await Nf(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const t=await Ld(this.auth);T(t,this.auth,"internal-error"),this.parameters.sitekey=t}getAssertedRecaptcha(){return T(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function Nf(){let s=null;return new Promise(t=>{if(document.readyState==="complete"){t();return}s=()=>t(),window.addEventListener("load",s)}).catch(t=>{throw s&&window.removeEventListener("load",s),t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(t,n){this.verificationId=t,this.onConfirmation=n}confirm(t){const n=Ht._fromVerification(this.verificationId,t);return this.onConfirmation(n)}}async function Af(s,t,n){if(fe(s.app))return Promise.reject(Pe(s));const o=oe(s),l=await cr(o,t,G(n));return new Ls(l,u=>sr(o,u))}async function Rf(s,t,n){const o=G(s);await rr(!1,o,"phone");const l=await cr(o.auth,t,G(n));return new Ls(l,u=>Ya(o,u))}async function Of(s,t,n){const o=G(s);if(fe(o.auth.app))return Promise.reject(Pe(o.auth));const l=await cr(o.auth,t,G(n));return new Ls(l,u=>Ja(o,u))}async function cr(s,t,n){var o;const l=await n.verify();try{T(typeof l=="string",s,"argument-error"),T(n.type===ol,s,"argument-error");let u;if(typeof t=="string"?u={phoneNumber:t}:u=t,"session"in u){const f=u.session;if("phoneNumber"in u)return T(f.type==="enroll",s,"internal-error"),(await ef(s,{idToken:f.credential,phoneEnrollmentInfo:{phoneNumber:u.phoneNumber,recaptchaToken:l}})).phoneSessionInfo.sessionInfo;{T(f.type==="signin",s,"internal-error");const _=((o=u.multiFactorHint)===null||o===void 0?void 0:o.uid)||u.multiFactorUid;return T(_,s,"missing-multi-factor-info"),(await vf(s,{mfaPendingCredential:f.credential,mfaEnrollmentId:_,phoneSignInInfo:{recaptchaToken:l}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:f}=await gh(s,{phoneNumber:u.phoneNumber,recaptchaToken:l});return f}}finally{n._reset()}}async function Mf(s,t){const n=G(s);if(fe(n.auth.app))return Promise.reject(Pe(n.auth));await xs(n,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gt=class Hn{constructor(t){this.providerId=Hn.PROVIDER_ID,this.auth=oe(t)}verifyPhoneNumber(t,n){return cr(this.auth,t,G(n))}static credential(t,n){return Ht._fromVerification(t,n)}static credentialFromResult(t){const n=t;return Hn.credentialFromTaggedObject(n)}static credentialFromError(t){return Hn.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:n,temporaryProof:o}=t;return n&&o?Ht._fromTokenResponse(n,o):null}};Gt.PROVIDER_ID="phone";Gt.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(s,t){return t?Ue(t):(T(s._popupRedirectResolver,s,"argument-error"),s._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns extends bi{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return bt(t,this._buildIdpRequest())}_linkToIdToken(t,n){return bt(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return bt(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function Df(s){return Ka(s.auth,new Ns(s),s.bypassAuthState)}function jf(s){const{auth:t,user:n}=s;return T(n,t,"internal-error"),Ga(n,new Ns(s),s.bypassAuthState)}async function zf(s){const{auth:t,user:n}=s;return T(n,t,"internal-error"),xs(n,new Ns(s),s.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(t,n,o,l,u=!1){this.auth=t,this.resolver=o,this.user=l,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(o){this.reject(o)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:o,postBody:l,tenantId:u,error:f,type:_}=t;if(f){this.reject(f);return}const m={auth:this.auth,requestUri:n,sessionId:o,tenantId:u||void 0,postBody:l||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(_)(m))}catch(w){this.reject(w)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Df;case"linkViaPopup":case"linkViaRedirect":return zf;case"reauthViaPopup":case"reauthViaRedirect":return jf;default:Ce(this.auth,"internal-error")}}resolve(t){Je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ff=new ln(2e3,1e4);async function Uf(s,t,n){if(fe(s.app))return Promise.reject(we(s,"operation-not-supported-in-this-environment"));const o=oe(s);wi(s,t,Tt);const l=Jt(o,n);return new yt(o,"signInViaPopup",t,l).executeNotNull()}async function Bf(s,t,n){const o=G(s);if(fe(o.auth.app))return Promise.reject(we(o.auth,"operation-not-supported-in-this-environment"));wi(o.auth,t,Tt);const l=Jt(o.auth,n);return new yt(o.auth,"reauthViaPopup",t,l,o).executeNotNull()}async function Wf(s,t,n){const o=G(s);wi(o.auth,t,Tt);const l=Jt(o.auth,n);return new yt(o.auth,"linkViaPopup",t,l,o).executeNotNull()}class yt extends al{constructor(t,n,o,l,u){super(t,n,l,u),this.provider=o,this.authWindow=null,this.pollId=null,yt.currentPopupAction&&yt.currentPopupAction.cancel(),yt.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return T(t,this.auth,"internal-error"),t}async onExecution(){Je(this.filter.length===1,"Popup operations only handle one event");const t=fn();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(we(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(we(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yt.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,o;if(!((o=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||o===void 0)&&o.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(we(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,Ff.get())};t()}}yt.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zf="pendingRedirect",Yi=new Map;class Vf extends al{constructor(t,n,o=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,o),this.eventId=null}async execute(){let t=Yi.get(this.auth._key());if(!t){try{const o=await Hf(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(o)}catch(n){t=()=>Promise.reject(n)}Yi.set(this.auth._key(),t)}return this.bypassAuthState||Yi.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Hf(s,t){const n=cl(t),o=ll(s);if(!await o._isAvailable())return!1;const l=await o._get(n)==="true";return await o._remove(n),l}async function As(s,t){return ll(s)._set(cl(t),"true")}function qf(){Yi.clear()}function Rs(s,t){Yi.set(s._key(),t)}function ll(s){return Ue(s._redirectPersistence)}function cl(s){return Vt(Zf,s.config.apiKey,s.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gf(s,t,n){return Kf(s,t,n)}async function Kf(s,t,n){if(fe(s.app))return Promise.reject(Pe(s));const o=oe(s);wi(s,t,Tt),await o._initializationPromise;const l=Jt(o,n);return await As(l,o),l._openRedirect(o,t,"signInViaRedirect")}function Yf(s,t,n){return Jf(s,t,n)}async function Jf(s,t,n){const o=G(s);if(wi(o.auth,t,Tt),fe(o.auth.app))return Promise.reject(Pe(o.auth));await o.auth._initializationPromise;const l=Jt(o.auth,n);await As(l,o.auth);const u=await ul(o);return l._openRedirect(o.auth,t,"reauthViaRedirect",u)}function $f(s,t,n){return Xf(s,t,n)}async function Xf(s,t,n){const o=G(s);wi(o.auth,t,Tt),await o.auth._initializationPromise;const l=Jt(o.auth,n);await rr(!1,o,t.providerId),await As(l,o.auth);const u=await ul(o);return l._openRedirect(o.auth,t,"linkViaRedirect",u)}async function Qf(s,t){return await oe(s)._initializationPromise,ur(s,t,!1)}async function ur(s,t,n=!1){if(fe(s.app))return Promise.reject(Pe(s));const o=oe(s),l=Jt(o,t),f=await new Vf(o,l,n).execute();return f&&!n&&(delete f.user._redirectEventId,await o._persistUserIfCurrent(f.user),await o._setRedirectUser(null,t)),f}async function ul(s){const t=fn(`${s.uid}:::`);return s._redirectEventId=t,await s.auth._setRedirectUser(s),await s.auth._persistUserIfCurrent(s),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep=10*60*1e3;class dl{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(o=>{this.isEventForConsumer(t,o)&&(n=!0,this.sendToConsumer(t,o),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!tp(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var o;if(t.error&&!hl(t)){const l=((o=t.error.code)===null||o===void 0?void 0:o.split("auth/")[1])||"internal-error";n.onError(we(this.auth,l))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const o=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&o}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=ep&&this.cachedEventUids.clear(),this.cachedEventUids.has(ia(t))}saveEventToCache(t){this.cachedEventUids.add(ia(t)),this.lastProcessedEventTime=Date.now()}}function ia(s){return[s.type,s.eventId,s.sessionId,s.tenantId].filter(t=>t).join("-")}function hl({type:s,error:t}){return s==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function tp(s){switch(s.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return hl(s);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fl(s,t={}){return le(s,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ip=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,np=/^https?/;async function rp(s){if(s.config.emulator)return;const{authorizedDomains:t}=await fl(s);for(const n of t)try{if(sp(n))return}catch{}Ce(s,"unauthorized-domain")}function sp(s){const t=Xi(),{protocol:n,hostname:o}=new URL(t);if(s.startsWith("chrome-extension://")){const f=new URL(s);return f.hostname===""&&o===""?n==="chrome-extension:"&&s.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===o}if(!np.test(n))return!1;if(ip.test(s))return o===s;const l=s.replace(/\./g,"\\.");return new RegExp("^(.+\\."+l+"|"+l+")$","i").test(o)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op=new ln(3e4,6e4);function na(){const s=ve().___jsl;if(s!=null&&s.H){for(const t of Object.keys(s.H))if(s.H[t].r=s.H[t].r||[],s.H[t].L=s.H[t].L||[],s.H[t].r=[...s.H[t].L],s.CP)for(let n=0;n<s.CP.length;n++)s.CP[n]=null}}function ap(s){return new Promise((t,n)=>{var o,l,u;function f(){na(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{na(),n(we(s,"network-request-failed"))},timeout:op.get()})}if(!((l=(o=ve().gapi)===null||o===void 0?void 0:o.iframes)===null||l===void 0)&&l.Iframe)t(gapi.iframes.getContext());else if(!((u=ve().gapi)===null||u===void 0)&&u.load)f();else{const _=Ba("iframefcb");return ve()[_]=()=>{gapi.load?f():n(we(s,"network-request-failed"))},bs(`${Xd()}?onload=${_}`).catch(m=>n(m))}}).catch(t=>{throw qn=null,t})}let qn=null;function lp(s){return qn=qn||ap(s),qn}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp=new ln(5e3,15e3),up="__/auth/iframe",dp="emulator/auth/iframe",hp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pp(s){const t=s.config;T(t.authDomain,s,"auth-domain-config-required");const n=t.emulator?ws(t,dp):`https://${s.config.authDomain}/${up}`,o={apiKey:t.apiKey,appName:s.name,v:vi},l=fp.get(s.config.apiHost);l&&(o.eid=l);const u=s._getFrameworks();return u.length&&(o.fw=u.join(",")),`${n}?${yi(o).slice(1)}`}async function mp(s){const t=await lp(s),n=ve().gapi;return T(n,s,"internal-error"),t.open({where:document.body,url:pp(s),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hp,dontclear:!0},o=>new Promise(async(l,u)=>{await o.restyle({setHideOnLeave:!1});const f=we(s,"network-request-failed"),_=ve().setTimeout(()=>{u(f)},cp.get());function m(){ve().clearTimeout(_),l(o)}o.ping(m).then(m,()=>{u(f)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},gp=500,vp=600,yp="_blank",wp="http://localhost";class ra{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bp(s,t,n,o=gp,l=vp){const u=Math.max((window.screen.availHeight-l)/2,0).toString(),f=Math.max((window.screen.availWidth-o)/2,0).toString();let _="";const m=Object.assign(Object.assign({},_p),{width:o.toString(),height:l.toString(),top:u,left:f}),w=ke().toLowerCase();n&&(_=Ma(w)?yp:n),Ra(w)&&(t=t||wp,m.scrollbars="yes");const I=Object.entries(m).reduce((O,[V,X])=>`${O}${V}=${X},`,"");if(Wd(w)&&_!=="_self")return xp(t||"",_),new ra(null);const x=window.open(t||"",_,I);T(x,s,"popup-blocked");try{x.focus()}catch{}return new ra(x)}function xp(s,t){const n=document.createElement("a");n.href=s,n.target=t;const o=document.createEvent("MouseEvent");o.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ip="__/auth/handler",Tp="emulator/auth/handler",Pp=encodeURIComponent("fac");async function rs(s,t,n,o,l,u){T(s.config.authDomain,s,"auth-domain-config-required"),T(s.config.apiKey,s,"invalid-api-key");const f={apiKey:s.config.apiKey,appName:s.name,authType:n,redirectUrl:o,v:vi,eventId:l};if(t instanceof Tt){t.setDefaultLanguage(s.languageCode),f.providerId=t.providerId||"",iu(t.getCustomParameters())||(f.customParameters=JSON.stringify(t.getCustomParameters()));for(const[I,x]of Object.entries(u||{}))f[I]=x}if(t instanceof xi){const I=t.getScopes().filter(x=>x!=="");I.length>0&&(f.scopes=I.join(","))}s.tenantId&&(f.tid=s.tenantId);const _=f;for(const I of Object.keys(_))_[I]===void 0&&delete _[I];const m=await s._getAppCheckToken(),w=m?`#${Pp}=${encodeURIComponent(m)}`:"";return`${Ep(s)}?${yi(_).slice(1)}${w}`}function Ep({config:s}){return s.emulator?ws(s,Tp):`https://${s.authDomain}/${Ip}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="webStorageSupport";class Sp{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qt,this._completeRedirectFn=ur,this._overrideRedirectResult=Rs}async _openPopup(t,n,o,l){var u;Je((u=this.eventManagers[t._key()])===null||u===void 0?void 0:u.manager,"_initialize() not called before _openPopup()");const f=await rs(t,n,o,Xi(),l);return bp(t,f,fn())}async _openRedirect(t,n,o,l){await this._originValidation(t);const u=await rs(t,n,o,Xi(),l);return cf(u),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:l,promise:u}=this.eventManagers[n];return l?Promise.resolve(l):(Je(u,"If manager is not set, promise should be"),u)}const o=this.initAndGetManager(t);return this.eventManagers[n]={promise:o},o.catch(()=>{delete this.eventManagers[n]}),o}async initAndGetManager(t){const n=await mp(t),o=new dl(t);return n.register("authEvent",l=>(T(l==null?void 0:l.authEvent,t,"invalid-auth-event"),{status:o.onEvent(l.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:o},this.iframes[t._key()]=n,o}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(qr,{type:qr},l=>{var u;const f=(u=l==null?void 0:l[0])===null||u===void 0?void 0:u[qr];f!==void 0&&n(!!f),Ce(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=rp(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return Fa()||Oa()||un()}}const kp=Sp;class Cp{constructor(t){this.factorId=t}_process(t,n,o){switch(n.type){case"enroll":return this._finalizeEnroll(t,n.credential,o);case"signin":return this._finalizeSignIn(t,n.credential);default:return ut("unexpected MultiFactorSessionType")}}}class Os extends Cp{constructor(t){super("phone"),this.credential=t}static _fromCredential(t){return new Os(t)}_finalizeEnroll(t,n,o){return tf(t,{idToken:n,displayName:o,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(t,n){return yf(t,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class pl{constructor(){}static assertion(t){return Os._fromCredential(t)}}pl.FACTOR_ID="phone";var sa="@firebase/auth",oa="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lp{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(o=>{t((o==null?void 0:o.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){T(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Np(s){switch(s){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ap(s){Yr(new $i("auth",(t,{options:n})=>{const o=t.getProvider("app").getImmediate(),l=t.getProvider("heartbeat"),u=t.getProvider("app-check-internal"),{apiKey:f,authDomain:_}=o.options;T(f&&!f.includes(":"),"invalid-api-key",{appName:o.name});const m={apiKey:f,authDomain:_,clientPlatform:s,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ua(s)},w=new Kd(o,l,u,m);return ih(w,n),w},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,o)=>{t.getProvider("auth-internal").initialize()})),Yr(new $i("auth-internal",t=>{const n=oe(t.getProvider("auth").getImmediate());return(o=>new Lp(o))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kn(sa,oa,Np(s)),Kn(sa,oa,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rp=5*60;Qc("authIdTokenMaxAge");function Op(){var s,t;return(t=(s=document.getElementsByTagName("head"))===null||s===void 0?void 0:s[0])!==null&&t!==void 0?t:document}Yd({loadJS(s){return new Promise((t,n)=>{const o=document.createElement("script");o.setAttribute("src",s),o.onload=t,o.onerror=l=>{const u=we("internal-error");u.customData=l,n(u)},o.type="text/javascript",o.charset="UTF-8",Op().appendChild(o)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ap("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kt(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp=2e3;async function Dp(s,t,n){var o;const{BuildInfo:l}=Kt();Je(t.sessionId,"AuthEvent did not contain a session ID");const u=await Bp(t.sessionId),f={};return un()?f.ibi=l.packageName:cn()?f.apn=l.packageName:Ce(s,"operation-not-supported-in-this-environment"),l.displayName&&(f.appDisplayName=l.displayName),f.sessionId=u,rs(s,n,t.type,void 0,(o=t.eventId)!==null&&o!==void 0?o:void 0,f)}async function jp(s){const{BuildInfo:t}=Kt(),n={};un()?n.iosBundleId=t.packageName:cn()?n.androidPackageName=t.packageName:Ce(s,"operation-not-supported-in-this-environment"),await fl(s,n)}function zp(s){const{cordova:t}=Kt();return new Promise(n=>{t.plugins.browsertab.isAvailable(o=>{let l=null;o?t.plugins.browsertab.openUrl(s):l=t.InAppBrowser.open(s,Bd()?"_blank":"_system","location=yes"),n(l)})})}async function Fp(s,t,n){const{cordova:o}=Kt();let l=()=>{};try{await new Promise((u,f)=>{let _=null;function m(){var x;u();const O=(x=o.plugins.browsertab)===null||x===void 0?void 0:x.close;typeof O=="function"&&O(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function w(){_||(_=window.setTimeout(()=>{f(we(s,"redirect-cancelled-by-user"))},Mp))}function I(){(document==null?void 0:document.visibilityState)==="visible"&&w()}t.addPassiveListener(m),document.addEventListener("resume",w,!1),cn()&&document.addEventListener("visibilitychange",I,!1),l=()=>{t.removePassiveListener(m),document.removeEventListener("resume",w,!1),document.removeEventListener("visibilitychange",I,!1),_&&window.clearTimeout(_)}})}finally{l()}}function Up(s){var t,n,o,l,u,f,_,m,w,I;const x=Kt();T(typeof((t=x==null?void 0:x.universalLinks)===null||t===void 0?void 0:t.subscribe)=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),T(typeof((n=x==null?void 0:x.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),T(typeof((u=(l=(o=x==null?void 0:x.cordova)===null||o===void 0?void 0:o.plugins)===null||l===void 0?void 0:l.browsertab)===null||u===void 0?void 0:u.openUrl)=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),T(typeof((m=(_=(f=x==null?void 0:x.cordova)===null||f===void 0?void 0:f.plugins)===null||_===void 0?void 0:_.browsertab)===null||m===void 0?void 0:m.isAvailable)=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),T(typeof((I=(w=x==null?void 0:x.cordova)===null||w===void 0?void 0:w.InAppBrowser)===null||I===void 0?void 0:I.open)=="function",s,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function Bp(s){const t=Wp(s),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(l=>l.toString(16).padStart(2,"0")).join("")}function Wp(s){if(Je(/[0-9a-zA-Z]+/.test(s),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(s);const t=new ArrayBuffer(s.length),n=new Uint8Array(t);for(let o=0;o<s.length;o++)n[o]=s.charCodeAt(o);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp=20;class Vp extends dl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(t=>{this.resolveInitialized=t})}addPassiveListener(t){this.passiveListeners.add(t)}removePassiveListener(t){this.passiveListeners.delete(t)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(t){return this.resolveInitialized(),this.passiveListeners.forEach(n=>n(t)),super.onEvent(t)}async initialized(){await this.initPromise}}function Hp(s,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:Kp(),postBody:null,tenantId:s.tenantId,error:we(s,"no-auth-event")}}function qp(s,t){return ss()._set(os(s),t)}async function aa(s){const t=await ss()._get(os(s));return t&&await ss()._remove(os(s)),t}function Gp(s,t){var n,o;const l=Jp(t);if(l.includes("/__/auth/callback")){const u=Gn(l),f=u.firebaseError?Yp(decodeURIComponent(u.firebaseError)):null,_=(o=(n=f==null?void 0:f.code)===null||n===void 0?void 0:n.split("auth/"))===null||o===void 0?void 0:o[1],m=_?we(_):null;return m?{type:s.type,eventId:s.eventId,tenantId:s.tenantId,error:m,urlResponse:null,sessionId:null,postBody:null}:{type:s.type,eventId:s.eventId,tenantId:s.tenantId,sessionId:s.sessionId,urlResponse:l,postBody:null}}return null}function Kp(){const s=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<Zp;n++){const o=Math.floor(Math.random()*t.length);s.push(t.charAt(o))}return s.join("")}function ss(){return Ue(ks)}function os(s){return Vt("authEvent",s.config.apiKey,s.name)}function Yp(s){try{return JSON.parse(s)}catch{return null}}function Jp(s){const t=Gn(s),n=t.link?decodeURIComponent(t.link):void 0,o=Gn(n).link,l=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Gn(l).link||l||o||n||s}function Gn(s){if(!(s!=null&&s.includes("?")))return{};const[t,...n]=s.split("?");return ui(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $p=500;class Xp{constructor(){this._redirectPersistence=qt,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ur,this._overrideRedirectResult=Rs}async _initialize(t){const n=t._key();let o=this.eventManagers.get(n);return o||(o=new Vp(t),this.eventManagers.set(n,o),this.attachCallbackListeners(t,o)),o}_openPopup(t){Ce(t,"operation-not-supported-in-this-environment")}async _openRedirect(t,n,o,l){Up(t);const u=await this._initialize(t);await u.initialized(),u.resetRedirect(),qf(),await this._originValidation(t);const f=Hp(t,o,l);await qp(t,f);const _=await Dp(t,f,n),m=await zp(_);return Fp(t,u,m)}_isIframeWebStorageSupported(t,n){throw new Error("Method not implemented.")}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=jp(t)),this.originValidationPromises[n]}attachCallbackListeners(t,n){const{universalLinks:o,handleOpenURL:l,BuildInfo:u}=Kt(),f=setTimeout(async()=>{await aa(t),n.onEvent(la())},$p),_=async I=>{clearTimeout(f);const x=await aa(t);let O=null;x&&(I!=null&&I.url)&&(O=Gp(x,I.url)),n.onEvent(O||la())};typeof o<"u"&&typeof o.subscribe=="function"&&o.subscribe(null,_);const m=l,w=`${u.packageName.toLowerCase()}://`;Kt().handleOpenURL=async I=>{if(I.toLowerCase().startsWith(w)&&_({url:I}),typeof m=="function")try{m(I)}catch(x){console.error(x)}}}}const Qp=Xp;function la(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:we("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(s,t){oe(s)._logFramework(t)}var tm="@firebase/auth-compat",im="0.5.14";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm=1e3;function Ji(){var s;return((s=self==null?void 0:self.location)===null||s===void 0?void 0:s.protocol)||null}function rm(){return Ji()==="http:"||Ji()==="https:"}function ml(s=ke()){return!!((Ji()==="file:"||Ji()==="ionic:"||Ji()==="capacitor:")&&s.toLowerCase().match(/iphone|ipad|ipod|android/))}function sm(){return ps()||ga()}function om(){return _a()&&(document==null?void 0:document.documentMode)===11}function am(s=ke()){return/Edge\/\d+/.test(s)}function lm(s=ke()){return om()||am(s)}function _l(){try{const s=self.localStorage,t=fn();if(s)return s.setItem(t,"1"),s.removeItem(t),lm()?$r():!0}catch{return Ms()&&$r()}return!1}function Ms(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Gr(){return(rm()||pa()||ml())&&!sm()&&_l()&&!Ms()}function gl(){return ml()&&typeof document<"u"}async function cm(){return gl()?new Promise(s=>{const t=setTimeout(()=>{s(!1)},nm);document.addEventListener("deviceready",()=>{clearTimeout(t),s(!0)})}):!1}function um(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fe={LOCAL:"local",NONE:"none",SESSION:"session"},Zi=T,vl="persistence";function dm(s,t){if(Zi(Object.values(Fe).includes(t),s,"invalid-persistence-type"),ps()){Zi(t!==Fe.SESSION,s,"unsupported-persistence-type");return}if(ga()){Zi(t===Fe.NONE,s,"unsupported-persistence-type");return}if(Ms()){Zi(t===Fe.NONE||t===Fe.LOCAL&&$r(),s,"unsupported-persistence-type");return}Zi(t===Fe.NONE||_l(),s,"unsupported-persistence-type")}async function as(s){await s._initializationPromise;const t=yl(),n=Vt(vl,s.config.apiKey,s.name);t&&t.setItem(n,s._getPersistence())}function hm(s,t){const n=yl();if(!n)return[];const o=Vt(vl,s,t);switch(n.getItem(o)){case Fe.NONE:return[mi];case Fe.LOCAL:return[nn,qt];case Fe.SESSION:return[qt];default:return[]}}function yl(){var s;try{return((s=um())===null||s===void 0?void 0:s.sessionStorage)||null}catch{return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fm=T;class Lt{constructor(){this.browserResolver=Ue(kp),this.cordovaResolver=Ue(Qp),this.underlyingResolver=null,this._redirectPersistence=qt,this._completeRedirectFn=ur,this._overrideRedirectResult=Rs}async _initialize(t){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(t)}async _openPopup(t,n,o,l){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(t,n,o,l)}async _openRedirect(t,n,o,l){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(t,n,o,l)}_isIframeWebStorageSupported(t,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(t,n)}_originValidation(t){return this.assertedUnderlyingResolver._originValidation(t)}get _shouldInitProactively(){return gl()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return fm(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const t=await cm();this.underlyingResolver=t?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wl(s){return s.unwrap()}function pm(s){return s.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(s){return bl(s)}function _m(s,t){var n;const o=(n=t.customData)===null||n===void 0?void 0:n._tokenResponse;if((t==null?void 0:t.code)==="auth/multi-factor-auth-required"){const l=t;l.resolver=new gm(s,Qh(s,t))}else if(o){const l=bl(t),u=t;l&&(u.credential=l,u.tenantId=o.tenantId||void 0,u.email=o.email||void 0,u.phoneNumber=o.phoneNumber||void 0)}}function bl(s){const{_tokenResponse:t}=s instanceof Nt?s.customData:s;if(!t)return null;if(!(s instanceof Nt)&&"temporaryProof"in t&&"phoneNumber"in t)return Gt.credentialFromResult(s);const n=t.providerId;if(!n||n===Wi.PASSWORD)return null;let o;switch(n){case Wi.GOOGLE:o=at;break;case Wi.FACEBOOK:o=ot;break;case Wi.GITHUB:o=lt;break;case Wi.TWITTER:o=ct;break;default:const{oauthIdToken:l,oauthAccessToken:u,oauthTokenSecret:f,pendingToken:_,nonce:m}=t;return!u&&!f&&!l&&!_?null:_?n.startsWith("saml.")?_i._create(n,_):ht._fromParams({providerId:n,signInMethod:n,pendingToken:_,idToken:l,accessToken:u}):new fi(n).credential({idToken:l,accessToken:u,rawNonce:m})}return s instanceof Nt?o.credentialFromError(s):o.credentialFromResult(s)}function De(s,t){return t.catch(n=>{throw n instanceof Nt&&_m(s,n),n}).then(n=>{const o=n.operationType,l=n.user;return{operationType:o,credential:mm(n),additionalUserInfo:Xh(n),user:wt.getOrCreate(l)}})}async function ls(s,t){const n=await t;return{verificationId:n.verificationId,confirm:o=>De(s,n.confirm(o))}}class gm{constructor(t,n){this.resolver=n,this.auth=pm(t)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(t){return De(wl(this.auth),this.resolver.resolveSignIn(t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wt{constructor(t){this._delegate=t,this.multiFactor=rf(t)}static getOrCreate(t){return wt.USER_MAP.has(t)||wt.USER_MAP.set(t,new wt(t)),wt.USER_MAP.get(t)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(t){return this._delegate.getIdTokenResult(t)}getIdToken(t){return this._delegate.getIdToken(t)}linkAndRetrieveDataWithCredential(t){return this.linkWithCredential(t)}async linkWithCredential(t){return De(this.auth,Ya(this._delegate,t))}async linkWithPhoneNumber(t,n){return ls(this.auth,Rf(this._delegate,t,n))}async linkWithPopup(t){return De(this.auth,Wf(this._delegate,t,Lt))}async linkWithRedirect(t){return await as(oe(this.auth)),$f(this._delegate,t,Lt)}reauthenticateAndRetrieveDataWithCredential(t){return this.reauthenticateWithCredential(t)}async reauthenticateWithCredential(t){return De(this.auth,Ja(this._delegate,t))}reauthenticateWithPhoneNumber(t,n){return ls(this.auth,Of(this._delegate,t,n))}reauthenticateWithPopup(t){return De(this.auth,Bf(this._delegate,t,Lt))}async reauthenticateWithRedirect(t){return await as(oe(this.auth)),Yf(this._delegate,t,Lt)}sendEmailVerification(t){return Bh(this._delegate,t)}async unlink(t){return await Sh(this._delegate,t),this}updateEmail(t){return Hh(this._delegate,t)}updatePassword(t){return qh(this._delegate,t)}updatePhoneNumber(t){return Mf(this._delegate,t)}updateProfile(t){return Vh(this._delegate,t)}verifyBeforeUpdateEmail(t,n){return Wh(this._delegate,t,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}wt.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi=T;class cs{constructor(t,n){if(this.app=t,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:o}=t.options;Vi(o,"invalid-api-key",{appName:t.name}),Vi(o,"invalid-api-key",{appName:t.name});const l=typeof window<"u"?Lt:void 0;this._delegate=n.initialize({options:{persistence:vm(o,t.name),popupRedirectResolver:l}}),this._delegate._updateErrorMap(wd),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?wt.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(t){this._delegate.languageCode=t}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(t){this._delegate.tenantId=t}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(t,n){nh(this._delegate,t,n)}applyActionCode(t){return Ah(this._delegate,t)}checkActionCode(t){return $a(this._delegate,t)}confirmPasswordReset(t,n){return Nh(this._delegate,t,n)}async createUserWithEmailAndPassword(t,n){return De(this._delegate,Oh(this._delegate,t,n))}fetchProvidersForEmail(t){return this.fetchSignInMethodsForEmail(t)}fetchSignInMethodsForEmail(t){return Uh(this._delegate,t)}isSignInWithEmailLink(t){return jh(this._delegate,t)}async getRedirectResult(){Vi(Gr(),this._delegate,"operation-not-supported-in-this-environment");const t=await Qf(this._delegate,Lt);return t?De(this._delegate,Promise.resolve(t)):{credential:null,user:null}}addFrameworkForLogging(t){em(this._delegate,t)}onAuthStateChanged(t,n,o){const{next:l,error:u,complete:f}=ca(t,n,o);return this._delegate.onAuthStateChanged(l,u,f)}onIdTokenChanged(t,n,o){const{next:l,error:u,complete:f}=ca(t,n,o);return this._delegate.onIdTokenChanged(l,u,f)}sendSignInLinkToEmail(t,n){return Dh(this._delegate,t,n)}sendPasswordResetEmail(t,n){return Lh(this._delegate,t,n||void 0)}async setPersistence(t){dm(this._delegate,t);let n;switch(t){case Fe.SESSION:n=qt;break;case Fe.LOCAL:n=await Ue(nn)._isAvailable()?nn:ks;break;case Fe.NONE:n=mi;break;default:return Ce("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(t){return this.signInWithCredential(t)}signInAnonymously(){return De(this._delegate,Eh(this._delegate))}signInWithCredential(t){return De(this._delegate,sr(this._delegate,t))}signInWithCustomToken(t){return De(this._delegate,Ch(this._delegate,t))}signInWithEmailAndPassword(t,n){return De(this._delegate,Mh(this._delegate,t,n))}signInWithEmailLink(t,n){return De(this._delegate,zh(this._delegate,t,n))}signInWithPhoneNumber(t,n){return ls(this._delegate,Af(this._delegate,t,n))}async signInWithPopup(t){return Vi(Gr(),this._delegate,"operation-not-supported-in-this-environment"),De(this._delegate,Uf(this._delegate,t,Lt))}async signInWithRedirect(t){return Vi(Gr(),this._delegate,"operation-not-supported-in-this-environment"),await as(this._delegate),Gf(this._delegate,t,Lt)}updateCurrentUser(t){return this._delegate.updateCurrentUser(t)}verifyPasswordResetCode(t){return Rh(this._delegate,t)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}cs.Persistence=Fe;function ca(s,t,n){let o=s;typeof s!="function"&&({next:o,error:t,complete:n}=s);const l=o;return{next:f=>l(f&&wt.getOrCreate(f)),error:t,complete:n}}function vm(s,t){const n=hm(s,t);if(typeof self<"u"&&!n.includes(nn)&&n.push(nn),typeof window<"u")for(const o of[ks,qt])n.includes(o)||n.push(o);return n.includes(mi)||n.push(mi),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(){this.providerId="phone",this._delegate=new Gt(wl(dt.auth()))}static credential(t,n){return Gt.credential(t,n)}verifyPhoneNumber(t,n){return this._delegate.verifyPhoneNumber(t,n)}unwrap(){return this._delegate}}Ds.PHONE_SIGN_IN_METHOD=Gt.PHONE_SIGN_IN_METHOD;Ds.PROVIDER_ID=Gt.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ym=T;class wm{constructor(t,n,o=dt.app()){var l;ym((l=o.options)===null||l===void 0?void 0:l.apiKey,"invalid-api-key",{appName:o.name}),this._delegate=new Lf(o.auth(),t,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bm="auth-compat";function xm(s){s.INTERNAL.registerComponent(new $i(bm,t=>{const n=t.getProvider("app-compat").getImmediate(),o=t.getProvider("auth");return new cs(n,o)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ci.EMAIL_SIGNIN,PASSWORD_RESET:ci.PASSWORD_RESET,RECOVER_EMAIL:ci.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:ci.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:ci.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:ci.VERIFY_EMAIL}},EmailAuthProvider:At,FacebookAuthProvider:ot,GithubAuthProvider:lt,GoogleAuthProvider:at,OAuthProvider:fi,SAMLAuthProvider:Jn,PhoneAuthProvider:Ds,PhoneMultiFactorGenerator:pl,RecaptchaVerifier:wm,TwitterAuthProvider:ct,Auth:cs,AuthCredential:bi,Error:Nt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),s.registerVersion(tm,im)}xm(dt);const Im="@firebase/firestore-compat",Tm="0.3.38";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(s,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new an("invalid-argument",`Invalid options passed to function ${s}(): You cannot specify both "merge" and "mergeFields".`);return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ua(){if(typeof Uint8Array>"u")throw new an("unimplemented","Uint8Arrays are not available in this environment.")}function da(){if(!$u())throw new an("unimplemented","Blobs are unavailable in Firestore in this environment.")}let xl=class us{constructor(t){this._delegate=t}static fromBase64String(t){return da(),new us(es.fromBase64String(t))}static fromUint8Array(t){return ua(),new us(es.fromUint8Array(t))}toBase64(){return da(),this._delegate.toBase64()}toUint8Array(){return ua(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(s){return Pm(s,["next","error","complete"])}function Pm(s,t){if(typeof s!="object"||s===null)return!1;const n=s;for(const o of t)if(o in n&&typeof n[o]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{enableIndexedDbPersistence(t,n){return Xu(t._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(t){return Qu(t._delegate)}clearIndexedDbPersistence(t){return ed(t._delegate)}}class Il{constructor(t,n,o){this._delegate=n,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},t instanceof Ru||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){const n=this._delegate._getSettings();!t.merge&&n.host!==t.host&&Ou("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t=Object.assign(Object.assign({},n),t),delete t.merge),this._delegate._setSettings(t)}useEmulator(t,n,o={}){Mu(this._delegate,t,n,o)}enableNetwork(){return Du(this._delegate)}disableNetwork(){return ju(this._delegate)}enablePersistence(t){let n=!1,o=!1;return t&&(n=!!t.synchronizeTabs,o=!!t.experimentalForceOwningTab,zu("synchronizeTabs",n,"experimentalForceOwningTab",o)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Fu(this._delegate)}onSnapshotsInSync(t){return Uu(this._delegate,t)}get app(){if(!this._appCompat)throw new an("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new gi(this,ba(this._delegate,t))}catch(n){throw Oe(n,"collection()","Firestore.collection()")}}doc(t){try{return new He(this,Xr(this._delegate,t))}catch(n){throw Oe(n,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Re(this,Bu(this._delegate,t))}catch(n){throw Oe(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return Wu(this._delegate,n=>t(new Tl(this,n)))}batch(){return Zu(this._delegate),new Pl(new Vu(this._delegate,t=>Hu(this._delegate,t)))}loadBundle(t){return qu(this._delegate,t)}namedQuery(t){return Gu(this._delegate,t).then(n=>n?new Re(this,n):null)}}class dr extends Yu{constructor(t){super(),this.firestore=t}convertBytes(t){return new xl(new es(t))}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return He.forKey(n,this.firestore,null)}}function Sm(s){au(s)}class Tl{constructor(t,n){this._firestore=t,this._delegate=n,this._userDataWriter=new dr(t)}get(t){const n=Zt(t);return this._delegate.get(n).then(o=>new rn(this._firestore,new Qr(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,n.converter)))}set(t,n,o){const l=Zt(t);return o?(js("Transaction.set",o),this._delegate.set(l,n,o)):this._delegate.set(l,n),this}update(t,n,o,...l){const u=Zt(t);return arguments.length===2?this._delegate.update(u,n):this._delegate.update(u,n,o,...l),this}delete(t){const n=Zt(t);return this._delegate.delete(n),this}}class Pl{constructor(t){this._delegate=t}set(t,n,o){const l=Zt(t);return o?(js("WriteBatch.set",o),this._delegate.set(l,n,o)):this._delegate.set(l,n),this}update(t,n,o,...l){const u=Zt(t);return arguments.length===2?this._delegate.update(u,n):this._delegate.update(u,n,o,...l),this}delete(t){const n=Zt(t);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Yt{constructor(t,n,o){this._firestore=t,this._userDataWriter=n,this._delegate=o}fromFirestore(t,n){const o=new Ku(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new sn(this._firestore,o),n??{})}toFirestore(t,n){return n?this._delegate.toFirestore(t,n):this._delegate.toFirestore(t)}static getInstance(t,n){const o=Yt.INSTANCES;let l=o.get(t);l||(l=new WeakMap,o.set(t,l));let u=l.get(n);return u||(u=new Yt(t,new dr(t),n),l.set(n,u)),u}}Yt.INSTANCES=new WeakMap;class He{constructor(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new dr(t)}static forPath(t,n,o){if(t.length%2!==0)throw new an("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new He(n,new Zn(n._delegate,o,new ku(t)))}static forKey(t,n,o){return new He(n,new Zn(n._delegate,o,t))}get id(){return this._delegate.id}get parent(){return new gi(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new gi(this.firestore,ba(this._delegate,t))}catch(n){throw Oe(n,"collection()","DocumentReference.collection()")}}isEqual(t){return t=G(t),t instanceof Zn?va(this._delegate,t):!1}set(t,n){n=js("DocumentReference.set",n);try{return n?Fo(this._delegate,t,n):Fo(this._delegate,t)}catch(o){throw Oe(o,"setDoc()","DocumentReference.set()")}}update(t,n,...o){try{return arguments.length===1?Uo(this._delegate,t):Uo(this._delegate,t,n,...o)}catch(l){throw Oe(l,"updateDoc()","DocumentReference.update()")}}delete(){return Cu(this._delegate)}onSnapshot(...t){const n=El(t),o=Sl(t,l=>new rn(this.firestore,new Qr(this.firestore._delegate,this._userDataWriter,l._key,l._document,l.metadata,this._delegate.converter)));return wa(this._delegate,n,o)}get(t){let n;return(t==null?void 0:t.source)==="cache"?n=Lu(this._delegate):(t==null?void 0:t.source)==="server"?n=Nu(this._delegate):n=Au(this._delegate),n.then(o=>new rn(this.firestore,new Qr(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(t){return new He(this.firestore,t?this._delegate.withConverter(Yt.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function Oe(s,t,n){return s.message=s.message.replace(t,n),s}function El(s){for(const t of s)if(typeof t=="object"&&!ds(t))return t;return{}}function Sl(s,t){var n,o;let l;return ds(s[0])?l=s[0]:ds(s[1])?l=s[1]:typeof s[0]=="function"?l={next:s[0],error:s[1],complete:s[2]}:l={next:s[1],error:s[2],complete:s[3]},{next:u=>{l.next&&l.next(t(u))},error:(n=l.error)===null||n===void 0?void 0:n.bind(l),complete:(o=l.complete)===null||o===void 0?void 0:o.bind(l)}}class rn{constructor(t,n){this._firestore=t,this._delegate=n}get ref(){return new He(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,n){return this._delegate.get(t,n)}isEqual(t){return ya(this._delegate,t._delegate)}}class sn extends rn{data(t){const n=this._delegate.data(t);return this._delegate._converter||mu(n!==void 0),n}}class Re{constructor(t,n){this.firestore=t,this._delegate=n,this._userDataWriter=new dr(t)}where(t,n,o){try{return new Re(this.firestore,kt(this._delegate,_u(t,n,o)))}catch(l){throw Oe(l,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,n){try{return new Re(this.firestore,kt(this._delegate,gu(t,n)))}catch(o){throw Oe(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new Re(this.firestore,kt(this._delegate,vu(t)))}catch(n){throw Oe(n,"limit()","Query.limit()")}}limitToLast(t){try{return new Re(this.firestore,kt(this._delegate,yu(t)))}catch(n){throw Oe(n,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new Re(this.firestore,kt(this._delegate,wu(...t)))}catch(n){throw Oe(n,"startAt()","Query.startAt()")}}startAfter(...t){try{return new Re(this.firestore,kt(this._delegate,bu(...t)))}catch(n){throw Oe(n,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new Re(this.firestore,kt(this._delegate,xu(...t)))}catch(n){throw Oe(n,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new Re(this.firestore,kt(this._delegate,Iu(...t)))}catch(n){throw Oe(n,"endAt()","Query.endAt()")}}isEqual(t){return Tu(this._delegate,t._delegate)}get(t){let n;return(t==null?void 0:t.source)==="cache"?n=Pu(this._delegate):(t==null?void 0:t.source)==="server"?n=Eu(this._delegate):n=Su(this._delegate),n.then(o=>new hs(this.firestore,new zo(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...t){const n=El(t),o=Sl(t,l=>new hs(this.firestore,new zo(this.firestore._delegate,this._userDataWriter,this._delegate,l._snapshot)));return wa(this._delegate,n,o)}withConverter(t){return new Re(this.firestore,t?this._delegate.withConverter(Yt.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}class km{constructor(t,n){this._firestore=t,this._delegate=n}get type(){return this._delegate.type}get doc(){return new sn(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class hs{constructor(t,n){this._firestore=t,this._delegate=n}get query(){return new Re(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new sn(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(n=>new km(this._firestore,n))}forEach(t,n){this._delegate.forEach(o=>{t.call(n,new sn(this._firestore,o))})}isEqual(t){return ya(this._delegate,t._delegate)}}class gi extends Re{constructor(t,n){super(t,n),this.firestore=t,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const t=this._delegate.parent;return t?new He(this.firestore,t):null}doc(t){try{return t===void 0?new He(this.firestore,Xr(this._delegate)):new He(this.firestore,Xr(this._delegate,t))}catch(n){throw Oe(n,"doc()","CollectionReference.doc()")}}add(t){return pu(this._delegate,t).then(n=>new He(this.firestore,n))}isEqual(t){return va(this._delegate,t._delegate)}withConverter(t){return new gi(this.firestore,t?this._delegate.withConverter(Yt.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}function Zt(s){return Ju(s,Zn)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(...t){this._delegate=new jo(...t)}static documentId(){return new zs(fu.keyField().canonicalString())}isEqual(t){return t=G(t),t instanceof jo?this._delegate._internalPath.isEqual(t._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(t){this._delegate=t}static serverTimestamp(){const t=lu();return t._methodName="FieldValue.serverTimestamp",new Ut(t)}static delete(){const t=cu();return t._methodName="FieldValue.delete",new Ut(t)}static arrayUnion(...t){const n=uu(...t);return n._methodName="FieldValue.arrayUnion",new Ut(n)}static arrayRemove(...t){const n=du(...t);return n._methodName="FieldValue.arrayRemove",new Ut(n)}static increment(t){const n=hu(t);return n._methodName="FieldValue.increment",new Ut(n)}isEqual(t){return this._delegate.isEqual(t._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cm={Firestore:Il,GeoPoint:ou,Timestamp:su,Blob:xl,Transaction:Tl,WriteBatch:Pl,DocumentReference:He,DocumentSnapshot:rn,Query:Re,QueryDocumentSnapshot:sn,QuerySnapshot:hs,CollectionReference:gi,FieldPath:zs,FieldValue:Ut,setLogLevel:Sm,CACHE_SIZE_UNLIMITED:ru};function Lm(s,t){s.INTERNAL.registerComponent(new $i("firestore-compat",n=>{const o=n.getProvider("app-compat").getImmediate(),l=n.getProvider("firestore").getImmediate();return t(o,l)},"PUBLIC").setServiceProps(Object.assign({},Cm)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(s){Lm(s,(t,n)=>new Il(t,n,new Em)),s.registerVersion(Im,Tm)}Nm(dt);const kl={apiKey:"AIzaSyCynuJgfPszmLQ6eiH7x26jg_bMwxj991Q",authDomain:"projetocooprem.firebaseapp.com",projectId:"projetocooprem",storageBucket:"projetocooprem.firebasestorage.app",messagingSenderId:"303024881460",appId:"1:303024881460:web:40acb6eb6cddec3a326f61",measurementId:"G-MW80C4RRGR"},Cl=dt.apps.length?dt.app():dt.initializeApp(kl),Gi=Cl.auth(),ge=Cl.firestore(),Am=({onLogin:s})=>{const[t,n]=E.useState(""),[o,l]=E.useState(""),[u,f]=E.useState(null),[_,m]=E.useState(!1),w=async x=>{x.preventDefault(),f(null),m(!0),await s(t,o)||(f("Credenciais invlidas ou erro de conexo. Tente novamente."),m(!1))},I=async x=>{var O;if(x.preventDefault(),!!window.confirm("Deseja configurar o usurio administrador padro (genildo.filho@sicoob.com.br)?")){m(!0);try{const X=(O=(await Gi.createUserWithEmailAndPassword("genildo.filho@sicoob.com.br","123456")).user)==null?void 0:O.uid;if(X)await ge.collection("users").doc(X).set({name:"Genildo Filho",email:"genildo.filho@sicoob.com.br",role:"Desenvolvedor",agency:"Sede",password:"123456"}),alert("Usurio Admin criado com sucesso! Tente fazer login agora."),n("genildo.filho@sicoob.com.br"),l("123456");else throw new Error("Falha ao obter UID do usurio criado.")}catch(V){console.error(V),V.code==="auth/email-already-in-use"?alert("Este usurio j existe. Tente fazer login ou verifique o console do Firebase."):alert("Erro ao criar admin: "+V.message)}finally{m(!1)}}};return h.jsxs("div",{className:"min-h-screen bg-[#005058] flex flex-col justify-center items-center p-4",children:[h.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-xl p-8",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx(_s,{className:"mx-auto w-20 h-auto mb-6"}),h.jsx("h1",{className:"text-3xl font-extrabold text-gray-800",children:"Registro de Visitas"}),h.jsx("p",{className:"text-lg text-gray-500 mt-1",children:"Sicoob Cooprem"})]}),u&&h.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:h.jsx("span",{className:"block sm:inline",children:u})}),h.jsxs("form",{onSubmit:w,children:[h.jsxs("div",{className:"mb-4",children:[h.jsx("label",{htmlFor:"email",className:"block text-gray-700 text-sm font-bold mb-2",children:"Email"}),h.jsx("input",{type:"email",id:"email",value:t,onChange:x=>n(x.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline disabled:bg-gray-200",placeholder:"seu.email@sicoob.com.br",required:!0,disabled:_})]}),h.jsxs("div",{className:"mb-6",children:[h.jsx("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-bold mb-2",children:"Senha"}),h.jsx("input",{type:"password",id:"password",value:o,onChange:x=>l(x.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline disabled:bg-gray-200",placeholder:"******************",required:!0,disabled:_})]}),h.jsx("div",{className:"flex items-center justify-between mt-6",children:h.jsx("button",{type:"submit",disabled:_,className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed flex justify-center items-center h-10",children:_?h.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[h.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),h.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Entrar"})})]})]}),h.jsxs("footer",{className:"text-center text-gray-300 text-xs mt-8",children:[h.jsx("p",{className:"mb-1",children:"Verso 1.0 - Produo Firebase"}),h.jsxs("p",{className:"mb-2",children:["",new Date().getFullYear()," Sicoob Cooprem. Todos os direitos reservados."]}),h.jsx("button",{onClick:I,className:"text-green-300 hover:text-green-100 underline mt-4 opacity-80 hover:opacity-100 transition-opacity",children:"Primeiro Acesso? Criar Admin"})]})]})},Rm=({visit:s})=>h.jsx("li",{className:"py-4 border-b",children:h.jsxs("div",{className:"flex flex-col md:flex-row justify-between",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-blue-700",children:s.cooperado.name}),h.jsx("p",{className:"text-sm text-gray-500",children:new Date(s.date).toLocaleDateString("pt-BR")}),h.jsx("p",{className:"text-gray-700",children:s.summary})]}),h.jsxs("div",{className:"text-right",children:[h.jsx("div",{className:"flex flex-wrap gap-1 justify-end mt-2",children:s.products.map((t,n)=>h.jsx("span",{className:"bg-blue-100 text-blue-800 text-xs px-2 py-0.5 rounded-full",children:t.product},n))}),s.location&&h.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${s.location.latitude},${s.location.longitude}`,target:"_blank",className:"text-sm text-blue-500 hover:underline",children:"Ver Local"})]})]})});var je=(s=>(s.Consorcio="Consrcio",s.Seguro="Seguro",s.Investimentos="Investimentos",s.Credito="Crdito",s.Previdencia="Previdncia",s.Compliance="Compliance",s.Cobranca="Cobrana",s.SIPAG="SIPAG",s))(je||{});const Om=[je.Consorcio,je.Seguro,je.Investimentos,je.Credito,je.Previdencia,je.Compliance,je.Cobranca,je.SIPAG],Mm=()=>{const[s,t]=E.useState({loading:!1,error:null,location:null}),n=E.useCallback(()=>{if(!navigator.geolocation){alert("Geolocalizao no  suportada por este navegador.");return}t({loading:!0,error:null,location:null}),navigator.geolocation.getCurrentPosition(l=>{t({loading:!1,error:null,location:{latitude:l.coords.latitude,longitude:l.coords.longitude}})},l=>{t({loading:!1,error:l,location:null})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},[]),o=E.useCallback(()=>{t({loading:!1,error:null,location:null})},[]);return{...s,getLocation:n,resetLocation:o}},Dm=({cooperados:s,addVisit:t,onClose:n,prefilledCooperado:o})=>{const[l,u]=E.useState((o==null?void 0:o.id)||""),[f,_]=E.useState(!1),[m,w]=E.useState(""),[I,x]=E.useState(""),[O]=E.useState(()=>{const P=new Date;return new Date(P.getTime()-P.getTimezoneOffset()*6e4).toISOString().split("T")[0]}),[V,X]=E.useState(""),[F,be]=E.useState([]),[Le,Ee]=E.useState({novoRecurso:{selected:!1,observation:""},duvidasGerais:{selected:!1,observation:""}}),{location:k,getLocation:A,resetLocation:j,loading:Y}=Mm(),[te,D]=E.useState(!1),[C,ce]=E.useState((o==null?void 0:o.name)||""),[ue,Q]=E.useState(!1),Ge=E.useRef(null);E.useEffect(()=>(A(),()=>j()),[A,j]),E.useEffect(()=>{const P=de=>{Ge.current&&!Ge.current.contains(de.target)&&Q(!1)};return document.addEventListener("mousedown",P),()=>document.removeEventListener("mousedown",P)},[]);const Ne=P=>{be(de=>{const R=de.includes(P)?de.filter(H=>H!==P):[...de,P];return P===je.Investimentos&&!R.includes(je.Investimentos)&&Ee({novoRecurso:{selected:!1,observation:""},duvidasGerais:{selected:!1,observation:""}}),R})},$t=async P=>{if(P.preventDefault(),!f&&!l){alert("Selecione um cooperado.");return}const de=f?{name:m,document:I}:s.find(H=>H.id===l),R=F.filter(H=>H!==je.Investimentos).map(H=>({product:H}));if(Le.novoRecurso.selected&&R.push({product:je.Investimentos,subProduct:"Novo recurso",observation:Le.novoRecurso.observation.trim()||void 0}),Le.duvidasGerais.selected&&R.push({product:je.Investimentos,subProduct:"Dvidas gerais",observation:Le.duvidasGerais.observation.trim()||void 0}),!de||!V){alert("Preencha os campos.");return}if(R.length===0){alert("Selecione um produto.");return}D(!0);try{await t({cooperado:de,date:new Date(`${O}T00:00:00`),location:k,summary:V,products:R})}catch(H){console.error(H),alert("Erro ao salvar."),D(!1)}},ye=E.useMemo(()=>{const P=C.toLowerCase().trim();return P?s.filter(de=>de.isPortfolio&&(de.name.toLowerCase().includes(P)||de.document.includes(P))):[]},[C,s]),$e=P=>{u(P.id),ce(P.name),Q(!1)};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:h.jsx("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-full overflow-y-auto",children:h.jsxs("form",{onSubmit:$t,className:"p-6",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Nova Visita"}),h.jsx("button",{type:"button",onClick:n,className:"text-gray-400",children:"X"})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[h.jsxs("div",{className:"col-span-2",children:[h.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Cooperado"}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("input",{type:"checkbox",checked:f,onChange:P=>{_(P.target.checked),u(""),ce("")}}),h.jsx("label",{className:"text-sm",children:"Cooperado fora da carteira"})]}),f?h.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-4",children:[h.jsx("input",{type:"text",placeholder:"Nome",value:m,onChange:P=>w(P.target.value),className:"border rounded p-2"}),h.jsx("input",{type:"text",placeholder:"CPF/CNPJ",value:I,onChange:P=>x(P.target.value),className:"border rounded p-2"})]}):h.jsxs("div",{className:"relative mt-2",ref:Ge,children:[h.jsx("input",{type:"text",placeholder:"Buscar...",value:C,onChange:P=>{ce(P.target.value),u(""),Q(!0)},className:"border rounded w-full p-2",disabled:!!o}),ue&&!o&&ye.length>0&&h.jsx("div",{className:"absolute z-10 w-full bg-white border mt-1 max-h-60 overflow-y-auto shadow-lg",children:h.jsx("ul",{children:ye.map(P=>h.jsxs("li",{onClick:()=>$e(P),className:"p-2 hover:bg-gray-100 cursor-pointer",children:[P.name," (",P.document,")"]},P.id))})})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Data"}),h.jsx("input",{type:"date",value:O,readOnly:!0,className:"border rounded w-full p-2 bg-gray-200"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Localizao"}),h.jsx("div",{className:"p-2 border rounded bg-gray-50 text-xs",children:k?`Lat: ${k.latitude.toFixed(4)}, Lon: ${k.longitude.toFixed(4)}`:Y?"Obtendo...":"Sem localizao"})]}),h.jsxs("div",{className:"col-span-2",children:[h.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Resumo"}),h.jsx("textarea",{value:V,onChange:P=>X(P.target.value),rows:4,className:"border rounded w-full p-2"})]}),h.jsxs("div",{className:"col-span-2",children:[h.jsx("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Produtos"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:Om.map(P=>h.jsx("button",{type:"button",onClick:()=>Ne(P),className:`px-3 py-1 rounded-full text-sm font-semibold ${F.includes(P)?"bg-blue-600 text-white":"bg-gray-200"}`,children:P},P))})]})]}),h.jsxs("div",{className:"mt-8 flex justify-end gap-4",children:[h.jsx("button",{type:"button",onClick:n,className:"bg-gray-300 rounded px-4 py-2",children:"Cancelar"}),h.jsx("button",{type:"submit",disabled:te,className:"bg-green-600 text-white rounded px-4 py-2 font-bold",children:te?"Salvando...":"Salvar"})]})]})})})},jm=({user:s,visits:t,cooperados:n,suggestedVisits:o,onLogout:l,addVisit:u})=>{const[f,_]=E.useState(!1),[m,w]=E.useState(null),[I,x]=E.useState(""),O=E.useMemo(()=>{const C=new Date;return new Date(C.getTime()-C.getTimezoneOffset()*6e4).toISOString().split("T")[0]},[]),[V,X]=E.useState(O),[F,be]=E.useState(O),Le=E.useMemo(()=>t.filter(C=>C.manager.id===s.id).sort((C,ce)=>new Date(ce.date).getTime()-new Date(C.date).getTime()),[t,s.id]),Ee=E.useMemo(()=>o.filter(C=>C.manager.id===s.id).sort((C,ce)=>new Date(ce.suggestedAt).getTime()-new Date(C.suggestedAt).getTime()),[o,s.id]),k=E.useMemo(()=>{const C=new Date(V);C.setUTCHours(0,0,0,0);const ce=new Date(F);ce.setUTCHours(23,59,59,999);const ue=Le.filter(Q=>{const Ge=new Date(Q.date);return Ge>=C&&Ge<=ce});return I?ue.filter(Q=>Q.cooperado.name.toLowerCase().includes(I.toLowerCase())||Q.summary.toLowerCase().includes(I.toLowerCase())):ue},[Le,I,V,F]),A=async C=>{await u(C),_(!1),w(null)},j=C=>{w(C),_(!0)},Y=()=>{w(null),_(!0)},te=()=>{_(!1),w(null)},D=C=>new Intl.DateTimeFormat("pt-BR").format(new Date(C));return h.jsxs("div",{className:"min-h-screen bg-gray-100",children:[h.jsx("header",{className:"bg-[#005058] shadow-md text-white",children:h.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(_s,{className:"h-10 w-auto mr-4"}),h.jsxs("div",{children:[h.jsx("h1",{className:"text-xl font-semibold",children:"Registro de Visitas"}),h.jsxs("p",{className:"text-sm opacity-90",children:[s.name," - ",s.agency]})]})]}),h.jsx("button",{onClick:l,className:"bg-red-600 hover:bg-red-700 font-bold py-2 px-4 rounded-md transition duration-200",children:"Sair"})]})}),h.jsx("main",{className:"container mx-auto p-4 md:p-6",children:h.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6",children:[h.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Minhas Visitas"}),h.jsxs("button",{onClick:Y,className:"w-full md:w-auto bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded-md transition duration-200 flex items-center justify-center gap-2",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Registrar Nova Visita"]})]}),Ee.length>0&&h.jsxs("div",{className:"mb-8 p-4 bg-yellow-50 border-l-4 border-yellow-400 rounded-r-lg",children:[h.jsxs("h3",{className:"text-xl font-bold text-yellow-800 mb-3 flex items-center gap-2",children:[h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Visitas Sugeridas"]}),h.jsx("div",{className:"space-y-3",children:Ee.map(C=>h.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2",children:[h.jsxs("div",{className:"flex-1",children:[h.jsx("p",{className:"font-semibold text-gray-800",children:C.cooperado.name}),h.jsxs("p",{className:"text-xs text-gray-500",children:["Sugerida em: ",D(C.suggestedAt)," por ",C.suggestedBy]}),h.jsx("p",{className:"text-sm text-gray-700 mt-2 italic border-l-2 border-yellow-500 pl-2",children:C.reason})]}),h.jsx("button",{onClick:()=>j(C.cooperado),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-1 px-3 rounded-md text-sm transition duration-200 w-full sm:w-auto",children:"Registrar Visita"})]},C.id))})]}),h.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6 border",children:[h.jsx("h3",{className:"font-bold text-gray-700 mb-2",children:"Filtrar Visitas por Data"}),h.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"start-date",className:"text-sm font-medium text-gray-600 mr-2",children:"De:"}),h.jsx("input",{type:"date",id:"start-date",value:V,onChange:C=>X(C.target.value),className:"shadow-sm border rounded py-1 px-2 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"end-date",className:"text-sm font-medium text-gray-600 mr-2",children:"At:"}),h.jsx("input",{type:"date",id:"end-date",value:F,onChange:C=>be(C.target.value),min:V,className:"shadow-sm border rounded py-1 px-2 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})]})]})]}),h.jsx("div",{className:"mb-4",children:h.jsx("input",{type:"text",placeholder:"Buscar por cooperado ou resumo nos resultados filtrados...",value:I,onChange:C=>x(C.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"})}),k.length>0?h.jsx("ul",{className:"divide-y divide-gray-200",children:k.map(C=>h.jsx(Rm,{visit:C},C.id))}):h.jsx("div",{className:"text-center py-10",children:h.jsx("p",{className:"text-gray-500",children:"Nenhuma visita encontrada."})})]})}),f&&h.jsx(Dm,{cooperados:n,addVisit:A,onClose:te,prefilledCooperado:m}),h.jsxs("footer",{className:"text-center text-gray-500 text-xs py-4",children:["",new Date().getFullYear()," Sicoob Cooprem. Todos os direitos reservados."]})]})};var fs={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(s,t){(function(n,o){o(t)})(td,function(n){var o="1.9.4";function l(e){var i,r,a,c;for(r=1,a=arguments.length;r<a;r++){c=arguments[r];for(i in c)e[i]=c[i]}return e}var u=Object.create||function(){function e(){}return function(i){return e.prototype=i,new e}}();function f(e,i){var r=Array.prototype.slice;if(e.bind)return e.bind.apply(e,r.call(arguments,1));var a=r.call(arguments,2);return function(){return e.apply(i,a.length?a.concat(r.call(arguments)):arguments)}}var _=0;function m(e){return"_leaflet_id"in e||(e._leaflet_id=++_),e._leaflet_id}function w(e,i,r){var a,c,d,p;return p=function(){a=!1,c&&(d.apply(r,c),c=!1)},d=function(){a?c=arguments:(e.apply(r,arguments),setTimeout(p,i),a=!0)},d}function I(e,i,r){var a=i[1],c=i[0],d=a-c;return e===a&&r?e:((e-c)%d+d)%d+c}function x(){return!1}function O(e,i){if(i===!1)return e;var r=Math.pow(10,i===void 0?6:i);return Math.round(e*r)/r}function V(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function X(e){return V(e).split(/\s+/)}function F(e,i){Object.prototype.hasOwnProperty.call(e,"options")||(e.options=e.options?u(e.options):{});for(var r in i)e.options[r]=i[r];return e.options}function be(e,i,r){var a=[];for(var c in e)a.push(encodeURIComponent(r?c.toUpperCase():c)+"="+encodeURIComponent(e[c]));return(!i||i.indexOf("?")===-1?"?":"&")+a.join("&")}var Le=/\{ *([\w_ -]+) *\}/g;function Ee(e,i){return e.replace(Le,function(r,a){var c=i[a];if(c===void 0)throw new Error("No value provided for variable "+r);return typeof c=="function"&&(c=c(i)),c})}var k=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"};function A(e,i){for(var r=0;r<e.length;r++)if(e[r]===i)return r;return-1}var j="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function Y(e){return window["webkit"+e]||window["moz"+e]||window["ms"+e]}var te=0;function D(e){var i=+new Date,r=Math.max(0,16-(i-te));return te=i+r,window.setTimeout(e,r)}var C=window.requestAnimationFrame||Y("RequestAnimationFrame")||D,ce=window.cancelAnimationFrame||Y("CancelAnimationFrame")||Y("CancelRequestAnimationFrame")||function(e){window.clearTimeout(e)};function ue(e,i,r){if(r&&C===D)e.call(i);else return C.call(window,f(e,i))}function Q(e){e&&ce.call(window,e)}var Ge={__proto__:null,extend:l,create:u,bind:f,get lastId(){return _},stamp:m,throttle:w,wrapNum:I,falseFn:x,formatNum:O,trim:V,splitWords:X,setOptions:F,getParamString:be,template:Ee,isArray:k,indexOf:A,emptyImageUrl:j,requestFn:C,cancelFn:ce,requestAnimFrame:ue,cancelAnimFrame:Q};function Ne(){}Ne.extend=function(e){var i=function(){F(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=i.__super__=this.prototype,a=u(r);a.constructor=i,i.prototype=a;for(var c in this)Object.prototype.hasOwnProperty.call(this,c)&&c!=="prototype"&&c!=="__super__"&&(i[c]=this[c]);return e.statics&&l(i,e.statics),e.includes&&($t(e.includes),l.apply(null,[a].concat(e.includes))),l(a,e),delete a.statics,delete a.includes,a.options&&(a.options=r.options?u(r.options):{},l(a.options,e.options)),a._initHooks=[],a.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var d=0,p=a._initHooks.length;d<p;d++)a._initHooks[d].call(this)}},i},Ne.include=function(e){var i=this.prototype.options;return l(this.prototype,e),e.options&&(this.prototype.options=i,this.mergeOptions(e.options)),this},Ne.mergeOptions=function(e){return l(this.prototype.options,e),this},Ne.addInitHook=function(e){var i=Array.prototype.slice.call(arguments,1),r=typeof e=="function"?e:function(){this[e].apply(this,i)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(r),this};function $t(e){if(!(typeof L>"u"||!L||!L.Mixin)){e=k(e)?e:[e];for(var i=0;i<e.length;i++)e[i]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ye={on:function(e,i,r){if(typeof e=="object")for(var a in e)this._on(a,e[a],i);else{e=X(e);for(var c=0,d=e.length;c<d;c++)this._on(e[c],i,r)}return this},off:function(e,i,r){if(!arguments.length)delete this._events;else if(typeof e=="object")for(var a in e)this._off(a,e[a],i);else{e=X(e);for(var c=arguments.length===1,d=0,p=e.length;d<p;d++)c?this._off(e[d]):this._off(e[d],i,r)}return this},_on:function(e,i,r,a){if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}if(this._listens(e,i,r)===!1){r===this&&(r=void 0);var c={fn:i,ctx:r};a&&(c.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(c)}},_off:function(e,i,r){var a,c,d;if(this._events&&(a=this._events[e],!!a)){if(arguments.length===1){if(this._firingCount)for(c=0,d=a.length;c<d;c++)a[c].fn=x;delete this._events[e];return}if(typeof i!="function"){console.warn("wrong listener type: "+typeof i);return}var p=this._listens(e,i,r);if(p!==!1){var g=a[p];this._firingCount&&(g.fn=x,this._events[e]=a=a.slice()),a.splice(p,1)}}},fire:function(e,i,r){if(!this.listens(e,r))return this;var a=l({},i,{type:e,target:this,sourceTarget:i&&i.sourceTarget||this});if(this._events){var c=this._events[e];if(c){this._firingCount=this._firingCount+1||1;for(var d=0,p=c.length;d<p;d++){var g=c[d],v=g.fn;g.once&&this.off(e,v,g.ctx),v.call(g.ctx||this,a)}this._firingCount--}}return r&&this._propagateEvent(a),this},listens:function(e,i,r,a){typeof e!="string"&&console.warn('"string" type argument expected');var c=i;typeof i!="function"&&(a=!!i,c=void 0,r=void 0);var d=this._events&&this._events[e];if(d&&d.length&&this._listens(e,c,r)!==!1)return!0;if(a){for(var p in this._eventParents)if(this._eventParents[p].listens(e,i,r,a))return!0}return!1},_listens:function(e,i,r){if(!this._events)return!1;var a=this._events[e]||[];if(!i)return!!a.length;r===this&&(r=void 0);for(var c=0,d=a.length;c<d;c++)if(a[c].fn===i&&a[c].ctx===r)return c;return!1},once:function(e,i,r){if(typeof e=="object")for(var a in e)this._on(a,e[a],i,!0);else{e=X(e);for(var c=0,d=e.length;c<d;c++)this._on(e[c],i,r,!0)}return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[m(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[m(e)],this},_propagateEvent:function(e){for(var i in this._eventParents)this._eventParents[i].fire(e.type,l({layer:e.target,propagatedFrom:e.target},e),!0)}};ye.addEventListener=ye.on,ye.removeEventListener=ye.clearAllEventListeners=ye.off,ye.addOneTimeEventListener=ye.once,ye.fireEvent=ye.fire,ye.hasEventListeners=ye.listens;var $e=Ne.extend(ye);function P(e,i,r){this.x=r?Math.round(e):e,this.y=r?Math.round(i):i}var de=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};P.prototype={clone:function(){return new P(this.x,this.y)},add:function(e){return this.clone()._add(R(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(R(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new P(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new P(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=de(this.x),this.y=de(this.y),this},distanceTo:function(e){e=R(e);var i=e.x-this.x,r=e.y-this.y;return Math.sqrt(i*i+r*r)},equals:function(e){return e=R(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=R(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return"Point("+O(this.x)+", "+O(this.y)+")"}};function R(e,i,r){return e instanceof P?e:k(e)?new P(e[0],e[1]):e==null?e:typeof e=="object"&&"x"in e&&"y"in e?new P(e.x,e.y):new P(e,i,r)}function H(e,i){if(e)for(var r=i?[e,i]:e,a=0,c=r.length;a<c;a++)this.extend(r[a])}H.prototype={extend:function(e){var i,r;if(!e)return this;if(e instanceof P||typeof e[0]=="number"||"x"in e)i=r=R(e);else if(e=xe(e),i=e.min,r=e.max,!i||!r)return this;return!this.min&&!this.max?(this.min=i.clone(),this.max=r.clone()):(this.min.x=Math.min(i.x,this.min.x),this.max.x=Math.max(r.x,this.max.x),this.min.y=Math.min(i.y,this.min.y),this.max.y=Math.max(r.y,this.max.y)),this},getCenter:function(e){return R((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return R(this.min.x,this.max.y)},getTopRight:function(){return R(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var i,r;return typeof e[0]=="number"||e instanceof P?e=R(e):e=xe(e),e instanceof H?(i=e.min,r=e.max):i=r=e,i.x>=this.min.x&&r.x<=this.max.x&&i.y>=this.min.y&&r.y<=this.max.y},intersects:function(e){e=xe(e);var i=this.min,r=this.max,a=e.min,c=e.max,d=c.x>=i.x&&a.x<=r.x,p=c.y>=i.y&&a.y<=r.y;return d&&p},overlaps:function(e){e=xe(e);var i=this.min,r=this.max,a=e.min,c=e.max,d=c.x>i.x&&a.x<r.x,p=c.y>i.y&&a.y<r.y;return d&&p},isValid:function(){return!!(this.min&&this.max)},pad:function(e){var i=this.min,r=this.max,a=Math.abs(i.x-r.x)*e,c=Math.abs(i.y-r.y)*e;return xe(R(i.x-a,i.y-c),R(r.x+a,r.y+c))},equals:function(e){return e?(e=xe(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight())):!1}};function xe(e,i){return!e||e instanceof H?e:new H(e,i)}function Ie(e,i){if(e)for(var r=i?[e,i]:e,a=0,c=r.length;a<c;a++)this.extend(r[a])}Ie.prototype={extend:function(e){var i=this._southWest,r=this._northEast,a,c;if(e instanceof J)a=e,c=e;else if(e instanceof Ie){if(a=e._southWest,c=e._northEast,!a||!c)return this}else return e?this.extend(B(e)||ne(e)):this;return!i&&!r?(this._southWest=new J(a.lat,a.lng),this._northEast=new J(c.lat,c.lng)):(i.lat=Math.min(a.lat,i.lat),i.lng=Math.min(a.lng,i.lng),r.lat=Math.max(c.lat,r.lat),r.lng=Math.max(c.lng,r.lng)),this},pad:function(e){var i=this._southWest,r=this._northEast,a=Math.abs(i.lat-r.lat)*e,c=Math.abs(i.lng-r.lng)*e;return new Ie(new J(i.lat-a,i.lng-c),new J(r.lat+a,r.lng+c))},getCenter:function(){return new J((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new J(this.getNorth(),this.getWest())},getSouthEast:function(){return new J(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){typeof e[0]=="number"||e instanceof J||"lat"in e?e=B(e):e=ne(e);var i=this._southWest,r=this._northEast,a,c;return e instanceof Ie?(a=e.getSouthWest(),c=e.getNorthEast()):a=c=e,a.lat>=i.lat&&c.lat<=r.lat&&a.lng>=i.lng&&c.lng<=r.lng},intersects:function(e){e=ne(e);var i=this._southWest,r=this._northEast,a=e.getSouthWest(),c=e.getNorthEast(),d=c.lat>=i.lat&&a.lat<=r.lat,p=c.lng>=i.lng&&a.lng<=r.lng;return d&&p},overlaps:function(e){e=ne(e);var i=this._southWest,r=this._northEast,a=e.getSouthWest(),c=e.getNorthEast(),d=c.lat>i.lat&&a.lat<r.lat,p=c.lng>i.lng&&a.lng<r.lng;return d&&p},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(e,i){return e?(e=ne(e),this._southWest.equals(e.getSouthWest(),i)&&this._northEast.equals(e.getNorthEast(),i)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ne(e,i){return e instanceof Ie?e:new Ie(e,i)}function J(e,i,r){if(isNaN(e)||isNaN(i))throw new Error("Invalid LatLng object: ("+e+", "+i+")");this.lat=+e,this.lng=+i,r!==void 0&&(this.alt=+r)}J.prototype={equals:function(e,i){if(!e)return!1;e=B(e);var r=Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng));return r<=(i===void 0?1e-9:i)},toString:function(e){return"LatLng("+O(this.lat,e)+", "+O(this.lng,e)+")"},distanceTo:function(e){return Xe.distance(this,B(e))},wrap:function(){return Xe.wrapLatLng(this)},toBounds:function(e){var i=180*e/40075017,r=i/Math.cos(Math.PI/180*this.lat);return ne([this.lat-i,this.lng-r],[this.lat+i,this.lng+r])},clone:function(){return new J(this.lat,this.lng,this.alt)}};function B(e,i,r){return e instanceof J?e:k(e)&&typeof e[0]!="object"?e.length===3?new J(e[0],e[1],e[2]):e.length===2?new J(e[0],e[1]):null:e==null?e:typeof e=="object"&&"lat"in e?new J(e.lat,"lng"in e?e.lng:e.lon,e.alt):i===void 0?null:new J(e,i,r)}var ze={latLngToPoint:function(e,i){var r=this.projection.project(e),a=this.scale(i);return this.transformation._transform(r,a)},pointToLatLng:function(e,i){var r=this.scale(i),a=this.transformation.untransform(e,r);return this.projection.unproject(a)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*Math.pow(2,e)},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var i=this.projection.bounds,r=this.scale(e),a=this.transformation.transform(i.min,r),c=this.transformation.transform(i.max,r);return new H(a,c)},infinite:!1,wrapLatLng:function(e){var i=this.wrapLng?I(e.lng,this.wrapLng,!0):e.lng,r=this.wrapLat?I(e.lat,this.wrapLat,!0):e.lat,a=e.alt;return new J(r,i,a)},wrapLatLngBounds:function(e){var i=e.getCenter(),r=this.wrapLatLng(i),a=i.lat-r.lat,c=i.lng-r.lng;if(a===0&&c===0)return e;var d=e.getSouthWest(),p=e.getNorthEast(),g=new J(d.lat-a,d.lng-c),v=new J(p.lat-a,p.lng-c);return new Ie(g,v)}},Xe=l({},ze,{wrapLng:[-180,180],R:6371e3,distance:function(e,i){var r=Math.PI/180,a=e.lat*r,c=i.lat*r,d=Math.sin((i.lat-e.lat)*r/2),p=Math.sin((i.lng-e.lng)*r/2),g=d*d+Math.cos(a)*Math.cos(c)*p*p,v=2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g));return this.R*v}}),mn=6378137,Xt={R:mn,MAX_LATITUDE:85.0511287798,project:function(e){var i=Math.PI/180,r=this.MAX_LATITUDE,a=Math.max(Math.min(r,e.lat),-r),c=Math.sin(a*i);return new P(this.R*e.lng*i,this.R*Math.log((1+c)/(1-c))/2)},unproject:function(e){var i=180/Math.PI;return new J((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*i,e.x*i/this.R)},bounds:function(){var e=mn*Math.PI;return new H([-e,-e],[e,e])}()};function Ii(e,i,r,a){if(k(e)){this._a=e[0],this._b=e[1],this._c=e[2],this._d=e[3];return}this._a=e,this._b=i,this._c=r,this._d=a}Ii.prototype={transform:function(e,i){return this._transform(e.clone(),i)},_transform:function(e,i){return i=i||1,e.x=i*(this._a*e.x+this._b),e.y=i*(this._c*e.y+this._d),e},untransform:function(e,i){return i=i||1,new P((e.x/i-this._b)/this._a,(e.y/i-this._d)/this._c)}};function Rt(e,i,r,a){return new Ii(e,i,r,a)}var Ti=l({},Xe,{code:"EPSG:3857",projection:Xt,transformation:function(){var e=.5/(Math.PI*Xt.R);return Rt(e,.5,-e,.5)}()}),hr=l({},Ti,{code:"EPSG:900913"});function Pi(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function _n(e,i){var r="",a,c,d,p,g,v;for(a=0,d=e.length;a<d;a++){for(g=e[a],c=0,p=g.length;c<p;c++)v=g[c],r+=(c?"L":"M")+v.x+" "+v.y;r+=i?N.svg?"z":"x":""}return r||"M0 0"}var Ei=document.documentElement.style,Qt="ActiveXObject"in window,gn=Qt&&!document.addEventListener,vn="msLaunchUri"in navigator&&!("documentMode"in document),Qe=it("webkit"),yn=it("android"),et=it("android 2")||it("android 3"),wn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Si=yn&&it("Google")&&wn<537&&!("AudioNode"in window),Pt=!!window.opera,bn=!vn&&it("chrome"),Ot=it("gecko")&&!Qe&&!Pt&&!Qt,fr=!bn&&it("safari"),ki=it("phantom"),xn="OTransition"in Ei,pr=navigator.platform.indexOf("Win")===0,Ci=Qt&&"transition"in Ei,y="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!et,W="MozPerspective"in Ei,K=!window.L_DISABLE_3D&&(Ci||y||W)&&!xn&&!ki,re=typeof orientation<"u"||it("mobile"),pe=re&&Qe,Be=re&&y,tt=!window.PointerEvent&&window.MSPointerEvent,se=!!(window.PointerEvent||tt),ft="ontouchstart"in window||!!window.TouchEvent,mr=!window.L_NO_TOUCH&&(ft||se),Nl=re&&Pt,Al=re&&Ot,Rl=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ol=function(){var e=!1;try{var i=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("testPassiveEventSupport",x,i),window.removeEventListener("testPassiveEventSupport",x,i)}catch{}return e}(),Ml=function(){return!!document.createElement("canvas").getContext}(),_r=!!(document.createElementNS&&Pi("svg").createSVGRect),Dl=!!_r&&function(){var e=document.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),jl=!_r&&function(){try{var e=document.createElement("div");e.innerHTML='<v:shape adj="1"/>';var i=e.firstChild;return i.style.behavior="url(#default#VML)",i&&typeof i.adj=="object"}catch{return!1}}(),zl=navigator.platform.indexOf("Mac")===0,Fl=navigator.platform.indexOf("Linux")===0;function it(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var N={ie:Qt,ielt9:gn,edge:vn,webkit:Qe,android:yn,android23:et,androidStock:Si,opera:Pt,chrome:bn,gecko:Ot,safari:fr,phantom:ki,opera12:xn,win:pr,ie3d:Ci,webkit3d:y,gecko3d:W,any3d:K,mobile:re,mobileWebkit:pe,mobileWebkit3d:Be,msPointer:tt,pointer:se,touch:mr,touchNative:ft,mobileOpera:Nl,mobileGecko:Al,retina:Rl,passiveEvents:Ol,canvas:Ml,svg:_r,vml:jl,inlineSvg:Dl,mac:zl,linux:Fl},Fs=N.msPointer?"MSPointerDown":"pointerdown",Us=N.msPointer?"MSPointerMove":"pointermove",Bs=N.msPointer?"MSPointerUp":"pointerup",Ws=N.msPointer?"MSPointerCancel":"pointercancel",gr={touchstart:Fs,touchmove:Us,touchend:Bs,touchcancel:Ws},Zs={touchstart:Hl,touchmove:In,touchend:In,touchcancel:In},ei={},Vs=!1;function Ul(e,i,r){return i==="touchstart"&&Vl(),Zs[i]?(r=Zs[i].bind(this,r),e.addEventListener(gr[i],r,!1),r):(console.warn("wrong event specified:",i),x)}function Bl(e,i,r){if(!gr[i]){console.warn("wrong event specified:",i);return}e.removeEventListener(gr[i],r,!1)}function Wl(e){ei[e.pointerId]=e}function Zl(e){ei[e.pointerId]&&(ei[e.pointerId]=e)}function Hs(e){delete ei[e.pointerId]}function Vl(){Vs||(document.addEventListener(Fs,Wl,!0),document.addEventListener(Us,Zl,!0),document.addEventListener(Bs,Hs,!0),document.addEventListener(Ws,Hs,!0),Vs=!0)}function In(e,i){if(i.pointerType!==(i.MSPOINTER_TYPE_MOUSE||"mouse")){i.touches=[];for(var r in ei)i.touches.push(ei[r]);i.changedTouches=[i],e(i)}}function Hl(e,i){i.MSPOINTER_TYPE_TOUCH&&i.pointerType===i.MSPOINTER_TYPE_TOUCH&&Se(i),In(e,i)}function ql(e){var i={},r,a;for(a in e)r=e[a],i[a]=r&&r.bind?r.bind(e):r;return e=i,i.type="dblclick",i.detail=2,i.isTrusted=!1,i._simulated=!0,i}var Gl=200;function Kl(e,i){e.addEventListener("dblclick",i);var r=0,a;function c(d){if(d.detail!==1){a=d.detail;return}if(!(d.pointerType==="mouse"||d.sourceCapabilities&&!d.sourceCapabilities.firesTouchEvents)){var p=Js(d);if(!(p.some(function(v){return v instanceof HTMLLabelElement&&v.attributes.for})&&!p.some(function(v){return v instanceof HTMLInputElement||v instanceof HTMLSelectElement}))){var g=Date.now();g-r<=Gl?(a++,a===2&&i(ql(d))):a=1,r=g}}}return e.addEventListener("click",c),{dblclick:i,simDblclick:c}}function Yl(e,i){e.removeEventListener("dblclick",i.dblclick),e.removeEventListener("click",i.simDblclick)}var vr=En(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Li=En(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),qs=Li==="webkitTransition"||Li==="OTransition"?Li+"End":"transitionend";function Gs(e){return typeof e=="string"?document.getElementById(e):e}function Ni(e,i){var r=e.style[i]||e.currentStyle&&e.currentStyle[i];if((!r||r==="auto")&&document.defaultView){var a=document.defaultView.getComputedStyle(e,null);r=a?a[i]:null}return r==="auto"?null:r}function $(e,i,r){var a=document.createElement(e);return a.className=i||"",r&&r.appendChild(a),a}function ie(e){var i=e.parentNode;i&&i.removeChild(e)}function Tn(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function ti(e){var i=e.parentNode;i&&i.lastChild!==e&&i.appendChild(e)}function ii(e){var i=e.parentNode;i&&i.firstChild!==e&&i.insertBefore(e,i.firstChild)}function yr(e,i){if(e.classList!==void 0)return e.classList.contains(i);var r=Pn(e);return r.length>0&&new RegExp("(^|\\s)"+i+"(\\s|$)").test(r)}function U(e,i){if(e.classList!==void 0)for(var r=X(i),a=0,c=r.length;a<c;a++)e.classList.add(r[a]);else if(!yr(e,i)){var d=Pn(e);wr(e,(d?d+" ":"")+i)}}function he(e,i){e.classList!==void 0?e.classList.remove(i):wr(e,V((" "+Pn(e)+" ").replace(" "+i+" "," ")))}function wr(e,i){e.className.baseVal===void 0?e.className=i:e.className.baseVal=i}function Pn(e){return e.correspondingElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function We(e,i){"opacity"in e.style?e.style.opacity=i:"filter"in e.style&&Jl(e,i)}function Jl(e,i){var r=!1,a="DXImageTransform.Microsoft.Alpha";try{r=e.filters.item(a)}catch{if(i===1)return}i=Math.round(i*100),r?(r.Enabled=i!==100,r.Opacity=i):e.style.filter+=" progid:"+a+"(opacity="+i+")"}function En(e){for(var i=document.documentElement.style,r=0;r<e.length;r++)if(e[r]in i)return e[r];return!1}function Mt(e,i,r){var a=i||new P(0,0);e.style[vr]=(N.ie3d?"translate("+a.x+"px,"+a.y+"px)":"translate3d("+a.x+"px,"+a.y+"px,0)")+(r?" scale("+r+")":"")}function me(e,i){e._leaflet_pos=i,N.any3d?Mt(e,i):(e.style.left=i.x+"px",e.style.top=i.y+"px")}function Dt(e){return e._leaflet_pos||new P(0,0)}var Ai,Ri,br;if("onselectstart"in document)Ai=function(){z(window,"selectstart",Se)},Ri=function(){ee(window,"selectstart",Se)};else{var Oi=En(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Ai=function(){if(Oi){var e=document.documentElement.style;br=e[Oi],e[Oi]="none"}},Ri=function(){Oi&&(document.documentElement.style[Oi]=br,br=void 0)}}function xr(){z(window,"dragstart",Se)}function Ir(){ee(window,"dragstart",Se)}var Sn,Tr;function Pr(e){for(;e.tabIndex===-1;)e=e.parentNode;e.style&&(kn(),Sn=e,Tr=e.style.outlineStyle,e.style.outlineStyle="none",z(window,"keydown",kn))}function kn(){Sn&&(Sn.style.outlineStyle=Tr,Sn=void 0,Tr=void 0,ee(window,"keydown",kn))}function Ks(e){do e=e.parentNode;while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function Er(e){var i=e.getBoundingClientRect();return{x:i.width/e.offsetWidth||1,y:i.height/e.offsetHeight||1,boundingClientRect:i}}var $l={__proto__:null,TRANSFORM:vr,TRANSITION:Li,TRANSITION_END:qs,get:Gs,getStyle:Ni,create:$,remove:ie,empty:Tn,toFront:ti,toBack:ii,hasClass:yr,addClass:U,removeClass:he,setClass:wr,getClass:Pn,setOpacity:We,testProp:En,setTransform:Mt,setPosition:me,getPosition:Dt,get disableTextSelection(){return Ai},get enableTextSelection(){return Ri},disableImageDrag:xr,enableImageDrag:Ir,preventOutline:Pr,restoreOutline:kn,getSizedParentNode:Ks,getScale:Er};function z(e,i,r,a){if(i&&typeof i=="object")for(var c in i)kr(e,c,i[c],r);else{i=X(i);for(var d=0,p=i.length;d<p;d++)kr(e,i[d],r,a)}return this}var nt="_leaflet_events";function ee(e,i,r,a){if(arguments.length===1)Ys(e),delete e[nt];else if(i&&typeof i=="object")for(var c in i)Cr(e,c,i[c],r);else if(i=X(i),arguments.length===2)Ys(e,function(g){return A(i,g)!==-1});else for(var d=0,p=i.length;d<p;d++)Cr(e,i[d],r,a);return this}function Ys(e,i){for(var r in e[nt]){var a=r.split(/\d/)[0];(!i||i(a))&&Cr(e,a,null,null,r)}}var Sr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function kr(e,i,r,a){var c=i+m(r)+(a?"_"+m(a):"");if(e[nt]&&e[nt][c])return this;var d=function(g){return r.call(a||e,g||window.event)},p=d;!N.touchNative&&N.pointer&&i.indexOf("touch")===0?d=Ul(e,i,d):N.touch&&i==="dblclick"?d=Kl(e,d):"addEventListener"in e?i==="touchstart"||i==="touchmove"||i==="wheel"||i==="mousewheel"?e.addEventListener(Sr[i]||i,d,N.passiveEvents?{passive:!1}:!1):i==="mouseenter"||i==="mouseleave"?(d=function(g){g=g||window.event,Nr(e,g)&&p(g)},e.addEventListener(Sr[i],d,!1)):e.addEventListener(i,p,!1):e.attachEvent("on"+i,d),e[nt]=e[nt]||{},e[nt][c]=d}function Cr(e,i,r,a,c){c=c||i+m(r)+(a?"_"+m(a):"");var d=e[nt]&&e[nt][c];if(!d)return this;!N.touchNative&&N.pointer&&i.indexOf("touch")===0?Bl(e,i,d):N.touch&&i==="dblclick"?Yl(e,d):"removeEventListener"in e?e.removeEventListener(Sr[i]||i,d,!1):e.detachEvent("on"+i,d),e[nt][c]=null}function jt(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Lr(e){return kr(e,"wheel",jt),this}function Mi(e){return z(e,"mousedown touchstart dblclick contextmenu",jt),e._leaflet_disable_click=!0,this}function Se(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function zt(e){return Se(e),jt(e),this}function Js(e){if(e.composedPath)return e.composedPath();for(var i=[],r=e.target;r;)i.push(r),r=r.parentNode;return i}function $s(e,i){if(!i)return new P(e.clientX,e.clientY);var r=Er(i),a=r.boundingClientRect;return new P((e.clientX-a.left)/r.x-i.clientLeft,(e.clientY-a.top)/r.y-i.clientTop)}var Xl=N.linux&&N.chrome?window.devicePixelRatio:N.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Xs(e){return N.edge?e.wheelDeltaY/2:e.deltaY&&e.deltaMode===0?-e.deltaY/Xl:e.deltaY&&e.deltaMode===1?-e.deltaY*20:e.deltaY&&e.deltaMode===2?-e.deltaY*60:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?-e.detail*20:e.detail?e.detail/-32765*60:0}function Nr(e,i){var r=i.relatedTarget;if(!r)return!0;try{for(;r&&r!==e;)r=r.parentNode}catch{return!1}return r!==e}var Ql={__proto__:null,on:z,off:ee,stopPropagation:jt,disableScrollPropagation:Lr,disableClickPropagation:Mi,preventDefault:Se,stop:zt,getPropagationPath:Js,getMousePosition:$s,getWheelDelta:Xs,isExternalTarget:Nr,addListener:z,removeListener:ee},Qs=$e.extend({run:function(e,i,r,a){this.stop(),this._el=e,this._inProgress=!0,this._duration=r||.25,this._easeOutPower=1/Math.max(a||.5,.2),this._startPos=Dt(e),this._offset=i.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ue(this._animate,this),this._step()},_step:function(e){var i=+new Date-this._startTime,r=this._duration*1e3;i<r?this._runFrame(this._easeOut(i/r),e):(this._runFrame(1),this._complete())},_runFrame:function(e,i){var r=this._startPos.add(this._offset.multiplyBy(e));i&&r._round(),me(this._el,r),this.fire("step")},_complete:function(){Q(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(e){return 1-Math.pow(1-e,this._easeOutPower)}}),q=$e.extend({options:{crs:Ti,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,i){i=F(this,i),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=f(this._onResize,this),this._initEvents(),i.maxBounds&&this.setMaxBounds(i.maxBounds),i.zoom!==void 0&&(this._zoom=this._limitZoom(i.zoom)),i.center&&i.zoom!==void 0&&this.setView(B(i.center),i.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Li&&N.any3d&&!N.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),z(this._proxy,qs,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,i,r){if(i=i===void 0?this._zoom:this._limitZoom(i),e=this._limitCenter(B(e),i,this.options.maxBounds),r=r||{},this._stop(),this._loaded&&!r.reset&&r!==!0){r.animate!==void 0&&(r.zoom=l({animate:r.animate},r.zoom),r.pan=l({animate:r.animate,duration:r.duration},r.pan));var a=this._zoom!==i?this._tryAnimatedZoom&&this._tryAnimatedZoom(e,i,r.zoom):this._tryAnimatedPan(e,r.pan);if(a)return clearTimeout(this._sizeTimer),this}return this._resetView(e,i,r.pan&&r.pan.noMoveStart),this},setZoom:function(e,i){return this._loaded?this.setView(this.getCenter(),e,{zoom:i}):(this._zoom=e,this)},zoomIn:function(e,i){return e=e||(N.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+e,i)},zoomOut:function(e,i){return e=e||(N.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-e,i)},setZoomAround:function(e,i,r){var a=this.getZoomScale(i),c=this.getSize().divideBy(2),d=e instanceof P?e:this.latLngToContainerPoint(e),p=d.subtract(c).multiplyBy(1-1/a),g=this.containerPointToLatLng(c.add(p));return this.setView(g,i,{zoom:r})},_getBoundsCenterZoom:function(e,i){i=i||{},e=e.getBounds?e.getBounds():ne(e);var r=R(i.paddingTopLeft||i.padding||[0,0]),a=R(i.paddingBottomRight||i.padding||[0,0]),c=this.getBoundsZoom(e,!1,r.add(a));if(c=typeof i.maxZoom=="number"?Math.min(i.maxZoom,c):c,c===1/0)return{center:e.getCenter(),zoom:c};var d=a.subtract(r).divideBy(2),p=this.project(e.getSouthWest(),c),g=this.project(e.getNorthEast(),c),v=this.unproject(p.add(g).divideBy(2).add(d),c);return{center:v,zoom:c}},fitBounds:function(e,i){if(e=ne(e),!e.isValid())throw new Error("Bounds are not valid.");var r=this._getBoundsCenterZoom(e,i);return this.setView(r.center,r.zoom,i)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,i){return this.setView(e,this._zoom,{pan:i})},panBy:function(e,i){if(e=R(e).round(),i=i||{},!e.x&&!e.y)return this.fire("moveend");if(i.animate!==!0&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Qs,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),i.noMoveStart||this.fire("movestart"),i.animate!==!1){U(this._mapPane,"leaflet-pan-anim");var r=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,r,i.duration||.25,i.easeLinearity)}else this._rawPanBy(e),this.fire("move").fire("moveend");return this},flyTo:function(e,i,r){if(r=r||{},r.animate===!1||!N.any3d)return this.setView(e,i,r);this._stop();var a=this.project(this.getCenter()),c=this.project(e),d=this.getSize(),p=this._zoom;e=B(e),i=i===void 0?p:i;var g=Math.max(d.x,d.y),v=g*this.getZoomScale(p,i),b=c.distanceTo(a)||1,S=1.42,M=S*S;function Z(_e){var Un=_e?-1:1,Bc=_e?v:g,Wc=v*v-g*g+Un*M*M*b*b,Zc=2*Bc*M*b,Wr=Wc/Zc,Oo=Math.sqrt(Wr*Wr+1)-Wr,Vc=Oo<1e-9?-18:Math.log(Oo);return Vc}function Ae(_e){return(Math.exp(_e)-Math.exp(-_e))/2}function Te(_e){return(Math.exp(_e)+Math.exp(-_e))/2}function Ve(_e){return Ae(_e)/Te(_e)}var Me=Z(0);function li(_e){return g*(Te(Me)/Te(Me+S*_e))}function jc(_e){return g*(Te(Me)*Ve(Me+S*_e)-Ae(Me))/M}function zc(_e){return 1-Math.pow(1-_e,1.5)}var Fc=Date.now(),Ao=(Z(1)-Me)/S,Uc=r.duration?1e3*r.duration:1e3*Ao*.8;function Ro(){var _e=(Date.now()-Fc)/Uc,Un=zc(_e)*Ao;_e<=1?(this._flyToFrame=ue(Ro,this),this._move(this.unproject(a.add(c.subtract(a).multiplyBy(jc(Un)/b)),p),this.getScaleZoom(g/li(Un),p),{flyTo:!0})):this._move(e,i)._moveEnd(!0)}return this._moveStart(!0,r.noMoveStart),Ro.call(this),this},flyToBounds:function(e,i){var r=this._getBoundsCenterZoom(e,i);return this.flyTo(r.center,r.zoom,i)},setMaxBounds:function(e){return e=ne(e),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var i=this.options.minZoom;return this.options.minZoom=e,this._loaded&&i!==e&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var i=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&i!==e&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,i){this._enforcingBounds=!0;var r=this.getCenter(),a=this._limitCenter(r,this._zoom,ne(e));return r.equals(a)||this.panTo(a,i),this._enforcingBounds=!1,this},panInside:function(e,i){i=i||{};var r=R(i.paddingTopLeft||i.padding||[0,0]),a=R(i.paddingBottomRight||i.padding||[0,0]),c=this.project(this.getCenter()),d=this.project(e),p=this.getPixelBounds(),g=xe([p.min.add(r),p.max.subtract(a)]),v=g.getSize();if(!g.contains(d)){this._enforcingBounds=!0;var b=d.subtract(g.getCenter()),S=g.extend(d).getSize().subtract(v);c.x+=b.x<0?-S.x:S.x,c.y+=b.y<0?-S.y:S.y,this.panTo(this.unproject(c),i),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=l({animate:!1,pan:!0},e===!0?{animate:!0}:e);var i=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),a=i.divideBy(2).round(),c=r.divideBy(2).round(),d=a.subtract(c);return!d.x&&!d.y?this:(e.animate&&e.pan?this.panBy(d):(e.pan&&this._rawPanBy(d),this.fire("move"),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(f(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:i,newSize:r}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(e){if(e=this._locateOptions=l({timeout:1e4,watch:!1},e),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var i=f(this._handleGeolocationResponse,this),r=f(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(i,r,e):navigator.geolocation.getCurrentPosition(i,r,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var i=e.code,r=e.message||(i===1?"permission denied":i===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:i,message:"Geolocation error: "+r+"."})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var i=e.coords.latitude,r=e.coords.longitude,a=new J(i,r),c=a.toBounds(e.coords.accuracy*2),d=this._locateOptions;if(d.setView){var p=this.getBoundsZoom(c);this.setView(a,d.maxZoom?Math.min(p,d.maxZoom):p)}var g={latlng:a,bounds:c,timestamp:e.timestamp};for(var v in e.coords)typeof e.coords[v]=="number"&&(g[v]=e.coords[v]);this.fire("locationfound",g)}},addHandler:function(e,i){if(!i)return this;var r=this[e]=new i(this);return this._handlers.push(r),this.options[e]&&r.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ie(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Q(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var e;for(e in this._layers)this._layers[e].remove();for(e in this._panes)ie(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,i){var r="leaflet-pane"+(e?" leaflet-"+e.replace("Pane","")+"-pane":""),a=$("div",r,i||this._mapPane);return e&&(this._panes[e]=a),a},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds(),i=this.unproject(e.getBottomLeft()),r=this.unproject(e.getTopRight());return new Ie(i,r)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,i,r){e=ne(e),r=R(r||[0,0]);var a=this.getZoom()||0,c=this.getMinZoom(),d=this.getMaxZoom(),p=e.getNorthWest(),g=e.getSouthEast(),v=this.getSize().subtract(r),b=xe(this.project(g,a),this.project(p,a)).getSize(),S=N.any3d?this.options.zoomSnap:1,M=v.x/b.x,Z=v.y/b.y,Ae=i?Math.max(M,Z):Math.min(M,Z);return a=this.getScaleZoom(Ae,a),S&&(a=Math.round(a/(S/100))*(S/100),a=i?Math.ceil(a/S)*S:Math.floor(a/S)*S),Math.max(c,Math.min(d,a))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new P(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,i){var r=this._getTopLeftPoint(e,i);return new H(r,r.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return typeof e=="string"?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,i){var r=this.options.crs;return i=i===void 0?this._zoom:i,r.scale(e)/r.scale(i)},getScaleZoom:function(e,i){var r=this.options.crs;i=i===void 0?this._zoom:i;var a=r.zoom(e*r.scale(i));return isNaN(a)?1/0:a},project:function(e,i){return i=i===void 0?this._zoom:i,this.options.crs.latLngToPoint(B(e),i)},unproject:function(e,i){return i=i===void 0?this._zoom:i,this.options.crs.pointToLatLng(R(e),i)},layerPointToLatLng:function(e){var i=R(e).add(this.getPixelOrigin());return this.unproject(i)},latLngToLayerPoint:function(e){var i=this.project(B(e))._round();return i._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(B(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(ne(e))},distance:function(e,i){return this.options.crs.distance(B(e),B(i))},containerPointToLayerPoint:function(e){return R(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return R(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var i=this.containerPointToLayerPoint(R(e));return this.layerPointToLatLng(i)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(B(e)))},mouseEventToContainerPoint:function(e){return $s(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var i=this._container=Gs(e);if(i){if(i._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");z(i,"scroll",this._onScroll,this),this._containerId=m(i)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&N.any3d,U(e,"leaflet-container"+(N.touch?" leaflet-touch":"")+(N.retina?" leaflet-retina":"")+(N.ielt9?" leaflet-oldie":"")+(N.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var i=Ni(e,"position");i!=="absolute"&&i!=="relative"&&i!=="fixed"&&i!=="sticky"&&(e.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),me(this._mapPane,new P(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(U(e.markerPane,"leaflet-zoom-hide"),U(e.shadowPane,"leaflet-zoom-hide"))},_resetView:function(e,i,r){me(this._mapPane,new P(0,0));var a=!this._loaded;this._loaded=!0,i=this._limitZoom(i),this.fire("viewprereset");var c=this._zoom!==i;this._moveStart(c,r)._move(e,i)._moveEnd(c),this.fire("viewreset"),a&&this.fire("load")},_moveStart:function(e,i){return e&&this.fire("zoomstart"),i||this.fire("movestart"),this},_move:function(e,i,r,a){i===void 0&&(i=this._zoom);var c=this._zoom!==i;return this._zoom=i,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),a?r&&r.pinch&&this.fire("zoom",r):((c||r&&r.pinch)&&this.fire("zoom",r),this.fire("move",r)),this},_moveEnd:function(e){return e&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Q(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){me(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){this._targets={},this._targets[m(this._container)]=this;var i=e?ee:z;i(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&i(window,"resize",this._onResize,this),N.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Q(this._resizeRequest),this._resizeRequest=ue(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,i){for(var r=[],a,c=i==="mouseout"||i==="mouseover",d=e.target||e.srcElement,p=!1;d;){if(a=this._targets[m(d)],a&&(i==="click"||i==="preclick")&&this._draggableMoved(a)){p=!0;break}if(a&&a.listens(i,!0)&&(c&&!Nr(d,e)||(r.push(a),c))||d===this._container)break;d=d.parentNode}return!r.length&&!p&&!c&&this.listens(i,!0)&&(r=[this]),r},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var i=e.target||e.srcElement;if(!(!this._loaded||i._leaflet_disable_events||e.type==="click"&&this._isClickDisabled(i))){var r=e.type;r==="mousedown"&&Pr(i),this._fireDOMEvent(e,r)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(e,i,r){if(e.type==="click"){var a=l({},e);a.type="preclick",this._fireDOMEvent(a,a.type,r)}var c=this._findEventTargets(e,i);if(r){for(var d=[],p=0;p<r.length;p++)r[p].listens(i,!0)&&d.push(r[p]);c=d.concat(c)}if(c.length){i==="contextmenu"&&Se(e);var g=c[0],v={originalEvent:e};if(e.type!=="keypress"&&e.type!=="keydown"&&e.type!=="keyup"){var b=g.getLatLng&&(!g._radius||g._radius<=10);v.containerPoint=b?this.latLngToContainerPoint(g.getLatLng()):this.mouseEventToContainerPoint(e),v.layerPoint=this.containerPointToLayerPoint(v.containerPoint),v.latlng=b?g.getLatLng():this.layerPointToLatLng(v.layerPoint)}for(p=0;p<c.length;p++)if(c[p].fire(i,v,!0),v.originalEvent._stopped||c[p].options.bubblingMouseEvents===!1&&A(this._mouseEvents,i)!==-1)return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,i=this._handlers.length;e<i;e++)this._handlers[e].disable()},whenReady:function(e,i){return this._loaded?e.call(i||this,{target:this}):this.on("load",e,i),this},_getMapPanePos:function(){return Dt(this._mapPane)||new P(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,i){var r=e&&i!==void 0?this._getNewPixelOrigin(e,i):this.getPixelOrigin();return r.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,i){var r=this.getSize()._divideBy(2);return this.project(e,i)._subtract(r)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,i,r){var a=this._getNewPixelOrigin(r,i);return this.project(e,i)._subtract(a)},_latLngBoundsToNewLayerBounds:function(e,i,r){var a=this._getNewPixelOrigin(r,i);return xe([this.project(e.getSouthWest(),i)._subtract(a),this.project(e.getNorthWest(),i)._subtract(a),this.project(e.getSouthEast(),i)._subtract(a),this.project(e.getNorthEast(),i)._subtract(a)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,i,r){if(!r)return e;var a=this.project(e,i),c=this.getSize().divideBy(2),d=new H(a.subtract(c),a.add(c)),p=this._getBoundsOffset(d,r,i);return Math.abs(p.x)<=1&&Math.abs(p.y)<=1?e:this.unproject(a.add(p),i)},_limitOffset:function(e,i){if(!i)return e;var r=this.getPixelBounds(),a=new H(r.min.add(e),r.max.add(e));return e.add(this._getBoundsOffset(a,i))},_getBoundsOffset:function(e,i,r){var a=xe(this.project(i.getNorthEast(),r),this.project(i.getSouthWest(),r)),c=a.min.subtract(e.min),d=a.max.subtract(e.max),p=this._rebound(c.x,-d.x),g=this._rebound(c.y,-d.y);return new P(p,g)},_rebound:function(e,i){return e+i>0?Math.round(e-i)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(i))},_limitZoom:function(e){var i=this.getMinZoom(),r=this.getMaxZoom(),a=N.any3d?this.options.zoomSnap:1;return a&&(e=Math.round(e/a)*a),Math.max(i,Math.min(r,e))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){he(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(e,i){var r=this._getCenterOffset(e)._trunc();return(i&&i.animate)!==!0&&!this.getSize().contains(r)?!1:(this.panBy(r,i),!0)},_createAnimProxy:function(){var e=this._proxy=$("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(e),this.on("zoomanim",function(i){var r=vr,a=this._proxy.style[r];Mt(this._proxy,this.project(i.center,i.zoom),this.getZoomScale(i.zoom,1)),a===this._proxy.style[r]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ie(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),i=this.getZoom();Mt(this._proxy,this.project(e,i),this.getZoomScale(i,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(e,i,r){if(this._animatingZoom)return!0;if(r=r||{},!this._zoomAnimated||r.animate===!1||this._nothingToAnimate()||Math.abs(i-this._zoom)>this.options.zoomAnimationThreshold)return!1;var a=this.getZoomScale(i),c=this._getCenterOffset(e)._divideBy(1-1/a);return r.animate!==!0&&!this.getSize().contains(c)?!1:(ue(function(){this._moveStart(!0,r.noMoveStart||!1)._animateZoom(e,i,!0)},this),!0)},_animateZoom:function(e,i,r,a){this._mapPane&&(r&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=i,U(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:e,zoom:i,noUpdate:a}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(f(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&he(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ec(e,i){return new q(e,i)}var Ke=Ne.extend({options:{position:"topright"},initialize:function(e){F(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var i=this._map;return i&&i.removeControl(this),this.options.position=e,i&&i.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var i=this._container=this.onAdd(e),r=this.getPosition(),a=e._controlCorners[r];return U(i,"leaflet-control"),r.indexOf("bottom")!==-1?a.insertBefore(i,a.firstChild):a.appendChild(i),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ie(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),Di=function(e){return new Ke(e)};q.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},i="leaflet-",r=this._controlContainer=$("div",i+"control-container",this._container);function a(c,d){var p=i+c+" "+i+d;e[c+d]=$("div",p,r)}a("top","left"),a("top","right"),a("bottom","left"),a("bottom","right")},_clearControlPos:function(){for(var e in this._controlCorners)ie(this._controlCorners[e]);ie(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var eo=Ke.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,i,r,a){return r<a?-1:a<r?1:0}},initialize:function(e,i,r){F(this,r),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var a in e)this._addLayer(e[a],a);for(a in i)this._addLayer(i[a],a,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on("zoomend",this._checkDisabledLayers,this);for(var i=0;i<this._layers.length;i++)this._layers[i].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(e){return Ke.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(e,i){return this._addLayer(e,i),this._map?this._update():this},addOverlay:function(e,i){return this._addLayer(e,i,!0),this._map?this._update():this},removeLayer:function(e){e.off("add remove",this._onLayerChange,this);var i=this._getLayer(m(e));return i&&this._layers.splice(this._layers.indexOf(i),1),this._map?this._update():this},expand:function(){U(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(U(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=e+"px"):he(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return he(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var e="leaflet-control-layers",i=this._container=$("div",e),r=this.options.collapsed;i.setAttribute("aria-haspopup",!0),Mi(i),Lr(i);var a=this._section=$("section",e+"-list");r&&(this._map.on("click",this.collapse,this),z(i,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var c=this._layersLink=$("a",e+"-toggle",i);c.href="#",c.title="Layers",c.setAttribute("role","button"),z(c,{keydown:function(d){d.keyCode===13&&this._expandSafely()},click:function(d){Se(d),this._expandSafely()}},this),r||this.expand(),this._baseLayersList=$("div",e+"-base",a),this._separator=$("div",e+"-separator",a),this._overlaysList=$("div",e+"-overlays",a),i.appendChild(a)},_getLayer:function(e){for(var i=0;i<this._layers.length;i++)if(this._layers[i]&&m(this._layers[i].layer)===e)return this._layers[i]},_addLayer:function(e,i,r){this._map&&e.on("add remove",this._onLayerChange,this),this._layers.push({layer:e,name:i,overlay:r}),this.options.sortLayers&&this._layers.sort(f(function(a,c){return this.options.sortFunction(a.layer,c.layer,a.name,c.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Tn(this._baseLayersList),Tn(this._overlaysList),this._layerControlInputs=[];var e,i,r,a,c=0;for(r=0;r<this._layers.length;r++)a=this._layers[r],this._addItem(a),i=i||a.overlay,e=e||!a.overlay,c+=a.overlay?0:1;return this.options.hideSingleBase&&(e=e&&c>1,this._baseLayersList.style.display=e?"":"none"),this._separator.style.display=i&&e?"":"none",this},_onLayerChange:function(e){this._handlingClick||this._update();var i=this._getLayer(m(e.target)),r=i.overlay?e.type==="add"?"overlayadd":"overlayremove":e.type==="add"?"baselayerchange":null;r&&this._map.fire(r,i)},_createRadioElement:function(e,i){var r='<input type="radio" class="leaflet-control-layers-selector" name="'+e+'"'+(i?' checked="checked"':"")+"/>",a=document.createElement("div");return a.innerHTML=r,a.firstChild},_addItem:function(e){var i=document.createElement("label"),r=this._map.hasLayer(e.layer),a;e.overlay?(a=document.createElement("input"),a.type="checkbox",a.className="leaflet-control-layers-selector",a.defaultChecked=r):a=this._createRadioElement("leaflet-base-layers_"+m(this),r),this._layerControlInputs.push(a),a.layerId=m(e.layer),z(a,"click",this._onInputClick,this);var c=document.createElement("span");c.innerHTML=" "+e.name;var d=document.createElement("span");i.appendChild(d),d.appendChild(a),d.appendChild(c);var p=e.overlay?this._overlaysList:this._baseLayersList;return p.appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){if(!this._preventClick){var e=this._layerControlInputs,i,r,a=[],c=[];this._handlingClick=!0;for(var d=e.length-1;d>=0;d--)i=e[d],r=this._getLayer(i.layerId).layer,i.checked?a.push(r):i.checked||c.push(r);for(d=0;d<c.length;d++)this._map.hasLayer(c[d])&&this._map.removeLayer(c[d]);for(d=0;d<a.length;d++)this._map.hasLayer(a[d])||this._map.addLayer(a[d]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e=this._layerControlInputs,i,r,a=this._map.getZoom(),c=e.length-1;c>=0;c--)i=e[c],r=this._getLayer(i.layerId).layer,i.disabled=r.options.minZoom!==void 0&&a<r.options.minZoom||r.options.maxZoom!==void 0&&a>r.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,z(e,"click",Se),this.expand();var i=this;setTimeout(function(){ee(e,"click",Se),i._preventClick=!1})}}),tc=function(e,i,r){return new eo(e,i,r)},Ar=Ke.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(e){var i="leaflet-control-zoom",r=$("div",i+" leaflet-bar"),a=this.options;return this._zoomInButton=this._createButton(a.zoomInText,a.zoomInTitle,i+"-in",r,this._zoomIn),this._zoomOutButton=this._createButton(a.zoomOutText,a.zoomOutTitle,i+"-out",r,this._zoomOut),this._updateDisabled(),e.on("zoomend zoomlevelschange",this._updateDisabled,this),r},onRemove:function(e){e.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,i,r,a,c){var d=$("a",r,a);return d.innerHTML=e,d.href="#",d.title=i,d.setAttribute("role","button"),d.setAttribute("aria-label",i),Mi(d),z(d,"click",zt),z(d,"click",c,this),z(d,"click",this._refocusOnMap,this),d},_updateDisabled:function(){var e=this._map,i="leaflet-disabled";he(this._zoomInButton,i),he(this._zoomOutButton,i),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||e._zoom===e.getMinZoom())&&(U(this._zoomOutButton,i),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||e._zoom===e.getMaxZoom())&&(U(this._zoomInButton,i),this._zoomInButton.setAttribute("aria-disabled","true"))}});q.mergeOptions({zoomControl:!0}),q.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Ar,this.addControl(this.zoomControl))});var ic=function(e){return new Ar(e)},to=Ke.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var i="leaflet-control-scale",r=$("div",i),a=this.options;return this._addScales(a,i+"-line",r),e.on(a.updateWhenIdle?"moveend":"move",this._update,this),e.whenReady(this._update,this),r},onRemove:function(e){e.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(e,i,r){e.metric&&(this._mScale=$("div",i,r)),e.imperial&&(this._iScale=$("div",i,r))},_update:function(){var e=this._map,i=e.getSize().y/2,r=e.distance(e.containerPointToLatLng([0,i]),e.containerPointToLatLng([this.options.maxWidth,i]));this._updateScales(r)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var i=this._getRoundNum(e),r=i<1e3?i+" m":i/1e3+" km";this._updateScale(this._mScale,r,i/e)},_updateImperial:function(e){var i=e*3.2808399,r,a,c;i>5280?(r=i/5280,a=this._getRoundNum(r),this._updateScale(this._iScale,a+" mi",a/r)):(c=this._getRoundNum(i),this._updateScale(this._iScale,c+" ft",c/i))},_updateScale:function(e,i,r){e.style.width=Math.round(this.options.maxWidth*r)+"px",e.innerHTML=i},_getRoundNum:function(e){var i=Math.pow(10,(Math.floor(e)+"").length-1),r=e/i;return r=r>=10?10:r>=5?5:r>=3?3:r>=2?2:1,i*r}}),nc=function(e){return new to(e)},rc='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Rr=Ke.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(N.inlineSvg?rc+" ":"")+"Leaflet</a>"},initialize:function(e){F(this,e),this._attributions={}},onAdd:function(e){e.attributionControl=this,this._container=$("div","leaflet-control-attribution"),Mi(this._container);for(var i in e._layers)e._layers[i].getAttribution&&this.addAttribution(e._layers[i].getAttribution());return this._update(),e.on("layeradd",this._addAttribution,this),this._container},onRemove:function(e){e.off("layeradd",this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once("remove",function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e?(this._attributions[e]&&(this._attributions[e]--,this._update()),this):this},_update:function(){if(this._map){var e=[];for(var i in this._attributions)this._attributions[i]&&e.push(i);var r=[];this.options.prefix&&r.push(this.options.prefix),e.length&&r.push(e.join(", ")),this._container.innerHTML=r.join(' <span aria-hidden="true">|</span> ')}}});q.mergeOptions({attributionControl:!0}),q.addInitHook(function(){this.options.attributionControl&&new Rr().addTo(this)});var sc=function(e){return new Rr(e)};Ke.Layers=eo,Ke.Zoom=Ar,Ke.Scale=to,Ke.Attribution=Rr,Di.layers=tc,Di.zoom=ic,Di.scale=nc,Di.attribution=sc;var rt=Ne.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});rt.addTo=function(e,i){return e.addHandler(i,this),this};var oc={Events:ye},io=N.touch?"touchstart mousedown":"mousedown",Et=$e.extend({options:{clickTolerance:3},initialize:function(e,i,r,a){F(this,a),this._element=e,this._dragStartTarget=i||e,this._preventOutline=r},enable:function(){this._enabled||(z(this._dragStartTarget,io,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Et._dragging===this&&this.finishDrag(!0),ee(this._dragStartTarget,io,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!yr(this._element,"leaflet-zoom-anim"))){if(e.touches&&e.touches.length!==1){Et._dragging===this&&this.finishDrag();return}if(!(Et._dragging||e.shiftKey||e.which!==1&&e.button!==1&&!e.touches)&&(Et._dragging=this,this._preventOutline&&Pr(this._element),xr(),Ai(),!this._moving)){this.fire("down");var i=e.touches?e.touches[0]:e,r=Ks(this._element);this._startPoint=new P(i.clientX,i.clientY),this._startPos=Dt(this._element),this._parentScale=Er(r);var a=e.type==="mousedown";z(document,a?"mousemove":"touchmove",this._onMove,this),z(document,a?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(e){if(this._enabled){if(e.touches&&e.touches.length>1){this._moved=!0;return}var i=e.touches&&e.touches.length===1?e.touches[0]:e,r=new P(i.clientX,i.clientY)._subtract(this._startPoint);!r.x&&!r.y||Math.abs(r.x)+Math.abs(r.y)<this.options.clickTolerance||(r.x/=this._parentScale.x,r.y/=this._parentScale.y,Se(e),this._moved||(this.fire("dragstart"),this._moved=!0,U(document.body,"leaflet-dragging"),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),U(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(r),this._moving=!0,this._lastEvent=e,this._updatePosition())}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire("predrag",e),me(this._element,this._newPos),this.fire("drag",e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){he(document.body,"leaflet-dragging"),this._lastTarget&&(he(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ee(document,"mousemove touchmove",this._onMove,this),ee(document,"mouseup touchend touchcancel",this._onUp,this),Ir(),Ri();var i=this._moved&&this._moving;this._moving=!1,Et._dragging=!1,i&&this.fire("dragend",{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function no(e,i,r){var a,c=[1,4,2,8],d,p,g,v,b,S,M,Z;for(d=0,S=e.length;d<S;d++)e[d]._code=Ft(e[d],i);for(g=0;g<4;g++){for(M=c[g],a=[],d=0,S=e.length,p=S-1;d<S;p=d++)v=e[d],b=e[p],v._code&M?b._code&M||(Z=Cn(b,v,M,i,r),Z._code=Ft(Z,i),a.push(Z)):(b._code&M&&(Z=Cn(b,v,M,i,r),Z._code=Ft(Z,i),a.push(Z)),a.push(v));e=a}return e}function ro(e,i){var r,a,c,d,p,g,v,b,S;if(!e||e.length===0)throw new Error("latlngs not passed");Ze(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var M=B([0,0]),Z=ne(e),Ae=Z.getNorthWest().distanceTo(Z.getSouthWest())*Z.getNorthEast().distanceTo(Z.getNorthWest());Ae<1700&&(M=Or(e));var Te=e.length,Ve=[];for(r=0;r<Te;r++){var Me=B(e[r]);Ve.push(i.project(B([Me.lat-M.lat,Me.lng-M.lng])))}for(g=v=b=0,r=0,a=Te-1;r<Te;a=r++)c=Ve[r],d=Ve[a],p=c.y*d.x-d.y*c.x,v+=(c.x+d.x)*p,b+=(c.y+d.y)*p,g+=p*3;g===0?S=Ve[0]:S=[v/g,b/g];var li=i.unproject(R(S));return B([li.lat+M.lat,li.lng+M.lng])}function Or(e){for(var i=0,r=0,a=0,c=0;c<e.length;c++){var d=B(e[c]);i+=d.lat,r+=d.lng,a++}return B([i/a,r/a])}var ac={__proto__:null,clipPolygon:no,polygonCenter:ro,centroid:Or};function so(e,i){if(!i||!e.length)return e.slice();var r=i*i;return e=uc(e,r),e=cc(e,r),e}function oo(e,i,r){return Math.sqrt(ji(e,i,r,!0))}function lc(e,i,r){return ji(e,i,r)}function cc(e,i){var r=e.length,a=typeof Uint8Array<"u"?Uint8Array:Array,c=new a(r);c[0]=c[r-1]=1,Mr(e,c,i,0,r-1);var d,p=[];for(d=0;d<r;d++)c[d]&&p.push(e[d]);return p}function Mr(e,i,r,a,c){var d=0,p,g,v;for(g=a+1;g<=c-1;g++)v=ji(e[g],e[a],e[c],!0),v>d&&(p=g,d=v);d>r&&(i[p]=1,Mr(e,i,r,a,p),Mr(e,i,r,p,c))}function uc(e,i){for(var r=[e[0]],a=1,c=0,d=e.length;a<d;a++)dc(e[a],e[c])>i&&(r.push(e[a]),c=a);return c<d-1&&r.push(e[d-1]),r}var ao;function lo(e,i,r,a,c){var d=a?ao:Ft(e,r),p=Ft(i,r),g,v,b;for(ao=p;;){if(!(d|p))return[e,i];if(d&p)return!1;g=d||p,v=Cn(e,i,g,r,c),b=Ft(v,r),g===d?(e=v,d=b):(i=v,p=b)}}function Cn(e,i,r,a,c){var d=i.x-e.x,p=i.y-e.y,g=a.min,v=a.max,b,S;return r&8?(b=e.x+d*(v.y-e.y)/p,S=v.y):r&4?(b=e.x+d*(g.y-e.y)/p,S=g.y):r&2?(b=v.x,S=e.y+p*(v.x-e.x)/d):r&1&&(b=g.x,S=e.y+p*(g.x-e.x)/d),new P(b,S,c)}function Ft(e,i){var r=0;return e.x<i.min.x?r|=1:e.x>i.max.x&&(r|=2),e.y<i.min.y?r|=4:e.y>i.max.y&&(r|=8),r}function dc(e,i){var r=i.x-e.x,a=i.y-e.y;return r*r+a*a}function ji(e,i,r,a){var c=i.x,d=i.y,p=r.x-c,g=r.y-d,v=p*p+g*g,b;return v>0&&(b=((e.x-c)*p+(e.y-d)*g)/v,b>1?(c=r.x,d=r.y):b>0&&(c+=p*b,d+=g*b)),p=e.x-c,g=e.y-d,a?p*p+g*g:new P(c,d)}function Ze(e){return!k(e[0])||typeof e[0][0]!="object"&&typeof e[0][0]<"u"}function co(e){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ze(e)}function uo(e,i){var r,a,c,d,p,g,v,b;if(!e||e.length===0)throw new Error("latlngs not passed");Ze(e)||(console.warn("latlngs are not flat! Only the first ring will be used"),e=e[0]);var S=B([0,0]),M=ne(e),Z=M.getNorthWest().distanceTo(M.getSouthWest())*M.getNorthEast().distanceTo(M.getNorthWest());Z<1700&&(S=Or(e));var Ae=e.length,Te=[];for(r=0;r<Ae;r++){var Ve=B(e[r]);Te.push(i.project(B([Ve.lat-S.lat,Ve.lng-S.lng])))}for(r=0,a=0;r<Ae-1;r++)a+=Te[r].distanceTo(Te[r+1])/2;if(a===0)b=Te[0];else for(r=0,d=0;r<Ae-1;r++)if(p=Te[r],g=Te[r+1],c=p.distanceTo(g),d+=c,d>a){v=(d-a)/c,b=[g.x-v*(g.x-p.x),g.y-v*(g.y-p.y)];break}var Me=i.unproject(R(b));return B([Me.lat+S.lat,Me.lng+S.lng])}var hc={__proto__:null,simplify:so,pointToSegmentDistance:oo,closestPointOnSegment:lc,clipSegment:lo,_getEdgeIntersection:Cn,_getBitCode:Ft,_sqClosestPointOnSegment:ji,isFlat:Ze,_flat:co,polylineCenter:uo},Dr={project:function(e){return new P(e.lng,e.lat)},unproject:function(e){return new J(e.y,e.x)},bounds:new H([-180,-90],[180,90])},jr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new H([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(e){var i=Math.PI/180,r=this.R,a=e.lat*i,c=this.R_MINOR/r,d=Math.sqrt(1-c*c),p=d*Math.sin(a),g=Math.tan(Math.PI/4-a/2)/Math.pow((1-p)/(1+p),d/2);return a=-r*Math.log(Math.max(g,1e-10)),new P(e.lng*i*r,a)},unproject:function(e){for(var i=180/Math.PI,r=this.R,a=this.R_MINOR/r,c=Math.sqrt(1-a*a),d=Math.exp(-e.y/r),p=Math.PI/2-2*Math.atan(d),g=0,v=.1,b;g<15&&Math.abs(v)>1e-7;g++)b=c*Math.sin(p),b=Math.pow((1-b)/(1+b),c/2),v=Math.PI/2-2*Math.atan(d*b)-p,p+=v;return new J(p*i,e.x*i/r)}},fc={__proto__:null,LonLat:Dr,Mercator:jr,SphericalMercator:Xt},pc=l({},Xe,{code:"EPSG:3395",projection:jr,transformation:function(){var e=.5/(Math.PI*jr.R);return Rt(e,.5,-e,.5)}()}),ho=l({},Xe,{code:"EPSG:4326",projection:Dr,transformation:Rt(1/180,1,-1/180,.5)}),mc=l({},ze,{projection:Dr,transformation:Rt(1,0,-1,0),scale:function(e){return Math.pow(2,e)},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,i){var r=i.lng-e.lng,a=i.lat-e.lat;return Math.sqrt(r*r+a*a)},infinite:!0});ze.Earth=Xe,ze.EPSG3395=pc,ze.EPSG3857=Ti,ze.EPSG900913=hr,ze.EPSG4326=ho,ze.Simple=mc;var Ye=$e.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[m(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[m(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var i=e.target;if(i.hasLayer(this)){if(this._map=i,this._zoomAnimated=i._zoomAnimated,this.getEvents){var r=this.getEvents();i.on(r,this),this.once("remove",function(){i.off(r,this)},this)}this.onAdd(i),this.fire("add"),i.fire("layeradd",{layer:this})}}});q.include({addLayer:function(e){if(!e._layerAdd)throw new Error("The provided object is not a Layer.");var i=m(e);return this._layers[i]?this:(this._layers[i]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var i=m(e);return this._layers[i]?(this._loaded&&e.onRemove(this),delete this._layers[i],this._loaded&&(this.fire("layerremove",{layer:e}),e.fire("remove")),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return m(e)in this._layers},eachLayer:function(e,i){for(var r in this._layers)e.call(i,this._layers[r]);return this},_addLayers:function(e){e=e?k(e)?e:[e]:[];for(var i=0,r=e.length;i<r;i++)this.addLayer(e[i])},_addZoomLimit:function(e){(!isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[m(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var i=m(e);this._zoomBoundLayers[i]&&(delete this._zoomBoundLayers[i],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,i=-1/0,r=this._getZoomSpan();for(var a in this._zoomBoundLayers){var c=this._zoomBoundLayers[a].options;e=c.minZoom===void 0?e:Math.min(e,c.minZoom),i=c.maxZoom===void 0?i:Math.max(i,c.maxZoom)}this._layersMaxZoom=i===-1/0?void 0:i,this._layersMinZoom=e===1/0?void 0:e,r!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ni=Ye.extend({initialize:function(e,i){F(this,i),this._layers={};var r,a;if(e)for(r=0,a=e.length;r<a;r++)this.addLayer(e[r])},addLayer:function(e){var i=this.getLayerId(e);return this._layers[i]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var i=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[i]&&this._map.removeLayer(this._layers[i]),delete this._layers[i],this},hasLayer:function(e){var i=typeof e=="number"?e:this.getLayerId(e);return i in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var i=Array.prototype.slice.call(arguments,1),r,a;for(r in this._layers)a=this._layers[r],a[e]&&a[e].apply(a,i);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,i){for(var r in this._layers)e.call(i,this._layers[r]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke("setZIndex",e)},getLayerId:function(e){return m(e)}}),_c=function(e,i){return new ni(e,i)},pt=ni.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),ni.prototype.addLayer.call(this,e),this.fire("layeradd",{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),ni.prototype.removeLayer.call(this,e),this.fire("layerremove",{layer:e})):this},setStyle:function(e){return this.invoke("setStyle",e)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var e=new Ie;for(var i in this._layers){var r=this._layers[i];e.extend(r.getBounds?r.getBounds():r.getLatLng())}return e}}),gc=function(e,i){return new pt(e,i)},ri=Ne.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){F(this,e)},createIcon:function(e){return this._createIcon("icon",e)},createShadow:function(e){return this._createIcon("shadow",e)},_createIcon:function(e,i){var r=this._getIconUrl(e);if(!r){if(e==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var a=this._createImg(r,i&&i.tagName==="IMG"?i:null);return this._setIconStyles(a,e),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),a},_setIconStyles:function(e,i){var r=this.options,a=r[i+"Size"];typeof a=="number"&&(a=[a,a]);var c=R(a),d=R(i==="shadow"&&r.shadowAnchor||r.iconAnchor||c&&c.divideBy(2,!0));e.className="leaflet-marker-"+i+" "+(r.className||""),d&&(e.style.marginLeft=-d.x+"px",e.style.marginTop=-d.y+"px"),c&&(e.style.width=c.x+"px",e.style.height=c.y+"px")},_createImg:function(e,i){return i=i||document.createElement("img"),i.src=e,i},_getIconUrl:function(e){return N.retina&&this.options[e+"RetinaUrl"]||this.options[e+"Url"]}});function vc(e){return new ri(e)}var zi=ri.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return typeof zi.imagePath!="string"&&(zi.imagePath=this._detectIconPath()),(this.options.imagePath||zi.imagePath)+ri.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var i=function(r,a,c){var d=a.exec(r);return d&&d[c]};return e=i(e,/^url\((['"])?(.+)\1\)$/,2),e&&i(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=$("div","leaflet-default-icon-path",document.body),i=Ni(e,"background-image")||Ni(e,"backgroundImage");if(document.body.removeChild(e),i=this._stripUrl(i),i)return i;var r=document.querySelector('link[href$="leaflet.css"]');return r?r.href.substring(0,r.href.length-11-1):""}}),fo=rt.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||(this._draggable=new Et(e,e,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),U(e,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&he(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var i=this._marker,r=i._map,a=this._marker.options.autoPanSpeed,c=this._marker.options.autoPanPadding,d=Dt(i._icon),p=r.getPixelBounds(),g=r.getPixelOrigin(),v=xe(p.min._subtract(g).add(c),p.max._subtract(g).subtract(c));if(!v.contains(d)){var b=R((Math.max(v.max.x,d.x)-v.max.x)/(p.max.x-v.max.x)-(Math.min(v.min.x,d.x)-v.min.x)/(p.min.x-v.min.x),(Math.max(v.max.y,d.y)-v.max.y)/(p.max.y-v.max.y)-(Math.min(v.min.y,d.y)-v.min.y)/(p.min.y-v.min.y)).multiplyBy(a);r.panBy(b,{animate:!1}),this._draggable._newPos._add(b),this._draggable._startPos._add(b),me(i._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=ue(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(e){this._marker.options.autoPan&&(Q(this._panRequest),this._panRequest=ue(this._adjustPan.bind(this,e)))},_onDrag:function(e){var i=this._marker,r=i._shadow,a=Dt(i._icon),c=i._map.layerPointToLatLng(a);r&&me(r,a),i._latlng=c,e.latlng=c,e.oldLatLng=this._oldLatLng,i.fire("move",e).fire("drag",e)},_onDragEnd:function(e){Q(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",e)}}),Ln=Ye.extend({options:{icon:new zi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,i){F(this,i),this._latlng=B(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var i=this._latlng;return this._latlng=B(e),this.update(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,i="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),r=e.icon.createIcon(this._icon),a=!1;r!==this._icon&&(this._icon&&this._removeIcon(),a=!0,e.title&&(r.title=e.title),r.tagName==="IMG"&&(r.alt=e.alt||"")),U(r,i),e.keyboard&&(r.tabIndex="0",r.setAttribute("role","button")),this._icon=r,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&z(r,"focus",this._panOnFocus,this);var c=e.icon.createShadow(this._shadow),d=!1;c!==this._shadow&&(this._removeShadow(),d=!0),c&&(U(c,i),c.alt=""),this._shadow=c,e.opacity<1&&this._updateOpacity(),a&&this.getPane().appendChild(this._icon),this._initInteraction(),c&&d&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ee(this._icon,"focus",this._panOnFocus,this),ie(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ie(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&me(this._icon,e),this._shadow&&me(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var i=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(i)},_initInteraction:function(){if(this.options.interactive&&(U(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),fo)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new fo(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&We(this._icon,e),this._shadow&&We(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var i=this.options.icon.options,r=i.iconSize?R(i.iconSize):R(0,0),a=i.iconAnchor?R(i.iconAnchor):R(0,0);e.panInside(this._latlng,{paddingTopLeft:a,paddingBottomRight:r.subtract(a)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function yc(e,i){return new Ln(e,i)}var St=Ye.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return F(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Nn=St.extend({options:{fill:!0,radius:10},initialize:function(e,i){F(this,i),this._latlng=B(e),this._radius=this.options.radius},setLatLng:function(e){var i=this._latlng;return this._latlng=B(e),this.redraw(),this.fire("move",{oldLatLng:i,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var i=e&&e.radius||this._radius;return St.prototype.setStyle.call(this,e),this.setRadius(i),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,i=this._radiusY||e,r=this._clickTolerance(),a=[e+r,i+r];this._pxBounds=new H(this._point.subtract(a),this._point.add(a))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function wc(e,i){return new Nn(e,i)}var zr=Nn.extend({initialize:function(e,i,r){if(typeof i=="number"&&(i=l({},r,{radius:i})),F(this,i),this._latlng=B(e),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new Ie(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:St.prototype.setStyle,_project:function(){var e=this._latlng.lng,i=this._latlng.lat,r=this._map,a=r.options.crs;if(a.distance===Xe.distance){var c=Math.PI/180,d=this._mRadius/Xe.R/c,p=r.project([i+d,e]),g=r.project([i-d,e]),v=p.add(g).divideBy(2),b=r.unproject(v).lat,S=Math.acos((Math.cos(d*c)-Math.sin(i*c)*Math.sin(b*c))/(Math.cos(i*c)*Math.cos(b*c)))/c;(isNaN(S)||S===0)&&(S=d/Math.cos(Math.PI/180*i)),this._point=v.subtract(r.getPixelOrigin()),this._radius=isNaN(S)?0:v.x-r.project([b,e-S]).x,this._radiusY=v.y-p.y}else{var M=a.unproject(a.project(this._latlng).subtract([this._mRadius,0]));this._point=r.latLngToLayerPoint(this._latlng),this._radius=this._point.x-r.latLngToLayerPoint(M).x}this._updateBounds()}});function bc(e,i,r){return new zr(e,i,r)}var mt=St.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,i){F(this,i),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var i=1/0,r=null,a=ji,c,d,p=0,g=this._parts.length;p<g;p++)for(var v=this._parts[p],b=1,S=v.length;b<S;b++){c=v[b-1],d=v[b];var M=a(e,c,d,!0);M<i&&(i=M,r=a(e,c,d))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return uo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,i){return i=i||this._defaultShape(),e=B(e),i.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new Ie,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return Ze(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var i=[],r=Ze(e),a=0,c=e.length;a<c;a++)r?(i[a]=B(e[a]),this._bounds.extend(i[a])):i[a]=this._convertLatLngs(e[a]);return i},_project:function(){var e=new H;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),i=new P(e,e);this._rawPxBounds&&(this._pxBounds=new H([this._rawPxBounds.min.subtract(i),this._rawPxBounds.max.add(i)]))},_projectLatlngs:function(e,i,r){var a=e[0]instanceof J,c=e.length,d,p;if(a){for(p=[],d=0;d<c;d++)p[d]=this._map.latLngToLayerPoint(e[d]),r.extend(p[d]);i.push(p)}else for(d=0;d<c;d++)this._projectLatlngs(e[d],i,r)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}var i=this._parts,r,a,c,d,p,g,v;for(r=0,c=0,d=this._rings.length;r<d;r++)for(v=this._rings[r],a=0,p=v.length;a<p-1;a++)g=lo(v[a],v[a+1],e,a,!0),g&&(i[c]=i[c]||[],i[c].push(g[0]),(g[1]!==v[a+1]||a===p-2)&&(i[c].push(g[1]),c++))}},_simplifyPoints:function(){for(var e=this._parts,i=this.options.smoothFactor,r=0,a=e.length;r<a;r++)e[r]=so(e[r],i)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,i){var r,a,c,d,p,g,v=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(r=0,d=this._parts.length;r<d;r++)for(g=this._parts[r],a=0,p=g.length,c=p-1;a<p;c=a++)if(!(!i&&a===0)&&oo(e,g[c],g[a])<=v)return!0;return!1}});function xc(e,i){return new mt(e,i)}mt._flat=co;var si=mt.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ro(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var i=mt.prototype._convertLatLngs.call(this,e),r=i.length;return r>=2&&i[0]instanceof J&&i[0].equals(i[r-1])&&i.pop(),i},_setLatLngs:function(e){mt.prototype._setLatLngs.call(this,e),Ze(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ze(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,i=this.options.weight,r=new P(i,i);if(e=new H(e.min.subtract(r),e.max.add(r)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}for(var a=0,c=this._rings.length,d;a<c;a++)d=no(this._rings[a],e,!0),d.length&&this._parts.push(d)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var i=!1,r,a,c,d,p,g,v,b;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(d=0,v=this._parts.length;d<v;d++)for(r=this._parts[d],p=0,b=r.length,g=b-1;p<b;g=p++)a=r[p],c=r[g],a.y>e.y!=c.y>e.y&&e.x<(c.x-a.x)*(e.y-a.y)/(c.y-a.y)+a.x&&(i=!i);return i||mt.prototype._containsPoint.call(this,e,!0)}});function Ic(e,i){return new si(e,i)}var _t=pt.extend({initialize:function(e,i){F(this,i),this._layers={},e&&this.addData(e)},addData:function(e){var i=k(e)?e:e.features,r,a,c;if(i){for(r=0,a=i.length;r<a;r++)c=i[r],(c.geometries||c.geometry||c.features||c.coordinates)&&this.addData(c);return this}var d=this.options;if(d.filter&&!d.filter(e))return this;var p=An(e,d);return p?(p.feature=Mn(e),p.defaultOptions=p.options,this.resetStyle(p),d.onEachFeature&&d.onEachFeature(e,p),this.addLayer(p)):this},resetStyle:function(e){return e===void 0?this.eachLayer(this.resetStyle,this):(e.options=l({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(i){this._setLayerStyle(i,e)},this)},_setLayerStyle:function(e,i){e.setStyle&&(typeof i=="function"&&(i=i(e.feature)),e.setStyle(i))}});function An(e,i){var r=e.type==="Feature"?e.geometry:e,a=r?r.coordinates:null,c=[],d=i&&i.pointToLayer,p=i&&i.coordsToLatLng||Fr,g,v,b,S;if(!a&&!r)return null;switch(r.type){case"Point":return g=p(a),po(d,e,g,i);case"MultiPoint":for(b=0,S=a.length;b<S;b++)g=p(a[b]),c.push(po(d,e,g,i));return new pt(c);case"LineString":case"MultiLineString":return v=Rn(a,r.type==="LineString"?0:1,p),new mt(v,i);case"Polygon":case"MultiPolygon":return v=Rn(a,r.type==="Polygon"?1:2,p),new si(v,i);case"GeometryCollection":for(b=0,S=r.geometries.length;b<S;b++){var M=An({geometry:r.geometries[b],type:"Feature",properties:e.properties},i);M&&c.push(M)}return new pt(c);case"FeatureCollection":for(b=0,S=r.features.length;b<S;b++){var Z=An(r.features[b],i);Z&&c.push(Z)}return new pt(c);default:throw new Error("Invalid GeoJSON object.")}}function po(e,i,r,a){return e?e(i,r):new Ln(r,a&&a.markersInheritOptions&&a)}function Fr(e){return new J(e[1],e[0],e[2])}function Rn(e,i,r){for(var a=[],c=0,d=e.length,p;c<d;c++)p=i?Rn(e[c],i-1,r):(r||Fr)(e[c]),a.push(p);return a}function Ur(e,i){return e=B(e),e.alt!==void 0?[O(e.lng,i),O(e.lat,i),O(e.alt,i)]:[O(e.lng,i),O(e.lat,i)]}function On(e,i,r,a){for(var c=[],d=0,p=e.length;d<p;d++)c.push(i?On(e[d],Ze(e[d])?0:i-1,r,a):Ur(e[d],a));return!i&&r&&c.length>0&&c.push(c[0].slice()),c}function oi(e,i){return e.feature?l({},e.feature,{geometry:i}):Mn(i)}function Mn(e){return e.type==="Feature"||e.type==="FeatureCollection"?e:{type:"Feature",properties:{},geometry:e}}var Br={toGeoJSON:function(e){return oi(this,{type:"Point",coordinates:Ur(this.getLatLng(),e)})}};Ln.include(Br),zr.include(Br),Nn.include(Br),mt.include({toGeoJSON:function(e){var i=!Ze(this._latlngs),r=On(this._latlngs,i?1:0,!1,e);return oi(this,{type:(i?"Multi":"")+"LineString",coordinates:r})}}),si.include({toGeoJSON:function(e){var i=!Ze(this._latlngs),r=i&&!Ze(this._latlngs[0]),a=On(this._latlngs,r?2:i?1:0,!0,e);return i||(a=[a]),oi(this,{type:(r?"Multi":"")+"Polygon",coordinates:a})}}),ni.include({toMultiPoint:function(e){var i=[];return this.eachLayer(function(r){i.push(r.toGeoJSON(e).geometry.coordinates)}),oi(this,{type:"MultiPoint",coordinates:i})},toGeoJSON:function(e){var i=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(i==="MultiPoint")return this.toMultiPoint(e);var r=i==="GeometryCollection",a=[];return this.eachLayer(function(c){if(c.toGeoJSON){var d=c.toGeoJSON(e);if(r)a.push(d.geometry);else{var p=Mn(d);p.type==="FeatureCollection"?a.push.apply(a,p.features):a.push(p)}}}),r?oi(this,{geometries:a,type:"GeometryCollection"}):{type:"FeatureCollection",features:a}}});function mo(e,i){return new _t(e,i)}var Tc=mo,Dn=Ye.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(e,i,r){this._url=e,this._bounds=ne(i),F(this,r)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(U(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ie(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&ti(this._image),this},bringToBack:function(){return this._map&&ii(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=ne(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._url.tagName==="IMG",i=this._image=e?this._url:$("img");if(U(i,"leaflet-image-layer"),this._zoomAnimated&&U(i,"leaflet-zoom-animated"),this.options.className&&U(i,this.options.className),i.onselectstart=x,i.onmousemove=x,i.onload=f(this.fire,this,"load"),i.onerror=f(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(i.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e){this._url=i.src;return}i.src=this._url,i.alt=this.options.alt},_animateZoom:function(e){var i=this._map.getZoomScale(e.zoom),r=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Mt(this._image,r,i)},_reset:function(){var e=this._image,i=new H(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),r=i.getSize();me(e,i.min),e.style.width=r.x+"px",e.style.height=r.y+"px"},_updateOpacity:function(){We(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),Pc=function(e,i,r){return new Dn(e,i,r)},_o=Dn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e=this._url.tagName==="VIDEO",i=this._image=e?this._url:$("video");if(U(i,"leaflet-image-layer"),this._zoomAnimated&&U(i,"leaflet-zoom-animated"),this.options.className&&U(i,this.options.className),i.onselectstart=x,i.onmousemove=x,i.onloadeddata=f(this.fire,this,"load"),e){for(var r=i.getElementsByTagName("source"),a=[],c=0;c<r.length;c++)a.push(r[c].src);this._url=r.length>0?a:[i.src];return}k(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(i.style,"objectFit")&&(i.style.objectFit="fill"),i.autoplay=!!this.options.autoplay,i.loop=!!this.options.loop,i.muted=!!this.options.muted,i.playsInline=!!this.options.playsInline;for(var d=0;d<this._url.length;d++){var p=$("source");p.src=this._url[d],i.appendChild(p)}}});function Ec(e,i,r){return new _o(e,i,r)}var go=Dn.extend({_initImage:function(){var e=this._image=this._url;U(e,"leaflet-image-layer"),this._zoomAnimated&&U(e,"leaflet-zoom-animated"),this.options.className&&U(e,this.options.className),e.onselectstart=x,e.onmousemove=x}});function Sc(e,i,r){return new go(e,i,r)}var st=Ye.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(e,i){e&&(e instanceof J||k(e))?(this._latlng=B(e),F(this,i)):(F(this,e),this._source=i),this.options.content&&(this._content=this.options.content)},openOn:function(e){return e=arguments.length?e:this._source._map,e.hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&We(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&We(this._container,1),this.bringToFront(),this.options.interactive&&(U(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(We(this._container,0),this._removeTimeout=setTimeout(f(ie,void 0,this._container),200)):ie(this._container),this.options.interactive&&(he(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=B(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ti(this._container),this},bringToBack:function(){return this._map&&ii(this._container),this},_prepareOpen:function(e){var i=this._source;if(!i._map)return!1;if(i instanceof pt){i=null;var r=this._source._layers;for(var a in r)if(r[a]._map){i=r[a];break}if(!i)return!1;this._source=i}if(!e)if(i.getCenter)e=i.getCenter();else if(i.getLatLng)e=i.getLatLng();else if(i.getBounds)e=i.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,i=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof i=="string")e.innerHTML=i;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(i)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),i=R(this.options.offset),r=this._getAnchor();this._zoomAnimated?me(this._container,e.add(r)):i=i.add(e).add(r);var a=this._containerBottom=-i.y,c=this._containerLeft=-Math.round(this._containerWidth/2)+i.x;this._container.style.bottom=a+"px",this._container.style.left=c+"px"}},_getAnchor:function(){return[0,0]}});q.include({_initOverlay:function(e,i,r,a){var c=i;return c instanceof e||(c=new e(a).setContent(i)),r&&c.setLatLng(r),c}}),Ye.include({_initOverlay:function(e,i,r,a){var c=r;return c instanceof e?(F(c,a),c._source=this):(c=i&&!a?i:new e(a,this),c.setContent(r)),c}});var jn=st.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(e){return e=arguments.length?e:this._source._map,!e.hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,st.prototype.openOn.call(this,e)},onAdd:function(e){st.prototype.onAdd.call(this,e),e.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof St||this._source.on("preclick",jt))},onRemove:function(e){st.prototype.onRemove.call(this,e),e.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof St||this._source.off("preclick",jt))},getEvents:function(){var e=st.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e="leaflet-popup",i=this._container=$("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),r=this._wrapper=$("div",e+"-content-wrapper",i);if(this._contentNode=$("div",e+"-content",r),Mi(i),Lr(this._contentNode),z(i,"contextmenu",jt),this._tipContainer=$("div",e+"-tip-container",i),this._tip=$("div",e+"-tip",this._tipContainer),this.options.closeButton){var a=this._closeButton=$("a",e+"-close-button",i);a.setAttribute("role","button"),a.setAttribute("aria-label","Close popup"),a.href="#close",a.innerHTML='<span aria-hidden="true">&#215;</span>',z(a,"click",function(c){Se(c),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,i=e.style;i.width="",i.whiteSpace="nowrap";var r=e.offsetWidth;r=Math.min(r,this.options.maxWidth),r=Math.max(r,this.options.minWidth),i.width=r+1+"px",i.whiteSpace="",i.height="";var a=e.offsetHeight,c=this.options.maxHeight,d="leaflet-popup-scrolled";c&&a>c?(i.height=c+"px",U(e,d)):he(e,d),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var i=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),r=this._getAnchor();me(this._container,i.add(r))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var e=this._map,i=parseInt(Ni(this._container,"marginBottom"),10)||0,r=this._container.offsetHeight+i,a=this._containerWidth,c=new P(this._containerLeft,-r-this._containerBottom);c._add(Dt(this._container));var d=e.layerPointToContainerPoint(c),p=R(this.options.autoPanPadding),g=R(this.options.autoPanPaddingTopLeft||p),v=R(this.options.autoPanPaddingBottomRight||p),b=e.getSize(),S=0,M=0;d.x+a+v.x>b.x&&(S=d.x+a-b.x+v.x),d.x-S-g.x<0&&(S=d.x-g.x),d.y+r+v.y>b.y&&(M=d.y+r-b.y+v.y),d.y-M-g.y<0&&(M=d.y-g.y),(S||M)&&(this.options.keepInView&&(this._autopanning=!0),e.fire("autopanstart").panBy([S,M]))}},_getAnchor:function(){return R(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),kc=function(e,i){return new jn(e,i)};q.mergeOptions({closePopupOnClick:!0}),q.include({openPopup:function(e,i,r){return this._initOverlay(jn,e,i,r).openOn(this),this},closePopup:function(e){return e=arguments.length?e:this._popup,e&&e.close(),this}}),Ye.include({bindPopup:function(e,i){return this._popup=this._initOverlay(jn,this._popup,e,i),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(e){return this._popup&&(this instanceof pt||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(!(!this._popup||!this._map)){zt(e);var i=e.layer||e.target;if(this._popup._source===i&&!(i instanceof St)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng);return}this._popup._source=i,this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){e.originalEvent.keyCode===13&&this._openPopup(e)}});var zn=st.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){st.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(e){st.prototype.onRemove.call(this,e),e.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var e=st.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){var e="leaflet-tooltip",i=e+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=$("div",i),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+m(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var i,r,a=this._map,c=this._container,d=a.latLngToContainerPoint(a.getCenter()),p=a.layerPointToContainerPoint(e),g=this.options.direction,v=c.offsetWidth,b=c.offsetHeight,S=R(this.options.offset),M=this._getAnchor();g==="top"?(i=v/2,r=b):g==="bottom"?(i=v/2,r=0):g==="center"?(i=v/2,r=b/2):g==="right"?(i=0,r=b/2):g==="left"?(i=v,r=b/2):p.x<d.x?(g="right",i=0,r=b/2):(g="left",i=v+(S.x+M.x)*2,r=b/2),e=e.subtract(R(i,r,!0)).add(S).add(M),he(c,"leaflet-tooltip-right"),he(c,"leaflet-tooltip-left"),he(c,"leaflet-tooltip-top"),he(c,"leaflet-tooltip-bottom"),U(c,"leaflet-tooltip-"+g),me(c,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&We(this._container,e)},_animateZoom:function(e){var i=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(i)},_getAnchor:function(){return R(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Cc=function(e,i){return new zn(e,i)};q.include({openTooltip:function(e,i,r){return this._initOverlay(zn,e,i,r).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),Ye.include({bindTooltip:function(e,i){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(zn,this._tooltip,e,i),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(e){if(!(!e&&this._tooltipHandlersAdded)){var i=e?"off":"on",r={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?r.add=this._openTooltip:(r.mouseover=this._openTooltip,r.mouseout=this.closeTooltip,r.click=this._openTooltip,this._map?this._addFocusListeners():r.add=this._addFocusListeners),this._tooltip.options.sticky&&(r.mousemove=this._moveTooltip),this[i](r),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof pt||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var i=typeof e.getElement=="function"&&e.getElement();i&&(z(i,"focus",function(){this._tooltip._source=e,this.openTooltip()},this),z(i,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var i=typeof e.getElement=="function"&&e.getElement();i&&i.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(e){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var i=this;this._map.once("moveend",function(){i._openOnceFlag=!1,i._openTooltip(e)});return}this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)}},_moveTooltip:function(e){var i=e.latlng,r,a;this._tooltip.options.sticky&&e.originalEvent&&(r=this._map.mouseEventToContainerPoint(e.originalEvent),a=this._map.containerPointToLayerPoint(r),i=this._map.layerPointToLatLng(a)),this._tooltip.setLatLng(i)}});var vo=ri.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(e){var i=e&&e.tagName==="DIV"?e:document.createElement("div"),r=this.options;if(r.html instanceof Element?(Tn(i),i.appendChild(r.html)):i.innerHTML=r.html!==!1?r.html:"",r.bgPos){var a=R(r.bgPos);i.style.backgroundPosition=-a.x+"px "+-a.y+"px"}return this._setIconStyles(i,"icon"),i},createShadow:function(){return null}});function Lc(e){return new vo(e)}ri.Default=zi;var Fi=Ye.extend({options:{tileSize:256,opacity:1,updateWhenIdle:N.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(e){F(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),ie(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ti(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ii(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=w(this._onMoveEnd,this.options.updateInterval,this)),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement("div")},getTileSize:function(){var e=this.options.tileSize;return e instanceof P?e:new P(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var i=this.getPane().children,r=-e(-1/0,1/0),a=0,c=i.length,d;a<c;a++)d=i[a].style.zIndex,i[a]!==this._container&&d&&(r=e(r,+d));isFinite(r)&&(this.options.zIndex=r+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!N.ielt9){We(this._container,this.options.opacity);var e=+new Date,i=!1,r=!1;for(var a in this._tiles){var c=this._tiles[a];if(!(!c.current||!c.loaded)){var d=Math.min(1,(e-c.loaded)/200);We(c.el,d),d<1?i=!0:(c.active?r=!0:this._onOpaqueTile(c),c.active=!0)}}r&&!this._noPrune&&this._pruneTiles(),i&&(Q(this._fadeFrame),this._fadeFrame=ue(this._updateOpacity,this))}},_onOpaqueTile:x,_initContainer:function(){this._container||(this._container=$("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,i=this.options.maxZoom;if(e!==void 0){for(var r in this._levels)r=Number(r),this._levels[r].el.children.length||r===e?(this._levels[r].el.style.zIndex=i-Math.abs(e-r),this._onUpdateLevel(r)):(ie(this._levels[r].el),this._removeTilesAtZoom(r),this._onRemoveLevel(r),delete this._levels[r]);var a=this._levels[e],c=this._map;return a||(a=this._levels[e]={},a.el=$("div","leaflet-tile-container leaflet-zoom-animated",this._container),a.el.style.zIndex=i,a.origin=c.project(c.unproject(c.getPixelOrigin()),e).round(),a.zoom=e,this._setZoomTransform(a,c.getCenter(),c.getZoom()),x(a.el.offsetWidth),this._onCreateLevel(a)),this._level=a,a}},_onUpdateLevel:x,_onRemoveLevel:x,_onCreateLevel:x,_pruneTiles:function(){if(this._map){var e,i,r=this._map.getZoom();if(r>this.options.maxZoom||r<this.options.minZoom){this._removeAllTiles();return}for(e in this._tiles)i=this._tiles[e],i.retain=i.current;for(e in this._tiles)if(i=this._tiles[e],i.current&&!i.active){var a=i.coords;this._retainParent(a.x,a.y,a.z,a.z-5)||this._retainChildren(a.x,a.y,a.z,a.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}},_removeTilesAtZoom:function(e){for(var i in this._tiles)this._tiles[i].coords.z===e&&this._removeTile(i)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)ie(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,i,r,a){var c=Math.floor(e/2),d=Math.floor(i/2),p=r-1,g=new P(+c,+d);g.z=+p;var v=this._tileCoordsToKey(g),b=this._tiles[v];return b&&b.active?(b.retain=!0,!0):(b&&b.loaded&&(b.retain=!0),p>a?this._retainParent(c,d,p,a):!1)},_retainChildren:function(e,i,r,a){for(var c=2*e;c<2*e+2;c++)for(var d=2*i;d<2*i+2;d++){var p=new P(c,d);p.z=r+1;var g=this._tileCoordsToKey(p),v=this._tiles[g];if(v&&v.active){v.retain=!0;continue}else v&&v.loaded&&(v.retain=!0);r+1<a&&this._retainChildren(c,d,r+1,a)}},_resetView:function(e){var i=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),i,i)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var i=this.options;return i.minNativeZoom!==void 0&&e<i.minNativeZoom?i.minNativeZoom:i.maxNativeZoom!==void 0&&i.maxNativeZoom<e?i.maxNativeZoom:e},_setView:function(e,i,r,a){var c=Math.round(i);this.options.maxZoom!==void 0&&c>this.options.maxZoom||this.options.minZoom!==void 0&&c<this.options.minZoom?c=void 0:c=this._clampZoom(c);var d=this.options.updateWhenZooming&&c!==this._tileZoom;(!a||d)&&(this._tileZoom=c,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),c!==void 0&&this._update(e),r||this._pruneTiles(),this._noPrune=!!r),this._setZoomTransforms(e,i)},_setZoomTransforms:function(e,i){for(var r in this._levels)this._setZoomTransform(this._levels[r],e,i)},_setZoomTransform:function(e,i,r){var a=this._map.getZoomScale(r,e.zoom),c=e.origin.multiplyBy(a).subtract(this._map._getNewPixelOrigin(i,r)).round();N.any3d?Mt(e.el,c,a):me(e.el,c)},_resetGrid:function(){var e=this._map,i=e.options.crs,r=this._tileSize=this.getTileSize(),a=this._tileZoom,c=this._map.getPixelWorldBounds(this._tileZoom);c&&(this._globalTileRange=this._pxBoundsToTileRange(c)),this._wrapX=i.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,i.wrapLng[0]],a).x/r.x),Math.ceil(e.project([0,i.wrapLng[1]],a).x/r.y)],this._wrapY=i.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([i.wrapLat[0],0],a).y/r.x),Math.ceil(e.project([i.wrapLat[1],0],a).y/r.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var i=this._map,r=i._animatingZoom?Math.max(i._animateToZoom,i.getZoom()):i.getZoom(),a=i.getZoomScale(r,this._tileZoom),c=i.project(e,this._tileZoom).floor(),d=i.getSize().divideBy(a*2);return new H(c.subtract(d),c.add(d))},_update:function(e){var i=this._map;if(i){var r=this._clampZoom(i.getZoom());if(e===void 0&&(e=i.getCenter()),this._tileZoom!==void 0){var a=this._getTiledPixelBounds(e),c=this._pxBoundsToTileRange(a),d=c.getCenter(),p=[],g=this.options.keepBuffer,v=new H(c.getBottomLeft().subtract([g,-g]),c.getTopRight().add([g,-g]));if(!(isFinite(c.min.x)&&isFinite(c.min.y)&&isFinite(c.max.x)&&isFinite(c.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var b in this._tiles){var S=this._tiles[b].coords;(S.z!==this._tileZoom||!v.contains(new P(S.x,S.y)))&&(this._tiles[b].current=!1)}if(Math.abs(r-this._tileZoom)>1){this._setView(e,r);return}for(var M=c.min.y;M<=c.max.y;M++)for(var Z=c.min.x;Z<=c.max.x;Z++){var Ae=new P(Z,M);if(Ae.z=this._tileZoom,!!this._isValidTile(Ae)){var Te=this._tiles[this._tileCoordsToKey(Ae)];Te?Te.current=!0:p.push(Ae)}}if(p.sort(function(Me,li){return Me.distanceTo(d)-li.distanceTo(d)}),p.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ve=document.createDocumentFragment();for(Z=0;Z<p.length;Z++)this._addTile(p[Z],Ve);this._level.el.appendChild(Ve)}}}},_isValidTile:function(e){var i=this._map.options.crs;if(!i.infinite){var r=this._globalTileRange;if(!i.wrapLng&&(e.x<r.min.x||e.x>r.max.x)||!i.wrapLat&&(e.y<r.min.y||e.y>r.max.y))return!1}if(!this.options.bounds)return!0;var a=this._tileCoordsToBounds(e);return ne(this.options.bounds).overlaps(a)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var i=this._map,r=this.getTileSize(),a=e.scaleBy(r),c=a.add(r),d=i.unproject(a,e.z),p=i.unproject(c,e.z);return[d,p]},_tileCoordsToBounds:function(e){var i=this._tileCoordsToNwSe(e),r=new Ie(i[0],i[1]);return this.options.noWrap||(r=this._map.wrapLatLngBounds(r)),r},_tileCoordsToKey:function(e){return e.x+":"+e.y+":"+e.z},_keyToTileCoords:function(e){var i=e.split(":"),r=new P(+i[0],+i[1]);return r.z=+i[2],r},_removeTile:function(e){var i=this._tiles[e];i&&(ie(i.el),delete this._tiles[e],this.fire("tileunload",{tile:i.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){U(e,"leaflet-tile");var i=this.getTileSize();e.style.width=i.x+"px",e.style.height=i.y+"px",e.onselectstart=x,e.onmousemove=x,N.ielt9&&this.options.opacity<1&&We(e,this.options.opacity)},_addTile:function(e,i){var r=this._getTilePos(e),a=this._tileCoordsToKey(e),c=this.createTile(this._wrapCoords(e),f(this._tileReady,this,e));this._initTile(c),this.createTile.length<2&&ue(f(this._tileReady,this,e,null,c)),me(c,r),this._tiles[a]={el:c,coords:e,current:!0},i.appendChild(c),this.fire("tileloadstart",{tile:c,coords:e})},_tileReady:function(e,i,r){i&&this.fire("tileerror",{error:i,tile:r,coords:e});var a=this._tileCoordsToKey(e);r=this._tiles[a],r&&(r.loaded=+new Date,this._map._fadeAnimated?(We(r.el,0),Q(this._fadeFrame),this._fadeFrame=ue(this._updateOpacity,this)):(r.active=!0,this._pruneTiles()),i||(U(r.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:r.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),N.ielt9||!this._map._fadeAnimated?ue(this._pruneTiles,this):setTimeout(f(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var i=new P(this._wrapX?I(e.x,this._wrapX):e.x,this._wrapY?I(e.y,this._wrapY):e.y);return i.z=e.z,i},_pxBoundsToTileRange:function(e){var i=this.getTileSize();return new H(e.min.unscaleBy(i).floor(),e.max.unscaleBy(i).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function Nc(e){return new Fi(e)}var ai=Fi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,i){this._url=e,i=F(this,i),i.detectRetina&&N.retina&&i.maxZoom>0?(i.tileSize=Math.floor(i.tileSize/2),i.zoomReverse?(i.zoomOffset--,i.minZoom=Math.min(i.maxZoom,i.minZoom+1)):(i.zoomOffset++,i.maxZoom=Math.max(i.minZoom,i.maxZoom-1)),i.minZoom=Math.max(0,i.minZoom)):i.zoomReverse?i.minZoom=Math.min(i.maxZoom,i.minZoom):i.maxZoom=Math.max(i.minZoom,i.maxZoom),typeof i.subdomains=="string"&&(i.subdomains=i.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(e,i){return this._url===e&&i===void 0&&(i=!0),this._url=e,i||this.redraw(),this},createTile:function(e,i){var r=document.createElement("img");return z(r,"load",f(this._tileOnLoad,this,i,r)),z(r,"error",f(this._tileOnError,this,i,r)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(r.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(r.referrerPolicy=this.options.referrerPolicy),r.alt="",r.src=this.getTileUrl(e),r},getTileUrl:function(e){var i={r:N.retina?"@2x":"",s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-e.y;this.options.tms&&(i.y=r),i["-y"]=r}return Ee(this._url,l(i,this.options))},_tileOnLoad:function(e,i){N.ielt9?setTimeout(f(e,this,null,i),0):e(null,i)},_tileOnError:function(e,i,r){var a=this.options.errorTileUrl;a&&i.getAttribute("src")!==a&&(i.src=a),e(r,i)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,i=this.options.maxZoom,r=this.options.zoomReverse,a=this.options.zoomOffset;return r&&(e=i-e),e+a},_getSubdomain:function(e){var i=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[i]},_abortLoading:function(){var e,i;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&(i=this._tiles[e].el,i.onload=x,i.onerror=x,!i.complete)){i.src=j;var r=this._tiles[e].coords;ie(i),delete this._tiles[e],this.fire("tileabort",{tile:i,coords:r})}},_removeTile:function(e){var i=this._tiles[e];if(i)return i.el.setAttribute("src",j),Fi.prototype._removeTile.call(this,e)},_tileReady:function(e,i,r){if(!(!this._map||r&&r.getAttribute("src")===j))return Fi.prototype._tileReady.call(this,e,i,r)}});function yo(e,i){return new ai(e,i)}var wo=ai.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(e,i){this._url=e;var r=l({},this.defaultWmsParams);for(var a in i)a in this.options||(r[a]=i[a]);i=F(this,i);var c=i.detectRetina&&N.retina?2:1,d=this.getTileSize();r.width=d.x*c,r.height=d.y*c,this.wmsParams=r},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var i=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[i]=this._crs.code,ai.prototype.onAdd.call(this,e)},getTileUrl:function(e){var i=this._tileCoordsToNwSe(e),r=this._crs,a=xe(r.project(i[0]),r.project(i[1])),c=a.min,d=a.max,p=(this._wmsVersion>=1.3&&this._crs===ho?[c.y,c.x,d.y,d.x]:[c.x,c.y,d.x,d.y]).join(","),g=ai.prototype.getTileUrl.call(this,e);return g+be(this.wmsParams,g,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+p},setParams:function(e,i){return l(this.wmsParams,e),i||this.redraw(),this}});function Ac(e,i){return new wo(e,i)}ai.WMS=wo,yo.wms=Ac;var gt=Ye.extend({options:{padding:.1},initialize:function(e){F(this,e),m(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),U(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,i){var r=this._map.getZoomScale(i,this._zoom),a=this._map.getSize().multiplyBy(.5+this.options.padding),c=this._map.project(this._center,i),d=a.multiplyBy(-r).add(c).subtract(this._map._getNewPixelOrigin(e,i));N.any3d?Mt(this._container,d,r):me(this._container,d)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var e in this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,i=this._map.getSize(),r=this._map.containerPointToLayerPoint(i.multiplyBy(-e)).round();this._bounds=new H(r,r.add(i.multiplyBy(1+e*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),bo=gt.extend({options:{tolerance:0},getEvents:function(){var e=gt.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){gt.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement("canvas");z(e,"mousemove",this._onMouseMove,this),z(e,"click dblclick mousedown mouseup contextmenu",this._onClick,this),z(e,"mouseout",this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext("2d")},_destroyContainer:function(){Q(this._redrawRequest),delete this._ctx,ie(this._container),ee(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;this._redrawBounds=null;for(var i in this._layers)e=this._layers[i],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){gt.prototype._update.call(this);var e=this._bounds,i=this._container,r=e.getSize(),a=N.retina?2:1;me(i,e.min),i.width=a*r.x,i.height=a*r.y,i.style.width=r.x+"px",i.style.height=r.y+"px",N.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire("update")}},_reset:function(){gt.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[m(e)]=e;var i=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=i),this._drawLast=i,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var i=e._order,r=i.next,a=i.prev;r?r.prev=a:this._drawLast=a,a?a.next=r:this._drawFirst=r,delete e._order,delete this._layers[m(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(typeof e.options.dashArray=="string"){var i=e.options.dashArray.split(/[, ]+/),r=[],a,c;for(c=0;c<i.length;c++){if(a=Number(i[c]),isNaN(a))return;r.push(a)}e.options._dashArray=r}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||ue(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var i=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new H,this._redrawBounds.extend(e._pxBounds.min.subtract([i,i])),this._redrawBounds.extend(e._pxBounds.max.add([i,i]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var i=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,i.x,i.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,i=this._redrawBounds;if(this._ctx.save(),i){var r=i.getSize();this._ctx.beginPath(),this._ctx.rect(i.min.x,i.min.y,r.x,r.y),this._ctx.clip()}this._drawing=!0;for(var a=this._drawFirst;a;a=a.next)e=a.layer,(!i||e._pxBounds&&e._pxBounds.intersects(i))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,i){if(this._drawing){var r,a,c,d,p=e._parts,g=p.length,v=this._ctx;if(g){for(v.beginPath(),r=0;r<g;r++){for(a=0,c=p[r].length;a<c;a++)d=p[r][a],v[a?"lineTo":"moveTo"](d.x,d.y);i&&v.closePath()}this._fillStroke(v,e)}}},_updateCircle:function(e){if(!(!this._drawing||e._empty())){var i=e._point,r=this._ctx,a=Math.max(Math.round(e._radius),1),c=(Math.max(Math.round(e._radiusY),1)||a)/a;c!==1&&(r.save(),r.scale(1,c)),r.beginPath(),r.arc(i.x,i.y/c,a,0,Math.PI*2,!1),c!==1&&r.restore(),this._fillStroke(r,e)}},_fillStroke:function(e,i){var r=i.options;r.fill&&(e.globalAlpha=r.fillOpacity,e.fillStyle=r.fillColor||r.color,e.fill(r.fillRule||"evenodd")),r.stroke&&r.weight!==0&&(e.setLineDash&&e.setLineDash(i.options&&i.options._dashArray||[]),e.globalAlpha=r.opacity,e.lineWidth=r.weight,e.strokeStyle=r.color,e.lineCap=r.lineCap,e.lineJoin=r.lineJoin,e.stroke())},_onClick:function(e){for(var i=this._map.mouseEventToLayerPoint(e),r,a,c=this._drawFirst;c;c=c.next)r=c.layer,r.options.interactive&&r._containsPoint(i)&&(!(e.type==="click"||e.type==="preclick")||!this._map._draggableMoved(r))&&(a=r);this._fireEvent(a?[a]:!1,e)},_onMouseMove:function(e){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var i=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,i)}},_handleMouseOut:function(e){var i=this._hoveredLayer;i&&(he(this._container,"leaflet-interactive"),this._fireEvent([i],e,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,i){if(!this._mouseHoverThrottled){for(var r,a,c=this._drawFirst;c;c=c.next)r=c.layer,r.options.interactive&&r._containsPoint(i)&&(a=r);a!==this._hoveredLayer&&(this._handleMouseOut(e),a&&(U(this._container,"leaflet-interactive"),this._fireEvent([a],e,"mouseover"),this._hoveredLayer=a)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,e),this._mouseHoverThrottled=!0,setTimeout(f(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,i,r){this._map._fireDOMEvent(i,r||i.type,e)},_bringToFront:function(e){var i=e._order;if(i){var r=i.next,a=i.prev;if(r)r.prev=a;else return;a?a.next=r:r&&(this._drawFirst=r),i.prev=this._drawLast,this._drawLast.next=i,i.next=null,this._drawLast=i,this._requestRedraw(e)}},_bringToBack:function(e){var i=e._order;if(i){var r=i.next,a=i.prev;if(a)a.next=r;else return;r?r.prev=a:a&&(this._drawLast=a),i.prev=null,i.next=this._drawFirst,this._drawFirst.prev=i,this._drawFirst=i,this._requestRedraw(e)}}});function xo(e){return N.canvas?new bo(e):null}var Ui=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(e){return document.createElement("<lvml:"+e+' class="lvml">')}}catch{}return function(e){return document.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Rc={_initContainer:function(){this._container=$("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(gt.prototype._update.call(this),this.fire("update"))},_initPath:function(e){var i=e._container=Ui("shape");U(i,"leaflet-vml-shape "+(this.options.className||"")),i.coordsize="1 1",e._path=Ui("path"),i.appendChild(e._path),this._updateStyle(e),this._layers[m(e)]=e},_addPath:function(e){var i=e._container;this._container.appendChild(i),e.options.interactive&&e.addInteractiveTarget(i)},_removePath:function(e){var i=e._container;ie(i),e.removeInteractiveTarget(i),delete this._layers[m(e)]},_updateStyle:function(e){var i=e._stroke,r=e._fill,a=e.options,c=e._container;c.stroked=!!a.stroke,c.filled=!!a.fill,a.stroke?(i||(i=e._stroke=Ui("stroke")),c.appendChild(i),i.weight=a.weight+"px",i.color=a.color,i.opacity=a.opacity,a.dashArray?i.dashStyle=k(a.dashArray)?a.dashArray.join(" "):a.dashArray.replace(/( *, *)/g," "):i.dashStyle="",i.endcap=a.lineCap.replace("butt","flat"),i.joinstyle=a.lineJoin):i&&(c.removeChild(i),e._stroke=null),a.fill?(r||(r=e._fill=Ui("fill")),c.appendChild(r),r.color=a.fillColor||a.color,r.opacity=a.fillOpacity):r&&(c.removeChild(r),e._fill=null)},_updateCircle:function(e){var i=e._point.round(),r=Math.round(e._radius),a=Math.round(e._radiusY||r);this._setPath(e,e._empty()?"M0 0":"AL "+i.x+","+i.y+" "+r+","+a+" 0,"+65535*360)},_setPath:function(e,i){e._path.v=i},_bringToFront:function(e){ti(e._container)},_bringToBack:function(e){ii(e._container)}},Fn=N.vml?Ui:Pi,Bi=gt.extend({_initContainer:function(){this._container=Fn("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Fn("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ie(this._container),ee(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){gt.prototype._update.call(this);var e=this._bounds,i=e.getSize(),r=this._container;(!this._svgSize||!this._svgSize.equals(i))&&(this._svgSize=i,r.setAttribute("width",i.x),r.setAttribute("height",i.y)),me(r,e.min),r.setAttribute("viewBox",[e.min.x,e.min.y,i.x,i.y].join(" ")),this.fire("update")}},_initPath:function(e){var i=e._path=Fn("path");e.options.className&&U(i,e.options.className),e.options.interactive&&U(i,"leaflet-interactive"),this._updateStyle(e),this._layers[m(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){ie(e._path),e.removeInteractiveTarget(e._path),delete this._layers[m(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var i=e._path,r=e.options;i&&(r.stroke?(i.setAttribute("stroke",r.color),i.setAttribute("stroke-opacity",r.opacity),i.setAttribute("stroke-width",r.weight),i.setAttribute("stroke-linecap",r.lineCap),i.setAttribute("stroke-linejoin",r.lineJoin),r.dashArray?i.setAttribute("stroke-dasharray",r.dashArray):i.removeAttribute("stroke-dasharray"),r.dashOffset?i.setAttribute("stroke-dashoffset",r.dashOffset):i.removeAttribute("stroke-dashoffset")):i.setAttribute("stroke","none"),r.fill?(i.setAttribute("fill",r.fillColor||r.color),i.setAttribute("fill-opacity",r.fillOpacity),i.setAttribute("fill-rule",r.fillRule||"evenodd")):i.setAttribute("fill","none"))},_updatePoly:function(e,i){this._setPath(e,_n(e._parts,i))},_updateCircle:function(e){var i=e._point,r=Math.max(Math.round(e._radius),1),a=Math.max(Math.round(e._radiusY),1)||r,c="a"+r+","+a+" 0 1,0 ",d=e._empty()?"M0 0":"M"+(i.x-r)+","+i.y+c+r*2+",0 "+c+-r*2+",0 ";this._setPath(e,d)},_setPath:function(e,i){e._path.setAttribute("d",i)},_bringToFront:function(e){ti(e._path)},_bringToBack:function(e){ii(e._path)}});N.vml&&Bi.include(Rc);function Io(e){return N.svg||N.vml?new Bi(e):null}q.include({getRenderer:function(e){var i=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return i||(i=this._renderer=this._createRenderer()),this.hasLayer(i)||this.addLayer(i),i},_getPaneRenderer:function(e){if(e==="overlayPane"||e===void 0)return!1;var i=this._paneRenderers[e];return i===void 0&&(i=this._createRenderer({pane:e}),this._paneRenderers[e]=i),i},_createRenderer:function(e){return this.options.preferCanvas&&xo(e)||Io(e)}});var To=si.extend({initialize:function(e,i){si.prototype.initialize.call(this,this._boundsToLatLngs(e),i)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=ne(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function Oc(e,i){return new To(e,i)}Bi.create=Fn,Bi.pointsToPath=_n,_t.geometryToLayer=An,_t.coordsToLatLng=Fr,_t.coordsToLatLngs=Rn,_t.latLngToCoords=Ur,_t.latLngsToCoords=On,_t.getFeature=oi,_t.asFeature=Mn,q.mergeOptions({boxZoom:!0});var Po=rt.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on("unload",this._destroy,this)},addHooks:function(){z(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ee(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ie(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||e.which!==1&&e.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ai(),xr(),this._startPoint=this._map.mouseEventToContainerPoint(e),z(document,{contextmenu:zt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=$("div","leaflet-zoom-box",this._container),U(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(e);var i=new H(this._point,this._startPoint),r=i.getSize();me(this._box,i.min),this._box.style.width=r.x+"px",this._box.style.height=r.y+"px"},_finish:function(){this._moved&&(ie(this._box),he(this._container,"leaflet-crosshair")),Ri(),Ir(),ee(document,{contextmenu:zt,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if(!(e.which!==1&&e.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(f(this._resetState,this),0);var i=new Ie(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(i).fire("boxzoomend",{boxZoomBounds:i})}},_onKeyDown:function(e){e.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});q.addInitHook("addHandler","boxZoom",Po),q.mergeOptions({doubleClickZoom:!0});var Eo=rt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(e){var i=this._map,r=i.getZoom(),a=i.options.zoomDelta,c=e.originalEvent.shiftKey?r-a:r+a;i.options.doubleClickZoom==="center"?i.setZoom(c):i.setZoomAround(e.containerPoint,c)}});q.addInitHook("addHandler","doubleClickZoom",Eo),q.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var So=rt.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new Et(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),e.on("zoomend",this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}U(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){he(this._map._container,"leaflet-grab"),he(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var i=ne(this._map.options.maxBounds);this._offsetLimit=xe(this._map.latLngToContainerPoint(i.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(i.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var i=this._lastTime=+new Date,r=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(r),this._times.push(i),this._prunePositions(i)}this._map.fire("move",e).fire("drag",e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2),i=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=i.subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,i){return e-(e-i)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var e=this._draggable._newPos.subtract(this._draggable._startPos),i=this._offsetLimit;e.x<i.min.x&&(e.x=this._viscousLimit(e.x,i.min.x)),e.y<i.min.y&&(e.y=this._viscousLimit(e.y,i.min.y)),e.x>i.max.x&&(e.x=this._viscousLimit(e.x,i.max.x)),e.y>i.max.y&&(e.y=this._viscousLimit(e.y,i.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,i=Math.round(e/2),r=this._initialWorldOffset,a=this._draggable._newPos.x,c=(a-i+r)%e+i-r,d=(a+i+r)%e-i-r,p=Math.abs(c+r)<Math.abs(d+r)?c:d;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=p},_onDragEnd:function(e){var i=this._map,r=i.options,a=!r.inertia||e.noInertia||this._times.length<2;if(i.fire("dragend",e),a)i.fire("moveend");else{this._prunePositions(+new Date);var c=this._lastPos.subtract(this._positions[0]),d=(this._lastTime-this._times[0])/1e3,p=r.easeLinearity,g=c.multiplyBy(p/d),v=g.distanceTo([0,0]),b=Math.min(r.inertiaMaxSpeed,v),S=g.multiplyBy(b/v),M=b/(r.inertiaDeceleration*p),Z=S.multiplyBy(-M/2).round();!Z.x&&!Z.y?i.fire("moveend"):(Z=i._limitOffset(Z,i.options.maxBounds),ue(function(){i.panBy(Z,{duration:M,easeLinearity:p,noMoveStart:!0,animate:!0})}))}}});q.addInitHook("addHandler","dragging",So),q.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ko=rt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex="0"),z(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ee(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,i=document.documentElement,r=e.scrollTop||i.scrollTop,a=e.scrollLeft||i.scrollLeft;this._map._container.focus(),window.scrollTo(a,r)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(e){var i=this._panKeys={},r=this.keyCodes,a,c;for(a=0,c=r.left.length;a<c;a++)i[r.left[a]]=[-1*e,0];for(a=0,c=r.right.length;a<c;a++)i[r.right[a]]=[e,0];for(a=0,c=r.down.length;a<c;a++)i[r.down[a]]=[0,e];for(a=0,c=r.up.length;a<c;a++)i[r.up[a]]=[0,-1*e]},_setZoomDelta:function(e){var i=this._zoomKeys={},r=this.keyCodes,a,c;for(a=0,c=r.zoomIn.length;a<c;a++)i[r.zoomIn[a]]=e;for(a=0,c=r.zoomOut.length;a<c;a++)i[r.zoomOut[a]]=-e},_addHooks:function(){z(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ee(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var i=e.keyCode,r=this._map,a;if(i in this._panKeys){if(!r._panAnim||!r._panAnim._inProgress)if(a=this._panKeys[i],e.shiftKey&&(a=R(a).multiplyBy(3)),r.options.maxBounds&&(a=r._limitOffset(R(a),r.options.maxBounds)),r.options.worldCopyJump){var c=r.wrapLatLng(r.unproject(r.project(r.getCenter()).add(a)));r.panTo(c)}else r.panBy(a)}else if(i in this._zoomKeys)r.setZoom(r.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[i]);else if(i===27&&r._popup&&r._popup.options.closeOnEscapeKey)r.closePopup();else return;zt(e)}}});q.addInitHook("addHandler","keyboard",ko),q.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Co=rt.extend({addHooks:function(){z(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ee(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(e){var i=Xs(e),r=this._map.options.wheelDebounceTime;this._delta+=i,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||(this._startTime=+new Date);var a=Math.max(r-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(f(this._performZoom,this),a),zt(e)},_performZoom:function(){var e=this._map,i=e.getZoom(),r=this._map.options.zoomSnap||0;e._stop();var a=this._delta/(this._map.options.wheelPxPerZoomLevel*4),c=4*Math.log(2/(1+Math.exp(-Math.abs(a))))/Math.LN2,d=r?Math.ceil(c/r)*r:c,p=e._limitZoom(i+(this._delta>0?d:-d))-i;this._delta=0,this._startTime=null,p&&(e.options.scrollWheelZoom==="center"?e.setZoom(i+p):e.setZoomAround(this._lastMousePos,i+p))}});q.addInitHook("addHandler","scrollWheelZoom",Co);var Mc=600;q.mergeOptions({tapHold:N.touchNative&&N.safari&&N.mobile,tapTolerance:15});var Lo=rt.extend({addHooks:function(){z(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ee(this._map._container,"touchstart",this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),e.touches.length===1){var i=e.touches[0];this._startPos=this._newPos=new P(i.clientX,i.clientY),this._holdTimeout=setTimeout(f(function(){this._cancel(),this._isTapValid()&&(z(document,"touchend",Se),z(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",i))},this),Mc),z(document,"touchend touchcancel contextmenu",this._cancel,this),z(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function e(){ee(document,"touchend",Se),ee(document,"touchend touchcancel",e)},_cancel:function(){clearTimeout(this._holdTimeout),ee(document,"touchend touchcancel contextmenu",this._cancel,this),ee(document,"touchmove",this._onMove,this)},_onMove:function(e){var i=e.touches[0];this._newPos=new P(i.clientX,i.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,i){var r=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY});r._simulated=!0,i.target.dispatchEvent(r)}});q.addInitHook("addHandler","tapHold",Lo),q.mergeOptions({touchZoom:N.touch,bounceAtZoomLimits:!0});var No=rt.extend({addHooks:function(){U(this._map._container,"leaflet-touch-zoom"),z(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){he(this._map._container,"leaflet-touch-zoom"),ee(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(e){var i=this._map;if(!(!e.touches||e.touches.length!==2||i._animatingZoom||this._zooming)){var r=i.mouseEventToContainerPoint(e.touches[0]),a=i.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),i.options.touchZoom!=="center"&&(this._pinchStartLatLng=i.containerPointToLatLng(r.add(a)._divideBy(2))),this._startDist=r.distanceTo(a),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),z(document,"touchmove",this._onTouchMove,this),z(document,"touchend touchcancel",this._onTouchEnd,this),Se(e)}},_onTouchMove:function(e){if(!(!e.touches||e.touches.length!==2||!this._zooming)){var i=this._map,r=i.mouseEventToContainerPoint(e.touches[0]),a=i.mouseEventToContainerPoint(e.touches[1]),c=r.distanceTo(a)/this._startDist;if(this._zoom=i.getScaleZoom(c,this._startZoom),!i.options.bounceAtZoomLimits&&(this._zoom<i.getMinZoom()&&c<1||this._zoom>i.getMaxZoom()&&c>1)&&(this._zoom=i._limitZoom(this._zoom)),i.options.touchZoom==="center"){if(this._center=this._startLatLng,c===1)return}else{var d=r._add(a)._divideBy(2)._subtract(this._centerPoint);if(c===1&&d.x===0&&d.y===0)return;this._center=i.unproject(i.project(this._pinchStartLatLng,this._zoom).subtract(d),this._zoom)}this._moved||(i._moveStart(!0,!1),this._moved=!0),Q(this._animRequest);var p=f(i._move,i,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ue(p,this,!0),Se(e)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Q(this._animRequest),ee(document,"touchmove",this._onTouchMove,this),ee(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});q.addInitHook("addHandler","touchZoom",No),q.BoxZoom=Po,q.DoubleClickZoom=Eo,q.Drag=So,q.Keyboard=ko,q.ScrollWheelZoom=Co,q.TapHold=Lo,q.TouchZoom=No,n.Bounds=H,n.Browser=N,n.CRS=ze,n.Canvas=bo,n.Circle=zr,n.CircleMarker=Nn,n.Class=Ne,n.Control=Ke,n.DivIcon=vo,n.DivOverlay=st,n.DomEvent=Ql,n.DomUtil=$l,n.Draggable=Et,n.Evented=$e,n.FeatureGroup=pt,n.GeoJSON=_t,n.GridLayer=Fi,n.Handler=rt,n.Icon=ri,n.ImageOverlay=Dn,n.LatLng=J,n.LatLngBounds=Ie,n.Layer=Ye,n.LayerGroup=ni,n.LineUtil=hc,n.Map=q,n.Marker=Ln,n.Mixin=oc,n.Path=St,n.Point=P,n.PolyUtil=ac,n.Polygon=si,n.Polyline=mt,n.Popup=jn,n.PosAnimation=Qs,n.Projection=fc,n.Rectangle=To,n.Renderer=gt,n.SVG=Bi,n.SVGOverlay=go,n.TileLayer=ai,n.Tooltip=zn,n.Transformation=Ii,n.Util=Ge,n.VideoOverlay=_o,n.bind=f,n.bounds=xe,n.canvas=xo,n.circle=bc,n.circleMarker=wc,n.control=Di,n.divIcon=Lc,n.extend=l,n.featureGroup=gc,n.geoJSON=mo,n.geoJson=Tc,n.gridLayer=Nc,n.icon=vc,n.imageOverlay=Pc,n.latLng=B,n.latLngBounds=ne,n.layerGroup=_c,n.map=ec,n.marker=yc,n.point=R,n.polygon=Ic,n.polyline=xc,n.popup=kc,n.rectangle=Oc,n.setOptions=F,n.stamp=m,n.svg=Io,n.svgOverlay=Sc,n.tileLayer=yo,n.tooltip=Cc,n.transformation=Rt,n.version=o,n.videoOverlay=Ec;var Dc=window.L;n.noConflict=function(){return window.L=Dc,this},window.L=n})})(fs,fs.exports);var zm=fs.exports;const Bt=id(zm),Fm=Bt.icon({iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]});Bt.Marker.prototype.options.icon=Fm;const Um=({visits:s})=>{const t=E.useRef(null),n=E.useRef(null);return E.useEffect(()=>(t.current&&!n.current&&(n.current=Bt.map(t.current).setView([-15.793889,-47.882778],4),Bt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors"}).addTo(n.current)),()=>{n.current&&(n.current.remove(),n.current=null)}),[]),E.useEffect(()=>{if(!n.current)return;n.current.eachLayer(l=>{var u;l instanceof Bt.Marker&&((u=n.current)==null||u.removeLayer(l))});const o=[];s.forEach(l=>{if(l.location){const u=new Date().getTime()-new Date(l.date).getTime(),f=Math.ceil(u/(1e3*60*60*24));let _="#22c55e";f>90?_="#ef4444":f>=70&&(_="#facc15");const m=Bt.divIcon({html:`<svg viewBox="0 0 24 24" style="width: 32px; height: 32px; fill: ${_}; filter: drop-shadow(1px 2px 2px rgba(0,0,0,0.4));" xmlns="http://www.w3.org/2000/svg"><path d="M12 0C7.31 0 3.5 3.81 3.5 8.5c0 5.25 8.5 15.5 8.5 15.5s8.5-10.25 8.5-15.5C20.5 3.81 16.69 0 12 0zm0 11.5a3 3 0 110-6 3 3 0 010 6z"/></svg>`,className:"bg-transparent border-0",iconSize:[32,42],iconAnchor:[16,42],popupAnchor:[0,-42]});Bt.marker([l.location.latitude,l.location.longitude],{icon:m}).addTo(n.current).bindPopup(`<b>${l.cooperado.name||"Cooperado"}</b><br>${new Date(l.date).toLocaleDateString("pt-BR")}`),o.push([l.location.latitude,l.location.longitude])}}),o.length>0&&n.current.fitBounds(o,{padding:[50,50]})},[s]),h.jsx("div",{ref:t,className:"h-96 w-full z-0 rounded-lg shadow-inner"})},Bm=({user:s,onSave:t,onClose:n})=>{const[o,l]=E.useState({name:"",email:"",password:"",role:"Gerente de Relacionamento",agency:""});E.useEffect(()=>{s&&l({name:s.name,email:s.email,password:s.password,role:s.role,agency:s.agency})},[s]);const u=_=>{const{name:m,value:w}=_.target;l(I=>({...I,[m]:w}))},f=_=>{_.preventDefault(),t(s?{...o,id:s.id}:{...o,id:""})};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",children:h.jsx("div",{className:"bg-gray-700 rounded-lg shadow-xl w-full max-w-lg",children:h.jsxs("form",{onSubmit:f,className:"p-6 text-white",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-200",children:s?"Editar Usurio":"Novo Usurio"}),h.jsx("button",{type:"button",onClick:n,className:"text-gray-400",children:"X"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-gray-300 text-sm font-bold mb-2",children:"Nome"}),h.jsx("input",{type:"text",name:"name",value:o.name,onChange:u,required:!0,className:"bg-gray-600 rounded w-full py-2 px-3 text-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-gray-300 text-sm font-bold mb-2",children:"Email"}),h.jsx("input",{type:"email",name:"email",value:o.email,onChange:u,required:!0,className:"bg-gray-600 rounded w-full py-2 px-3 text-white"})]}),!s&&h.jsxs("div",{children:[h.jsx("label",{className:"block text-gray-300 text-sm font-bold mb-2",children:"Senha Provisria"}),h.jsx("input",{type:"password",name:"password",value:o.password,onChange:u,required:!0,className:"bg-gray-600 rounded w-full py-2 px-3 text-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-gray-300 text-sm font-bold mb-2",children:"Funo"}),h.jsx("input",{type:"text",name:"role",value:o.role,onChange:u,required:!0,className:"bg-gray-600 rounded w-full py-2 px-3 text-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-gray-300 text-sm font-bold mb-2",children:"Agncia (PA)"}),h.jsx("input",{type:"text",name:"agency",value:o.agency,onChange:u,required:!0,className:"bg-gray-600 rounded w-full py-2 px-3 text-white"})]})]}),h.jsxs("div",{className:"mt-8 flex justify-end gap-4",children:[h.jsx("button",{type:"button",onClick:n,className:"bg-gray-500 text-white font-bold py-2 px-4 rounded",children:"Cancelar"}),h.jsx("button",{type:"submit",className:"bg-green-600 text-white font-bold py-2 px-4 rounded",children:"Salvar"})]})]})})})},Wm=({cooperado:s,managers:t,onSave:n,onClose:o})=>{const[l,u]=E.useState({name:"",document:"",isPortfolio:!0,managerName:"",agency:""});E.useEffect(()=>{u(s?{name:s.name,document:s.document,isPortfolio:s.isPortfolio,managerName:s.managerName||"",agency:s.agency||""}:{name:"",document:"",isPortfolio:!0,managerName:"",agency:""})},[s]);const f=w=>{const{name:I,value:x}=w.target;if(I==="managerName"){const O=t.find(V=>V.name===x);u(V=>({...V,managerName:x,agency:O?O.agency:""}))}else u(O=>({...O,[I]:x}))},_=w=>{u(I=>({...I,isPortfolio:w.target.checked}))},m=w=>{w.preventDefault(),n({...l})};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",children:h.jsx("div",{className:"bg-gray-700 rounded-lg shadow-xl w-full max-w-lg",children:h.jsxs("form",{onSubmit:m,className:"p-6 text-white",children:[h.jsxs("div",{className:"flex justify-between items-start mb-4",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-200",children:s?"Editar Cooperado":"Novo Cooperado"}),h.jsx("button",{type:"button",onClick:o,className:"text-gray-400 hover:text-white",children:"X"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-gray-300 text-sm font-bold mb-2",children:"Nome"}),h.jsx("input",{type:"text",name:"name",value:l.name,onChange:f,required:!0,className:"bg-gray-600 rounded w-full py-2 px-3 text-white focus:outline-none focus:ring-2 focus:ring-green-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-gray-300 text-sm font-bold mb-2",children:"CPF/CNPJ"}),h.jsx("input",{type:"text",name:"document",value:l.document,onChange:f,required:!0,className:"bg-gray-600 rounded w-full py-2 px-3 text-white focus:outline-none focus:ring-2 focus:ring-green-500"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-gray-300 text-sm font-bold mb-2",children:"Gerente"}),h.jsxs("select",{name:"managerName",value:l.managerName,onChange:f,className:"bg-gray-600 rounded w-full py-2 px-3 text-white focus:outline-none focus:ring-2 focus:ring-green-500",children:[h.jsx("option",{value:"",children:"Selecione"}),t.map(w=>h.jsx("option",{value:w.name,children:w.name},w.id))]})]}),h.jsxs("div",{className:"flex items-center",children:[h.jsx("input",{type:"checkbox",id:"isPortfolio",checked:l.isPortfolio,onChange:_,className:"h-4 w-4 bg-gray-600 border-gray-500 rounded focus:ring-green-500"}),h.jsx("label",{htmlFor:"isPortfolio",className:"ml-2 block text-gray-300 text-sm",children:"Faz parte da carteira"})]})]}),h.jsxs("div",{className:"mt-8 flex justify-end gap-4",children:[h.jsx("button",{type:"button",onClick:o,className:"bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded transition duration-200",children:"Cancelar"}),h.jsx("button",{type:"submit",className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded transition duration-200",children:"Salvar"})]})]})})})},Zm=s=>{const t=new Date,n=new Date(s);t.setHours(0,0,0,0),n.setHours(0,0,0,0);const o=t.getTime()-n.getTime();return Math.ceil(o/(1e3*60*60*24))},Vm=({users:s,cooperados:t,visits:n,suggestedVisits:o,onLogout:l,onAddSuggestion:u,onRemoveSuggestion:f,onAddUser:_,onUpdateUser:m,onDeleteUser:w,onAddCooperado:I,onUpdateCooperado:x,onDeleteCooperado:O,onOpenChangePassword:V})=>{const[X,F]=E.useState("all"),[be,Le]=E.useState("all"),[Ee,k]=E.useState("all"),[A,j]=E.useState(""),[Y,te]=E.useState(""),[D,C]=E.useState(""),[ce,ue]=E.useState(""),[Q,Ge]=E.useState(""),[Ne,$t]=E.useState(""),[ye,$e]=E.useState(!1),[P,de]=E.useState(!1),[R,H]=E.useState(!1),[xe,Ie]=E.useState(null),[ne,J]=E.useState(!1),[B,ze]=E.useState(null),Xe=()=>{Ie(null),H(!0)},mn=y=>{Ie(y),H(!0)},Xt=()=>{H(!1),Ie(null)},Ii=async y=>{xe?await m(xe.id,y):_(y),Xt()},Rt=async y=>{window.confirm("Ateno: Esta ao remover o perfil do banco de dados, mas NO o login do Firebase. Continuar?")&&await w(y)},Ti=()=>{ze(null),J(!0)},hr=y=>{ze(y),J(!0)},Pi=()=>{J(!1),ze(null)},_n=async y=>{B?await x(B.id,y):await I(y),Pi()},Ei=async y=>{window.confirm("Deseja excluir este cooperado permanentemente?")&&await O(y)},Qt=[...new Set(s.filter(y=>y.role!=="Desenvolvedor").map(y=>y.agency))],gn=E.useMemo(()=>s.filter(y=>y.role!=="Desenvolvedor"),[s]),vn=E.useMemo(()=>n.filter(y=>{if(!y.location)return!1;const W=Zm(y.date),K=X==="all"||X==="green"&&W<70||X==="yellow"&&W>=70&&W<=90||X==="red"&&W>90,re=be==="all"||y.manager.id===be,pe=Ee==="all"||y.manager.agency===Ee;let Be=!0;if(A||Y){const tt=new Date(y.date);if(A){const se=new Date(A);se.setUTCHours(0,0,0,0),tt<se&&(Be=!1)}if(Y){const se=new Date(Y);se.setUTCHours(23,59,59,999),tt>se&&(Be=!1)}}return K&&re&&pe&&Be}),[n,X,be,Ee,A,Y]),Qe=E.useMemo(()=>{if(!D||!ce)return[];const y=new Date(D);y.setUTCHours(0,0,0,0);const W=new Date(ce);return W.setUTCHours(23,59,59,999),n.filter(K=>{const re=new Date(K.date);return re>=y&&re<=W}).sort((K,re)=>new Date(K.date).getTime()-new Date(re.date).getTime())},[n,D,ce]),yn=E.useMemo(()=>t.filter(y=>y.isPortfolio).sort((y,W)=>y.name.localeCompare(W.name)),[t]),et=E.useMemo(()=>{if(!Q)return null;const y=t.find(K=>K.id===Q);return!y||!y.managerName||y.managerName==="NO INFORMADO"?null:s.find(K=>{var re;return K.name.toUpperCase()===((re=y.managerName)==null?void 0:re.toUpperCase())})||null},[Q,t,s]),wn=y=>new Date(y.getTime()-y.getTimezoneOffset()*6e4).toISOString().split("T")[0],Si=y=>{const W=new Date,K=new Date;K.setDate(W.getDate()-y),te(wn(W)),j(wn(K))},Pt=y=>{const W="px-3 py-1 rounded-md transition duration-150 flex items-center focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-700 focus:ring-blue-400";return X===y?`${W} bg-blue-600 text-white font-semibold shadow-md`:`${W} bg-gray-600 hover:bg-gray-500 text-gray-200`},bn=async y=>{if(y.preventDefault(),!Q||!et||!Ne.trim()){alert("Por favor, selecione um cooperado e preencha o motivo.");return}const W=t.find(K=>K.id===Q);if(W){$e(!0);try{await u({manager:{id:et.id,name:et.name,agency:et.agency},cooperado:W,suggestedBy:"Desenvolvedor",reason:Ne.trim()}),Ge(""),$t("")}catch{alert("Falha ao adicionar sugesto.")}finally{$e(!1)}}},Ot=y=>new Intl.DateTimeFormat("pt-BR").format(new Date(y)),fr=y=>y.map(W=>`${W.product}${W.subProduct?`: ${W.subProduct}`:""}${W.observation?` (${W.observation})`:""}`).join("; "),ki=y=>`${y.product}${y.subProduct?`: ${y.subProduct}`:""}${y.observation?` (${y.observation})`:""}`,xn=async()=>{try{de(!0);const y=(await Bn(async()=>{const{default:se}=await import("./utils-hE2CWlCl.js").then(ft=>ft.e);return{default:se}},__vite__mapDeps([0,1]))).default,{saveAs:W}=await Bn(async()=>{const{saveAs:se}=await import("./FileSaver.min-sg6aKZti.js").then(ft=>ft.F);return{saveAs:se}},__vite__mapDeps([2,1])),K=new y.Workbook,re=K.addWorksheet("Relatrio de Visitas");re.columns=[{header:"Data",key:"date",width:12},{header:"Gerente",key:"manager",width:25},{header:"Agncia",key:"agency",width:15},{header:"Cooperado",key:"cooperado",width:30},{header:"Documento",key:"document",width:18},{header:"Resumo",key:"summary",width:45},{header:"Produto Ofertado",key:"product",width:30}];const pe=re.getRow(1);pe.font={bold:!0,color:{argb:"FFFFFFFF"}},pe.fill={type:"pattern",pattern:"solid",fgColor:{argb:"FF005058"}},Qe.forEach(se=>{const ft={date:Ot(se.date),manager:se.manager.name,agency:se.manager.agency,cooperado:se.cooperado.name,document:se.cooperado.document,summary:se.summary};se.products&&se.products.length>0?se.products.forEach(mr=>{re.addRow({...ft,product:ki(mr)})}):re.addRow({...ft,product:"N/A"})});const Be=await K.xlsx.writeBuffer(),tt=new Blob([Be],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});W(tt,"relatorio_visitas.xlsx")}catch(y){console.error(y),alert("Erro ao exportar Excel.")}finally{de(!1)}},pr=async()=>{try{de(!0);const y=(await Bn(async()=>{const{default:pe}=await import("./utils-hE2CWlCl.js").then(Be=>Be.b);return{default:pe}},__vite__mapDeps([0,1]))).default,W=(await Bn(async()=>{const{default:pe}=await import("./utils-hE2CWlCl.js").then(Be=>Be.j);return{default:pe}},__vite__mapDeps([0,1]))).default,K=new y({orientation:"landscape"}),re=Qe.flatMap(pe=>(pe.products&&pe.products.length>0?pe.products:[null]).map(tt=>[Ot(pe.date),pe.manager.name,pe.manager.agency,pe.cooperado.name,pe.cooperado.document,pe.summary,tt?ki(tt):"N/A"]));W(K,{head:[["Data","Gerente","Agncia","Cooperado","Documento","Resumo","Produto"]],body:re,styles:{fontSize:8},headStyles:{fillColor:[0,80,88]},theme:"grid"}),K.save("relatorio_visitas.pdf")}catch(y){console.error(y),alert("Erro ao exportar PDF.")}finally{de(!1)}},Ci=E.useMemo(()=>o.reduce((y,W)=>{const K=W.manager.name;return y[K]||(y[K]=[]),y[K].push(W),y},{}),[o]);return h.jsxs("div",{className:"min-h-screen bg-gray-800 text-white",children:[h.jsx("header",{className:"bg-gray-900 shadow-md",children:h.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(_s,{className:"h-10 w-auto mr-4"}),h.jsx("h1",{className:"text-xl font-semibold",children:"Painel do desenvolvedor"})]}),h.jsx("button",{onClick:l,className:"bg-red-600 hover:bg-red-700 font-bold py-2 px-4 rounded-md transition duration-200",children:"Sair"})]})}),h.jsxs("main",{className:"container mx-auto p-4 md:p-6",children:[h.jsxs("div",{className:"mb-8 bg-gray-700 rounded-lg shadow-lg p-4",children:[h.jsx("h3",{className:"text-xl font-semibold mb-4 text-yellow-400",children:"Sugerir Visitas"}),h.jsxs("form",{onSubmit:bn,className:"space-y-4 bg-gray-800 p-4 rounded-md",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Cooperado da Carteira"}),h.jsxs("select",{value:Q,onChange:y=>Ge(y.target.value),className:"bg-gray-600 text-white rounded-md p-2 w-full h-10",required:!0,children:[h.jsx("option",{value:"",children:"Selecione um cooperado..."}),yn.map(y=>h.jsx("option",{value:y.id,children:y.name},y.id))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Gerente Responsvel"}),h.jsx("div",{className:"bg-gray-900 text-white rounded-md p-2 w-full h-10 flex items-center",children:h.jsx("span",{className:"text-gray-300 truncate",children:et?et.name:"Aguardando cooperado..."})})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Motivo da Sugesto"}),h.jsx("textarea",{rows:2,value:Ne,onChange:y=>$t(y.target.value),className:"bg-gray-600 text-white rounded-md p-2 w-full",placeholder:"Ex: Oportunidade para...",required:!0})]}),h.jsx("div",{className:"flex justify-end",children:h.jsx("button",{type:"submit",disabled:ye||!et,className:"bg-yellow-500 hover:bg-yellow-600 text-gray-900 font-bold py-2 px-4 rounded transition h-10 disabled:opacity-50",children:ye?"Enviando...":"Sugerir Visita"})})]}),h.jsxs("div",{className:"mt-6",children:[h.jsx("h4",{className:"text-lg font-semibold text-gray-300 mb-2",children:"Sugestes Ativas"}),Object.keys(Ci).length>0?h.jsx("div",{className:"space-y-4",children:Object.entries(Ci).map(([y,W])=>h.jsxs("div",{children:[h.jsx("h5",{className:"font-bold text-gray-400",children:y}),h.jsx("ul",{className:"list-disc list-inside mt-1 space-y-2",children:W.map(K=>h.jsxs("li",{className:"text-sm text-gray-200 flex justify-between items-start",children:[h.jsxs("div",{children:[h.jsxs("span",{children:[K.cooperado.name," (Sugerido em: ",Ot(K.suggestedAt),")"]}),h.jsx("p",{className:"text-xs text-gray-400 italic pl-5",children:K.reason})]}),h.jsx("button",{onClick:()=>f(K.id),className:"text-red-400 hover:text-red-300 text-xs font-bold flex-shrink-0 ml-4",children:"REMOVER"})]},K.id))})]},y))}):h.jsx("p",{className:"text-gray-400 text-sm",children:"Nenhuma sugesto ativa."})]})]}),h.jsxs("div",{className:"mb-8 bg-gray-700 rounded-lg shadow-lg p-4",children:[h.jsx("h3",{className:"text-xl font-semibold mb-3 text-blue-400",children:"Mapa de Visitas"}),h.jsxs("div",{className:"flex items-center space-x-2 text-xs mb-4 flex-wrap gap-y-2",children:[h.jsx("span",{className:"font-bold mr-2 text-sm",children:"Filtros de Idade:"}),h.jsx("button",{onClick:()=>F("all"),className:Pt("all"),children:"Todos"}),h.jsx("button",{onClick:()=>F("green"),className:Pt("green"),children:"< 70d"}),h.jsx("button",{onClick:()=>F("yellow"),className:Pt("yellow"),children:"70-90d"}),h.jsx("button",{onClick:()=>F("red"),className:Pt("red"),children:"> 90d"})]}),h.jsxs("div",{className:"flex items-center space-x-4 text-sm flex-wrap gap-4 mb-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"font-bold mr-2",children:"Gerente:"}),h.jsxs("select",{value:be,onChange:y=>Le(y.target.value),className:"bg-gray-600 text-white rounded-md p-2",children:[h.jsx("option",{value:"all",children:"Todos"}),gn.map(y=>h.jsx("option",{value:y.id,children:y.name},y.id))]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"font-bold mr-2",children:"Agncia:"}),h.jsxs("select",{value:Ee,onChange:y=>k(y.target.value),className:"bg-gray-600 text-white rounded-md p-2",children:[h.jsx("option",{value:"all",children:"Todas"}),Qt.map(y=>h.jsx("option",{value:y,children:y},y))]})]})]}),h.jsxs("div",{className:"border-t border-gray-600 pt-4 mt-4",children:[h.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[h.jsx("span",{className:"font-bold",children:"Perodo:"}),h.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[h.jsx("button",{onClick:()=>Si(0),className:"bg-gray-600 text-gray-200 px-3 py-1 rounded-md text-xs",children:"Hoje"}),h.jsx("button",{onClick:()=>Si(6),className:"bg-gray-600 text-gray-200 px-3 py-1 rounded-md text-xs",children:"7 dias"}),h.jsx("button",{onClick:()=>Si(29),className:"bg-gray-600 text-gray-200 px-3 py-1 rounded-md text-xs",children:"30 dias"})]})]}),h.jsxs("div",{className:"flex items-center space-x-4 text-sm flex-wrap gap-4 mt-2",children:[h.jsxs("div",{children:[h.jsx("label",{className:"font-medium mr-2 text-gray-300",children:"De:"}),h.jsx("input",{type:"date",value:A,onChange:y=>j(y.target.value),className:"bg-gray-600 text-white rounded-md p-2"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"font-medium mr-2 text-gray-300",children:"At:"}),h.jsx("input",{type:"date",value:Y,onChange:y=>te(y.target.value),min:A,className:"bg-gray-600 text-white rounded-md p-2"})]}),h.jsx("button",{onClick:()=>{j(""),te("")},className:"bg-gray-500 hover:bg-gray-400 text-white font-bold py-2 px-3 rounded text-xs",children:"Limpar"})]})]}),h.jsx(Um,{visits:vn})]}),h.jsxs("div",{className:"my-8 bg-gray-700 rounded-lg shadow-lg p-4",children:[h.jsx("h3",{className:"text-xl font-semibold mb-4 text-blue-400",children:"Relatrio de Visitas"}),h.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-center mb-4 p-4 bg-gray-800 rounded-md",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-gray-300 mr-2",children:"De:"}),h.jsx("input",{type:"date",value:D,onChange:y=>C(y.target.value),className:"bg-gray-600 text-white rounded-md p-2"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-sm font-medium text-gray-300 mr-2",children:"At:"}),h.jsx("input",{type:"date",value:ce,onChange:y=>ue(y.target.value),min:D,className:"bg-gray-600 text-white rounded-md p-2"})]}),h.jsxs("div",{className:"flex gap-2",children:[h.jsx("button",{onClick:xn,disabled:!Qe.length||P,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50",children:"XLSX"}),h.jsx("button",{onClick:pr,disabled:!Qe.length||P,className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded disabled:opacity-50",children:"PDF"})]})]}),h.jsx("div",{className:"overflow-x-auto mt-4",children:Qe.length>0?h.jsxs("table",{className:"w-full text-sm text-left text-gray-300",children:[h.jsx("thead",{className:"text-xs text-gray-400 uppercase bg-gray-800",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-4 py-3",children:"Data"}),h.jsx("th",{className:"px-4 py-3",children:"Gerente"}),h.jsx("th",{className:"px-4 py-3",children:"Agncia"}),h.jsx("th",{className:"px-4 py-3",children:"Cooperado"}),h.jsx("th",{className:"px-4 py-3",children:"Resumo"}),h.jsx("th",{className:"px-4 py-3",children:"Produtos"})]})}),h.jsx("tbody",{children:Qe.map(y=>h.jsxs("tr",{className:"bg-gray-700 border-b border-gray-600",children:[h.jsx("td",{className:"px-4 py-2 whitespace-nowrap",children:Ot(y.date)}),h.jsx("td",{className:"px-4 py-2",children:y.manager.name}),h.jsx("td",{className:"px-4 py-2",children:y.manager.agency}),h.jsx("td",{className:"px-4 py-2",children:y.cooperado.name}),h.jsx("td",{className:"px-4 py-2 min-w-[200px]",children:y.summary}),h.jsx("td",{className:"px-4 py-2 min-w-[200px]",children:fr(y.products)})]},y.id))})]}):h.jsx("p",{className:"text-center text-gray-400 py-4",children:"Selecione um intervalo."})})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-xl font-semibold text-green-400",children:"Usurios"}),h.jsx("button",{onClick:Xe,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-3 rounded text-sm",children:"Adicionar"})]}),h.jsx("div",{className:"bg-gray-700 rounded-lg shadow-lg overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm text-left text-gray-300",children:[h.jsx("thead",{className:"text-xs text-gray-400 uppercase bg-gray-800",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3",children:"Nome"}),h.jsx("th",{className:"px-6 py-3",children:"Email"}),h.jsx("th",{className:"px-6 py-3",children:"Aes"})]})}),h.jsx("tbody",{children:s.filter(y=>y.role!=="Desenvolvedor").map(y=>h.jsxs("tr",{className:"bg-gray-700 border-b border-gray-600",children:[h.jsx("td",{className:"px-6 py-4",children:y.name}),h.jsx("td",{className:"px-6 py-4",children:y.email}),h.jsxs("td",{className:"px-6 py-4 text-center space-x-2",children:[h.jsx("button",{onClick:()=>mn(y),className:"text-blue-400",children:"Editar"}),h.jsx("button",{onClick:()=>V(y),className:"text-yellow-400",children:"Senha"}),h.jsx("button",{onClick:()=>Rt(y.id),className:"text-red-400",children:"Excluir"})]})]},y.id))})]})})]}),h.jsxs("div",{children:[h.jsxs("div",{className:"flex justify-between items-center mb-4",children:[h.jsx("h3",{className:"text-xl font-semibold text-purple-400",children:"Cooperados"}),h.jsx("button",{onClick:Ti,className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-3 rounded text-sm",children:"Adicionar"})]}),h.jsx("div",{className:"bg-gray-700 rounded-lg shadow-lg overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm text-left text-gray-300",children:[h.jsx("thead",{className:"text-xs text-gray-400 uppercase bg-gray-800",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3",children:"Nome"}),h.jsx("th",{className:"px-6 py-3",children:"Gerente"}),h.jsx("th",{className:"px-6 py-3",children:"Aes"})]})}),h.jsx("tbody",{children:t.map(y=>h.jsxs("tr",{className:"bg-gray-700 border-b border-gray-600",children:[h.jsx("td",{className:"px-6 py-4",children:y.name}),h.jsx("td",{className:"px-6 py-4",children:y.managerName||"N/A"}),h.jsxs("td",{className:"px-6 py-4 text-center space-x-2",children:[h.jsx("button",{onClick:()=>hr(y),className:"text-blue-400",children:"Editar"}),h.jsx("button",{onClick:()=>Ei(y.id),className:"text-red-400",children:"Excluir"})]})]},y.id))})]})})]})]})]}),R&&h.jsx(Bm,{user:xe,onSave:Ii,onClose:Xt}),ne&&h.jsx(Wm,{cooperado:B,managers:gn,onSave:_n,onClose:Pi})]})},Hm=({user:s,onSave:t,onClose:n})=>{const[o,l]=E.useState(""),[u,f]=E.useState(""),[_,m]=E.useState(""),w=I=>{if(I.preventDefault(),o!==u){m("Senhas no coincidem.");return}if(o.length<6){m("Mnimo 6 caracteres.");return}t(s.id,o)};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex justify-center items-center z-50 p-4",children:h.jsx("div",{className:"bg-gray-700 rounded-lg shadow-xl w-full max-w-sm",children:h.jsxs("form",{onSubmit:w,className:"p-6 text-white",children:[h.jsxs("div",{className:"flex justify-between mb-4",children:[h.jsxs("h2",{className:"text-xl font-bold",children:["Alterar Senha de ",s.name]}),h.jsx("button",{type:"button",onClick:n,className:"text-gray-400",children:"X"})]}),_&&h.jsx("p",{className:"text-red-400 text-sm mb-3",children:_}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-gray-300 text-sm font-bold mb-2",children:"Nova Senha"}),h.jsx("input",{type:"password",value:o,onChange:I=>l(I.target.value),required:!0,className:"bg-gray-600 rounded w-full py-2 px-3 text-white"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-gray-300 text-sm font-bold mb-2",children:"Confirmar"}),h.jsx("input",{type:"password",value:u,onChange:I=>f(I.target.value),required:!0,className:"bg-gray-600 rounded w-full py-2 px-3 text-white"})]})]}),h.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[h.jsx("button",{type:"button",onClick:n,className:"bg-gray-500 rounded px-4 py-2",children:"Cancelar"}),h.jsx("button",{type:"submit",className:"bg-yellow-500 text-gray-900 rounded px-4 py-2 font-bold",children:"Salvar"})]})]})})})},qm=()=>{const[s,t]=E.useState(null),[n,o]=E.useState(!0),[l,u]=E.useState([]),[f,_]=E.useState([]),[m,w]=E.useState([]),[I,x]=E.useState([]),[O,V]=E.useState(null),X=E.useCallback(async k=>{o(!0);try{if(k.role==="Desenvolvedor"){const[A,j,Y,te]=await Promise.all([ge.collection("users").get(),ge.collection("cooperados").get(),ge.collection("visits").get(),ge.collection("suggestedVisits").get()]);u(A.docs.map(D=>({...D.data(),id:D.id}))),_(j.docs.map(D=>({...D.data(),id:D.id}))),w(Y.docs.map(D=>{const C=D.data();return{...C,id:D.id,date:C.date.toDate()}})),x(te.docs.map(D=>{const C=D.data();return{...C,id:D.id,suggestedAt:C.suggestedAt.toDate()}}))}else{const[A,j,Y,te]=await Promise.all([ge.collection("cooperados").get(),ge.collection("visits").where("manager.id","==",k.id).get(),ge.collection("suggestedVisits").where("manager.id","==",k.id).get(),ge.collection("users").get()]);u(te.docs.map(D=>({...D.data(),id:D.id}))),_(A.docs.map(D=>({...D.data(),id:D.id}))),w(j.docs.map(D=>{const C=D.data();return{...C,id:D.id,date:C.date.toDate()}})),x(Y.docs.map(D=>{const C=D.data();return{...C,id:D.id,suggestedAt:C.suggestedAt.toDate()}}))}}catch(A){console.error(A)}finally{o(!1)}},[]);E.useEffect(()=>Gi.onAuthStateChanged(async k=>{if(k){const A=await ge.collection("users").doc(k.uid).get();if(A.exists){const j={...A.data(),id:k.uid};t(j),await X(j)}else await Gi.signOut()}else t(null),o(!1)}),[X]);const F=async(k,A)=>{try{return await Gi.signInWithEmailAndPassword(k,A),!0}catch{return!1}},be=()=>Gi.signOut(),Le=async k=>{if(!s)return;const A={...k,manager:{id:s.id,name:s.name,agency:s.agency}},j=await ge.collection("visits").add(A);w(D=>[...D,{...A,id:j.id}]);const Y="document"in k.cooperado?k.cooperado.document:"",te=I.find(D=>D.cooperado.document===Y&&D.manager.id===s.id);te&&await ge.collection("suggestedVisits").doc(te.id).delete()},Ee=async k=>{let A;try{const j="Secondary";A=dt.apps.find(C=>C.name===j)||dt.initializeApp(kl,j);const te=A.auth(),D=await te.createUserWithEmailAndPassword(k.email,k.password);D.user&&(await ge.collection("users").doc(D.user.uid).set({...k,password:k.password}),u(C=>[...C,{...k,id:D.user.uid}])),await te.signOut(),await A.delete()}catch(j){alert("Erro ao criar usurio: "+j.message),A&&A.delete()}};return n?h.jsx("div",{className:"h-screen flex items-center justify-center bg-[#005058] text-white",style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#005058",color:"white"},children:"Carregando..."}):s?h.jsxs(h.Fragment,{children:[s.role==="Desenvolvedor"?h.jsx(Vm,{users:l,cooperados:f,visits:m,suggestedVisits:I,onLogout:be,onAddSuggestion:async k=>{const A=await ge.collection("suggestedVisits").add({...k,suggestedAt:new Date});x(j=>[...j,{...k,id:A.id,suggestedAt:new Date}])},onRemoveSuggestion:async k=>{await ge.collection("suggestedVisits").doc(k).delete(),x(A=>A.filter(j=>j.id!==k))},onAddUser:Ee,onUpdateUser:async(k,A)=>{await ge.collection("users").doc(k).update(A),u(j=>j.map(Y=>Y.id===k?{...Y,...A}:Y))},onDeleteUser:async k=>{await ge.collection("users").doc(k).delete(),u(A=>A.filter(j=>j.id!==k))},onAddCooperado:async k=>{const A=await ge.collection("cooperados").add(k);_(j=>[...j,{...k,id:A.id}])},onUpdateCooperado:async(k,A)=>{await ge.collection("cooperados").doc(k).update(A),_(j=>j.map(Y=>Y.id===k?{...Y,...A}:Y))},onDeleteCooperado:async k=>{await ge.collection("cooperados").doc(k).delete(),_(A=>A.filter(j=>j.id!==k))},onOpenChangePassword:V}):h.jsx(jm,{user:s,visits:m,cooperados:f,suggestedVisits:I,onLogout:be,addVisit:Le}),O&&h.jsx(Hm,{user:O,onSave:()=>{alert("Use o console do Firebase."),V(null)},onClose:()=>V(null)})]}):h.jsx(Am,{onLogin:F})};console.log("Aplicao iniciando...");const Ll=document.getElementById("root");if(!Ll)throw new Error("Could not find root element to mount to");const Gm=ts.createRoot(Ll);Gm.render(h.jsx(nd.StrictMode,{children:h.jsx(qm,{})}));
