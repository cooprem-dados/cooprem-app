(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var eI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Qv={exports:{}},gh={},Yv={exports:{}},Te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fl=Symbol.for("react.element"),tI=Symbol.for("react.portal"),nI=Symbol.for("react.fragment"),iI=Symbol.for("react.strict_mode"),rI=Symbol.for("react.profiler"),sI=Symbol.for("react.provider"),oI=Symbol.for("react.context"),aI=Symbol.for("react.forward_ref"),lI=Symbol.for("react.suspense"),uI=Symbol.for("react.memo"),cI=Symbol.for("react.lazy"),Sg=Symbol.iterator;function hI(t){return t===null||typeof t!="object"?null:(t=Sg&&t[Sg]||t["@@iterator"],typeof t=="function"?t:null)}var Xv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jv=Object.assign,ey={};function Uo(t,e,n){this.props=t,this.context=e,this.refs=ey,this.updater=n||Xv}Uo.prototype.isReactComponent={};Uo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Uo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function ty(){}ty.prototype=Uo.prototype;function mp(t,e,n){this.props=t,this.context=e,this.refs=ey,this.updater=n||Xv}var gp=mp.prototype=new ty;gp.constructor=mp;Jv(gp,Uo.prototype);gp.isPureReactComponent=!0;var Pg=Array.isArray,ny=Object.prototype.hasOwnProperty,_p={current:null},iy={key:!0,ref:!0,__self:!0,__source:!0};function ry(t,e,n){var i,s={},o=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(o=""+e.key),e)ny.call(e,i)&&!iy.hasOwnProperty(i)&&(s[i]=e[i]);var h=arguments.length-2;if(h===1)s.children=n;else if(1<h){for(var d=Array(h),m=0;m<h;m++)d[m]=arguments[m+2];s.children=d}if(t&&t.defaultProps)for(i in h=t.defaultProps,h)s[i]===void 0&&(s[i]=h[i]);return{$$typeof:Fl,type:t,key:o,ref:l,props:s,_owner:_p.current}}function dI(t,e){return{$$typeof:Fl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fl}function fI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var xg=/\/+/g;function ad(t,e){return typeof t=="object"&&t!==null&&t.key!=null?fI(""+t.key):e.toString(36)}function uc(t,e,n,i,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var l=!1;if(t===null)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(t.$$typeof){case Fl:case tI:l=!0}}if(l)return l=t,s=s(l),t=i===""?"."+ad(l,0):i,Pg(s)?(n="",t!=null&&(n=t.replace(xg,"$&/")+"/"),uc(s,e,n,"",function(m){return m})):s!=null&&(vp(s)&&(s=dI(s,n+(!s.key||l&&l.key===s.key?"":(""+s.key).replace(xg,"$&/")+"/")+t)),e.push(s)),1;if(l=0,i=i===""?".":i+":",Pg(t))for(var h=0;h<t.length;h++){o=t[h];var d=i+ad(o,h);l+=uc(o,e,n,d,s)}else if(d=hI(t),typeof d=="function")for(t=d.call(t),h=0;!(o=t.next()).done;)o=o.value,d=i+ad(o,h++),l+=uc(o,e,n,d,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function zu(t,e,n){if(t==null)return t;var i=[],s=0;return uc(t,i,"","",function(o){return e.call(n,o,s++)}),i}function pI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ht={current:null},cc={transition:null},mI={ReactCurrentDispatcher:Ht,ReactCurrentBatchConfig:cc,ReactCurrentOwner:_p};function sy(){throw Error("act(...) is not supported in production builds of React.")}Te.Children={map:zu,forEach:function(t,e,n){zu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return zu(t,function(){e++}),e},toArray:function(t){return zu(t,function(e){return e})||[]},only:function(t){if(!vp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Te.Component=Uo;Te.Fragment=nI;Te.Profiler=rI;Te.PureComponent=mp;Te.StrictMode=iI;Te.Suspense=lI;Te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mI;Te.act=sy;Te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Jv({},t.props),s=t.key,o=t.ref,l=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,l=_p.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var h=t.type.defaultProps;for(d in e)ny.call(e,d)&&!iy.hasOwnProperty(d)&&(i[d]=e[d]===void 0&&h!==void 0?h[d]:e[d])}var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){h=Array(d);for(var m=0;m<d;m++)h[m]=arguments[m+2];i.children=h}return{$$typeof:Fl,type:t.type,key:s,ref:o,props:i,_owner:l}};Te.createContext=function(t){return t={$$typeof:oI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sI,_context:t},t.Consumer=t};Te.createElement=ry;Te.createFactory=function(t){var e=ry.bind(null,t);return e.type=t,e};Te.createRef=function(){return{current:null}};Te.forwardRef=function(t){return{$$typeof:aI,render:t}};Te.isValidElement=vp;Te.lazy=function(t){return{$$typeof:cI,_payload:{_status:-1,_result:t},_init:pI}};Te.memo=function(t,e){return{$$typeof:uI,type:t,compare:e===void 0?null:e}};Te.startTransition=function(t){var e=cc.transition;cc.transition={};try{t()}finally{cc.transition=e}};Te.unstable_act=sy;Te.useCallback=function(t,e){return Ht.current.useCallback(t,e)};Te.useContext=function(t){return Ht.current.useContext(t)};Te.useDebugValue=function(){};Te.useDeferredValue=function(t){return Ht.current.useDeferredValue(t)};Te.useEffect=function(t,e){return Ht.current.useEffect(t,e)};Te.useId=function(){return Ht.current.useId()};Te.useImperativeHandle=function(t,e,n){return Ht.current.useImperativeHandle(t,e,n)};Te.useInsertionEffect=function(t,e){return Ht.current.useInsertionEffect(t,e)};Te.useLayoutEffect=function(t,e){return Ht.current.useLayoutEffect(t,e)};Te.useMemo=function(t,e){return Ht.current.useMemo(t,e)};Te.useReducer=function(t,e,n){return Ht.current.useReducer(t,e,n)};Te.useRef=function(t){return Ht.current.useRef(t)};Te.useState=function(t){return Ht.current.useState(t)};Te.useSyncExternalStore=function(t,e,n){return Ht.current.useSyncExternalStore(t,e,n)};Te.useTransition=function(){return Ht.current.useTransition()};Te.version="18.3.1";Yv.exports=Te;var _e=Yv.exports;const gI=Kv(_e);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _I=_e,vI=Symbol.for("react.element"),yI=Symbol.for("react.fragment"),wI=Object.prototype.hasOwnProperty,EI=_I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,TI={key:!0,ref:!0,__self:!0,__source:!0};function oy(t,e,n){var i,s={},o=null,l=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)wI.call(e,i)&&!TI.hasOwnProperty(i)&&(s[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)s[i]===void 0&&(s[i]=e[i]);return{$$typeof:vI,type:t,key:o,ref:l,props:s,_owner:EI.current}}gh.Fragment=yI;gh.jsx=oy;gh.jsxs=oy;Qv.exports=gh;var b=Qv.exports,Zd={},ay={exports:{}},un={},ly={exports:{}},uy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(q,le){var X=q.length;q.push(le);e:for(;0<X;){var ce=X-1>>>1,ve=q[ce];if(0<s(ve,le))q[ce]=le,q[X]=ve,X=ce;else break e}}function n(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var le=q[0],X=q.pop();if(X!==le){q[0]=X;e:for(var ce=0,ve=q.length,Ie=ve>>>1;ce<Ie;){var Le=2*(ce+1)-1,ye=q[Le],fe=Le+1,ht=q[fe];if(0>s(ye,X))fe<ve&&0>s(ht,ye)?(q[ce]=ht,q[fe]=X,ce=fe):(q[ce]=ye,q[Le]=X,ce=Le);else if(fe<ve&&0>s(ht,X))q[ce]=ht,q[fe]=X,ce=fe;else break e}}return le}function s(q,le){var X=q.sortIndex-le.sortIndex;return X!==0?X:q.id-le.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,h=l.now();t.unstable_now=function(){return l.now()-h}}var d=[],m=[],v=1,w=null,I=3,D=!1,U=!1,B=!1,Z=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(q){for(var le=n(m);le!==null;){if(le.callback===null)i(m);else if(le.startTime<=q)i(m),le.sortIndex=le.expirationTime,e(d,le);else break;le=n(m)}}function F(q){if(B=!1,N(q),!U)if(n(d)!==null)U=!0,ct(H);else{var le=n(m);le!==null&&Ft(F,le.startTime-q)}}function H(q,le){U=!1,B&&(B=!1,R(T),T=-1),D=!0;var X=I;try{for(N(le),w=n(d);w!==null&&(!(w.expirationTime>le)||q&&!O());){var ce=w.callback;if(typeof ce=="function"){w.callback=null,I=w.priorityLevel;var ve=ce(w.expirationTime<=le);le=t.unstable_now(),typeof ve=="function"?w.callback=ve:w===n(d)&&i(d),N(le)}else i(d);w=n(d)}if(w!==null)var Ie=!0;else{var Le=n(m);Le!==null&&Ft(F,Le.startTime-le),Ie=!1}return Ie}finally{w=null,I=X,D=!1}}var $=!1,S=null,T=-1,P=5,C=-1;function O(){return!(t.unstable_now()-C<P)}function M(){if(S!==null){var q=t.unstable_now();C=q;var le=!0;try{le=S(!0,q)}finally{le?A():($=!1,S=null)}}else $=!1}var A;if(typeof x=="function")A=function(){x(M)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,ii=Ye.port2;Ye.port1.onmessage=M,A=function(){ii.postMessage(null)}}else A=function(){Z(M,0)};function ct(q){S=q,$||($=!0,A())}function Ft(q,le){T=Z(function(){q(t.unstable_now())},le)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_continueExecution=function(){U||D||(U=!0,ct(H))},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return I},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(q){switch(I){case 1:case 2:case 3:var le=3;break;default:le=I}var X=I;I=le;try{return q()}finally{I=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(q,le){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var X=I;I=q;try{return le()}finally{I=X}},t.unstable_scheduleCallback=function(q,le,X){var ce=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ce+X:ce):X=ce,q){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=X+ve,q={id:v++,callback:le,priorityLevel:q,startTime:X,expirationTime:ve,sortIndex:-1},X>ce?(q.sortIndex=X,e(m,q),n(d)===null&&q===n(m)&&(B?(R(T),T=-1):B=!0,Ft(F,X-ce))):(q.sortIndex=ve,e(d,q),U||D||(U=!0,ct(H))),q},t.unstable_shouldYield=O,t.unstable_wrapCallback=function(q){var le=I;return function(){var X=I;I=le;try{return q.apply(this,arguments)}finally{I=X}}}})(uy);ly.exports=uy;var II=ly.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SI=_e,ln=II;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var cy=new Set,dl={};function ds(t,e){So(t,e),So(t+"Capture",e)}function So(t,e){for(dl[t]=e,t=0;t<e.length;t++)cy.add(e[t])}var Ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Kd=Object.prototype.hasOwnProperty,PI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ag={},Cg={};function xI(t){return Kd.call(Cg,t)?!0:Kd.call(Ag,t)?!1:PI.test(t)?Cg[t]=!0:(Ag[t]=!0,!1)}function AI(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function CI(t,e,n,i){if(e===null||typeof e>"u"||AI(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function qt(t,e,n,i,s,o,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=l}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ct[t]=new qt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ct[e]=new qt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ct[t]=new qt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ct[t]=new qt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ct[t]=new qt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ct[t]=new qt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ct[t]=new qt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ct[t]=new qt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ct[t]=new qt(t,5,!1,t.toLowerCase(),null,!1,!1)});var yp=/[\-:]([a-z])/g;function wp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yp,wp);Ct[e]=new qt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yp,wp);Ct[e]=new qt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yp,wp);Ct[e]=new qt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ct[t]=new qt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ct.xlinkHref=new qt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ct[t]=new qt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ep(t,e,n,i){var s=Ct.hasOwnProperty(e)?Ct[e]:null;(s!==null?s.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(CI(e,n,s,i)&&(n=null),i||s===null?xI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,i=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Mi=SI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Uu=Symbol.for("react.element"),eo=Symbol.for("react.portal"),to=Symbol.for("react.fragment"),Tp=Symbol.for("react.strict_mode"),Qd=Symbol.for("react.profiler"),hy=Symbol.for("react.provider"),dy=Symbol.for("react.context"),Ip=Symbol.for("react.forward_ref"),Yd=Symbol.for("react.suspense"),Xd=Symbol.for("react.suspense_list"),Sp=Symbol.for("react.memo"),Yi=Symbol.for("react.lazy"),fy=Symbol.for("react.offscreen"),kg=Symbol.iterator;function La(t){return t===null||typeof t!="object"?null:(t=kg&&t[kg]||t["@@iterator"],typeof t=="function"?t:null)}var Ke=Object.assign,ld;function ja(t){if(ld===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ld=e&&e[1]||""}return`
`+ld+t}var ud=!1;function cd(t,e){if(!t||ud)return"";ud=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(m){var i=m}Reflect.construct(t,[],e)}else{try{e.call()}catch(m){i=m}t.call(e.prototype)}else{try{throw Error()}catch(m){i=m}t()}}catch(m){if(m&&i&&typeof m.stack=="string"){for(var s=m.stack.split(`
`),o=i.stack.split(`
`),l=s.length-1,h=o.length-1;1<=l&&0<=h&&s[l]!==o[h];)h--;for(;1<=l&&0<=h;l--,h--)if(s[l]!==o[h]){if(l!==1||h!==1)do if(l--,h--,0>h||s[l]!==o[h]){var d=`
`+s[l].replace(" at new "," at ");return t.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",t.displayName)),d}while(1<=l&&0<=h);break}}}finally{ud=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ja(t):""}function kI(t){switch(t.tag){case 5:return ja(t.type);case 16:return ja("Lazy");case 13:return ja("Suspense");case 19:return ja("SuspenseList");case 0:case 2:case 15:return t=cd(t.type,!1),t;case 11:return t=cd(t.type.render,!1),t;case 1:return t=cd(t.type,!0),t;default:return""}}function Jd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case to:return"Fragment";case eo:return"Portal";case Qd:return"Profiler";case Tp:return"StrictMode";case Yd:return"Suspense";case Xd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case dy:return(t.displayName||"Context")+".Consumer";case hy:return(t._context.displayName||"Context")+".Provider";case Ip:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Sp:return e=t.displayName||null,e!==null?e:Jd(t.type)||"Memo";case Yi:e=t._payload,t=t._init;try{return Jd(t(e))}catch{}}return null}function RI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jd(e);case 8:return e===Tp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function wr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function py(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function LI(t){var e=py(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(l){i=""+l,o.call(this,l)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Bu(t){t._valueTracker||(t._valueTracker=LI(t))}function my(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=py(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Rc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ef(t,e){var n=e.checked;return Ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Rg(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=wr(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gy(t,e){e=e.checked,e!=null&&Ep(t,"checked",e,!1)}function tf(t,e){gy(t,e);var n=wr(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?nf(t,e.type,n):e.hasOwnProperty("defaultValue")&&nf(t,e.type,wr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Lg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function nf(t,e,n){(e!=="number"||Rc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Wa=Array.isArray;function po(t,e,n,i){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&i&&(t[n].defaultSelected=!0)}else{for(n=""+wr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,i&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function rf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ng(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(Wa(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:wr(n)}}function _y(t,e){var n=wr(e.value),i=wr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function bg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function vy(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function sf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?vy(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ju,yy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ju=ju||document.createElement("div"),ju.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ju.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fl(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},NI=["Webkit","ms","Moz","O"];Object.keys(Xa).forEach(function(t){NI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xa[e]=Xa[t]})});function wy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xa.hasOwnProperty(t)&&Xa[t]?(""+e).trim():e+"px"}function Ey(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,s=wy(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,s):t[n]=s}}var bI=Ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function of(t,e){if(e){if(bI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function af(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lf=null;function Pp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var uf=null,mo=null,go=null;function Og(t){if(t=Bl(t)){if(typeof uf!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=Eh(e),uf(t.stateNode,t.type,e))}}function Ty(t){mo?go?go.push(t):go=[t]:mo=t}function Iy(){if(mo){var t=mo,e=go;if(go=mo=null,Og(t),e)for(t=0;t<e.length;t++)Og(e[t])}}function Sy(t,e){return t(e)}function Py(){}var hd=!1;function xy(t,e,n){if(hd)return t(e,n);hd=!0;try{return Sy(t,e,n)}finally{hd=!1,(mo!==null||go!==null)&&(Py(),Iy())}}function pl(t,e){var n=t.stateNode;if(n===null)return null;var i=Eh(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var cf=!1;if(Ci)try{var Na={};Object.defineProperty(Na,"passive",{get:function(){cf=!0}}),window.addEventListener("test",Na,Na),window.removeEventListener("test",Na,Na)}catch{cf=!1}function OI(t,e,n,i,s,o,l,h,d){var m=Array.prototype.slice.call(arguments,3);try{e.apply(n,m)}catch(v){this.onError(v)}}var Ja=!1,Lc=null,Nc=!1,hf=null,DI={onError:function(t){Ja=!0,Lc=t}};function MI(t,e,n,i,s,o,l,h,d){Ja=!1,Lc=null,OI.apply(DI,arguments)}function VI(t,e,n,i,s,o,l,h,d){if(MI.apply(this,arguments),Ja){if(Ja){var m=Lc;Ja=!1,Lc=null}else throw Error(Y(198));Nc||(Nc=!0,hf=m)}}function fs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ay(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Dg(t){if(fs(t)!==t)throw Error(Y(188))}function FI(t){var e=t.alternate;if(!e){if(e=fs(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,i=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(i=s.return,i!==null){n=i;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return Dg(s),t;if(o===i)return Dg(s),e;o=o.sibling}throw Error(Y(188))}if(n.return!==i.return)n=s,i=o;else{for(var l=!1,h=s.child;h;){if(h===n){l=!0,n=s,i=o;break}if(h===i){l=!0,i=s,n=o;break}h=h.sibling}if(!l){for(h=o.child;h;){if(h===n){l=!0,n=o,i=s;break}if(h===i){l=!0,i=o,n=s;break}h=h.sibling}if(!l)throw Error(Y(189))}}if(n.alternate!==i)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function Cy(t){return t=FI(t),t!==null?ky(t):null}function ky(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ky(t);if(e!==null)return e;t=t.sibling}return null}var Ry=ln.unstable_scheduleCallback,Mg=ln.unstable_cancelCallback,zI=ln.unstable_shouldYield,UI=ln.unstable_requestPaint,nt=ln.unstable_now,BI=ln.unstable_getCurrentPriorityLevel,xp=ln.unstable_ImmediatePriority,Ly=ln.unstable_UserBlockingPriority,bc=ln.unstable_NormalPriority,jI=ln.unstable_LowPriority,Ny=ln.unstable_IdlePriority,_h=null,Qn=null;function WI(t){if(Qn&&typeof Qn.onCommitFiberRoot=="function")try{Qn.onCommitFiberRoot(_h,t,void 0,(t.current.flags&128)===128)}catch{}}var Dn=Math.clz32?Math.clz32:$I,HI=Math.log,qI=Math.LN2;function $I(t){return t>>>=0,t===0?32:31-(HI(t)/qI|0)|0}var Wu=64,Hu=4194304;function Ha(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Oc(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,s=t.suspendedLanes,o=t.pingedLanes,l=n&268435455;if(l!==0){var h=l&~s;h!==0?i=Ha(h):(o&=l,o!==0&&(i=Ha(o)))}else l=n&~s,l!==0?i=Ha(l):o!==0&&(i=Ha(o));if(i===0)return 0;if(e!==0&&e!==i&&!(e&s)&&(s=i&-i,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-Dn(e),s=1<<n,i|=t[n],e&=~s;return i}function GI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZI(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var l=31-Dn(o),h=1<<l,d=s[l];d===-1?(!(h&n)||h&i)&&(s[l]=GI(h,e)):d<=e&&(t.expiredLanes|=h),o&=~h}}function df(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function by(){var t=Wu;return Wu<<=1,!(Wu&4194240)&&(Wu=64),t}function dd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function zl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Dn(e),t[e]=n}function KI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Dn(n),o=1<<s;e[s]=0,i[s]=-1,t[s]=-1,n&=~o}}function Ap(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-Dn(n),s=1<<i;s&e|t[i]&e&&(t[i]|=e),n&=~s}}var be=0;function Oy(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Dy,Cp,My,Vy,Fy,ff=!1,qu=[],lr=null,ur=null,cr=null,ml=new Map,gl=new Map,Ji=[],QI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vg(t,e){switch(t){case"focusin":case"focusout":lr=null;break;case"dragenter":case"dragleave":ur=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":ml.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":gl.delete(e.pointerId)}}function ba(t,e,n,i,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:o,targetContainers:[s]},e!==null&&(e=Bl(e),e!==null&&Cp(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function YI(t,e,n,i,s){switch(e){case"focusin":return lr=ba(lr,t,e,n,i,s),!0;case"dragenter":return ur=ba(ur,t,e,n,i,s),!0;case"mouseover":return cr=ba(cr,t,e,n,i,s),!0;case"pointerover":var o=s.pointerId;return ml.set(o,ba(ml.get(o)||null,t,e,n,i,s)),!0;case"gotpointercapture":return o=s.pointerId,gl.set(o,ba(gl.get(o)||null,t,e,n,i,s)),!0}return!1}function zy(t){var e=Zr(t.target);if(e!==null){var n=fs(e);if(n!==null){if(e=n.tag,e===13){if(e=Ay(n),e!==null){t.blockedOn=e,Fy(t.priority,function(){My(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function hc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=pf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);lf=i,n.target.dispatchEvent(i),lf=null}else return e=Bl(n),e!==null&&Cp(e),t.blockedOn=n,!1;e.shift()}return!0}function Fg(t,e,n){hc(t)&&n.delete(e)}function XI(){ff=!1,lr!==null&&hc(lr)&&(lr=null),ur!==null&&hc(ur)&&(ur=null),cr!==null&&hc(cr)&&(cr=null),ml.forEach(Fg),gl.forEach(Fg)}function Oa(t,e){t.blockedOn===e&&(t.blockedOn=null,ff||(ff=!0,ln.unstable_scheduleCallback(ln.unstable_NormalPriority,XI)))}function _l(t){function e(s){return Oa(s,t)}if(0<qu.length){Oa(qu[0],t);for(var n=1;n<qu.length;n++){var i=qu[n];i.blockedOn===t&&(i.blockedOn=null)}}for(lr!==null&&Oa(lr,t),ur!==null&&Oa(ur,t),cr!==null&&Oa(cr,t),ml.forEach(e),gl.forEach(e),n=0;n<Ji.length;n++)i=Ji[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<Ji.length&&(n=Ji[0],n.blockedOn===null);)zy(n),n.blockedOn===null&&Ji.shift()}var _o=Mi.ReactCurrentBatchConfig,Dc=!0;function JI(t,e,n,i){var s=be,o=_o.transition;_o.transition=null;try{be=1,kp(t,e,n,i)}finally{be=s,_o.transition=o}}function eS(t,e,n,i){var s=be,o=_o.transition;_o.transition=null;try{be=4,kp(t,e,n,i)}finally{be=s,_o.transition=o}}function kp(t,e,n,i){if(Dc){var s=pf(t,e,n,i);if(s===null)Td(t,e,i,Mc,n),Vg(t,i);else if(YI(s,t,e,n,i))i.stopPropagation();else if(Vg(t,i),e&4&&-1<QI.indexOf(t)){for(;s!==null;){var o=Bl(s);if(o!==null&&Dy(o),o=pf(t,e,n,i),o===null&&Td(t,e,i,Mc,n),o===s)break;s=o}s!==null&&i.stopPropagation()}else Td(t,e,i,null,n)}}var Mc=null;function pf(t,e,n,i){if(Mc=null,t=Pp(i),t=Zr(t),t!==null)if(e=fs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ay(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Mc=t,null}function Uy(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(BI()){case xp:return 1;case Ly:return 4;case bc:case jI:return 16;case Ny:return 536870912;default:return 16}default:return 16}}var sr=null,Rp=null,dc=null;function By(){if(dc)return dc;var t,e=Rp,n=e.length,i,s="value"in sr?sr.value:sr.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var l=n-t;for(i=1;i<=l&&e[n-i]===s[o-i];i++);return dc=s.slice(t,1<i?1-i:void 0)}function fc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $u(){return!0}function zg(){return!1}function cn(t){function e(n,i,s,o,l){this._reactName=n,this._targetInst=s,this.type=i,this.nativeEvent=o,this.target=l,this.currentTarget=null;for(var h in t)t.hasOwnProperty(h)&&(n=t[h],this[h]=n?n(o):o[h]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?$u:zg,this.isPropagationStopped=zg,this}return Ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$u)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$u)},persist:function(){},isPersistent:$u}),e}var Bo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Lp=cn(Bo),Ul=Ke({},Bo,{view:0,detail:0}),tS=cn(Ul),fd,pd,Da,vh=Ke({},Ul,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Np,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Da&&(Da&&t.type==="mousemove"?(fd=t.screenX-Da.screenX,pd=t.screenY-Da.screenY):pd=fd=0,Da=t),fd)},movementY:function(t){return"movementY"in t?t.movementY:pd}}),Ug=cn(vh),nS=Ke({},vh,{dataTransfer:0}),iS=cn(nS),rS=Ke({},Ul,{relatedTarget:0}),md=cn(rS),sS=Ke({},Bo,{animationName:0,elapsedTime:0,pseudoElement:0}),oS=cn(sS),aS=Ke({},Bo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),lS=cn(aS),uS=Ke({},Bo,{data:0}),Bg=cn(uS),cS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},hS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dS[t])?!!e[t]:!1}function Np(){return fS}var pS=Ke({},Ul,{key:function(t){if(t.key){var e=cS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=fc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?hS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Np,charCode:function(t){return t.type==="keypress"?fc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?fc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),mS=cn(pS),gS=Ke({},vh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),jg=cn(gS),_S=Ke({},Ul,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Np}),vS=cn(_S),yS=Ke({},Bo,{propertyName:0,elapsedTime:0,pseudoElement:0}),wS=cn(yS),ES=Ke({},vh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),TS=cn(ES),IS=[9,13,27,32],bp=Ci&&"CompositionEvent"in window,el=null;Ci&&"documentMode"in document&&(el=document.documentMode);var SS=Ci&&"TextEvent"in window&&!el,jy=Ci&&(!bp||el&&8<el&&11>=el),Wg=" ",Hg=!1;function Wy(t,e){switch(t){case"keyup":return IS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hy(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var no=!1;function PS(t,e){switch(t){case"compositionend":return Hy(e);case"keypress":return e.which!==32?null:(Hg=!0,Wg);case"textInput":return t=e.data,t===Wg&&Hg?null:t;default:return null}}function xS(t,e){if(no)return t==="compositionend"||!bp&&Wy(t,e)?(t=By(),dc=Rp=sr=null,no=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return jy&&e.locale!=="ko"?null:e.data;default:return null}}var AS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!AS[t.type]:e==="textarea"}function qy(t,e,n,i){Ty(i),e=Vc(e,"onChange"),0<e.length&&(n=new Lp("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var tl=null,vl=null;function CS(t){nw(t,0)}function yh(t){var e=so(t);if(my(e))return t}function kS(t,e){if(t==="change")return e}var $y=!1;if(Ci){var gd;if(Ci){var _d="oninput"in document;if(!_d){var $g=document.createElement("div");$g.setAttribute("oninput","return;"),_d=typeof $g.oninput=="function"}gd=_d}else gd=!1;$y=gd&&(!document.documentMode||9<document.documentMode)}function Gg(){tl&&(tl.detachEvent("onpropertychange",Gy),vl=tl=null)}function Gy(t){if(t.propertyName==="value"&&yh(vl)){var e=[];qy(e,vl,t,Pp(t)),xy(CS,e)}}function RS(t,e,n){t==="focusin"?(Gg(),tl=e,vl=n,tl.attachEvent("onpropertychange",Gy)):t==="focusout"&&Gg()}function LS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return yh(vl)}function NS(t,e){if(t==="click")return yh(e)}function bS(t,e){if(t==="input"||t==="change")return yh(e)}function OS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vn=typeof Object.is=="function"?Object.is:OS;function yl(t,e){if(Vn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var s=n[i];if(!Kd.call(e,s)||!Vn(t[s],e[s]))return!1}return!0}function Zg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Kg(t,e){var n=Zg(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Zg(n)}}function Zy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Zy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ky(){for(var t=window,e=Rc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Rc(t.document)}return e}function Op(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function DS(t){var e=Ky(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Zy(n.ownerDocument.documentElement,n)){if(i!==null&&Op(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(i.start,s);i=i.end===void 0?o:Math.min(i.end,s),!t.extend&&o>i&&(s=i,i=o,o=s),s=Kg(n,o);var l=Kg(n,i);s&&l&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==l.node||t.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>i?(t.addRange(e),t.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var MS=Ci&&"documentMode"in document&&11>=document.documentMode,io=null,mf=null,nl=null,gf=!1;function Qg(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gf||io==null||io!==Rc(i)||(i=io,"selectionStart"in i&&Op(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),nl&&yl(nl,i)||(nl=i,i=Vc(mf,"onSelect"),0<i.length&&(e=new Lp("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=io)))}function Gu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ro={animationend:Gu("Animation","AnimationEnd"),animationiteration:Gu("Animation","AnimationIteration"),animationstart:Gu("Animation","AnimationStart"),transitionend:Gu("Transition","TransitionEnd")},vd={},Qy={};Ci&&(Qy=document.createElement("div").style,"AnimationEvent"in window||(delete ro.animationend.animation,delete ro.animationiteration.animation,delete ro.animationstart.animation),"TransitionEvent"in window||delete ro.transitionend.transition);function wh(t){if(vd[t])return vd[t];if(!ro[t])return t;var e=ro[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Qy)return vd[t]=e[n];return t}var Yy=wh("animationend"),Xy=wh("animationiteration"),Jy=wh("animationstart"),ew=wh("transitionend"),tw=new Map,Yg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(t,e){tw.set(t,e),ds(e,[t])}for(var yd=0;yd<Yg.length;yd++){var wd=Yg[yd],VS=wd.toLowerCase(),FS=wd[0].toUpperCase()+wd.slice(1);Pr(VS,"on"+FS)}Pr(Yy,"onAnimationEnd");Pr(Xy,"onAnimationIteration");Pr(Jy,"onAnimationStart");Pr("dblclick","onDoubleClick");Pr("focusin","onFocus");Pr("focusout","onBlur");Pr(ew,"onTransitionEnd");So("onMouseEnter",["mouseout","mouseover"]);So("onMouseLeave",["mouseout","mouseover"]);So("onPointerEnter",["pointerout","pointerover"]);So("onPointerLeave",["pointerout","pointerover"]);ds("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ds("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ds("onBeforeInput",["compositionend","keypress","textInput","paste"]);ds("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ds("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ds("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zS=new Set("cancel close invalid load scroll toggle".split(" ").concat(qa));function Xg(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,VI(i,e,void 0,t),t.currentTarget=null}function nw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],s=i.event;i=i.listeners;e:{var o=void 0;if(e)for(var l=i.length-1;0<=l;l--){var h=i[l],d=h.instance,m=h.currentTarget;if(h=h.listener,d!==o&&s.isPropagationStopped())break e;Xg(s,h,m),o=d}else for(l=0;l<i.length;l++){if(h=i[l],d=h.instance,m=h.currentTarget,h=h.listener,d!==o&&s.isPropagationStopped())break e;Xg(s,h,m),o=d}}}if(Nc)throw t=hf,Nc=!1,hf=null,t}function ze(t,e){var n=e[Ef];n===void 0&&(n=e[Ef]=new Set);var i=t+"__bubble";n.has(i)||(iw(e,t,2,!1),n.add(i))}function Ed(t,e,n){var i=0;e&&(i|=4),iw(n,t,i,e)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function wl(t){if(!t[Zu]){t[Zu]=!0,cy.forEach(function(n){n!=="selectionchange"&&(zS.has(n)||Ed(n,!1,t),Ed(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zu]||(e[Zu]=!0,Ed("selectionchange",!1,e))}}function iw(t,e,n,i){switch(Uy(e)){case 1:var s=JI;break;case 4:s=eS;break;default:s=kp}n=s.bind(null,e,n,t),s=void 0,!cf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),i?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Td(t,e,n,i,s){var o=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var h=i.stateNode.containerInfo;if(h===s||h.nodeType===8&&h.parentNode===s)break;if(l===4)for(l=i.return;l!==null;){var d=l.tag;if((d===3||d===4)&&(d=l.stateNode.containerInfo,d===s||d.nodeType===8&&d.parentNode===s))return;l=l.return}for(;h!==null;){if(l=Zr(h),l===null)return;if(d=l.tag,d===5||d===6){i=o=l;continue e}h=h.parentNode}}i=i.return}xy(function(){var m=o,v=Pp(n),w=[];e:{var I=tw.get(t);if(I!==void 0){var D=Lp,U=t;switch(t){case"keypress":if(fc(n)===0)break e;case"keydown":case"keyup":D=mS;break;case"focusin":U="focus",D=md;break;case"focusout":U="blur",D=md;break;case"beforeblur":case"afterblur":D=md;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":D=Ug;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":D=iS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":D=vS;break;case Yy:case Xy:case Jy:D=oS;break;case ew:D=wS;break;case"scroll":D=tS;break;case"wheel":D=TS;break;case"copy":case"cut":case"paste":D=lS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":D=jg}var B=(e&4)!==0,Z=!B&&t==="scroll",R=B?I!==null?I+"Capture":null:I;B=[];for(var x=m,N;x!==null;){N=x;var F=N.stateNode;if(N.tag===5&&F!==null&&(N=F,R!==null&&(F=pl(x,R),F!=null&&B.push(El(x,F,N)))),Z)break;x=x.return}0<B.length&&(I=new D(I,U,null,n,v),w.push({event:I,listeners:B}))}}if(!(e&7)){e:{if(I=t==="mouseover"||t==="pointerover",D=t==="mouseout"||t==="pointerout",I&&n!==lf&&(U=n.relatedTarget||n.fromElement)&&(Zr(U)||U[ki]))break e;if((D||I)&&(I=v.window===v?v:(I=v.ownerDocument)?I.defaultView||I.parentWindow:window,D?(U=n.relatedTarget||n.toElement,D=m,U=U?Zr(U):null,U!==null&&(Z=fs(U),U!==Z||U.tag!==5&&U.tag!==6)&&(U=null)):(D=null,U=m),D!==U)){if(B=Ug,F="onMouseLeave",R="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(B=jg,F="onPointerLeave",R="onPointerEnter",x="pointer"),Z=D==null?I:so(D),N=U==null?I:so(U),I=new B(F,x+"leave",D,n,v),I.target=Z,I.relatedTarget=N,F=null,Zr(v)===m&&(B=new B(R,x+"enter",U,n,v),B.target=N,B.relatedTarget=Z,F=B),Z=F,D&&U)t:{for(B=D,R=U,x=0,N=B;N;N=Ks(N))x++;for(N=0,F=R;F;F=Ks(F))N++;for(;0<x-N;)B=Ks(B),x--;for(;0<N-x;)R=Ks(R),N--;for(;x--;){if(B===R||R!==null&&B===R.alternate)break t;B=Ks(B),R=Ks(R)}B=null}else B=null;D!==null&&Jg(w,I,D,B,!1),U!==null&&Z!==null&&Jg(w,Z,U,B,!0)}}e:{if(I=m?so(m):window,D=I.nodeName&&I.nodeName.toLowerCase(),D==="select"||D==="input"&&I.type==="file")var H=kS;else if(qg(I))if($y)H=bS;else{H=LS;var $=RS}else(D=I.nodeName)&&D.toLowerCase()==="input"&&(I.type==="checkbox"||I.type==="radio")&&(H=NS);if(H&&(H=H(t,m))){qy(w,H,n,v);break e}$&&$(t,I,m),t==="focusout"&&($=I._wrapperState)&&$.controlled&&I.type==="number"&&nf(I,"number",I.value)}switch($=m?so(m):window,t){case"focusin":(qg($)||$.contentEditable==="true")&&(io=$,mf=m,nl=null);break;case"focusout":nl=mf=io=null;break;case"mousedown":gf=!0;break;case"contextmenu":case"mouseup":case"dragend":gf=!1,Qg(w,n,v);break;case"selectionchange":if(MS)break;case"keydown":case"keyup":Qg(w,n,v)}var S;if(bp)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else no?Wy(t,n)&&(T="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(T="onCompositionStart");T&&(jy&&n.locale!=="ko"&&(no||T!=="onCompositionStart"?T==="onCompositionEnd"&&no&&(S=By()):(sr=v,Rp="value"in sr?sr.value:sr.textContent,no=!0)),$=Vc(m,T),0<$.length&&(T=new Bg(T,t,null,n,v),w.push({event:T,listeners:$}),S?T.data=S:(S=Hy(n),S!==null&&(T.data=S)))),(S=SS?PS(t,n):xS(t,n))&&(m=Vc(m,"onBeforeInput"),0<m.length&&(v=new Bg("onBeforeInput","beforeinput",null,n,v),w.push({event:v,listeners:m}),v.data=S))}nw(w,e)})}function El(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vc(t,e){for(var n=e+"Capture",i=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=pl(t,n),o!=null&&i.unshift(El(t,o,s)),o=pl(t,e),o!=null&&i.push(El(t,o,s))),t=t.return}return i}function Ks(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Jg(t,e,n,i,s){for(var o=e._reactName,l=[];n!==null&&n!==i;){var h=n,d=h.alternate,m=h.stateNode;if(d!==null&&d===i)break;h.tag===5&&m!==null&&(h=m,s?(d=pl(n,o),d!=null&&l.unshift(El(n,d,h))):s||(d=pl(n,o),d!=null&&l.push(El(n,d,h)))),n=n.return}l.length!==0&&t.push({event:e,listeners:l})}var US=/\r\n?/g,BS=/\u0000|\uFFFD/g;function e_(t){return(typeof t=="string"?t:""+t).replace(US,`
`).replace(BS,"")}function Ku(t,e,n){if(e=e_(e),e_(t)!==e&&n)throw Error(Y(425))}function Fc(){}var _f=null,vf=null;function yf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var wf=typeof setTimeout=="function"?setTimeout:void 0,jS=typeof clearTimeout=="function"?clearTimeout:void 0,t_=typeof Promise=="function"?Promise:void 0,WS=typeof queueMicrotask=="function"?queueMicrotask:typeof t_<"u"?function(t){return t_.resolve(null).then(t).catch(HS)}:wf;function HS(t){setTimeout(function(){throw t})}function Id(t,e){var n=e,i=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(i===0){t.removeChild(s),_l(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=s}while(n);_l(e)}function hr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function n_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var jo=Math.random().toString(36).slice(2),Zn="__reactFiber$"+jo,Tl="__reactProps$"+jo,ki="__reactContainer$"+jo,Ef="__reactEvents$"+jo,qS="__reactListeners$"+jo,$S="__reactHandles$"+jo;function Zr(t){var e=t[Zn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ki]||n[Zn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=n_(t);t!==null;){if(n=t[Zn])return n;t=n_(t)}return e}t=n,n=t.parentNode}return null}function Bl(t){return t=t[Zn]||t[ki],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function so(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function Eh(t){return t[Tl]||null}var Tf=[],oo=-1;function xr(t){return{current:t}}function Be(t){0>oo||(t.current=Tf[oo],Tf[oo]=null,oo--)}function Fe(t,e){oo++,Tf[oo]=t.current,t.current=e}var Er={},Mt=xr(Er),Yt=xr(!1),ts=Er;function Po(t,e){var n=t.type.contextTypes;if(!n)return Er;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Xt(t){return t=t.childContextTypes,t!=null}function zc(){Be(Yt),Be(Mt)}function i_(t,e,n){if(Mt.current!==Er)throw Error(Y(168));Fe(Mt,e),Fe(Yt,n)}function rw(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var s in i)if(!(s in e))throw Error(Y(108,RI(t)||"Unknown",s));return Ke({},n,i)}function Uc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Er,ts=Mt.current,Fe(Mt,t),Fe(Yt,Yt.current),!0}function r_(t,e,n){var i=t.stateNode;if(!i)throw Error(Y(169));n?(t=rw(t,e,ts),i.__reactInternalMemoizedMergedChildContext=t,Be(Yt),Be(Mt),Fe(Mt,t)):Be(Yt),Fe(Yt,n)}var yi=null,Th=!1,Sd=!1;function sw(t){yi===null?yi=[t]:yi.push(t)}function GS(t){Th=!0,sw(t)}function Ar(){if(!Sd&&yi!==null){Sd=!0;var t=0,e=be;try{var n=yi;for(be=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}yi=null,Th=!1}catch(s){throw yi!==null&&(yi=yi.slice(t+1)),Ry(xp,Ar),s}finally{be=e,Sd=!1}}return null}var ao=[],lo=0,Bc=null,jc=0,yn=[],wn=0,ns=null,wi=1,Ei="";function qr(t,e){ao[lo++]=jc,ao[lo++]=Bc,Bc=t,jc=e}function ow(t,e,n){yn[wn++]=wi,yn[wn++]=Ei,yn[wn++]=ns,ns=t;var i=wi;t=Ei;var s=32-Dn(i)-1;i&=~(1<<s),n+=1;var o=32-Dn(e)+s;if(30<o){var l=s-s%5;o=(i&(1<<l)-1).toString(32),i>>=l,s-=l,wi=1<<32-Dn(e)+s|n<<s|i,Ei=o+t}else wi=1<<o|n<<s|i,Ei=t}function Dp(t){t.return!==null&&(qr(t,1),ow(t,1,0))}function Mp(t){for(;t===Bc;)Bc=ao[--lo],ao[lo]=null,jc=ao[--lo],ao[lo]=null;for(;t===ns;)ns=yn[--wn],yn[wn]=null,Ei=yn[--wn],yn[wn]=null,wi=yn[--wn],yn[wn]=null}var an=null,sn=null,He=!1,On=null;function aw(t,e){var n=En(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function s_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,an=t,sn=hr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,an=t,sn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ns!==null?{id:wi,overflow:Ei}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=En(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,an=t,sn=null,!0):!1;default:return!1}}function If(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sf(t){if(He){var e=sn;if(e){var n=e;if(!s_(t,e)){if(If(t))throw Error(Y(418));e=hr(n.nextSibling);var i=an;e&&s_(t,e)?aw(i,n):(t.flags=t.flags&-4097|2,He=!1,an=t)}}else{if(If(t))throw Error(Y(418));t.flags=t.flags&-4097|2,He=!1,an=t}}}function o_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;an=t}function Qu(t){if(t!==an)return!1;if(!He)return o_(t),He=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!yf(t.type,t.memoizedProps)),e&&(e=sn)){if(If(t))throw lw(),Error(Y(418));for(;e;)aw(t,e),e=hr(e.nextSibling)}if(o_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){sn=hr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}sn=null}}else sn=an?hr(t.stateNode.nextSibling):null;return!0}function lw(){for(var t=sn;t;)t=hr(t.nextSibling)}function xo(){sn=an=null,He=!1}function Vp(t){On===null?On=[t]:On.push(t)}var ZS=Mi.ReactCurrentBatchConfig;function Ma(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var i=n.stateNode}if(!i)throw Error(Y(147,t));var s=i,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(l){var h=s.refs;l===null?delete h[o]:h[o]=l},e._stringRef=o,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function Yu(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function a_(t){var e=t._init;return e(t._payload)}function uw(t){function e(R,x){if(t){var N=R.deletions;N===null?(R.deletions=[x],R.flags|=16):N.push(x)}}function n(R,x){if(!t)return null;for(;x!==null;)e(R,x),x=x.sibling;return null}function i(R,x){for(R=new Map;x!==null;)x.key!==null?R.set(x.key,x):R.set(x.index,x),x=x.sibling;return R}function s(R,x){return R=mr(R,x),R.index=0,R.sibling=null,R}function o(R,x,N){return R.index=N,t?(N=R.alternate,N!==null?(N=N.index,N<x?(R.flags|=2,x):N):(R.flags|=2,x)):(R.flags|=1048576,x)}function l(R){return t&&R.alternate===null&&(R.flags|=2),R}function h(R,x,N,F){return x===null||x.tag!==6?(x=Ld(N,R.mode,F),x.return=R,x):(x=s(x,N),x.return=R,x)}function d(R,x,N,F){var H=N.type;return H===to?v(R,x,N.props.children,F,N.key):x!==null&&(x.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===Yi&&a_(H)===x.type)?(F=s(x,N.props),F.ref=Ma(R,x,N),F.return=R,F):(F=wc(N.type,N.key,N.props,null,R.mode,F),F.ref=Ma(R,x,N),F.return=R,F)}function m(R,x,N,F){return x===null||x.tag!==4||x.stateNode.containerInfo!==N.containerInfo||x.stateNode.implementation!==N.implementation?(x=Nd(N,R.mode,F),x.return=R,x):(x=s(x,N.children||[]),x.return=R,x)}function v(R,x,N,F,H){return x===null||x.tag!==7?(x=Jr(N,R.mode,F,H),x.return=R,x):(x=s(x,N),x.return=R,x)}function w(R,x,N){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Ld(""+x,R.mode,N),x.return=R,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Uu:return N=wc(x.type,x.key,x.props,null,R.mode,N),N.ref=Ma(R,null,x),N.return=R,N;case eo:return x=Nd(x,R.mode,N),x.return=R,x;case Yi:var F=x._init;return w(R,F(x._payload),N)}if(Wa(x)||La(x))return x=Jr(x,R.mode,N,null),x.return=R,x;Yu(R,x)}return null}function I(R,x,N,F){var H=x!==null?x.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return H!==null?null:h(R,x,""+N,F);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Uu:return N.key===H?d(R,x,N,F):null;case eo:return N.key===H?m(R,x,N,F):null;case Yi:return H=N._init,I(R,x,H(N._payload),F)}if(Wa(N)||La(N))return H!==null?null:v(R,x,N,F,null);Yu(R,N)}return null}function D(R,x,N,F,H){if(typeof F=="string"&&F!==""||typeof F=="number")return R=R.get(N)||null,h(x,R,""+F,H);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case Uu:return R=R.get(F.key===null?N:F.key)||null,d(x,R,F,H);case eo:return R=R.get(F.key===null?N:F.key)||null,m(x,R,F,H);case Yi:var $=F._init;return D(R,x,N,$(F._payload),H)}if(Wa(F)||La(F))return R=R.get(N)||null,v(x,R,F,H,null);Yu(x,F)}return null}function U(R,x,N,F){for(var H=null,$=null,S=x,T=x=0,P=null;S!==null&&T<N.length;T++){S.index>T?(P=S,S=null):P=S.sibling;var C=I(R,S,N[T],F);if(C===null){S===null&&(S=P);break}t&&S&&C.alternate===null&&e(R,S),x=o(C,x,T),$===null?H=C:$.sibling=C,$=C,S=P}if(T===N.length)return n(R,S),He&&qr(R,T),H;if(S===null){for(;T<N.length;T++)S=w(R,N[T],F),S!==null&&(x=o(S,x,T),$===null?H=S:$.sibling=S,$=S);return He&&qr(R,T),H}for(S=i(R,S);T<N.length;T++)P=D(S,R,T,N[T],F),P!==null&&(t&&P.alternate!==null&&S.delete(P.key===null?T:P.key),x=o(P,x,T),$===null?H=P:$.sibling=P,$=P);return t&&S.forEach(function(O){return e(R,O)}),He&&qr(R,T),H}function B(R,x,N,F){var H=La(N);if(typeof H!="function")throw Error(Y(150));if(N=H.call(N),N==null)throw Error(Y(151));for(var $=H=null,S=x,T=x=0,P=null,C=N.next();S!==null&&!C.done;T++,C=N.next()){S.index>T?(P=S,S=null):P=S.sibling;var O=I(R,S,C.value,F);if(O===null){S===null&&(S=P);break}t&&S&&O.alternate===null&&e(R,S),x=o(O,x,T),$===null?H=O:$.sibling=O,$=O,S=P}if(C.done)return n(R,S),He&&qr(R,T),H;if(S===null){for(;!C.done;T++,C=N.next())C=w(R,C.value,F),C!==null&&(x=o(C,x,T),$===null?H=C:$.sibling=C,$=C);return He&&qr(R,T),H}for(S=i(R,S);!C.done;T++,C=N.next())C=D(S,R,T,C.value,F),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?T:C.key),x=o(C,x,T),$===null?H=C:$.sibling=C,$=C);return t&&S.forEach(function(M){return e(R,M)}),He&&qr(R,T),H}function Z(R,x,N,F){if(typeof N=="object"&&N!==null&&N.type===to&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case Uu:e:{for(var H=N.key,$=x;$!==null;){if($.key===H){if(H=N.type,H===to){if($.tag===7){n(R,$.sibling),x=s($,N.props.children),x.return=R,R=x;break e}}else if($.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===Yi&&a_(H)===$.type){n(R,$.sibling),x=s($,N.props),x.ref=Ma(R,$,N),x.return=R,R=x;break e}n(R,$);break}else e(R,$);$=$.sibling}N.type===to?(x=Jr(N.props.children,R.mode,F,N.key),x.return=R,R=x):(F=wc(N.type,N.key,N.props,null,R.mode,F),F.ref=Ma(R,x,N),F.return=R,R=F)}return l(R);case eo:e:{for($=N.key;x!==null;){if(x.key===$)if(x.tag===4&&x.stateNode.containerInfo===N.containerInfo&&x.stateNode.implementation===N.implementation){n(R,x.sibling),x=s(x,N.children||[]),x.return=R,R=x;break e}else{n(R,x);break}else e(R,x);x=x.sibling}x=Nd(N,R.mode,F),x.return=R,R=x}return l(R);case Yi:return $=N._init,Z(R,x,$(N._payload),F)}if(Wa(N))return U(R,x,N,F);if(La(N))return B(R,x,N,F);Yu(R,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,x!==null&&x.tag===6?(n(R,x.sibling),x=s(x,N),x.return=R,R=x):(n(R,x),x=Ld(N,R.mode,F),x.return=R,R=x),l(R)):n(R,x)}return Z}var Ao=uw(!0),cw=uw(!1),Wc=xr(null),Hc=null,uo=null,Fp=null;function zp(){Fp=uo=Hc=null}function Up(t){var e=Wc.current;Be(Wc),t._currentValue=e}function Pf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function vo(t,e){Hc=t,Fp=uo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Qt=!0),t.firstContext=null)}function Sn(t){var e=t._currentValue;if(Fp!==t)if(t={context:t,memoizedValue:e,next:null},uo===null){if(Hc===null)throw Error(Y(308));uo=t,Hc.dependencies={lanes:0,firstContext:t}}else uo=uo.next=t;return e}var Kr=null;function Bp(t){Kr===null?Kr=[t]:Kr.push(t)}function hw(t,e,n,i){var s=e.interleaved;return s===null?(n.next=n,Bp(e)):(n.next=s.next,s.next=n),e.interleaved=n,Ri(t,i)}function Ri(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Xi=!1;function jp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Pi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function dr(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,ke&2){var s=i.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e,Ri(t,n)}return s=i.interleaved,s===null?(e.next=e,Bp(i)):(e.next=s.next,s.next=e),i.interleaved=e,Ri(t,n)}function pc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ap(t,n)}}function l_(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=l:o=o.next=l,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:i.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function qc(t,e,n,i){var s=t.updateQueue;Xi=!1;var o=s.firstBaseUpdate,l=s.lastBaseUpdate,h=s.shared.pending;if(h!==null){s.shared.pending=null;var d=h,m=d.next;d.next=null,l===null?o=m:l.next=m,l=d;var v=t.alternate;v!==null&&(v=v.updateQueue,h=v.lastBaseUpdate,h!==l&&(h===null?v.firstBaseUpdate=m:h.next=m,v.lastBaseUpdate=d))}if(o!==null){var w=s.baseState;l=0,v=m=d=null,h=o;do{var I=h.lane,D=h.eventTime;if((i&I)===I){v!==null&&(v=v.next={eventTime:D,lane:0,tag:h.tag,payload:h.payload,callback:h.callback,next:null});e:{var U=t,B=h;switch(I=e,D=n,B.tag){case 1:if(U=B.payload,typeof U=="function"){w=U.call(D,w,I);break e}w=U;break e;case 3:U.flags=U.flags&-65537|128;case 0:if(U=B.payload,I=typeof U=="function"?U.call(D,w,I):U,I==null)break e;w=Ke({},w,I);break e;case 2:Xi=!0}}h.callback!==null&&h.lane!==0&&(t.flags|=64,I=s.effects,I===null?s.effects=[h]:I.push(h))}else D={eventTime:D,lane:I,tag:h.tag,payload:h.payload,callback:h.callback,next:null},v===null?(m=v=D,d=w):v=v.next=D,l|=I;if(h=h.next,h===null){if(h=s.shared.pending,h===null)break;I=h,h=I.next,I.next=null,s.lastBaseUpdate=I,s.shared.pending=null}}while(!0);if(v===null&&(d=w),s.baseState=d,s.firstBaseUpdate=m,s.lastBaseUpdate=v,e=s.shared.interleaved,e!==null){s=e;do l|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);rs|=l,t.lanes=l,t.memoizedState=w}}function u_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],s=i.callback;if(s!==null){if(i.callback=null,i=n,typeof s!="function")throw Error(Y(191,s));s.call(i)}}}var jl={},Yn=xr(jl),Il=xr(jl),Sl=xr(jl);function Qr(t){if(t===jl)throw Error(Y(174));return t}function Wp(t,e){switch(Fe(Sl,e),Fe(Il,t),Fe(Yn,jl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:sf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=sf(e,t)}Be(Yn),Fe(Yn,e)}function Co(){Be(Yn),Be(Il),Be(Sl)}function fw(t){Qr(Sl.current);var e=Qr(Yn.current),n=sf(e,t.type);e!==n&&(Fe(Il,t),Fe(Yn,n))}function Hp(t){Il.current===t&&(Be(Yn),Be(Il))}var Ge=xr(0);function $c(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pd=[];function qp(){for(var t=0;t<Pd.length;t++)Pd[t]._workInProgressVersionPrimary=null;Pd.length=0}var mc=Mi.ReactCurrentDispatcher,xd=Mi.ReactCurrentBatchConfig,is=0,Ze=null,dt=null,vt=null,Gc=!1,il=!1,Pl=0,KS=0;function Rt(){throw Error(Y(321))}function $p(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Vn(t[n],e[n]))return!1;return!0}function Gp(t,e,n,i,s,o){if(is=o,Ze=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,mc.current=t===null||t.memoizedState===null?JS:eP,t=n(i,s),il){o=0;do{if(il=!1,Pl=0,25<=o)throw Error(Y(301));o+=1,vt=dt=null,e.updateQueue=null,mc.current=tP,t=n(i,s)}while(il)}if(mc.current=Zc,e=dt!==null&&dt.next!==null,is=0,vt=dt=Ze=null,Gc=!1,e)throw Error(Y(300));return t}function Zp(){var t=Pl!==0;return Pl=0,t}function Gn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vt===null?Ze.memoizedState=vt=t:vt=vt.next=t,vt}function Pn(){if(dt===null){var t=Ze.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var e=vt===null?Ze.memoizedState:vt.next;if(e!==null)vt=e,dt=t;else{if(t===null)throw Error(Y(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},vt===null?Ze.memoizedState=vt=t:vt=vt.next=t}return vt}function xl(t,e){return typeof e=="function"?e(t):e}function Ad(t){var e=Pn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=dt,s=i.baseQueue,o=n.pending;if(o!==null){if(s!==null){var l=s.next;s.next=o.next,o.next=l}i.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,i=i.baseState;var h=l=null,d=null,m=o;do{var v=m.lane;if((is&v)===v)d!==null&&(d=d.next={lane:0,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null}),i=m.hasEagerState?m.eagerState:t(i,m.action);else{var w={lane:v,action:m.action,hasEagerState:m.hasEagerState,eagerState:m.eagerState,next:null};d===null?(h=d=w,l=i):d=d.next=w,Ze.lanes|=v,rs|=v}m=m.next}while(m!==null&&m!==o);d===null?l=i:d.next=h,Vn(i,e.memoizedState)||(Qt=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=d,n.lastRenderedState=i}if(t=n.interleaved,t!==null){s=t;do o=s.lane,Ze.lanes|=o,rs|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Cd(t){var e=Pn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var i=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var l=s=s.next;do o=t(o,l.action),l=l.next;while(l!==s);Vn(o,e.memoizedState)||(Qt=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function pw(){}function mw(t,e){var n=Ze,i=Pn(),s=e(),o=!Vn(i.memoizedState,s);if(o&&(i.memoizedState=s,Qt=!0),i=i.queue,Kp(vw.bind(null,n,i,t),[t]),i.getSnapshot!==e||o||vt!==null&&vt.memoizedState.tag&1){if(n.flags|=2048,Al(9,_w.bind(null,n,i,s,e),void 0,null),yt===null)throw Error(Y(349));is&30||gw(n,e,s)}return s}function gw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _w(t,e,n,i){e.value=n,e.getSnapshot=i,yw(e)&&ww(t)}function vw(t,e,n){return n(function(){yw(e)&&ww(t)})}function yw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Vn(t,n)}catch{return!0}}function ww(t){var e=Ri(t,1);e!==null&&Mn(e,t,1,-1)}function c_(t){var e=Gn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xl,lastRenderedState:t},e.queue=t,t=t.dispatch=XS.bind(null,Ze,t),[e.memoizedState,t]}function Al(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Ze.updateQueue,e===null?(e={lastEffect:null,stores:null},Ze.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Ew(){return Pn().memoizedState}function gc(t,e,n,i){var s=Gn();Ze.flags|=t,s.memoizedState=Al(1|e,n,void 0,i===void 0?null:i)}function Ih(t,e,n,i){var s=Pn();i=i===void 0?null:i;var o=void 0;if(dt!==null){var l=dt.memoizedState;if(o=l.destroy,i!==null&&$p(i,l.deps)){s.memoizedState=Al(e,n,o,i);return}}Ze.flags|=t,s.memoizedState=Al(1|e,n,o,i)}function h_(t,e){return gc(8390656,8,t,e)}function Kp(t,e){return Ih(2048,8,t,e)}function Tw(t,e){return Ih(4,2,t,e)}function Iw(t,e){return Ih(4,4,t,e)}function Sw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Pw(t,e,n){return n=n!=null?n.concat([t]):null,Ih(4,4,Sw.bind(null,e,t),n)}function Qp(){}function xw(t,e){var n=Pn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&$p(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Aw(t,e){var n=Pn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&$p(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Cw(t,e,n){return is&21?(Vn(n,e)||(n=by(),Ze.lanes|=n,rs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Qt=!0),t.memoizedState=n)}function QS(t,e){var n=be;be=n!==0&&4>n?n:4,t(!0);var i=xd.transition;xd.transition={};try{t(!1),e()}finally{be=n,xd.transition=i}}function kw(){return Pn().memoizedState}function YS(t,e,n){var i=pr(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Rw(t))Lw(e,n);else if(n=hw(t,e,n,i),n!==null){var s=jt();Mn(n,t,i,s),Nw(n,e,i)}}function XS(t,e,n){var i=pr(t),s={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Rw(t))Lw(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var l=e.lastRenderedState,h=o(l,n);if(s.hasEagerState=!0,s.eagerState=h,Vn(h,l)){var d=e.interleaved;d===null?(s.next=s,Bp(e)):(s.next=d.next,d.next=s),e.interleaved=s;return}}catch{}finally{}n=hw(t,e,s,i),n!==null&&(s=jt(),Mn(n,t,i,s),Nw(n,e,i))}}function Rw(t){var e=t.alternate;return t===Ze||e!==null&&e===Ze}function Lw(t,e){il=Gc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Nw(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Ap(t,n)}}var Zc={readContext:Sn,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useInsertionEffect:Rt,useLayoutEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useMutableSource:Rt,useSyncExternalStore:Rt,useId:Rt,unstable_isNewReconciler:!1},JS={readContext:Sn,useCallback:function(t,e){return Gn().memoizedState=[t,e===void 0?null:e],t},useContext:Sn,useEffect:h_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,gc(4194308,4,Sw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return gc(4194308,4,t,e)},useInsertionEffect:function(t,e){return gc(4,2,t,e)},useMemo:function(t,e){var n=Gn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Gn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=YS.bind(null,Ze,t),[i.memoizedState,t]},useRef:function(t){var e=Gn();return t={current:t},e.memoizedState=t},useState:c_,useDebugValue:Qp,useDeferredValue:function(t){return Gn().memoizedState=t},useTransition:function(){var t=c_(!1),e=t[0];return t=QS.bind(null,t[1]),Gn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Ze,s=Gn();if(He){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),yt===null)throw Error(Y(349));is&30||gw(i,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,h_(vw.bind(null,i,o,t),[t]),i.flags|=2048,Al(9,_w.bind(null,i,o,n,e),void 0,null),n},useId:function(){var t=Gn(),e=yt.identifierPrefix;if(He){var n=Ei,i=wi;n=(i&~(1<<32-Dn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Pl++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=KS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},eP={readContext:Sn,useCallback:xw,useContext:Sn,useEffect:Kp,useImperativeHandle:Pw,useInsertionEffect:Tw,useLayoutEffect:Iw,useMemo:Aw,useReducer:Ad,useRef:Ew,useState:function(){return Ad(xl)},useDebugValue:Qp,useDeferredValue:function(t){var e=Pn();return Cw(e,dt.memoizedState,t)},useTransition:function(){var t=Ad(xl)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:pw,useSyncExternalStore:mw,useId:kw,unstable_isNewReconciler:!1},tP={readContext:Sn,useCallback:xw,useContext:Sn,useEffect:Kp,useImperativeHandle:Pw,useInsertionEffect:Tw,useLayoutEffect:Iw,useMemo:Aw,useReducer:Cd,useRef:Ew,useState:function(){return Cd(xl)},useDebugValue:Qp,useDeferredValue:function(t){var e=Pn();return dt===null?e.memoizedState=t:Cw(e,dt.memoizedState,t)},useTransition:function(){var t=Cd(xl)[0],e=Pn().memoizedState;return[t,e]},useMutableSource:pw,useSyncExternalStore:mw,useId:kw,unstable_isNewReconciler:!1};function Nn(t,e){if(t&&t.defaultProps){e=Ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function xf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Sh={isMounted:function(t){return(t=t._reactInternals)?fs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=jt(),s=pr(t),o=Pi(i,s);o.payload=e,n!=null&&(o.callback=n),e=dr(t,o,s),e!==null&&(Mn(e,t,s,i),pc(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=jt(),s=pr(t),o=Pi(i,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=dr(t,o,s),e!==null&&(Mn(e,t,s,i),pc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=jt(),i=pr(t),s=Pi(n,i);s.tag=2,e!=null&&(s.callback=e),e=dr(t,s,i),e!==null&&(Mn(e,t,i,n),pc(e,t,i))}};function d_(t,e,n,i,s,o,l){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,o,l):e.prototype&&e.prototype.isPureReactComponent?!yl(n,i)||!yl(s,o):!0}function bw(t,e,n){var i=!1,s=Er,o=e.contextType;return typeof o=="object"&&o!==null?o=Sn(o):(s=Xt(e)?ts:Mt.current,i=e.contextTypes,o=(i=i!=null)?Po(t,s):Er),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Sh,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function f_(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Sh.enqueueReplaceState(e,e.state,null)}function Af(t,e,n,i){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},jp(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=Sn(o):(o=Xt(e)?ts:Mt.current,s.context=Po(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(xf(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Sh.enqueueReplaceState(s,s.state,null),qc(t,n,s,i),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ko(t,e){try{var n="",i=e;do n+=kI(i),i=i.return;while(i);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function kd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Cf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var nP=typeof WeakMap=="function"?WeakMap:Map;function Ow(t,e,n){n=Pi(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Qc||(Qc=!0,Ff=i),Cf(t,e)},n}function Dw(t,e,n){n=Pi(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var s=e.value;n.payload=function(){return i(s)},n.callback=function(){Cf(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Cf(t,e),typeof i!="function"&&(fr===null?fr=new Set([this]):fr.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function p_(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new nP;var s=new Set;i.set(e,s)}else s=i.get(e),s===void 0&&(s=new Set,i.set(e,s));s.has(n)||(s.add(n),t=gP.bind(null,t,e,n),e.then(t,t))}function m_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function g_(t,e,n,i,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Pi(-1,1),e.tag=2,dr(n,e,1))),n.lanes|=1),t)}var iP=Mi.ReactCurrentOwner,Qt=!1;function Bt(t,e,n,i){e.child=t===null?cw(e,null,n,i):Ao(e,t.child,n,i)}function __(t,e,n,i,s){n=n.render;var o=e.ref;return vo(e,s),i=Gp(t,e,n,i,o,s),n=Zp(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Li(t,e,s)):(He&&n&&Dp(e),e.flags|=1,Bt(t,e,i,s),e.child)}function v_(t,e,n,i,s){if(t===null){var o=n.type;return typeof o=="function"&&!rm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,Mw(t,e,o,i,s)):(t=wc(n.type,null,i,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var l=o.memoizedProps;if(n=n.compare,n=n!==null?n:yl,n(l,i)&&t.ref===e.ref)return Li(t,e,s)}return e.flags|=1,t=mr(o,i),t.ref=e.ref,t.return=e,e.child=t}function Mw(t,e,n,i,s){if(t!==null){var o=t.memoizedProps;if(yl(o,i)&&t.ref===e.ref)if(Qt=!1,e.pendingProps=i=o,(t.lanes&s)!==0)t.flags&131072&&(Qt=!0);else return e.lanes=t.lanes,Li(t,e,s)}return kf(t,e,n,i,s)}function Vw(t,e,n){var i=e.pendingProps,s=i.children,o=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(ho,rn),rn|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Fe(ho,rn),rn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=o!==null?o.baseLanes:n,Fe(ho,rn),rn|=i}else o!==null?(i=o.baseLanes|n,e.memoizedState=null):i=n,Fe(ho,rn),rn|=i;return Bt(t,e,s,n),e.child}function Fw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function kf(t,e,n,i,s){var o=Xt(n)?ts:Mt.current;return o=Po(e,o),vo(e,s),n=Gp(t,e,n,i,o,s),i=Zp(),t!==null&&!Qt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Li(t,e,s)):(He&&i&&Dp(e),e.flags|=1,Bt(t,e,n,s),e.child)}function y_(t,e,n,i,s){if(Xt(n)){var o=!0;Uc(e)}else o=!1;if(vo(e,s),e.stateNode===null)_c(t,e),bw(e,n,i),Af(e,n,i,s),i=!0;else if(t===null){var l=e.stateNode,h=e.memoizedProps;l.props=h;var d=l.context,m=n.contextType;typeof m=="object"&&m!==null?m=Sn(m):(m=Xt(n)?ts:Mt.current,m=Po(e,m));var v=n.getDerivedStateFromProps,w=typeof v=="function"||typeof l.getSnapshotBeforeUpdate=="function";w||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==i||d!==m)&&f_(e,l,i,m),Xi=!1;var I=e.memoizedState;l.state=I,qc(e,i,l,s),d=e.memoizedState,h!==i||I!==d||Yt.current||Xi?(typeof v=="function"&&(xf(e,n,v,i),d=e.memoizedState),(h=Xi||d_(e,n,h,i,I,d,m))?(w||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=d),l.props=i,l.state=d,l.context=m,i=h):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,dw(t,e),h=e.memoizedProps,m=e.type===e.elementType?h:Nn(e.type,h),l.props=m,w=e.pendingProps,I=l.context,d=n.contextType,typeof d=="object"&&d!==null?d=Sn(d):(d=Xt(n)?ts:Mt.current,d=Po(e,d));var D=n.getDerivedStateFromProps;(v=typeof D=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(h!==w||I!==d)&&f_(e,l,i,d),Xi=!1,I=e.memoizedState,l.state=I,qc(e,i,l,s);var U=e.memoizedState;h!==w||I!==U||Yt.current||Xi?(typeof D=="function"&&(xf(e,n,D,i),U=e.memoizedState),(m=Xi||d_(e,n,m,i,I,U,d)||!1)?(v||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,U,d),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,U,d)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&I===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&I===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=U),l.props=i,l.state=U,l.context=d,i=m):(typeof l.componentDidUpdate!="function"||h===t.memoizedProps&&I===t.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||h===t.memoizedProps&&I===t.memoizedState||(e.flags|=1024),i=!1)}return Rf(t,e,n,i,o,s)}function Rf(t,e,n,i,s,o){Fw(t,e);var l=(e.flags&128)!==0;if(!i&&!l)return s&&r_(e,n,!1),Li(t,e,o);i=e.stateNode,iP.current=e;var h=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&l?(e.child=Ao(e,t.child,null,o),e.child=Ao(e,null,h,o)):Bt(t,e,h,o),e.memoizedState=i.state,s&&r_(e,n,!0),e.child}function zw(t){var e=t.stateNode;e.pendingContext?i_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&i_(t,e.context,!1),Wp(t,e.containerInfo)}function w_(t,e,n,i,s){return xo(),Vp(s),e.flags|=256,Bt(t,e,n,i),e.child}var Lf={dehydrated:null,treeContext:null,retryLane:0};function Nf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Uw(t,e,n){var i=e.pendingProps,s=Ge.current,o=!1,l=(e.flags&128)!==0,h;if((h=l)||(h=t!==null&&t.memoizedState===null?!1:(s&2)!==0),h?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Fe(Ge,s&1),t===null)return Sf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,t=i.fallback,o?(i=e.mode,o=e.child,l={mode:"hidden",children:l},!(i&1)&&o!==null?(o.childLanes=0,o.pendingProps=l):o=Ah(l,i,0,null),t=Jr(t,i,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Nf(n),e.memoizedState=Lf,t):Yp(e,l));if(s=t.memoizedState,s!==null&&(h=s.dehydrated,h!==null))return rP(t,e,l,i,h,s,n);if(o){o=i.fallback,l=e.mode,s=t.child,h=s.sibling;var d={mode:"hidden",children:i.children};return!(l&1)&&e.child!==s?(i=e.child,i.childLanes=0,i.pendingProps=d,e.deletions=null):(i=mr(s,d),i.subtreeFlags=s.subtreeFlags&14680064),h!==null?o=mr(h,o):(o=Jr(o,l,n,null),o.flags|=2),o.return=e,i.return=e,i.sibling=o,e.child=i,i=o,o=e.child,l=t.child.memoizedState,l=l===null?Nf(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=t.childLanes&~n,e.memoizedState=Lf,i}return o=t.child,t=o.sibling,i=mr(o,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Yp(t,e){return e=Ah({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Xu(t,e,n,i){return i!==null&&Vp(i),Ao(e,t.child,null,n),t=Yp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rP(t,e,n,i,s,o,l){if(n)return e.flags&256?(e.flags&=-257,i=kd(Error(Y(422))),Xu(t,e,l,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=i.fallback,s=e.mode,i=Ah({mode:"visible",children:i.children},s,0,null),o=Jr(o,s,l,null),o.flags|=2,i.return=e,o.return=e,i.sibling=o,e.child=i,e.mode&1&&Ao(e,t.child,null,l),e.child.memoizedState=Nf(l),e.memoizedState=Lf,o);if(!(e.mode&1))return Xu(t,e,l,null);if(s.data==="$!"){if(i=s.nextSibling&&s.nextSibling.dataset,i)var h=i.dgst;return i=h,o=Error(Y(419)),i=kd(o,i,void 0),Xu(t,e,l,i)}if(h=(l&t.childLanes)!==0,Qt||h){if(i=yt,i!==null){switch(l&-l){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(i.suspendedLanes|l)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Ri(t,s),Mn(i,t,s,-1))}return im(),i=kd(Error(Y(421))),Xu(t,e,l,i)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=_P.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,sn=hr(s.nextSibling),an=e,He=!0,On=null,t!==null&&(yn[wn++]=wi,yn[wn++]=Ei,yn[wn++]=ns,wi=t.id,Ei=t.overflow,ns=e),e=Yp(e,i.children),e.flags|=4096,e)}function E_(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Pf(t.return,e,n)}function Rd(t,e,n,i,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=i,o.tail=n,o.tailMode=s)}function Bw(t,e,n){var i=e.pendingProps,s=i.revealOrder,o=i.tail;if(Bt(t,e,i.children,n),i=Ge.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&E_(t,n,e);else if(t.tag===19)E_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Fe(Ge,i),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&$c(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Rd(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&$c(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Rd(e,!0,n,null,o);break;case"together":Rd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _c(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Li(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),rs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=mr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=mr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sP(t,e,n){switch(e.tag){case 3:zw(e),xo();break;case 5:fw(e);break;case 1:Xt(e.type)&&Uc(e);break;case 4:Wp(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,s=e.memoizedProps.value;Fe(Wc,i._currentValue),i._currentValue=s;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Fe(Ge,Ge.current&1),e.flags|=128,null):n&e.child.childLanes?Uw(t,e,n):(Fe(Ge,Ge.current&1),t=Li(t,e,n),t!==null?t.sibling:null);Fe(Ge,Ge.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Bw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Fe(Ge,Ge.current),i)break;return null;case 22:case 23:return e.lanes=0,Vw(t,e,n)}return Li(t,e,n)}var jw,bf,Ww,Hw;jw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};bf=function(){};Ww=function(t,e,n,i){var s=t.memoizedProps;if(s!==i){t=e.stateNode,Qr(Yn.current);var o=null;switch(n){case"input":s=ef(t,s),i=ef(t,i),o=[];break;case"select":s=Ke({},s,{value:void 0}),i=Ke({},i,{value:void 0}),o=[];break;case"textarea":s=rf(t,s),i=rf(t,i),o=[];break;default:typeof s.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Fc)}of(n,i);var l;n=null;for(m in s)if(!i.hasOwnProperty(m)&&s.hasOwnProperty(m)&&s[m]!=null)if(m==="style"){var h=s[m];for(l in h)h.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else m!=="dangerouslySetInnerHTML"&&m!=="children"&&m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(dl.hasOwnProperty(m)?o||(o=[]):(o=o||[]).push(m,null));for(m in i){var d=i[m];if(h=s!=null?s[m]:void 0,i.hasOwnProperty(m)&&d!==h&&(d!=null||h!=null))if(m==="style")if(h){for(l in h)!h.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in d)d.hasOwnProperty(l)&&h[l]!==d[l]&&(n||(n={}),n[l]=d[l])}else n||(o||(o=[]),o.push(m,n)),n=d;else m==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,h=h?h.__html:void 0,d!=null&&h!==d&&(o=o||[]).push(m,d)):m==="children"?typeof d!="string"&&typeof d!="number"||(o=o||[]).push(m,""+d):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&(dl.hasOwnProperty(m)?(d!=null&&m==="onScroll"&&ze("scroll",t),o||h===d||(o=[])):(o=o||[]).push(m,d))}n&&(o=o||[]).push("style",n);var m=o;(e.updateQueue=m)&&(e.flags|=4)}};Hw=function(t,e,n,i){n!==i&&(e.flags|=4)};function Va(t,e){if(!He)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags&14680064,i|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,i|=s.subtreeFlags,i|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function oP(t,e,n){var i=e.pendingProps;switch(Mp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lt(e),null;case 1:return Xt(e.type)&&zc(),Lt(e),null;case 3:return i=e.stateNode,Co(),Be(Yt),Be(Mt),qp(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Qu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,On!==null&&(Bf(On),On=null))),bf(t,e),Lt(e),null;case 5:Hp(e);var s=Qr(Sl.current);if(n=e.type,t!==null&&e.stateNode!=null)Ww(t,e,n,i,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Y(166));return Lt(e),null}if(t=Qr(Yn.current),Qu(e)){i=e.stateNode,n=e.type;var o=e.memoizedProps;switch(i[Zn]=e,i[Tl]=o,t=(e.mode&1)!==0,n){case"dialog":ze("cancel",i),ze("close",i);break;case"iframe":case"object":case"embed":ze("load",i);break;case"video":case"audio":for(s=0;s<qa.length;s++)ze(qa[s],i);break;case"source":ze("error",i);break;case"img":case"image":case"link":ze("error",i),ze("load",i);break;case"details":ze("toggle",i);break;case"input":Rg(i,o),ze("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!o.multiple},ze("invalid",i);break;case"textarea":Ng(i,o),ze("invalid",i)}of(n,o),s=null;for(var l in o)if(o.hasOwnProperty(l)){var h=o[l];l==="children"?typeof h=="string"?i.textContent!==h&&(o.suppressHydrationWarning!==!0&&Ku(i.textContent,h,t),s=["children",h]):typeof h=="number"&&i.textContent!==""+h&&(o.suppressHydrationWarning!==!0&&Ku(i.textContent,h,t),s=["children",""+h]):dl.hasOwnProperty(l)&&h!=null&&l==="onScroll"&&ze("scroll",i)}switch(n){case"input":Bu(i),Lg(i,o,!0);break;case"textarea":Bu(i),bg(i);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(i.onclick=Fc)}i=s,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=vy(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=l.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),n==="select"&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[Zn]=e,t[Tl]=i,jw(t,e,!1,!1),e.stateNode=t;e:{switch(l=af(n,i),n){case"dialog":ze("cancel",t),ze("close",t),s=i;break;case"iframe":case"object":case"embed":ze("load",t),s=i;break;case"video":case"audio":for(s=0;s<qa.length;s++)ze(qa[s],t);s=i;break;case"source":ze("error",t),s=i;break;case"img":case"image":case"link":ze("error",t),ze("load",t),s=i;break;case"details":ze("toggle",t),s=i;break;case"input":Rg(t,i),s=ef(t,i),ze("invalid",t);break;case"option":s=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},s=Ke({},i,{value:void 0}),ze("invalid",t);break;case"textarea":Ng(t,i),s=rf(t,i),ze("invalid",t);break;default:s=i}of(n,s),h=s;for(o in h)if(h.hasOwnProperty(o)){var d=h[o];o==="style"?Ey(t,d):o==="dangerouslySetInnerHTML"?(d=d?d.__html:void 0,d!=null&&yy(t,d)):o==="children"?typeof d=="string"?(n!=="textarea"||d!=="")&&fl(t,d):typeof d=="number"&&fl(t,""+d):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(dl.hasOwnProperty(o)?d!=null&&o==="onScroll"&&ze("scroll",t):d!=null&&Ep(t,o,d,l))}switch(n){case"input":Bu(t),Lg(t,i,!1);break;case"textarea":Bu(t),bg(t);break;case"option":i.value!=null&&t.setAttribute("value",""+wr(i.value));break;case"select":t.multiple=!!i.multiple,o=i.value,o!=null?po(t,!!i.multiple,o,!1):i.defaultValue!=null&&po(t,!!i.multiple,i.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Fc)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Lt(e),null;case 6:if(t&&e.stateNode!=null)Hw(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Y(166));if(n=Qr(Sl.current),Qr(Yn.current),Qu(e)){if(i=e.stateNode,n=e.memoizedProps,i[Zn]=e,(o=i.nodeValue!==n)&&(t=an,t!==null))switch(t.tag){case 3:Ku(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ku(i.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Zn]=e,e.stateNode=i}return Lt(e),null;case 13:if(Be(Ge),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(He&&sn!==null&&e.mode&1&&!(e.flags&128))lw(),xo(),e.flags|=98560,o=!1;else if(o=Qu(e),i!==null&&i.dehydrated!==null){if(t===null){if(!o)throw Error(Y(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Y(317));o[Zn]=e}else xo(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Lt(e),o=!1}else On!==null&&(Bf(On),On=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?ft===0&&(ft=3):im())),e.updateQueue!==null&&(e.flags|=4),Lt(e),null);case 4:return Co(),bf(t,e),t===null&&wl(e.stateNode.containerInfo),Lt(e),null;case 10:return Up(e.type._context),Lt(e),null;case 17:return Xt(e.type)&&zc(),Lt(e),null;case 19:if(Be(Ge),o=e.memoizedState,o===null)return Lt(e),null;if(i=(e.flags&128)!==0,l=o.rendering,l===null)if(i)Va(o,!1);else{if(ft!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(l=$c(t),l!==null){for(e.flags|=128,Va(o,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)o=n,t=i,o.flags&=14680066,l=o.alternate,l===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,t=l.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Fe(Ge,Ge.current&1|2),e.child}t=t.sibling}o.tail!==null&&nt()>Ro&&(e.flags|=128,i=!0,Va(o,!1),e.lanes=4194304)}else{if(!i)if(t=$c(l),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Va(o,!0),o.tail===null&&o.tailMode==="hidden"&&!l.alternate&&!He)return Lt(e),null}else 2*nt()-o.renderingStartTime>Ro&&n!==1073741824&&(e.flags|=128,i=!0,Va(o,!1),e.lanes=4194304);o.isBackwards?(l.sibling=e.child,e.child=l):(n=o.last,n!==null?n.sibling=l:e.child=l,o.last=l)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=nt(),e.sibling=null,n=Ge.current,Fe(Ge,i?n&1|2:n&1),e):(Lt(e),null);case 22:case 23:return nm(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?rn&1073741824&&(Lt(e),e.subtreeFlags&6&&(e.flags|=8192)):Lt(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function aP(t,e){switch(Mp(e),e.tag){case 1:return Xt(e.type)&&zc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Co(),Be(Yt),Be(Mt),qp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Hp(e),null;case 13:if(Be(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));xo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Be(Ge),null;case 4:return Co(),null;case 10:return Up(e.type._context),null;case 22:case 23:return nm(),null;case 24:return null;default:return null}}var Ju=!1,Ot=!1,lP=typeof WeakSet=="function"?WeakSet:Set,te=null;function co(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Je(t,e,i)}else n.current=null}function Of(t,e,n){try{n()}catch(i){Je(t,e,i)}}var T_=!1;function uP(t,e){if(_f=Dc,t=Ky(),Op(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var s=i.anchorOffset,o=i.focusNode;i=i.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var l=0,h=-1,d=-1,m=0,v=0,w=t,I=null;t:for(;;){for(var D;w!==n||s!==0&&w.nodeType!==3||(h=l+s),w!==o||i!==0&&w.nodeType!==3||(d=l+i),w.nodeType===3&&(l+=w.nodeValue.length),(D=w.firstChild)!==null;)I=w,w=D;for(;;){if(w===t)break t;if(I===n&&++m===s&&(h=l),I===o&&++v===i&&(d=l),(D=w.nextSibling)!==null)break;w=I,I=w.parentNode}w=D}n=h===-1||d===-1?null:{start:h,end:d}}else n=null}n=n||{start:0,end:0}}else n=null;for(vf={focusedElem:t,selectionRange:n},Dc=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var U=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(U!==null){var B=U.memoizedProps,Z=U.memoizedState,R=e.stateNode,x=R.getSnapshotBeforeUpdate(e.elementType===e.type?B:Nn(e.type,B),Z);R.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(F){Je(e,e.return,F)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return U=T_,T_=!1,U}function rl(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&Of(e,n,o)}s=s.next}while(s!==i)}}function Ph(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Df(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function qw(t){var e=t.alternate;e!==null&&(t.alternate=null,qw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Zn],delete e[Tl],delete e[Ef],delete e[qS],delete e[$S])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function $w(t){return t.tag===5||t.tag===3||t.tag===4}function I_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||$w(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Mf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Fc));else if(i!==4&&(t=t.child,t!==null))for(Mf(t,e,n),t=t.sibling;t!==null;)Mf(t,e,n),t=t.sibling}function Vf(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(Vf(t,e,n),t=t.sibling;t!==null;)Vf(t,e,n),t=t.sibling}var It=null,bn=!1;function Ki(t,e,n){for(n=n.child;n!==null;)Gw(t,e,n),n=n.sibling}function Gw(t,e,n){if(Qn&&typeof Qn.onCommitFiberUnmount=="function")try{Qn.onCommitFiberUnmount(_h,n)}catch{}switch(n.tag){case 5:Ot||co(n,e);case 6:var i=It,s=bn;It=null,Ki(t,e,n),It=i,bn=s,It!==null&&(bn?(t=It,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):It.removeChild(n.stateNode));break;case 18:It!==null&&(bn?(t=It,n=n.stateNode,t.nodeType===8?Id(t.parentNode,n):t.nodeType===1&&Id(t,n),_l(t)):Id(It,n.stateNode));break;case 4:i=It,s=bn,It=n.stateNode.containerInfo,bn=!0,Ki(t,e,n),It=i,bn=s;break;case 0:case 11:case 14:case 15:if(!Ot&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){s=i=i.next;do{var o=s,l=o.destroy;o=o.tag,l!==void 0&&(o&2||o&4)&&Of(n,e,l),s=s.next}while(s!==i)}Ki(t,e,n);break;case 1:if(!Ot&&(co(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(h){Je(n,e,h)}Ki(t,e,n);break;case 21:Ki(t,e,n);break;case 22:n.mode&1?(Ot=(i=Ot)||n.memoizedState!==null,Ki(t,e,n),Ot=i):Ki(t,e,n);break;default:Ki(t,e,n)}}function S_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new lP),e.forEach(function(i){var s=vP.bind(null,t,i);n.has(i)||(n.add(i),i.then(s,s))})}}function Ln(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var s=n[i];try{var o=t,l=e,h=l;e:for(;h!==null;){switch(h.tag){case 5:It=h.stateNode,bn=!1;break e;case 3:It=h.stateNode.containerInfo,bn=!0;break e;case 4:It=h.stateNode.containerInfo,bn=!0;break e}h=h.return}if(It===null)throw Error(Y(160));Gw(o,l,s),It=null,bn=!1;var d=s.alternate;d!==null&&(d.return=null),s.return=null}catch(m){Je(s,e,m)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Zw(e,t),e=e.sibling}function Zw(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ln(e,t),$n(t),i&4){try{rl(3,t,t.return),Ph(3,t)}catch(B){Je(t,t.return,B)}try{rl(5,t,t.return)}catch(B){Je(t,t.return,B)}}break;case 1:Ln(e,t),$n(t),i&512&&n!==null&&co(n,n.return);break;case 5:if(Ln(e,t),$n(t),i&512&&n!==null&&co(n,n.return),t.flags&32){var s=t.stateNode;try{fl(s,"")}catch(B){Je(t,t.return,B)}}if(i&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,l=n!==null?n.memoizedProps:o,h=t.type,d=t.updateQueue;if(t.updateQueue=null,d!==null)try{h==="input"&&o.type==="radio"&&o.name!=null&&gy(s,o),af(h,l);var m=af(h,o);for(l=0;l<d.length;l+=2){var v=d[l],w=d[l+1];v==="style"?Ey(s,w):v==="dangerouslySetInnerHTML"?yy(s,w):v==="children"?fl(s,w):Ep(s,v,w,m)}switch(h){case"input":tf(s,o);break;case"textarea":_y(s,o);break;case"select":var I=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var D=o.value;D!=null?po(s,!!o.multiple,D,!1):I!==!!o.multiple&&(o.defaultValue!=null?po(s,!!o.multiple,o.defaultValue,!0):po(s,!!o.multiple,o.multiple?[]:"",!1))}s[Tl]=o}catch(B){Je(t,t.return,B)}}break;case 6:if(Ln(e,t),$n(t),i&4){if(t.stateNode===null)throw Error(Y(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(B){Je(t,t.return,B)}}break;case 3:if(Ln(e,t),$n(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{_l(e.containerInfo)}catch(B){Je(t,t.return,B)}break;case 4:Ln(e,t),$n(t);break;case 13:Ln(e,t),$n(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(em=nt())),i&4&&S_(t);break;case 22:if(v=n!==null&&n.memoizedState!==null,t.mode&1?(Ot=(m=Ot)||v,Ln(e,t),Ot=m):Ln(e,t),$n(t),i&8192){if(m=t.memoizedState!==null,(t.stateNode.isHidden=m)&&!v&&t.mode&1)for(te=t,v=t.child;v!==null;){for(w=te=v;te!==null;){switch(I=te,D=I.child,I.tag){case 0:case 11:case 14:case 15:rl(4,I,I.return);break;case 1:co(I,I.return);var U=I.stateNode;if(typeof U.componentWillUnmount=="function"){i=I,n=I.return;try{e=i,U.props=e.memoizedProps,U.state=e.memoizedState,U.componentWillUnmount()}catch(B){Je(i,n,B)}}break;case 5:co(I,I.return);break;case 22:if(I.memoizedState!==null){x_(w);continue}}D!==null?(D.return=I,te=D):x_(w)}v=v.sibling}e:for(v=null,w=t;;){if(w.tag===5){if(v===null){v=w;try{s=w.stateNode,m?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(h=w.stateNode,d=w.memoizedProps.style,l=d!=null&&d.hasOwnProperty("display")?d.display:null,h.style.display=wy("display",l))}catch(B){Je(t,t.return,B)}}}else if(w.tag===6){if(v===null)try{w.stateNode.nodeValue=m?"":w.memoizedProps}catch(B){Je(t,t.return,B)}}else if((w.tag!==22&&w.tag!==23||w.memoizedState===null||w===t)&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===t)break e;for(;w.sibling===null;){if(w.return===null||w.return===t)break e;v===w&&(v=null),w=w.return}v===w&&(v=null),w.sibling.return=w.return,w=w.sibling}}break;case 19:Ln(e,t),$n(t),i&4&&S_(t);break;case 21:break;default:Ln(e,t),$n(t)}}function $n(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if($w(n)){var i=n;break e}n=n.return}throw Error(Y(160))}switch(i.tag){case 5:var s=i.stateNode;i.flags&32&&(fl(s,""),i.flags&=-33);var o=I_(t);Vf(t,o,s);break;case 3:case 4:var l=i.stateNode.containerInfo,h=I_(t);Mf(t,h,l);break;default:throw Error(Y(161))}}catch(d){Je(t,t.return,d)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function cP(t,e,n){te=t,Kw(t)}function Kw(t,e,n){for(var i=(t.mode&1)!==0;te!==null;){var s=te,o=s.child;if(s.tag===22&&i){var l=s.memoizedState!==null||Ju;if(!l){var h=s.alternate,d=h!==null&&h.memoizedState!==null||Ot;h=Ju;var m=Ot;if(Ju=l,(Ot=d)&&!m)for(te=s;te!==null;)l=te,d=l.child,l.tag===22&&l.memoizedState!==null?A_(s):d!==null?(d.return=l,te=d):A_(s);for(;o!==null;)te=o,Kw(o),o=o.sibling;te=s,Ju=h,Ot=m}P_(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,te=o):P_(t)}}function P_(t){for(;te!==null;){var e=te;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ot||Ph(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ot)if(n===null)i.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:Nn(e.type,n.memoizedProps);i.componentDidUpdate(s,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&u_(e,o,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}u_(e,l,n)}break;case 5:var h=e.stateNode;if(n===null&&e.flags&4){n=h;var d=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&n.focus();break;case"img":d.src&&(n.src=d.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var m=e.alternate;if(m!==null){var v=m.memoizedState;if(v!==null){var w=v.dehydrated;w!==null&&_l(w)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}Ot||e.flags&512&&Df(e)}catch(I){Je(e,e.return,I)}}if(e===t){te=null;break}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}}function x_(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,te=n;break}te=e.return}}function A_(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ph(4,e)}catch(d){Je(e,n,d)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var s=e.return;try{i.componentDidMount()}catch(d){Je(e,s,d)}}var o=e.return;try{Df(e)}catch(d){Je(e,o,d)}break;case 5:var l=e.return;try{Df(e)}catch(d){Je(e,l,d)}}}catch(d){Je(e,e.return,d)}if(e===t){te=null;break}var h=e.sibling;if(h!==null){h.return=e.return,te=h;break}te=e.return}}var hP=Math.ceil,Kc=Mi.ReactCurrentDispatcher,Xp=Mi.ReactCurrentOwner,Tn=Mi.ReactCurrentBatchConfig,ke=0,yt=null,lt=null,xt=0,rn=0,ho=xr(0),ft=0,Cl=null,rs=0,xh=0,Jp=0,sl=null,Zt=null,em=0,Ro=1/0,vi=null,Qc=!1,Ff=null,fr=null,ec=!1,or=null,Yc=0,ol=0,zf=null,vc=-1,yc=0;function jt(){return ke&6?nt():vc!==-1?vc:vc=nt()}function pr(t){return t.mode&1?ke&2&&xt!==0?xt&-xt:ZS.transition!==null?(yc===0&&(yc=by()),yc):(t=be,t!==0||(t=window.event,t=t===void 0?16:Uy(t.type)),t):1}function Mn(t,e,n,i){if(50<ol)throw ol=0,zf=null,Error(Y(185));zl(t,n,i),(!(ke&2)||t!==yt)&&(t===yt&&(!(ke&2)&&(xh|=n),ft===4&&er(t,xt)),Jt(t,i),n===1&&ke===0&&!(e.mode&1)&&(Ro=nt()+500,Th&&Ar()))}function Jt(t,e){var n=t.callbackNode;ZI(t,e);var i=Oc(t,t===yt?xt:0);if(i===0)n!==null&&Mg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Mg(n),e===1)t.tag===0?GS(C_.bind(null,t)):sw(C_.bind(null,t)),WS(function(){!(ke&6)&&Ar()}),n=null;else{switch(Oy(i)){case 1:n=xp;break;case 4:n=Ly;break;case 16:n=bc;break;case 536870912:n=Ny;break;default:n=bc}n=i0(n,Qw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Qw(t,e){if(vc=-1,yc=0,ke&6)throw Error(Y(327));var n=t.callbackNode;if(yo()&&t.callbackNode!==n)return null;var i=Oc(t,t===yt?xt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Xc(t,i);else{e=i;var s=ke;ke|=2;var o=Xw();(yt!==t||xt!==e)&&(vi=null,Ro=nt()+500,Xr(t,e));do try{pP();break}catch(h){Yw(t,h)}while(!0);zp(),Kc.current=o,ke=s,lt!==null?e=0:(yt=null,xt=0,e=ft)}if(e!==0){if(e===2&&(s=df(t),s!==0&&(i=s,e=Uf(t,s))),e===1)throw n=Cl,Xr(t,0),er(t,i),Jt(t,nt()),n;if(e===6)er(t,i);else{if(s=t.current.alternate,!(i&30)&&!dP(s)&&(e=Xc(t,i),e===2&&(o=df(t),o!==0&&(i=o,e=Uf(t,o))),e===1))throw n=Cl,Xr(t,0),er(t,i),Jt(t,nt()),n;switch(t.finishedWork=s,t.finishedLanes=i,e){case 0:case 1:throw Error(Y(345));case 2:$r(t,Zt,vi);break;case 3:if(er(t,i),(i&130023424)===i&&(e=em+500-nt(),10<e)){if(Oc(t,0)!==0)break;if(s=t.suspendedLanes,(s&i)!==i){jt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=wf($r.bind(null,t,Zt,vi),e);break}$r(t,Zt,vi);break;case 4:if(er(t,i),(i&4194240)===i)break;for(e=t.eventTimes,s=-1;0<i;){var l=31-Dn(i);o=1<<l,l=e[l],l>s&&(s=l),i&=~o}if(i=s,i=nt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*hP(i/1960))-i,10<i){t.timeoutHandle=wf($r.bind(null,t,Zt,vi),i);break}$r(t,Zt,vi);break;case 5:$r(t,Zt,vi);break;default:throw Error(Y(329))}}}return Jt(t,nt()),t.callbackNode===n?Qw.bind(null,t):null}function Uf(t,e){var n=sl;return t.current.memoizedState.isDehydrated&&(Xr(t,e).flags|=256),t=Xc(t,e),t!==2&&(e=Zt,Zt=n,e!==null&&Bf(e)),t}function Bf(t){Zt===null?Zt=t:Zt.push.apply(Zt,t)}function dP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var s=n[i],o=s.getSnapshot;s=s.value;try{if(!Vn(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function er(t,e){for(e&=~Jp,e&=~xh,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Dn(e),i=1<<n;t[n]=-1,e&=~i}}function C_(t){if(ke&6)throw Error(Y(327));yo();var e=Oc(t,0);if(!(e&1))return Jt(t,nt()),null;var n=Xc(t,e);if(t.tag!==0&&n===2){var i=df(t);i!==0&&(e=i,n=Uf(t,i))}if(n===1)throw n=Cl,Xr(t,0),er(t,e),Jt(t,nt()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$r(t,Zt,vi),Jt(t,nt()),null}function tm(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(Ro=nt()+500,Th&&Ar())}}function ss(t){or!==null&&or.tag===0&&!(ke&6)&&yo();var e=ke;ke|=1;var n=Tn.transition,i=be;try{if(Tn.transition=null,be=1,t)return t()}finally{be=i,Tn.transition=n,ke=e,!(ke&6)&&Ar()}}function nm(){rn=ho.current,Be(ho)}function Xr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,jS(n)),lt!==null)for(n=lt.return;n!==null;){var i=n;switch(Mp(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&zc();break;case 3:Co(),Be(Yt),Be(Mt),qp();break;case 5:Hp(i);break;case 4:Co();break;case 13:Be(Ge);break;case 19:Be(Ge);break;case 10:Up(i.type._context);break;case 22:case 23:nm()}n=n.return}if(yt=t,lt=t=mr(t.current,null),xt=rn=e,ft=0,Cl=null,Jp=xh=rs=0,Zt=sl=null,Kr!==null){for(e=0;e<Kr.length;e++)if(n=Kr[e],i=n.interleaved,i!==null){n.interleaved=null;var s=i.next,o=n.pending;if(o!==null){var l=o.next;o.next=s,i.next=l}n.pending=i}Kr=null}return t}function Yw(t,e){do{var n=lt;try{if(zp(),mc.current=Zc,Gc){for(var i=Ze.memoizedState;i!==null;){var s=i.queue;s!==null&&(s.pending=null),i=i.next}Gc=!1}if(is=0,vt=dt=Ze=null,il=!1,Pl=0,Xp.current=null,n===null||n.return===null){ft=1,Cl=e,lt=null;break}e:{var o=t,l=n.return,h=n,d=e;if(e=xt,h.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){var m=d,v=h,w=v.tag;if(!(v.mode&1)&&(w===0||w===11||w===15)){var I=v.alternate;I?(v.updateQueue=I.updateQueue,v.memoizedState=I.memoizedState,v.lanes=I.lanes):(v.updateQueue=null,v.memoizedState=null)}var D=m_(l);if(D!==null){D.flags&=-257,g_(D,l,h,o,e),D.mode&1&&p_(o,m,e),e=D,d=m;var U=e.updateQueue;if(U===null){var B=new Set;B.add(d),e.updateQueue=B}else U.add(d);break e}else{if(!(e&1)){p_(o,m,e),im();break e}d=Error(Y(426))}}else if(He&&h.mode&1){var Z=m_(l);if(Z!==null){!(Z.flags&65536)&&(Z.flags|=256),g_(Z,l,h,o,e),Vp(ko(d,h));break e}}o=d=ko(d,h),ft!==4&&(ft=2),sl===null?sl=[o]:sl.push(o),o=l;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var R=Ow(o,d,e);l_(o,R);break e;case 1:h=d;var x=o.type,N=o.stateNode;if(!(o.flags&128)&&(typeof x.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(fr===null||!fr.has(N)))){o.flags|=65536,e&=-e,o.lanes|=e;var F=Dw(o,h,e);l_(o,F);break e}}o=o.return}while(o!==null)}e0(n)}catch(H){e=H,lt===n&&n!==null&&(lt=n=n.return);continue}break}while(!0)}function Xw(){var t=Kc.current;return Kc.current=Zc,t===null?Zc:t}function im(){(ft===0||ft===3||ft===2)&&(ft=4),yt===null||!(rs&268435455)&&!(xh&268435455)||er(yt,xt)}function Xc(t,e){var n=ke;ke|=2;var i=Xw();(yt!==t||xt!==e)&&(vi=null,Xr(t,e));do try{fP();break}catch(s){Yw(t,s)}while(!0);if(zp(),ke=n,Kc.current=i,lt!==null)throw Error(Y(261));return yt=null,xt=0,ft}function fP(){for(;lt!==null;)Jw(lt)}function pP(){for(;lt!==null&&!zI();)Jw(lt)}function Jw(t){var e=n0(t.alternate,t,rn);t.memoizedProps=t.pendingProps,e===null?e0(t):lt=e,Xp.current=null}function e0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=aP(n,e),n!==null){n.flags&=32767,lt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ft=6,lt=null;return}}else if(n=oP(n,e,rn),n!==null){lt=n;return}if(e=e.sibling,e!==null){lt=e;return}lt=e=t}while(e!==null);ft===0&&(ft=5)}function $r(t,e,n){var i=be,s=Tn.transition;try{Tn.transition=null,be=1,mP(t,e,n,i)}finally{Tn.transition=s,be=i}return null}function mP(t,e,n,i){do yo();while(or!==null);if(ke&6)throw Error(Y(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(KI(t,o),t===yt&&(lt=yt=null,xt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ec||(ec=!0,i0(bc,function(){return yo(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=Tn.transition,Tn.transition=null;var l=be;be=1;var h=ke;ke|=4,Xp.current=null,uP(t,n),Zw(n,t),DS(vf),Dc=!!_f,vf=_f=null,t.current=n,cP(n),UI(),ke=h,be=l,Tn.transition=o}else t.current=n;if(ec&&(ec=!1,or=t,Yc=s),o=t.pendingLanes,o===0&&(fr=null),WI(n.stateNode),Jt(t,nt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],i(s.value,{componentStack:s.stack,digest:s.digest});if(Qc)throw Qc=!1,t=Ff,Ff=null,t;return Yc&1&&t.tag!==0&&yo(),o=t.pendingLanes,o&1?t===zf?ol++:(ol=0,zf=t):ol=0,Ar(),null}function yo(){if(or!==null){var t=Oy(Yc),e=Tn.transition,n=be;try{if(Tn.transition=null,be=16>t?16:t,or===null)var i=!1;else{if(t=or,or=null,Yc=0,ke&6)throw Error(Y(331));var s=ke;for(ke|=4,te=t.current;te!==null;){var o=te,l=o.child;if(te.flags&16){var h=o.deletions;if(h!==null){for(var d=0;d<h.length;d++){var m=h[d];for(te=m;te!==null;){var v=te;switch(v.tag){case 0:case 11:case 15:rl(8,v,o)}var w=v.child;if(w!==null)w.return=v,te=w;else for(;te!==null;){v=te;var I=v.sibling,D=v.return;if(qw(v),v===m){te=null;break}if(I!==null){I.return=D,te=I;break}te=D}}}var U=o.alternate;if(U!==null){var B=U.child;if(B!==null){U.child=null;do{var Z=B.sibling;B.sibling=null,B=Z}while(B!==null)}}te=o}}if(o.subtreeFlags&2064&&l!==null)l.return=o,te=l;else e:for(;te!==null;){if(o=te,o.flags&2048)switch(o.tag){case 0:case 11:case 15:rl(9,o,o.return)}var R=o.sibling;if(R!==null){R.return=o.return,te=R;break e}te=o.return}}var x=t.current;for(te=x;te!==null;){l=te;var N=l.child;if(l.subtreeFlags&2064&&N!==null)N.return=l,te=N;else e:for(l=x;te!==null;){if(h=te,h.flags&2048)try{switch(h.tag){case 0:case 11:case 15:Ph(9,h)}}catch(H){Je(h,h.return,H)}if(h===l){te=null;break e}var F=h.sibling;if(F!==null){F.return=h.return,te=F;break e}te=h.return}}if(ke=s,Ar(),Qn&&typeof Qn.onPostCommitFiberRoot=="function")try{Qn.onPostCommitFiberRoot(_h,t)}catch{}i=!0}return i}finally{be=n,Tn.transition=e}}return!1}function k_(t,e,n){e=ko(n,e),e=Ow(t,e,1),t=dr(t,e,1),e=jt(),t!==null&&(zl(t,1,e),Jt(t,e))}function Je(t,e,n){if(t.tag===3)k_(t,t,n);else for(;e!==null;){if(e.tag===3){k_(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(fr===null||!fr.has(i))){t=ko(n,t),t=Dw(e,t,1),e=dr(e,t,1),t=jt(),e!==null&&(zl(e,1,t),Jt(e,t));break}}e=e.return}}function gP(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=jt(),t.pingedLanes|=t.suspendedLanes&n,yt===t&&(xt&n)===n&&(ft===4||ft===3&&(xt&130023424)===xt&&500>nt()-em?Xr(t,0):Jp|=n),Jt(t,e)}function t0(t,e){e===0&&(t.mode&1?(e=Hu,Hu<<=1,!(Hu&130023424)&&(Hu=4194304)):e=1);var n=jt();t=Ri(t,e),t!==null&&(zl(t,e,n),Jt(t,n))}function _P(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),t0(t,n)}function vP(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Y(314))}i!==null&&i.delete(e),t0(t,n)}var n0;n0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Yt.current)Qt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Qt=!1,sP(t,e,n);Qt=!!(t.flags&131072)}else Qt=!1,He&&e.flags&1048576&&ow(e,jc,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;_c(t,e),t=e.pendingProps;var s=Po(e,Mt.current);vo(e,n),s=Gp(null,e,i,t,s,n);var o=Zp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Xt(i)?(o=!0,Uc(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,jp(e),s.updater=Sh,e.stateNode=s,s._reactInternals=e,Af(e,i,t,n),e=Rf(null,e,i,!0,o,n)):(e.tag=0,He&&o&&Dp(e),Bt(null,e,s,n),e=e.child),e;case 16:i=e.elementType;e:{switch(_c(t,e),t=e.pendingProps,s=i._init,i=s(i._payload),e.type=i,s=e.tag=wP(i),t=Nn(i,t),s){case 0:e=kf(null,e,i,t,n);break e;case 1:e=y_(null,e,i,t,n);break e;case 11:e=__(null,e,i,t,n);break e;case 14:e=v_(null,e,i,Nn(i.type,t),n);break e}throw Error(Y(306,i,""))}return e;case 0:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Nn(i,s),kf(t,e,i,s,n);case 1:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Nn(i,s),y_(t,e,i,s,n);case 3:e:{if(zw(e),t===null)throw Error(Y(387));i=e.pendingProps,o=e.memoizedState,s=o.element,dw(t,e),qc(e,i,null,n);var l=e.memoizedState;if(i=l.element,o.isDehydrated)if(o={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=ko(Error(Y(423)),e),e=w_(t,e,i,n,s);break e}else if(i!==s){s=ko(Error(Y(424)),e),e=w_(t,e,i,n,s);break e}else for(sn=hr(e.stateNode.containerInfo.firstChild),an=e,He=!0,On=null,n=cw(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xo(),i===s){e=Li(t,e,n);break e}Bt(t,e,i,n)}e=e.child}return e;case 5:return fw(e),t===null&&Sf(e),i=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,l=s.children,yf(i,s)?l=null:o!==null&&yf(i,o)&&(e.flags|=32),Fw(t,e),Bt(t,e,l,n),e.child;case 6:return t===null&&Sf(e),null;case 13:return Uw(t,e,n);case 4:return Wp(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Ao(e,null,i,n):Bt(t,e,i,n),e.child;case 11:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Nn(i,s),__(t,e,i,s,n);case 7:return Bt(t,e,e.pendingProps,n),e.child;case 8:return Bt(t,e,e.pendingProps.children,n),e.child;case 12:return Bt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,s=e.pendingProps,o=e.memoizedProps,l=s.value,Fe(Wc,i._currentValue),i._currentValue=l,o!==null)if(Vn(o.value,l)){if(o.children===s.children&&!Yt.current){e=Li(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var h=o.dependencies;if(h!==null){l=o.child;for(var d=h.firstContext;d!==null;){if(d.context===i){if(o.tag===1){d=Pi(-1,n&-n),d.tag=2;var m=o.updateQueue;if(m!==null){m=m.shared;var v=m.pending;v===null?d.next=d:(d.next=v.next,v.next=d),m.pending=d}}o.lanes|=n,d=o.alternate,d!==null&&(d.lanes|=n),Pf(o.return,n,e),h.lanes|=n;break}d=d.next}}else if(o.tag===10)l=o.type===e.type?null:o.child;else if(o.tag===18){if(l=o.return,l===null)throw Error(Y(341));l.lanes|=n,h=l.alternate,h!==null&&(h.lanes|=n),Pf(l,n,e),l=o.sibling}else l=o.child;if(l!==null)l.return=o;else for(l=o;l!==null;){if(l===e){l=null;break}if(o=l.sibling,o!==null){o.return=l.return,l=o;break}l=l.return}o=l}Bt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,i=e.pendingProps.children,vo(e,n),s=Sn(s),i=i(s),e.flags|=1,Bt(t,e,i,n),e.child;case 14:return i=e.type,s=Nn(i,e.pendingProps),s=Nn(i.type,s),v_(t,e,i,s,n);case 15:return Mw(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,s=e.pendingProps,s=e.elementType===i?s:Nn(i,s),_c(t,e),e.tag=1,Xt(i)?(t=!0,Uc(e)):t=!1,vo(e,n),bw(e,i,s),Af(e,i,s,n),Rf(null,e,i,!0,t,n);case 19:return Bw(t,e,n);case 22:return Vw(t,e,n)}throw Error(Y(156,e.tag))};function i0(t,e){return Ry(t,e)}function yP(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function En(t,e,n,i){return new yP(t,e,n,i)}function rm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function wP(t){if(typeof t=="function")return rm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ip)return 11;if(t===Sp)return 14}return 2}function mr(t,e){var n=t.alternate;return n===null?(n=En(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function wc(t,e,n,i,s,o){var l=2;if(i=t,typeof t=="function")rm(t)&&(l=1);else if(typeof t=="string")l=5;else e:switch(t){case to:return Jr(n.children,s,o,e);case Tp:l=8,s|=8;break;case Qd:return t=En(12,n,e,s|2),t.elementType=Qd,t.lanes=o,t;case Yd:return t=En(13,n,e,s),t.elementType=Yd,t.lanes=o,t;case Xd:return t=En(19,n,e,s),t.elementType=Xd,t.lanes=o,t;case fy:return Ah(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case hy:l=10;break e;case dy:l=9;break e;case Ip:l=11;break e;case Sp:l=14;break e;case Yi:l=16,i=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=En(l,n,e,s),e.elementType=t,e.type=i,e.lanes=o,e}function Jr(t,e,n,i){return t=En(7,t,i,e),t.lanes=n,t}function Ah(t,e,n,i){return t=En(22,t,i,e),t.elementType=fy,t.lanes=n,t.stateNode={isHidden:!1},t}function Ld(t,e,n){return t=En(6,t,null,e),t.lanes=n,t}function Nd(t,e,n){return e=En(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function EP(t,e,n,i,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dd(0),this.expirationTimes=dd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dd(0),this.identifierPrefix=i,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function sm(t,e,n,i,s,o,l,h,d){return t=new EP(t,e,n,h,d),e===1?(e=1,o===!0&&(e|=8)):e=0,o=En(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jp(o),t}function TP(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:eo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function r0(t){if(!t)return Er;t=t._reactInternals;e:{if(fs(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Xt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if(Xt(n))return rw(t,n,e)}return e}function s0(t,e,n,i,s,o,l,h,d){return t=sm(n,i,!0,t,s,o,l,h,d),t.context=r0(null),n=t.current,i=jt(),s=pr(n),o=Pi(i,s),o.callback=e??null,dr(n,o,s),t.current.lanes=s,zl(t,s,i),Jt(t,i),t}function Ch(t,e,n,i){var s=e.current,o=jt(),l=pr(s);return n=r0(n),e.context===null?e.context=n:e.pendingContext=n,e=Pi(o,l),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=dr(s,e,l),t!==null&&(Mn(t,s,l,o),pc(t,s,l)),l}function Jc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function R_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function om(t,e){R_(t,e),(t=t.alternate)&&R_(t,e)}function IP(){return null}var o0=typeof reportError=="function"?reportError:function(t){console.error(t)};function am(t){this._internalRoot=t}kh.prototype.render=am.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));Ch(t,e,null,null)};kh.prototype.unmount=am.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ss(function(){Ch(null,t,null,null)}),e[ki]=null}};function kh(t){this._internalRoot=t}kh.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vy();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ji.length&&e!==0&&e<Ji[n].priority;n++);Ji.splice(n,0,t),n===0&&zy(t)}};function lm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Rh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function L_(){}function SP(t,e,n,i,s){if(s){if(typeof i=="function"){var o=i;i=function(){var m=Jc(l);o.call(m)}}var l=s0(e,i,t,0,null,!1,!1,"",L_);return t._reactRootContainer=l,t[ki]=l.current,wl(t.nodeType===8?t.parentNode:t),ss(),l}for(;s=t.lastChild;)t.removeChild(s);if(typeof i=="function"){var h=i;i=function(){var m=Jc(d);h.call(m)}}var d=sm(t,0,!1,null,null,!1,!1,"",L_);return t._reactRootContainer=d,t[ki]=d.current,wl(t.nodeType===8?t.parentNode:t),ss(function(){Ch(e,d,n,i)}),d}function Lh(t,e,n,i,s){var o=n._reactRootContainer;if(o){var l=o;if(typeof s=="function"){var h=s;s=function(){var d=Jc(l);h.call(d)}}Ch(e,l,t,s)}else l=SP(n,e,t,s,i);return Jc(l)}Dy=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ha(e.pendingLanes);n!==0&&(Ap(e,n|1),Jt(e,nt()),!(ke&6)&&(Ro=nt()+500,Ar()))}break;case 13:ss(function(){var i=Ri(t,1);if(i!==null){var s=jt();Mn(i,t,1,s)}}),om(t,1)}};Cp=function(t){if(t.tag===13){var e=Ri(t,134217728);if(e!==null){var n=jt();Mn(e,t,134217728,n)}om(t,134217728)}};My=function(t){if(t.tag===13){var e=pr(t),n=Ri(t,e);if(n!==null){var i=jt();Mn(n,t,e,i)}om(t,e)}};Vy=function(){return be};Fy=function(t,e){var n=be;try{return be=t,e()}finally{be=n}};uf=function(t,e,n){switch(e){case"input":if(tf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var s=Eh(i);if(!s)throw Error(Y(90));my(i),tf(i,s)}}}break;case"textarea":_y(t,n);break;case"select":e=n.value,e!=null&&po(t,!!n.multiple,e,!1)}};Sy=tm;Py=ss;var PP={usingClientEntryPoint:!1,Events:[Bl,so,Eh,Ty,Iy,tm]},Fa={findFiberByHostInstance:Zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xP={bundleType:Fa.bundleType,version:Fa.version,rendererPackageName:Fa.rendererPackageName,rendererConfig:Fa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Cy(t),t===null?null:t.stateNode},findFiberByHostInstance:Fa.findFiberByHostInstance||IP,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tc.isDisabled&&tc.supportsFiber)try{_h=tc.inject(xP),Qn=tc}catch{}}un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=PP;un.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lm(e))throw Error(Y(200));return TP(t,e,null,n)};un.createRoot=function(t,e){if(!lm(t))throw Error(Y(299));var n=!1,i="",s=o0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=sm(t,1,!1,null,null,n,!1,i,s),t[ki]=e.current,wl(t.nodeType===8?t.parentNode:t),new am(e)};un.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=Cy(e),t=t===null?null:t.stateNode,t};un.flushSync=function(t){return ss(t)};un.hydrate=function(t,e,n){if(!Rh(e))throw Error(Y(200));return Lh(null,t,e,!0,n)};un.hydrateRoot=function(t,e,n){if(!lm(t))throw Error(Y(405));var i=n!=null&&n.hydratedSources||null,s=!1,o="",l=o0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=s0(e,null,t,1,n??null,s,!1,o,l),t[ki]=e.current,wl(t),i)for(t=0;t<i.length;t++)n=i[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new kh(e)};un.render=function(t,e,n){if(!Rh(e))throw Error(Y(200));return Lh(null,t,e,!1,n)};un.unmountComponentAtNode=function(t){if(!Rh(t))throw Error(Y(40));return t._reactRootContainer?(ss(function(){Lh(null,null,t,!1,function(){t._reactRootContainer=null,t[ki]=null})}),!0):!1};un.unstable_batchedUpdates=tm;un.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Rh(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return Lh(t,e,n,!1,i)};un.version="18.3.1-next-f1338f8080-20240426";function a0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a0)}catch(t){console.error(t)}}a0(),ay.exports=un;var AP=ay.exports,N_=AP;Zd.createRoot=N_.createRoot,Zd.hydrateRoot=N_.hydrateRoot;const Nh=({className:t,style:e})=>b.jsx("img",{src:"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcS2YbN6y1YSvCB-uBp2Pz_Dp5t4VeVei16jGg&s",alt:"Logo Sicoob",className:t,style:{height:"40px",objectFit:"contain",...e}}),CP=({onLogin:t})=>{const[e,n]=_e.useState(""),[i,s]=_e.useState(""),[o,l]=_e.useState(null),[h,d]=_e.useState(!1),m=async v=>{v.preventDefault(),l(null),d(!0);try{await t(e,i)||l("Credenciais invlidas. Por favor, tente novamente.")}finally{d(!1)}};return b.jsxs("div",{className:"min-h-screen bg-[#005058] flex flex-col justify-center items-center p-4",children:[b.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-2xl p-8",children:[b.jsxs("div",{className:"text-center mb-8",children:[b.jsx(Nh,{className:"mx-auto w-20 h-auto mb-6"}),b.jsx("h1",{className:"text-3xl font-extrabold text-gray-800",children:"Registro de Visitas"}),b.jsx("p",{className:"text-lg text-gray-500 mt-1",children:"Sicoob Cooprem"})]}),o&&b.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:b.jsx("span",{className:"block sm:inline",children:o})}),b.jsxs("form",{onSubmit:m,children:[b.jsxs("div",{className:"mb-4",children:[b.jsx("label",{htmlFor:"email",className:"block text-gray-700 text-sm font-bold mb-2",children:"Email"}),b.jsx("input",{type:"email",id:"email",value:e,onChange:v=>n(v.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline disabled:bg-gray-200",placeholder:"seu.email@sicoob.com.br",required:!0,disabled:h,autoComplete:"username"})]}),b.jsxs("div",{className:"mb-6",children:[b.jsx("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-bold mb-2",children:"Senha"}),b.jsx("input",{type:"password",id:"password",value:i,onChange:v=>s(v.target.value),className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline disabled:bg-gray-200",placeholder:"********",required:!0,disabled:h,autoComplete:"current-password"})]}),b.jsx("div",{className:"flex items-center justify-between mt-6",children:b.jsx("button",{type:"submit",disabled:h,className:"w-full bg-[#005058] hover:bg-[#003d44] text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline transition duration-200 disabled:bg-gray-400 disabled:cursor-not-allowed flex justify-center items-center h-10",children:h?b.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[b.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),b.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):"Entrar"})})]})]}),b.jsxs("footer",{className:"text-center text-gray-300 text-xs mt-8",children:[b.jsx("p",{className:"mb-1",children:"Verso 2.1.0"}),"",new Date().getFullYear()," Sicoob Cooprem. Todos os direitos reservados."]})]})};var l0=(t=>(t.Consorcio="Consrcio",t.Seguro="Seguro",t.Investimentos="Investimentos",t.Credito="Crdito",t.Previdencia="Previdncia",t.Compliance="Compliance",t.Cobranca="Cobrana",t.SIPAG="SIPAG",t))(l0||{});const kP=()=>{const[t,e]=_e.useState(null),[n,i]=_e.useState(!1),s=_e.useCallback(()=>{navigator.geolocation&&(i(!0),navigator.geolocation.getCurrentPosition(o=>{e({latitude:o.coords.latitude,longitude:o.coords.longitude}),i(!1)},()=>i(!1)))},[]);return{location:t,loading:n,getLocation:s}},RP=({cooperados:t,addVisit:e,onClose:n,prefilledCooperado:i})=>{const[s,o]=_e.useState((i==null?void 0:i.id)||""),[l,h]=_e.useState(""),[d,m]=_e.useState([]),{location:v,loading:w,getLocation:I}=kP(),[D,U]=_e.useState(!1);_e.useEffect(()=>{I()},[I]);const B=async R=>{if(R.preventDefault(),!s||!l||d.length===0)return alert("Preencha todos os campos");const x=t.find(N=>N.id===s)||{name:"Outro",document:""};U(!0),await e({cooperado:x,date:new Date,location:v,summary:l,products:d.map(N=>({product:N}))}),U(!1)},Z=R=>{m(x=>x.includes(R)?x.filter(N=>N!==R):[...x,R])};return b.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:b.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg p-6 max-h-[90vh] overflow-y-auto shadow-2xl",children:[b.jsxs("div",{className:"flex justify-between items-center mb-6",children:[b.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Registrar Visita"}),b.jsx("button",{onClick:n,className:"text-gray-400 text-2xl",children:""})]}),b.jsxs("form",{onSubmit:B,className:"space-y-6",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Cooperado"}),b.jsxs("select",{className:"w-full p-3 border rounded-lg outline-none focus:ring-2 focus:ring-[#005058]",value:s,onChange:R=>o(R.target.value),disabled:!!i,children:[b.jsx("option",{value:"",children:"Selecione um cooperado..."}),t.map(R=>b.jsx("option",{value:R.id,children:R.name},R.id))]})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Resumo da Visita"}),b.jsx("textarea",{rows:3,className:"w-full p-3 border rounded-lg outline-none focus:ring-2 focus:ring-[#005058]",placeholder:"O que foi discutido?",value:l,onChange:R=>h(R.target.value)})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-2",children:"Produtos Discutidos"}),b.jsx("div",{className:"flex flex-wrap gap-2",children:Object.values(l0).map(R=>b.jsx("button",{type:"button",onClick:()=>Z(R),className:`px-3 py-1.5 rounded-full text-xs font-bold transition-colors ${d.includes(R)?"bg-[#005058] text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:R},R))})]}),b.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg flex items-center justify-between",children:[b.jsx("span",{className:"text-xs font-bold text-gray-500",children:" Localizao"}),b.jsx("span",{className:"text-[10px] text-gray-400",children:w?"Obtendo...":v?"Capturada com sucesso":"No capturada"})]}),b.jsx("button",{type:"submit",disabled:D,className:"w-full bg-[#16a34a] text-white py-4 rounded-xl font-bold shadow-lg hover:bg-green-700 disabled:opacity-50 transition-colors",children:D?"Salvando...":"Confirmar Registro"})]})]})})},LP=({visit:t})=>b.jsxs("div",{className:"p-4 hover:bg-gray-50 flex justify-between items-center border-b last:border-0",children:[b.jsxs("div",{className:"flex-1",children:[b.jsx("h4",{className:"font-bold text-[#005058]",children:t.cooperado.name}),b.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[b.jsx("span",{className:"text-[10px] bg-gray-100 px-1.5 py-0.5 rounded text-gray-500 font-mono",children:new Date(t.date).toLocaleDateString("pt-BR")}),t.location&&b.jsx("a",{href:`https://www.google.com/maps/search/?api=1&query=${t.location.latitude},${t.location.longitude}`,target:"_blank",rel:"noreferrer",className:"text-[10px] text-blue-600 hover:underline flex items-center",children:" Ver Mapa"})]}),b.jsx("p",{className:"text-sm text-gray-700 mt-2 line-clamp-2",children:t.summary})]}),b.jsx("div",{className:"flex flex-wrap gap-1 justify-end max-w-[150px]",children:t.products.map((e,n)=>b.jsx("span",{className:"text-[9px] bg-[#005058]/10 text-[#005058] px-2 py-0.5 rounded-full font-bold uppercase",children:e.product},n))})]}),NP=({user:t,visits:e,cooperados:n,suggestedVisits:i,onLogout:s,addVisit:o})=>{const[l,h]=_e.useState(!1),[d,m]=_e.useState(null),v=_e.useMemo(()=>[...e].sort((w,I)=>I.date.getTime()-w.date.getTime()),[e]);return b.jsxs("div",{className:"min-h-screen bg-gray-50 pb-12",children:[b.jsx("header",{className:"bg-[#005058] text-white shadow-lg sticky top-0 z-10",children:b.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-16 flex justify-between items-center",children:[b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx(Nh,{style:{filter:"brightness(2)"}}),b.jsxs("div",{children:[b.jsx("p",{className:"font-bold text-sm leading-tight",children:t.name}),b.jsx("p",{className:"text-xs opacity-80",children:t.agency})]})]}),b.jsx("button",{onClick:s,className:"text-xs bg-red-600 px-3 py-1 rounded hover:bg-red-700 font-bold",children:"Sair"})]})}),b.jsxs("main",{className:"max-w-6xl mx-auto px-4 mt-8",children:[b.jsxs("div",{className:"flex justify-between items-end mb-6",children:[b.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Minhas Visitas"}),b.jsx("button",{onClick:()=>{m(null),h(!0)},className:"bg-[#005058] text-white px-6 py-2 rounded-full font-bold shadow-lg hover:scale-105 transition-transform",children:"+ Nova Visita"})]}),i.length>0&&b.jsxs("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r-lg mb-8 shadow-sm",children:[b.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[b.jsx("span",{className:"text-xl",children:""}),b.jsx("h3",{className:"font-bold text-yellow-800",children:"Sugestes de IA"})]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:i.map(w=>b.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-yellow-100 flex justify-between items-center",children:[b.jsxs("div",{className:"flex-1 mr-4",children:[b.jsx("p",{className:"font-bold text-gray-800",children:w.cooperado.name}),b.jsx("p",{className:"text-xs text-gray-600 line-clamp-1",children:w.reason})]}),b.jsx("button",{onClick:()=>{m(w.cooperado),h(!0)},className:"text-xs bg-blue-600 text-white px-3 py-1.5 rounded font-bold",children:"Atender"})]},w.id))})]}),b.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden border",children:v.length===0?b.jsx("div",{className:"p-12 text-center text-gray-400",children:"Nenhuma visita registrada recentemente."}):b.jsx("div",{className:"divide-y",children:v.map(w=>b.jsx(LP,{visit:w},w.id))})})]}),l&&b.jsx(RP,{cooperados:n,onClose:()=>h(!1),addVisit:async w=>{await o(w),h(!1)},prefilledCooperado:d})]})};var jf={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(t,e){(function(n,i){i(e)})(eI,function(n){var i="1.9.4";function s(r){var a,c,f,g;for(c=1,f=arguments.length;c<f;c++){g=arguments[c];for(a in g)r[a]=g[a]}return r}var o=Object.create||function(){function r(){}return function(a){return r.prototype=a,new r}}();function l(r,a){var c=Array.prototype.slice;if(r.bind)return r.bind.apply(r,c.call(arguments,1));var f=c.call(arguments,2);return function(){return r.apply(a,f.length?f.concat(c.call(arguments)):arguments)}}var h=0;function d(r){return"_leaflet_id"in r||(r._leaflet_id=++h),r._leaflet_id}function m(r,a,c){var f,g,y,k;return k=function(){f=!1,g&&(y.apply(c,g),g=!1)},y=function(){f?g=arguments:(r.apply(c,arguments),setTimeout(k,a),f=!0)},y}function v(r,a,c){var f=a[1],g=a[0],y=f-g;return r===f&&c?r:((r-g)%y+y)%y+g}function w(){return!1}function I(r,a){if(a===!1)return r;var c=Math.pow(10,a===void 0?6:a);return Math.round(r*c)/c}function D(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function U(r){return D(r).split(/\s+/)}function B(r,a){Object.prototype.hasOwnProperty.call(r,"options")||(r.options=r.options?o(r.options):{});for(var c in a)r.options[c]=a[c];return r.options}function Z(r,a,c){var f=[];for(var g in r)f.push(encodeURIComponent(c?g.toUpperCase():g)+"="+encodeURIComponent(r[g]));return(!a||a.indexOf("?")===-1?"?":"&")+f.join("&")}var R=/\{ *([\w_ -]+) *\}/g;function x(r,a){return r.replace(R,function(c,f){var g=a[f];if(g===void 0)throw new Error("No value provided for variable "+c);return typeof g=="function"&&(g=g(a)),g})}var N=Array.isArray||function(r){return Object.prototype.toString.call(r)==="[object Array]"};function F(r,a){for(var c=0;c<r.length;c++)if(r[c]===a)return c;return-1}var H="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function $(r){return window["webkit"+r]||window["moz"+r]||window["ms"+r]}var S=0;function T(r){var a=+new Date,c=Math.max(0,16-(a-S));return S=a+c,window.setTimeout(r,c)}var P=window.requestAnimationFrame||$("RequestAnimationFrame")||T,C=window.cancelAnimationFrame||$("CancelAnimationFrame")||$("CancelRequestAnimationFrame")||function(r){window.clearTimeout(r)};function O(r,a,c){if(c&&P===T)r.call(a);else return P.call(window,l(r,a))}function M(r){r&&C.call(window,r)}var A={__proto__:null,extend:s,create:o,bind:l,get lastId(){return h},stamp:d,throttle:m,wrapNum:v,falseFn:w,formatNum:I,trim:D,splitWords:U,setOptions:B,getParamString:Z,template:x,isArray:N,indexOf:F,emptyImageUrl:H,requestFn:P,cancelFn:C,requestAnimFrame:O,cancelAnimFrame:M};function Ye(){}Ye.extend=function(r){var a=function(){B(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},c=a.__super__=this.prototype,f=o(c);f.constructor=a,a.prototype=f;for(var g in this)Object.prototype.hasOwnProperty.call(this,g)&&g!=="prototype"&&g!=="__super__"&&(a[g]=this[g]);return r.statics&&s(a,r.statics),r.includes&&(ii(r.includes),s.apply(null,[f].concat(r.includes))),s(f,r),delete f.statics,delete f.includes,f.options&&(f.options=c.options?o(c.options):{},s(f.options,r.options)),f._initHooks=[],f.callInitHooks=function(){if(!this._initHooksCalled){c.callInitHooks&&c.callInitHooks.call(this),this._initHooksCalled=!0;for(var y=0,k=f._initHooks.length;y<k;y++)f._initHooks[y].call(this)}},a},Ye.include=function(r){var a=this.prototype.options;return s(this.prototype,r),r.options&&(this.prototype.options=a,this.mergeOptions(r.options)),this},Ye.mergeOptions=function(r){return s(this.prototype.options,r),this},Ye.addInitHook=function(r){var a=Array.prototype.slice.call(arguments,1),c=typeof r=="function"?r:function(){this[r].apply(this,a)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(c),this};function ii(r){if(!(typeof L>"u"||!L||!L.Mixin)){r=N(r)?r:[r];for(var a=0;a<r.length;a++)r[a]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var ct={on:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a);else{r=U(r);for(var g=0,y=r.length;g<y;g++)this._on(r[g],a,c)}return this},off:function(r,a,c){if(!arguments.length)delete this._events;else if(typeof r=="object")for(var f in r)this._off(f,r[f],a);else{r=U(r);for(var g=arguments.length===1,y=0,k=r.length;y<k;y++)g?this._off(r[y]):this._off(r[y],a,c)}return this},_on:function(r,a,c,f){if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}if(this._listens(r,a,c)===!1){c===this&&(c=void 0);var g={fn:a,ctx:c};f&&(g.once=!0),this._events=this._events||{},this._events[r]=this._events[r]||[],this._events[r].push(g)}},_off:function(r,a,c){var f,g,y;if(this._events&&(f=this._events[r],!!f)){if(arguments.length===1){if(this._firingCount)for(g=0,y=f.length;g<y;g++)f[g].fn=w;delete this._events[r];return}if(typeof a!="function"){console.warn("wrong listener type: "+typeof a);return}var k=this._listens(r,a,c);if(k!==!1){var z=f[k];this._firingCount&&(z.fn=w,this._events[r]=f=f.slice()),f.splice(k,1)}}},fire:function(r,a,c){if(!this.listens(r,c))return this;var f=s({},a,{type:r,target:this,sourceTarget:a&&a.sourceTarget||this});if(this._events){var g=this._events[r];if(g){this._firingCount=this._firingCount+1||1;for(var y=0,k=g.length;y<k;y++){var z=g[y],j=z.fn;z.once&&this.off(r,j,z.ctx),j.call(z.ctx||this,f)}this._firingCount--}}return c&&this._propagateEvent(f),this},listens:function(r,a,c,f){typeof r!="string"&&console.warn('"string" type argument expected');var g=a;typeof a!="function"&&(f=!!a,g=void 0,c=void 0);var y=this._events&&this._events[r];if(y&&y.length&&this._listens(r,g,c)!==!1)return!0;if(f){for(var k in this._eventParents)if(this._eventParents[k].listens(r,a,c,f))return!0}return!1},_listens:function(r,a,c){if(!this._events)return!1;var f=this._events[r]||[];if(!a)return!!f.length;c===this&&(c=void 0);for(var g=0,y=f.length;g<y;g++)if(f[g].fn===a&&f[g].ctx===c)return g;return!1},once:function(r,a,c){if(typeof r=="object")for(var f in r)this._on(f,r[f],a,!0);else{r=U(r);for(var g=0,y=r.length;g<y;g++)this._on(r[g],a,c,!0)}return this},addEventParent:function(r){return this._eventParents=this._eventParents||{},this._eventParents[d(r)]=r,this},removeEventParent:function(r){return this._eventParents&&delete this._eventParents[d(r)],this},_propagateEvent:function(r){for(var a in this._eventParents)this._eventParents[a].fire(r.type,s({layer:r.target,propagatedFrom:r.target},r),!0)}};ct.addEventListener=ct.on,ct.removeEventListener=ct.clearAllEventListeners=ct.off,ct.addOneTimeEventListener=ct.once,ct.fireEvent=ct.fire,ct.hasEventListeners=ct.listens;var Ft=Ye.extend(ct);function q(r,a,c){this.x=c?Math.round(r):r,this.y=c?Math.round(a):a}var le=Math.trunc||function(r){return r>0?Math.floor(r):Math.ceil(r)};q.prototype={clone:function(){return new q(this.x,this.y)},add:function(r){return this.clone()._add(X(r))},_add:function(r){return this.x+=r.x,this.y+=r.y,this},subtract:function(r){return this.clone()._subtract(X(r))},_subtract:function(r){return this.x-=r.x,this.y-=r.y,this},divideBy:function(r){return this.clone()._divideBy(r)},_divideBy:function(r){return this.x/=r,this.y/=r,this},multiplyBy:function(r){return this.clone()._multiplyBy(r)},_multiplyBy:function(r){return this.x*=r,this.y*=r,this},scaleBy:function(r){return new q(this.x*r.x,this.y*r.y)},unscaleBy:function(r){return new q(this.x/r.x,this.y/r.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=le(this.x),this.y=le(this.y),this},distanceTo:function(r){r=X(r);var a=r.x-this.x,c=r.y-this.y;return Math.sqrt(a*a+c*c)},equals:function(r){return r=X(r),r.x===this.x&&r.y===this.y},contains:function(r){return r=X(r),Math.abs(r.x)<=Math.abs(this.x)&&Math.abs(r.y)<=Math.abs(this.y)},toString:function(){return"Point("+I(this.x)+", "+I(this.y)+")"}};function X(r,a,c){return r instanceof q?r:N(r)?new q(r[0],r[1]):r==null?r:typeof r=="object"&&"x"in r&&"y"in r?new q(r.x,r.y):new q(r,a,c)}function ce(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}ce.prototype={extend:function(r){var a,c;if(!r)return this;if(r instanceof q||typeof r[0]=="number"||"x"in r)a=c=X(r);else if(r=ve(r),a=r.min,c=r.max,!a||!c)return this;return!this.min&&!this.max?(this.min=a.clone(),this.max=c.clone()):(this.min.x=Math.min(a.x,this.min.x),this.max.x=Math.max(c.x,this.max.x),this.min.y=Math.min(a.y,this.min.y),this.max.y=Math.max(c.y,this.max.y)),this},getCenter:function(r){return X((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,r)},getBottomLeft:function(){return X(this.min.x,this.max.y)},getTopRight:function(){return X(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(r){var a,c;return typeof r[0]=="number"||r instanceof q?r=X(r):r=ve(r),r instanceof ce?(a=r.min,c=r.max):a=c=r,a.x>=this.min.x&&c.x<=this.max.x&&a.y>=this.min.y&&c.y<=this.max.y},intersects:function(r){r=ve(r);var a=this.min,c=this.max,f=r.min,g=r.max,y=g.x>=a.x&&f.x<=c.x,k=g.y>=a.y&&f.y<=c.y;return y&&k},overlaps:function(r){r=ve(r);var a=this.min,c=this.max,f=r.min,g=r.max,y=g.x>a.x&&f.x<c.x,k=g.y>a.y&&f.y<c.y;return y&&k},isValid:function(){return!!(this.min&&this.max)},pad:function(r){var a=this.min,c=this.max,f=Math.abs(a.x-c.x)*r,g=Math.abs(a.y-c.y)*r;return ve(X(a.x-f,a.y-g),X(c.x+f,c.y+g))},equals:function(r){return r?(r=ve(r),this.min.equals(r.getTopLeft())&&this.max.equals(r.getBottomRight())):!1}};function ve(r,a){return!r||r instanceof ce?r:new ce(r,a)}function Ie(r,a){if(r)for(var c=a?[r,a]:r,f=0,g=c.length;f<g;f++)this.extend(c[f])}Ie.prototype={extend:function(r){var a=this._southWest,c=this._northEast,f,g;if(r instanceof ye)f=r,g=r;else if(r instanceof Ie){if(f=r._southWest,g=r._northEast,!f||!g)return this}else return r?this.extend(fe(r)||Le(r)):this;return!a&&!c?(this._southWest=new ye(f.lat,f.lng),this._northEast=new ye(g.lat,g.lng)):(a.lat=Math.min(f.lat,a.lat),a.lng=Math.min(f.lng,a.lng),c.lat=Math.max(g.lat,c.lat),c.lng=Math.max(g.lng,c.lng)),this},pad:function(r){var a=this._southWest,c=this._northEast,f=Math.abs(a.lat-c.lat)*r,g=Math.abs(a.lng-c.lng)*r;return new Ie(new ye(a.lat-f,a.lng-g),new ye(c.lat+f,c.lng+g))},getCenter:function(){return new ye((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ye(this.getNorth(),this.getWest())},getSouthEast:function(){return new ye(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(r){typeof r[0]=="number"||r instanceof ye||"lat"in r?r=fe(r):r=Le(r);var a=this._southWest,c=this._northEast,f,g;return r instanceof Ie?(f=r.getSouthWest(),g=r.getNorthEast()):f=g=r,f.lat>=a.lat&&g.lat<=c.lat&&f.lng>=a.lng&&g.lng<=c.lng},intersects:function(r){r=Le(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),y=g.lat>=a.lat&&f.lat<=c.lat,k=g.lng>=a.lng&&f.lng<=c.lng;return y&&k},overlaps:function(r){r=Le(r);var a=this._southWest,c=this._northEast,f=r.getSouthWest(),g=r.getNorthEast(),y=g.lat>a.lat&&f.lat<c.lat,k=g.lng>a.lng&&f.lng<c.lng;return y&&k},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(r,a){return r?(r=Le(r),this._southWest.equals(r.getSouthWest(),a)&&this._northEast.equals(r.getNorthEast(),a)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Le(r,a){return r instanceof Ie?r:new Ie(r,a)}function ye(r,a,c){if(isNaN(r)||isNaN(a))throw new Error("Invalid LatLng object: ("+r+", "+a+")");this.lat=+r,this.lng=+a,c!==void 0&&(this.alt=+c)}ye.prototype={equals:function(r,a){if(!r)return!1;r=fe(r);var c=Math.max(Math.abs(this.lat-r.lat),Math.abs(this.lng-r.lng));return c<=(a===void 0?1e-9:a)},toString:function(r){return"LatLng("+I(this.lat,r)+", "+I(this.lng,r)+")"},distanceTo:function(r){return Bn.distance(this,fe(r))},wrap:function(){return Bn.wrapLatLng(this)},toBounds:function(r){var a=180*r/40075017,c=a/Math.cos(Math.PI/180*this.lat);return Le([this.lat-a,this.lng-c],[this.lat+a,this.lng+c])},clone:function(){return new ye(this.lat,this.lng,this.alt)}};function fe(r,a,c){return r instanceof ye?r:N(r)&&typeof r[0]!="object"?r.length===3?new ye(r[0],r[1],r[2]):r.length===2?new ye(r[0],r[1]):null:r==null?r:typeof r=="object"&&"lat"in r?new ye(r.lat,"lng"in r?r.lng:r.lon,r.alt):a===void 0?null:new ye(r,a,c)}var ht={latLngToPoint:function(r,a){var c=this.projection.project(r),f=this.scale(a);return this.transformation._transform(c,f)},pointToLatLng:function(r,a){var c=this.scale(a),f=this.transformation.untransform(r,c);return this.projection.unproject(f)},project:function(r){return this.projection.project(r)},unproject:function(r){return this.projection.unproject(r)},scale:function(r){return 256*Math.pow(2,r)},zoom:function(r){return Math.log(r/256)/Math.LN2},getProjectedBounds:function(r){if(this.infinite)return null;var a=this.projection.bounds,c=this.scale(r),f=this.transformation.transform(a.min,c),g=this.transformation.transform(a.max,c);return new ce(f,g)},infinite:!1,wrapLatLng:function(r){var a=this.wrapLng?v(r.lng,this.wrapLng,!0):r.lng,c=this.wrapLat?v(r.lat,this.wrapLat,!0):r.lat,f=r.alt;return new ye(c,a,f)},wrapLatLngBounds:function(r){var a=r.getCenter(),c=this.wrapLatLng(a),f=a.lat-c.lat,g=a.lng-c.lng;if(f===0&&g===0)return r;var y=r.getSouthWest(),k=r.getNorthEast(),z=new ye(y.lat-f,y.lng-g),j=new ye(k.lat-f,k.lng-g);return new Ie(z,j)}},Bn=s({},ht,{wrapLng:[-180,180],R:6371e3,distance:function(r,a){var c=Math.PI/180,f=r.lat*c,g=a.lat*c,y=Math.sin((a.lat-r.lat)*c/2),k=Math.sin((a.lng-r.lng)*c/2),z=y*y+Math.cos(f)*Math.cos(g)*k*k,j=2*Math.atan2(Math.sqrt(z),Math.sqrt(1-z));return this.R*j}}),iu=6378137,Fi={R:iu,MAX_LATITUDE:85.0511287798,project:function(r){var a=Math.PI/180,c=this.MAX_LATITUDE,f=Math.max(Math.min(c,r.lat),-c),g=Math.sin(f*a);return new q(this.R*r.lng*a,this.R*Math.log((1+g)/(1-g))/2)},unproject:function(r){var a=180/Math.PI;return new ye((2*Math.atan(Math.exp(r.y/this.R))-Math.PI/2)*a,r.x*a/this.R)},bounds:function(){var r=iu*Math.PI;return new ce([-r,-r],[r,r])}()};function zi(r,a,c,f){if(N(r)){this._a=r[0],this._b=r[1],this._c=r[2],this._d=r[3];return}this._a=r,this._b=a,this._c=c,this._d=f}zi.prototype={transform:function(r,a){return this._transform(r.clone(),a)},_transform:function(r,a){return a=a||1,r.x=a*(this._a*r.x+this._b),r.y=a*(this._c*r.y+this._d),r},untransform:function(r,a){return a=a||1,new q((r.x/a-this._b)/this._a,(r.y/a-this._d)/this._c)}};function ri(r,a,c,f){return new zi(r,a,c,f)}var Lr=s({},Bn,{code:"EPSG:3857",projection:Fi,transformation:function(){var r=.5/(Math.PI*Fi.R);return ri(r,.5,-r,.5)}()}),Ko=s({},Lr,{code:"EPSG:900913"});function vs(r){return document.createElementNS("http://www.w3.org/2000/svg",r)}function Qo(r,a){var c="",f,g,y,k,z,j;for(f=0,y=r.length;f<y;f++){for(z=r[f],g=0,k=z.length;g<k;g++)j=z[g],c+=(g?"L":"M")+j.x+" "+j.y;c+=a?re.svg?"z":"x":""}return c||"M0 0"}var Yo=document.documentElement.style,ys="ActiveXObject"in window,ru=ys&&!document.addEventListener,ws="msLaunchUri"in navigator&&!("documentMode"in document),Es=hn("webkit"),su=hn("android"),Ts=hn("android 2")||hn("android 3"),Xo=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ou=su&&hn("Google")&&Xo<537&&!("AudioNode"in window),rt=!!window.opera,pt=!ws&&hn("chrome"),Nr=hn("gecko")&&!Es&&!rt&&!ys,au=!pt&&hn("safari"),Jo=hn("phantom"),lu="OTransition"in Yo,br=navigator.platform.indexOf("Win")===0,ea=ys&&"transition"in Yo,Is="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ts,Ss="MozPerspective"in Yo,Jh=!window.L_DISABLE_3D&&(ea||Is||Ss)&&!lu&&!Jo,Or=typeof orientation<"u"||hn("mobile"),ta=Or&&Es,uu=Or&&Is,na=!window.PointerEvent&&window.MSPointerEvent,Ui=!!(window.PointerEvent||na),Ps="ontouchstart"in window||!!window.TouchEvent,ia=!window.L_NO_TOUCH&&(Ps||Ui),si=Or&&rt,cu=Or&&Nr,xs=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,hu=function(){var r=!1;try{var a=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("testPassiveEventSupport",w,a),window.removeEventListener("testPassiveEventSupport",w,a)}catch{}return r}(),Dr=function(){return!!document.createElement("canvas").getContext}(),As=!!(document.createElementNS&&vs("svg").createSVGRect),Et=!!As&&function(){var r=document.createElement("div");return r.innerHTML="<svg/>",(r.firstChild&&r.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),du=!As&&function(){try{var r=document.createElement("div");r.innerHTML='<v:shape adj="1"/>';var a=r.firstChild;return a.style.behavior="url(#default#VML)",a&&typeof a.adj=="object"}catch{return!1}}(),Mr=navigator.platform.indexOf("Mac")===0,Vr=navigator.platform.indexOf("Linux")===0;function hn(r){return navigator.userAgent.toLowerCase().indexOf(r)>=0}var re={ie:ys,ielt9:ru,edge:ws,webkit:Es,android:su,android23:Ts,androidStock:ou,opera:rt,chrome:pt,gecko:Nr,safari:au,phantom:Jo,opera12:lu,win:br,ie3d:ea,webkit3d:Is,gecko3d:Ss,any3d:Jh,mobile:Or,mobileWebkit:ta,mobileWebkit3d:uu,msPointer:na,pointer:Ui,touch:ia,touchNative:Ps,mobileOpera:si,mobileGecko:cu,retina:xs,passiveEvents:hu,canvas:Dr,svg:As,vml:du,inlineSvg:Et,mac:Mr,linux:Vr},oi=re.msPointer?"MSPointerDown":"pointerdown",fu=re.msPointer?"MSPointerMove":"pointermove",pu=re.msPointer?"MSPointerUp":"pointerup",Fr=re.msPointer?"MSPointerCancel":"pointercancel",Cs={touchstart:oi,touchmove:fu,touchend:pu,touchcancel:Fr},ks={touchstart:Ls,touchmove:Rs,touchend:Rs,touchcancel:Rs},xn={},An=!1;function mu(r,a,c){return a==="touchstart"&&_u(),ks[a]?(c=ks[a].bind(this,c),r.addEventListener(Cs[a],c,!1),c):(console.warn("wrong event specified:",a),w)}function gu(r,a,c){if(!Cs[a]){console.warn("wrong event specified:",a);return}r.removeEventListener(Cs[a],c,!1)}function ra(r){xn[r.pointerId]=r}function sa(r){xn[r.pointerId]&&(xn[r.pointerId]=r)}function oa(r){delete xn[r.pointerId]}function _u(){An||(document.addEventListener(oi,ra,!0),document.addEventListener(fu,sa,!0),document.addEventListener(pu,oa,!0),document.addEventListener(Fr,oa,!0),An=!0)}function Rs(r,a){if(a.pointerType!==(a.MSPOINTER_TYPE_MOUSE||"mouse")){a.touches=[];for(var c in xn)a.touches.push(xn[c]);a.changedTouches=[a],r(a)}}function Ls(r,a){a.MSPOINTER_TYPE_TOUCH&&a.pointerType===a.MSPOINTER_TYPE_TOUCH&&qe(a),Rs(r,a)}function vu(r){var a={},c,f;for(f in r)c=r[f],a[f]=c&&c.bind?c.bind(r):c;return r=a,a.type="dblclick",a.detail=2,a.isTrusted=!1,a._simulated=!0,a}var aa=200;function zr(r,a){r.addEventListener("dblclick",a);var c=0,f;function g(y){if(y.detail!==1){f=y.detail;return}if(!(y.pointerType==="mouse"||y.sourceCapabilities&&!y.sourceCapabilities.firesTouchEvents)){var k=ya(y);if(!(k.some(function(j){return j instanceof HTMLLabelElement&&j.attributes.for})&&!k.some(function(j){return j instanceof HTMLInputElement||j instanceof HTMLSelectElement}))){var z=Date.now();z-c<=aa?(f++,f===2&&a(vu(y))):f=1,c=z}}}return r.addEventListener("click",g),{dblclick:a,simDblclick:g}}function ai(r,a){r.removeEventListener("dblclick",a.dblclick),r.removeEventListener("click",a.simDblclick)}var Ur=ui(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Br=ui(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),la=Br==="webkitTransition"||Br==="OTransition"?Br+"End":"transitionend";function ua(r){return typeof r=="string"?document.getElementById(r):r}function Bi(r,a){var c=r.style[a]||r.currentStyle&&r.currentStyle[a];if((!c||c==="auto")&&document.defaultView){var f=document.defaultView.getComputedStyle(r,null);c=f?f[a]:null}return c==="auto"?null:c}function Se(r,a,c){var f=document.createElement(r);return f.className=a||"",c&&c.appendChild(f),f}function Ve(r){var a=r.parentNode;a&&a.removeChild(r)}function jr(r){for(;r.firstChild;)r.removeChild(r.firstChild)}function li(r){var a=r.parentNode;a&&a.lastChild!==r&&a.appendChild(r)}function ji(r){var a=r.parentNode;a&&a.firstChild!==r&&a.insertBefore(r,a.firstChild)}function ca(r,a){if(r.classList!==void 0)return r.classList.contains(a);var c=dn(r);return c.length>0&&new RegExp("(^|\\s)"+a+"(\\s|$)").test(c)}function ge(r,a){if(r.classList!==void 0)for(var c=U(a),f=0,g=c.length;f<g;f++)r.classList.add(c[f]);else if(!ca(r,a)){var y=dn(r);ha(r,(y?y+" ":"")+a)}}function je(r,a){r.classList!==void 0?r.classList.remove(a):ha(r,D((" "+dn(r)+" ").replace(" "+a+" "," ")))}function ha(r,a){r.className.baseVal===void 0?r.className=a:r.className.baseVal=a}function dn(r){return r.correspondingElement&&(r=r.correspondingElement),r.className.baseVal===void 0?r.className:r.className.baseVal}function Xe(r,a){"opacity"in r.style?r.style.opacity=a:"filter"in r.style&&Ns(r,a)}function Ns(r,a){var c=!1,f="DXImageTransform.Microsoft.Alpha";try{c=r.filters.item(f)}catch{if(a===1)return}a=Math.round(a*100),c?(c.Enabled=a!==100,c.Opacity=a):r.style.filter+=" progid:"+f+"(opacity="+a+")"}function ui(r){for(var a=document.documentElement.style,c=0;c<r.length;c++)if(r[c]in a)return r[c];return!1}function jn(r,a,c){var f=a||new q(0,0);r.style[Ur]=(re.ie3d?"translate("+f.x+"px,"+f.y+"px)":"translate3d("+f.x+"px,"+f.y+"px,0)")+(c?" scale("+c+")":"")}function he(r,a){r._leaflet_pos=a,re.any3d?jn(r,a):(r.style.left=a.x+"px",r.style.top=a.y+"px")}function fn(r){return r._leaflet_pos||new q(0,0)}var Cn,kn,da;if("onselectstart"in document)Cn=function(){oe(window,"selectstart",qe)},kn=function(){De(window,"selectstart",qe)};else{var Wi=ui(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Cn=function(){if(Wi){var r=document.documentElement.style;da=r[Wi],r[Wi]="none"}},kn=function(){Wi&&(document.documentElement.style[Wi]=da,da=void 0)}}function fa(){oe(window,"dragstart",qe)}function pa(){De(window,"dragstart",qe)}var bs,ma;function ci(r){for(;r.tabIndex===-1;)r=r.parentNode;r.style&&(en(),bs=r,ma=r.style.outlineStyle,r.style.outlineStyle="none",oe(window,"keydown",en))}function en(){bs&&(bs.style.outlineStyle=ma,bs=void 0,ma=void 0,De(window,"keydown",en))}function ga(r){do r=r.parentNode;while((!r.offsetWidth||!r.offsetHeight)&&r!==document.body);return r}function Os(r){var a=r.getBoundingClientRect();return{x:a.width/r.offsetWidth||1,y:a.height/r.offsetHeight||1,boundingClientRect:a}}var yu={__proto__:null,TRANSFORM:Ur,TRANSITION:Br,TRANSITION_END:la,get:ua,getStyle:Bi,create:Se,remove:Ve,empty:jr,toFront:li,toBack:ji,hasClass:ca,addClass:ge,removeClass:je,setClass:ha,getClass:dn,setOpacity:Xe,testProp:ui,setTransform:jn,setPosition:he,getPosition:fn,get disableTextSelection(){return Cn},get enableTextSelection(){return kn},disableImageDrag:fa,enableImageDrag:pa,preventOutline:ci,restoreOutline:en,getSizedParentNode:ga,getScale:Os};function oe(r,a,c,f){if(a&&typeof a=="object")for(var g in a)_a(r,g,a[g],c);else{a=U(a);for(var y=0,k=a.length;y<k;y++)_a(r,a[y],c,f)}return this}var pn="_leaflet_events";function De(r,a,c,f){if(arguments.length===1)wu(r),delete r[pn];else if(a&&typeof a=="object")for(var g in a)va(r,g,a[g],c);else if(a=U(a),arguments.length===2)wu(r,function(z){return F(a,z)!==-1});else for(var y=0,k=a.length;y<k;y++)va(r,a[y],c,f);return this}function wu(r,a){for(var c in r[pn]){var f=c.split(/\d/)[0];(!a||a(f))&&va(r,f,null,null,c)}}var mn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function _a(r,a,c,f){var g=a+d(c)+(f?"_"+d(f):"");if(r[pn]&&r[pn][g])return this;var y=function(z){return c.call(f||r,z||window.event)},k=y;!re.touchNative&&re.pointer&&a.indexOf("touch")===0?y=mu(r,a,y):re.touch&&a==="dblclick"?y=zr(r,y):"addEventListener"in r?a==="touchstart"||a==="touchmove"||a==="wheel"||a==="mousewheel"?r.addEventListener(mn[a]||a,y,re.passiveEvents?{passive:!1}:!1):a==="mouseenter"||a==="mouseleave"?(y=function(z){z=z||window.event,wa(r,z)&&k(z)},r.addEventListener(mn[a],y,!1)):r.addEventListener(a,k,!1):r.attachEvent("on"+a,y),r[pn]=r[pn]||{},r[pn][g]=y}function va(r,a,c,f,g){g=g||a+d(c)+(f?"_"+d(f):"");var y=r[pn]&&r[pn][g];if(!y)return this;!re.touchNative&&re.pointer&&a.indexOf("touch")===0?gu(r,a,y):re.touch&&a==="dblclick"?ai(r,y):"removeEventListener"in r?r.removeEventListener(mn[a]||a,y,!1):r.detachEvent("on"+a,y),r[pn][g]=null}function gn(r){return r.stopPropagation?r.stopPropagation():r.originalEvent?r.originalEvent._stopped=!0:r.cancelBubble=!0,this}function Hi(r){return _a(r,"wheel",gn),this}function qi(r){return oe(r,"mousedown touchstart dblclick contextmenu",gn),r._leaflet_disable_click=!0,this}function qe(r){return r.preventDefault?r.preventDefault():r.returnValue=!1,this}function tn(r){return qe(r),gn(r),this}function ya(r){if(r.composedPath)return r.composedPath();for(var a=[],c=r.target;c;)a.push(c),c=c.parentNode;return a}function Ds(r,a){if(!a)return new q(r.clientX,r.clientY);var c=Os(a),f=c.boundingClientRect;return new q((r.clientX-f.left)/c.x-a.clientLeft,(r.clientY-f.top)/c.y-a.clientTop)}var We=re.linux&&re.chrome?window.devicePixelRatio:re.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Eu(r){return re.edge?r.wheelDeltaY/2:r.deltaY&&r.deltaMode===0?-r.deltaY/We:r.deltaY&&r.deltaMode===1?-r.deltaY*20:r.deltaY&&r.deltaMode===2?-r.deltaY*60:r.deltaX||r.deltaZ?0:r.wheelDelta?(r.wheelDeltaY||r.wheelDelta)/2:r.detail&&Math.abs(r.detail)<32765?-r.detail*20:r.detail?r.detail/-32765*60:0}function wa(r,a){var c=a.relatedTarget;if(!c)return!0;try{for(;c&&c!==r;)c=c.parentNode}catch{return!1}return c!==r}var Tu={__proto__:null,on:oe,off:De,stopPropagation:gn,disableScrollPropagation:Hi,disableClickPropagation:qi,preventDefault:qe,stop:tn,getPropagationPath:ya,getMousePosition:Ds,getWheelDelta:Eu,isExternalTarget:wa,addListener:oe,removeListener:De},Ea=Ft.extend({run:function(r,a,c,f){this.stop(),this._el=r,this._inProgress=!0,this._duration=c||.25,this._easeOutPower=1/Math.max(f||.5,.2),this._startPos=fn(r),this._offset=a.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=O(this._animate,this),this._step()},_step:function(r){var a=+new Date-this._startTime,c=this._duration*1e3;a<c?this._runFrame(this._easeOut(a/c),r):(this._runFrame(1),this._complete())},_runFrame:function(r,a){var c=this._startPos.add(this._offset.multiplyBy(r));a&&c._round(),he(this._el,c),this.fire("step")},_complete:function(){M(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(r){return 1-Math.pow(1-r,this._easeOutPower)}}),Ee=Ft.extend({options:{crs:Lr,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(r,a){a=B(this,a),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(r),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),a.maxBounds&&this.setMaxBounds(a.maxBounds),a.zoom!==void 0&&(this._zoom=this._limitZoom(a.zoom)),a.center&&a.zoom!==void 0&&this.setView(fe(a.center),a.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Br&&re.any3d&&!re.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),oe(this._proxy,la,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(r,a,c){if(a=a===void 0?this._zoom:this._limitZoom(a),r=this._limitCenter(fe(r),a,this.options.maxBounds),c=c||{},this._stop(),this._loaded&&!c.reset&&c!==!0){c.animate!==void 0&&(c.zoom=s({animate:c.animate},c.zoom),c.pan=s({animate:c.animate,duration:c.duration},c.pan));var f=this._zoom!==a?this._tryAnimatedZoom&&this._tryAnimatedZoom(r,a,c.zoom):this._tryAnimatedPan(r,c.pan);if(f)return clearTimeout(this._sizeTimer),this}return this._resetView(r,a,c.pan&&c.pan.noMoveStart),this},setZoom:function(r,a){return this._loaded?this.setView(this.getCenter(),r,{zoom:a}):(this._zoom=r,this)},zoomIn:function(r,a){return r=r||(re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+r,a)},zoomOut:function(r,a){return r=r||(re.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-r,a)},setZoomAround:function(r,a,c){var f=this.getZoomScale(a),g=this.getSize().divideBy(2),y=r instanceof q?r:this.latLngToContainerPoint(r),k=y.subtract(g).multiplyBy(1-1/f),z=this.containerPointToLatLng(g.add(k));return this.setView(z,a,{zoom:c})},_getBoundsCenterZoom:function(r,a){a=a||{},r=r.getBounds?r.getBounds():Le(r);var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),g=this.getBoundsZoom(r,!1,c.add(f));if(g=typeof a.maxZoom=="number"?Math.min(a.maxZoom,g):g,g===1/0)return{center:r.getCenter(),zoom:g};var y=f.subtract(c).divideBy(2),k=this.project(r.getSouthWest(),g),z=this.project(r.getNorthEast(),g),j=this.unproject(k.add(z).divideBy(2).add(y),g);return{center:j,zoom:g}},fitBounds:function(r,a){if(r=Le(r),!r.isValid())throw new Error("Bounds are not valid.");var c=this._getBoundsCenterZoom(r,a);return this.setView(c.center,c.zoom,a)},fitWorld:function(r){return this.fitBounds([[-90,-180],[90,180]],r)},panTo:function(r,a){return this.setView(r,this._zoom,{pan:a})},panBy:function(r,a){if(r=X(r).round(),a=a||{},!r.x&&!r.y)return this.fire("moveend");if(a.animate!==!0&&!this.getSize().contains(r))return this._resetView(this.unproject(this.project(this.getCenter()).add(r)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ea,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),a.noMoveStart||this.fire("movestart"),a.animate!==!1){ge(this._mapPane,"leaflet-pan-anim");var c=this._getMapPanePos().subtract(r).round();this._panAnim.run(this._mapPane,c,a.duration||.25,a.easeLinearity)}else this._rawPanBy(r),this.fire("move").fire("moveend");return this},flyTo:function(r,a,c){if(c=c||{},c.animate===!1||!re.any3d)return this.setView(r,a,c);this._stop();var f=this.project(this.getCenter()),g=this.project(r),y=this.getSize(),k=this._zoom;r=fe(r),a=a===void 0?k:a;var z=Math.max(y.x,y.y),j=z*this.getZoomScale(k,a),K=g.distanceTo(f)||1,ee=1.42,ae=ee*ee;function we(ot){var Fu=ot?-1:1,QT=ot?j:z,YT=j*j-z*z+Fu*ae*ae*K*K,XT=2*QT*ae*K,od=YT/XT,Ig=Math.sqrt(od*od+1)-od,JT=Ig<1e-9?-18:Math.log(Ig);return JT}function Ut(ot){return(Math.exp(ot)-Math.exp(-ot))/2}function gt(ot){return(Math.exp(ot)+Math.exp(-ot))/2}function vn(ot){return Ut(ot)/gt(ot)}var Gt=we(0);function Zs(ot){return z*(gt(Gt)/gt(Gt+ee*ot))}function $T(ot){return z*(gt(Gt)*vn(Gt+ee*ot)-Ut(Gt))/ae}function GT(ot){return 1-Math.pow(1-ot,1.5)}var ZT=Date.now(),Eg=(we(1)-Gt)/ee,KT=c.duration?1e3*c.duration:1e3*Eg*.8;function Tg(){var ot=(Date.now()-ZT)/KT,Fu=GT(ot)*Eg;ot<=1?(this._flyToFrame=O(Tg,this),this._move(this.unproject(f.add(g.subtract(f).multiplyBy($T(Fu)/K)),k),this.getScaleZoom(z/Zs(Fu),k),{flyTo:!0})):this._move(r,a)._moveEnd(!0)}return this._moveStart(!0,c.noMoveStart),Tg.call(this),this},flyToBounds:function(r,a){var c=this._getBoundsCenterZoom(r,a);return this.flyTo(c.center,c.zoom,a)},setMaxBounds:function(r){return r=Le(r),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),r.isValid()?(this.options.maxBounds=r,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(r){var a=this.options.minZoom;return this.options.minZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(r):this},setMaxZoom:function(r){var a=this.options.maxZoom;return this.options.maxZoom=r,this._loaded&&a!==r&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(r):this},panInsideBounds:function(r,a){this._enforcingBounds=!0;var c=this.getCenter(),f=this._limitCenter(c,this._zoom,Le(r));return c.equals(f)||this.panTo(f,a),this._enforcingBounds=!1,this},panInside:function(r,a){a=a||{};var c=X(a.paddingTopLeft||a.padding||[0,0]),f=X(a.paddingBottomRight||a.padding||[0,0]),g=this.project(this.getCenter()),y=this.project(r),k=this.getPixelBounds(),z=ve([k.min.add(c),k.max.subtract(f)]),j=z.getSize();if(!z.contains(y)){this._enforcingBounds=!0;var K=y.subtract(z.getCenter()),ee=z.extend(y).getSize().subtract(j);g.x+=K.x<0?-ee.x:ee.x,g.y+=K.y<0?-ee.y:ee.y,this.panTo(this.unproject(g),a),this._enforcingBounds=!1}return this},invalidateSize:function(r){if(!this._loaded)return this;r=s({animate:!1,pan:!0},r===!0?{animate:!0}:r);var a=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var c=this.getSize(),f=a.divideBy(2).round(),g=c.divideBy(2).round(),y=f.subtract(g);return!y.x&&!y.y?this:(r.animate&&r.pan?this.panBy(y):(r.pan&&this._rawPanBy(y),this.fire("move"),r.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:a,newSize:c}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(r){if(r=this._locateOptions=s({timeout:1e4,watch:!1},r),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var a=l(this._handleGeolocationResponse,this),c=l(this._handleGeolocationError,this);return r.watch?this._locationWatchId=navigator.geolocation.watchPosition(a,c,r):navigator.geolocation.getCurrentPosition(a,c,r),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(r){if(this._container._leaflet_id){var a=r.code,c=r.message||(a===1?"permission denied":a===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:a,message:"Geolocation error: "+c+"."})}},_handleGeolocationResponse:function(r){if(this._container._leaflet_id){var a=r.coords.latitude,c=r.coords.longitude,f=new ye(a,c),g=f.toBounds(r.coords.accuracy*2),y=this._locateOptions;if(y.setView){var k=this.getBoundsZoom(g);this.setView(f,y.maxZoom?Math.min(k,y.maxZoom):k)}var z={latlng:f,bounds:g,timestamp:r.timestamp};for(var j in r.coords)typeof r.coords[j]=="number"&&(z[j]=r.coords[j]);this.fire("locationfound",z)}},addHandler:function(r,a){if(!a)return this;var c=this[r]=new a(this);return this._handlers.push(c),this.options[r]&&c.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ve(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(M(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var r;for(r in this._layers)this._layers[r].remove();for(r in this._panes)Ve(this._panes[r]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(r,a){var c="leaflet-pane"+(r?" leaflet-"+r.replace("Pane","")+"-pane":""),f=Se("div",c,a||this._mapPane);return r&&(this._panes[r]=f),f},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var r=this.getPixelBounds(),a=this.unproject(r.getBottomLeft()),c=this.unproject(r.getTopRight());return new Ie(a,c)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(r,a,c){r=Le(r),c=X(c||[0,0]);var f=this.getZoom()||0,g=this.getMinZoom(),y=this.getMaxZoom(),k=r.getNorthWest(),z=r.getSouthEast(),j=this.getSize().subtract(c),K=ve(this.project(z,f),this.project(k,f)).getSize(),ee=re.any3d?this.options.zoomSnap:1,ae=j.x/K.x,we=j.y/K.y,Ut=a?Math.max(ae,we):Math.min(ae,we);return f=this.getScaleZoom(Ut,f),ee&&(f=Math.round(f/(ee/100))*(ee/100),f=a?Math.ceil(f/ee)*ee:Math.floor(f/ee)*ee),Math.max(g,Math.min(y,f))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(r,a){var c=this._getTopLeftPoint(r,a);return new ce(c,c.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(r){return this.options.crs.getProjectedBounds(r===void 0?this.getZoom():r)},getPane:function(r){return typeof r=="string"?this._panes[r]:r},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(r,a){var c=this.options.crs;return a=a===void 0?this._zoom:a,c.scale(r)/c.scale(a)},getScaleZoom:function(r,a){var c=this.options.crs;a=a===void 0?this._zoom:a;var f=c.zoom(r*c.scale(a));return isNaN(f)?1/0:f},project:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.latLngToPoint(fe(r),a)},unproject:function(r,a){return a=a===void 0?this._zoom:a,this.options.crs.pointToLatLng(X(r),a)},layerPointToLatLng:function(r){var a=X(r).add(this.getPixelOrigin());return this.unproject(a)},latLngToLayerPoint:function(r){var a=this.project(fe(r))._round();return a._subtract(this.getPixelOrigin())},wrapLatLng:function(r){return this.options.crs.wrapLatLng(fe(r))},wrapLatLngBounds:function(r){return this.options.crs.wrapLatLngBounds(Le(r))},distance:function(r,a){return this.options.crs.distance(fe(r),fe(a))},containerPointToLayerPoint:function(r){return X(r).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(r){return X(r).add(this._getMapPanePos())},containerPointToLatLng:function(r){var a=this.containerPointToLayerPoint(X(r));return this.layerPointToLatLng(a)},latLngToContainerPoint:function(r){return this.layerPointToContainerPoint(this.latLngToLayerPoint(fe(r)))},mouseEventToContainerPoint:function(r){return Ds(r,this._container)},mouseEventToLayerPoint:function(r){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(r))},mouseEventToLatLng:function(r){return this.layerPointToLatLng(this.mouseEventToLayerPoint(r))},_initContainer:function(r){var a=this._container=ua(r);if(a){if(a._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");oe(a,"scroll",this._onScroll,this),this._containerId=d(a)},_initLayout:function(){var r=this._container;this._fadeAnimated=this.options.fadeAnimation&&re.any3d,ge(r,"leaflet-container"+(re.touch?" leaflet-touch":"")+(re.retina?" leaflet-retina":"")+(re.ielt9?" leaflet-oldie":"")+(re.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var a=Bi(r,"position");a!=="absolute"&&a!=="relative"&&a!=="fixed"&&a!=="sticky"&&(r.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var r=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),he(this._mapPane,new q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ge(r.markerPane,"leaflet-zoom-hide"),ge(r.shadowPane,"leaflet-zoom-hide"))},_resetView:function(r,a,c){he(this._mapPane,new q(0,0));var f=!this._loaded;this._loaded=!0,a=this._limitZoom(a),this.fire("viewprereset");var g=this._zoom!==a;this._moveStart(g,c)._move(r,a)._moveEnd(g),this.fire("viewreset"),f&&this.fire("load")},_moveStart:function(r,a){return r&&this.fire("zoomstart"),a||this.fire("movestart"),this},_move:function(r,a,c,f){a===void 0&&(a=this._zoom);var g=this._zoom!==a;return this._zoom=a,this._lastCenter=r,this._pixelOrigin=this._getNewPixelOrigin(r),f?c&&c.pinch&&this.fire("zoom",c):((g||c&&c.pinch)&&this.fire("zoom",c),this.fire("move",c)),this},_moveEnd:function(r){return r&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return M(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(r){he(this._mapPane,this._getMapPanePos().subtract(r))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(r){this._targets={},this._targets[d(this._container)]=this;var a=r?De:oe;a(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&a(window,"resize",this._onResize,this),re.any3d&&this.options.transform3DLimit&&(r?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){M(this._resizeRequest),this._resizeRequest=O(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var r=this._getMapPanePos();Math.max(Math.abs(r.x),Math.abs(r.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(r,a){for(var c=[],f,g=a==="mouseout"||a==="mouseover",y=r.target||r.srcElement,k=!1;y;){if(f=this._targets[d(y)],f&&(a==="click"||a==="preclick")&&this._draggableMoved(f)){k=!0;break}if(f&&f.listens(a,!0)&&(g&&!wa(y,r)||(c.push(f),g))||y===this._container)break;y=y.parentNode}return!c.length&&!k&&!g&&this.listens(a,!0)&&(c=[this]),c},_isClickDisabled:function(r){for(;r&&r!==this._container;){if(r._leaflet_disable_click)return!0;r=r.parentNode}},_handleDOMEvent:function(r){var a=r.target||r.srcElement;if(!(!this._loaded||a._leaflet_disable_events||r.type==="click"&&this._isClickDisabled(a))){var c=r.type;c==="mousedown"&&ci(a),this._fireDOMEvent(r,c)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(r,a,c){if(r.type==="click"){var f=s({},r);f.type="preclick",this._fireDOMEvent(f,f.type,c)}var g=this._findEventTargets(r,a);if(c){for(var y=[],k=0;k<c.length;k++)c[k].listens(a,!0)&&y.push(c[k]);g=y.concat(g)}if(g.length){a==="contextmenu"&&qe(r);var z=g[0],j={originalEvent:r};if(r.type!=="keypress"&&r.type!=="keydown"&&r.type!=="keyup"){var K=z.getLatLng&&(!z._radius||z._radius<=10);j.containerPoint=K?this.latLngToContainerPoint(z.getLatLng()):this.mouseEventToContainerPoint(r),j.layerPoint=this.containerPointToLayerPoint(j.containerPoint),j.latlng=K?z.getLatLng():this.layerPointToLatLng(j.layerPoint)}for(k=0;k<g.length;k++)if(g[k].fire(a,j,!0),j.originalEvent._stopped||g[k].options.bubblingMouseEvents===!1&&F(this._mouseEvents,a)!==-1)return}},_draggableMoved:function(r){return r=r.dragging&&r.dragging.enabled()?r:this,r.dragging&&r.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var r=0,a=this._handlers.length;r<a;r++)this._handlers[r].disable()},whenReady:function(r,a){return this._loaded?r.call(a||this,{target:this}):this.on("load",r,a),this},_getMapPanePos:function(){return fn(this._mapPane)||new q(0,0)},_moved:function(){var r=this._getMapPanePos();return r&&!r.equals([0,0])},_getTopLeftPoint:function(r,a){var c=r&&a!==void 0?this._getNewPixelOrigin(r,a):this.getPixelOrigin();return c.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(r,a){var c=this.getSize()._divideBy(2);return this.project(r,a)._subtract(c)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return this.project(r,a)._subtract(f)},_latLngBoundsToNewLayerBounds:function(r,a,c){var f=this._getNewPixelOrigin(c,a);return ve([this.project(r.getSouthWest(),a)._subtract(f),this.project(r.getNorthWest(),a)._subtract(f),this.project(r.getSouthEast(),a)._subtract(f),this.project(r.getNorthEast(),a)._subtract(f)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(r){return this.latLngToLayerPoint(r).subtract(this._getCenterLayerPoint())},_limitCenter:function(r,a,c){if(!c)return r;var f=this.project(r,a),g=this.getSize().divideBy(2),y=new ce(f.subtract(g),f.add(g)),k=this._getBoundsOffset(y,c,a);return Math.abs(k.x)<=1&&Math.abs(k.y)<=1?r:this.unproject(f.add(k),a)},_limitOffset:function(r,a){if(!a)return r;var c=this.getPixelBounds(),f=new ce(c.min.add(r),c.max.add(r));return r.add(this._getBoundsOffset(f,a))},_getBoundsOffset:function(r,a,c){var f=ve(this.project(a.getNorthEast(),c),this.project(a.getSouthWest(),c)),g=f.min.subtract(r.min),y=f.max.subtract(r.max),k=this._rebound(g.x,-y.x),z=this._rebound(g.y,-y.y);return new q(k,z)},_rebound:function(r,a){return r+a>0?Math.round(r-a)/2:Math.max(0,Math.ceil(r))-Math.max(0,Math.floor(a))},_limitZoom:function(r){var a=this.getMinZoom(),c=this.getMaxZoom(),f=re.any3d?this.options.zoomSnap:1;return f&&(r=Math.round(r/f)*f),Math.max(a,Math.min(c,r))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){je(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(r,a){var c=this._getCenterOffset(r)._trunc();return(a&&a.animate)!==!0&&!this.getSize().contains(c)?!1:(this.panBy(c,a),!0)},_createAnimProxy:function(){var r=this._proxy=Se("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(r),this.on("zoomanim",function(a){var c=Ur,f=this._proxy.style[c];jn(this._proxy,this.project(a.center,a.zoom),this.getZoomScale(a.zoom,1)),f===this._proxy.style[c]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ve(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var r=this.getCenter(),a=this.getZoom();jn(this._proxy,this.project(r,a),this.getZoomScale(a,1))},_catchTransitionEnd:function(r){this._animatingZoom&&r.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(r,a,c){if(this._animatingZoom)return!0;if(c=c||{},!this._zoomAnimated||c.animate===!1||this._nothingToAnimate()||Math.abs(a-this._zoom)>this.options.zoomAnimationThreshold)return!1;var f=this.getZoomScale(a),g=this._getCenterOffset(r)._divideBy(1-1/f);return c.animate!==!0&&!this.getSize().contains(g)?!1:(O(function(){this._moveStart(!0,c.noMoveStart||!1)._animateZoom(r,a,!0)},this),!0)},_animateZoom:function(r,a,c,f){this._mapPane&&(c&&(this._animatingZoom=!0,this._animateToCenter=r,this._animateToZoom=a,ge(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:r,zoom:a,noUpdate:f}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&je(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ms(r,a){return new Ee(r,a)}var $t=Ye.extend({options:{position:"topright"},initialize:function(r){B(this,r)},getPosition:function(){return this.options.position},setPosition:function(r){var a=this._map;return a&&a.removeControl(this),this.options.position=r,a&&a.addControl(this),this},getContainer:function(){return this._container},addTo:function(r){this.remove(),this._map=r;var a=this._container=this.onAdd(r),c=this.getPosition(),f=r._controlCorners[c];return ge(a,"leaflet-control"),c.indexOf("bottom")!==-1?f.insertBefore(a,f.firstChild):f.appendChild(a),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ve(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(r){this._map&&r&&r.screenX>0&&r.screenY>0&&this._map.getContainer().focus()}}),zt=function(r){return new $t(r)};Ee.include({addControl:function(r){return r.addTo(this),this},removeControl:function(r){return r.remove(),this},_initControlPos:function(){var r=this._controlCorners={},a="leaflet-",c=this._controlContainer=Se("div",a+"control-container",this._container);function f(g,y){var k=a+g+" "+a+y;r[g+y]=Se("div",k,c)}f("top","left"),f("top","right"),f("bottom","left"),f("bottom","right")},_clearControlPos:function(){for(var r in this._controlCorners)Ve(this._controlCorners[r]);Ve(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ta=$t.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(r,a,c,f){return c<f?-1:f<c?1:0}},initialize:function(r,a,c){B(this,c),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var f in r)this._addLayer(r[f],f);for(f in a)this._addLayer(a[f],f,!0)},onAdd:function(r){this._initLayout(),this._update(),this._map=r,r.on("zoomend",this._checkDisabledLayers,this);for(var a=0;a<this._layers.length;a++)this._layers[a].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(r){return $t.prototype.addTo.call(this,r),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var r=0;r<this._layers.length;r++)this._layers[r].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(r,a){return this._addLayer(r,a),this._map?this._update():this},addOverlay:function(r,a){return this._addLayer(r,a,!0),this._map?this._update():this},removeLayer:function(r){r.off("add remove",this._onLayerChange,this);var a=this._getLayer(d(r));return a&&this._layers.splice(this._layers.indexOf(a),1),this._map?this._update():this},expand:function(){ge(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var r=this._map.getSize().y-(this._container.offsetTop+50);return r<this._section.clientHeight?(ge(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=r+"px"):je(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return je(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var r="leaflet-control-layers",a=this._container=Se("div",r),c=this.options.collapsed;a.setAttribute("aria-haspopup",!0),qi(a),Hi(a);var f=this._section=Se("section",r+"-list");c&&(this._map.on("click",this.collapse,this),oe(a,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var g=this._layersLink=Se("a",r+"-toggle",a);g.href="#",g.title="Layers",g.setAttribute("role","button"),oe(g,{keydown:function(y){y.keyCode===13&&this._expandSafely()},click:function(y){qe(y),this._expandSafely()}},this),c||this.expand(),this._baseLayersList=Se("div",r+"-base",f),this._separator=Se("div",r+"-separator",f),this._overlaysList=Se("div",r+"-overlays",f),a.appendChild(f)},_getLayer:function(r){for(var a=0;a<this._layers.length;a++)if(this._layers[a]&&d(this._layers[a].layer)===r)return this._layers[a]},_addLayer:function(r,a,c){this._map&&r.on("add remove",this._onLayerChange,this),this._layers.push({layer:r,name:a,overlay:c}),this.options.sortLayers&&this._layers.sort(l(function(f,g){return this.options.sortFunction(f.layer,g.layer,f.name,g.name)},this)),this.options.autoZIndex&&r.setZIndex&&(this._lastZIndex++,r.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;jr(this._baseLayersList),jr(this._overlaysList),this._layerControlInputs=[];var r,a,c,f,g=0;for(c=0;c<this._layers.length;c++)f=this._layers[c],this._addItem(f),a=a||f.overlay,r=r||!f.overlay,g+=f.overlay?0:1;return this.options.hideSingleBase&&(r=r&&g>1,this._baseLayersList.style.display=r?"":"none"),this._separator.style.display=a&&r?"":"none",this},_onLayerChange:function(r){this._handlingClick||this._update();var a=this._getLayer(d(r.target)),c=a.overlay?r.type==="add"?"overlayadd":"overlayremove":r.type==="add"?"baselayerchange":null;c&&this._map.fire(c,a)},_createRadioElement:function(r,a){var c='<input type="radio" class="leaflet-control-layers-selector" name="'+r+'"'+(a?' checked="checked"':"")+"/>",f=document.createElement("div");return f.innerHTML=c,f.firstChild},_addItem:function(r){var a=document.createElement("label"),c=this._map.hasLayer(r.layer),f;r.overlay?(f=document.createElement("input"),f.type="checkbox",f.className="leaflet-control-layers-selector",f.defaultChecked=c):f=this._createRadioElement("leaflet-base-layers_"+d(this),c),this._layerControlInputs.push(f),f.layerId=d(r.layer),oe(f,"click",this._onInputClick,this);var g=document.createElement("span");g.innerHTML=" "+r.name;var y=document.createElement("span");a.appendChild(y),y.appendChild(f),y.appendChild(g);var k=r.overlay?this._overlaysList:this._baseLayersList;return k.appendChild(a),this._checkDisabledLayers(),a},_onInputClick:function(){if(!this._preventClick){var r=this._layerControlInputs,a,c,f=[],g=[];this._handlingClick=!0;for(var y=r.length-1;y>=0;y--)a=r[y],c=this._getLayer(a.layerId).layer,a.checked?f.push(c):a.checked||g.push(c);for(y=0;y<g.length;y++)this._map.hasLayer(g[y])&&this._map.removeLayer(g[y]);for(y=0;y<f.length;y++)this._map.hasLayer(f[y])||this._map.addLayer(f[y]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var r=this._layerControlInputs,a,c,f=this._map.getZoom(),g=r.length-1;g>=0;g--)a=r[g],c=this._getLayer(a.layerId).layer,a.disabled=c.options.minZoom!==void 0&&f<c.options.minZoom||c.options.maxZoom!==void 0&&f>c.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var r=this._section;this._preventClick=!0,oe(r,"click",qe),this.expand();var a=this;setTimeout(function(){De(r,"click",qe),a._preventClick=!1})}}),ed=function(r,a,c){return new Ta(r,a,c)},hi=$t.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(r){var a="leaflet-control-zoom",c=Se("div",a+" leaflet-bar"),f=this.options;return this._zoomInButton=this._createButton(f.zoomInText,f.zoomInTitle,a+"-in",c,this._zoomIn),this._zoomOutButton=this._createButton(f.zoomOutText,f.zoomOutTitle,a+"-out",c,this._zoomOut),this._updateDisabled(),r.on("zoomend zoomlevelschange",this._updateDisabled,this),c},onRemove:function(r){r.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(r){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(r.shiftKey?3:1))},_zoomOut:function(r){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(r.shiftKey?3:1))},_createButton:function(r,a,c,f,g){var y=Se("a",c,f);return y.innerHTML=r,y.href="#",y.title=a,y.setAttribute("role","button"),y.setAttribute("aria-label",a),qi(y),oe(y,"click",tn),oe(y,"click",g,this),oe(y,"click",this._refocusOnMap,this),y},_updateDisabled:function(){var r=this._map,a="leaflet-disabled";je(this._zoomInButton,a),je(this._zoomOutButton,a),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||r._zoom===r.getMinZoom())&&(ge(this._zoomOutButton,a),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||r._zoom===r.getMaxZoom())&&(ge(this._zoomInButton,a),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ee.mergeOptions({zoomControl:!0}),Ee.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new hi,this.addControl(this.zoomControl))});var Iu=function(r){return new hi(r)},Vs=$t.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(r){var a="leaflet-control-scale",c=Se("div",a),f=this.options;return this._addScales(f,a+"-line",c),r.on(f.updateWhenIdle?"moveend":"move",this._update,this),r.whenReady(this._update,this),c},onRemove:function(r){r.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(r,a,c){r.metric&&(this._mScale=Se("div",a,c)),r.imperial&&(this._iScale=Se("div",a,c))},_update:function(){var r=this._map,a=r.getSize().y/2,c=r.distance(r.containerPointToLatLng([0,a]),r.containerPointToLatLng([this.options.maxWidth,a]));this._updateScales(c)},_updateScales:function(r){this.options.metric&&r&&this._updateMetric(r),this.options.imperial&&r&&this._updateImperial(r)},_updateMetric:function(r){var a=this._getRoundNum(r),c=a<1e3?a+" m":a/1e3+" km";this._updateScale(this._mScale,c,a/r)},_updateImperial:function(r){var a=r*3.2808399,c,f,g;a>5280?(c=a/5280,f=this._getRoundNum(c),this._updateScale(this._iScale,f+" mi",f/c)):(g=this._getRoundNum(a),this._updateScale(this._iScale,g+" ft",g/a))},_updateScale:function(r,a,c){r.style.width=Math.round(this.options.maxWidth*c)+"px",r.innerHTML=a},_getRoundNum:function(r){var a=Math.pow(10,(Math.floor(r)+"").length-1),c=r/a;return c=c>=10?10:c>=5?5:c>=3?3:c>=2?2:1,a*c}}),Fs=function(r){return new Vs(r)},Su='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',$i=$t.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(re.inlineSvg?Su+" ":"")+"Leaflet</a>"},initialize:function(r){B(this,r),this._attributions={}},onAdd:function(r){r.attributionControl=this,this._container=Se("div","leaflet-control-attribution"),qi(this._container);for(var a in r._layers)r._layers[a].getAttribution&&this.addAttribution(r._layers[a].getAttribution());return this._update(),r.on("layeradd",this._addAttribution,this),this._container},onRemove:function(r){r.off("layeradd",this._addAttribution,this)},_addAttribution:function(r){r.layer.getAttribution&&(this.addAttribution(r.layer.getAttribution()),r.layer.once("remove",function(){this.removeAttribution(r.layer.getAttribution())},this))},setPrefix:function(r){return this.options.prefix=r,this._update(),this},addAttribution:function(r){return r?(this._attributions[r]||(this._attributions[r]=0),this._attributions[r]++,this._update(),this):this},removeAttribution:function(r){return r?(this._attributions[r]&&(this._attributions[r]--,this._update()),this):this},_update:function(){if(this._map){var r=[];for(var a in this._attributions)this._attributions[a]&&r.push(a);var c=[];this.options.prefix&&c.push(this.options.prefix),r.length&&c.push(r.join(", ")),this._container.innerHTML=c.join(' <span aria-hidden="true">|</span> ')}}});Ee.mergeOptions({attributionControl:!0}),Ee.addInitHook(function(){this.options.attributionControl&&new $i().addTo(this)});var td=function(r){return new $i(r)};$t.Layers=Ta,$t.Zoom=hi,$t.Scale=Vs,$t.Attribution=$i,zt.layers=ed,zt.zoom=Iu,zt.scale=Fs,zt.attribution=td;var nn=Ye.extend({initialize:function(r){this._map=r},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});nn.addTo=function(r,a){return r.addHandler(a,this),this};var Wr={Events:ct},Ia=re.touch?"touchstart mousedown":"mousedown",Rn=Ft.extend({options:{clickTolerance:3},initialize:function(r,a,c,f){B(this,f),this._element=r,this._dragStartTarget=a||r,this._preventOutline=c},enable:function(){this._enabled||(oe(this._dragStartTarget,Ia,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Rn._dragging===this&&this.finishDrag(!0),De(this._dragStartTarget,Ia,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(r){if(this._enabled&&(this._moved=!1,!ca(this._element,"leaflet-zoom-anim"))){if(r.touches&&r.touches.length!==1){Rn._dragging===this&&this.finishDrag();return}if(!(Rn._dragging||r.shiftKey||r.which!==1&&r.button!==1&&!r.touches)&&(Rn._dragging=this,this._preventOutline&&ci(this._element),fa(),Cn(),!this._moving)){this.fire("down");var a=r.touches?r.touches[0]:r,c=ga(this._element);this._startPoint=new q(a.clientX,a.clientY),this._startPos=fn(this._element),this._parentScale=Os(c);var f=r.type==="mousedown";oe(document,f?"mousemove":"touchmove",this._onMove,this),oe(document,f?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(r){if(this._enabled){if(r.touches&&r.touches.length>1){this._moved=!0;return}var a=r.touches&&r.touches.length===1?r.touches[0]:r,c=new q(a.clientX,a.clientY)._subtract(this._startPoint);!c.x&&!c.y||Math.abs(c.x)+Math.abs(c.y)<this.options.clickTolerance||(c.x/=this._parentScale.x,c.y/=this._parentScale.y,qe(r),this._moved||(this.fire("dragstart"),this._moved=!0,ge(document.body,"leaflet-dragging"),this._lastTarget=r.target||r.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ge(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(c),this._moving=!0,this._lastEvent=r,this._updatePosition())}},_updatePosition:function(){var r={originalEvent:this._lastEvent};this.fire("predrag",r),he(this._element,this._newPos),this.fire("drag",r)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(r){je(document.body,"leaflet-dragging"),this._lastTarget&&(je(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),De(document,"mousemove touchmove",this._onMove,this),De(document,"mouseup touchend touchcancel",this._onUp,this),pa(),kn();var a=this._moved&&this._moving;this._moving=!1,Rn._dragging=!1,a&&this.fire("dragend",{noInertia:r,distance:this._newPos.distanceTo(this._startPos)})}});function zs(r,a,c){var f,g=[1,4,2,8],y,k,z,j,K,ee,ae,we;for(y=0,ee=r.length;y<ee;y++)r[y]._code=Wn(r[y],a);for(z=0;z<4;z++){for(ae=g[z],f=[],y=0,ee=r.length,k=ee-1;y<ee;k=y++)j=r[y],K=r[k],j._code&ae?K._code&ae||(we=mt(K,j,ae,a,c),we._code=Wn(we,a),f.push(we)):(K._code&ae&&(we=mt(K,j,ae,a,c),we._code=Wn(we,a),f.push(we)),f.push(j));r=f}return r}function Us(r,a){var c,f,g,y,k,z,j,K,ee;if(!r||r.length===0)throw new Error("latlngs not passed");u(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var ae=fe([0,0]),we=Le(r),Ut=we.getNorthWest().distanceTo(we.getSouthWest())*we.getNorthEast().distanceTo(we.getNorthWest());Ut<1700&&(ae=Bs(r));var gt=r.length,vn=[];for(c=0;c<gt;c++){var Gt=fe(r[c]);vn.push(a.project(fe([Gt.lat-ae.lat,Gt.lng-ae.lng])))}for(z=j=K=0,c=0,f=gt-1;c<gt;f=c++)g=vn[c],y=vn[f],k=g.y*y.x-y.y*g.x,j+=(g.x+y.x)*k,K+=(g.y+y.y)*k,z+=k*3;z===0?ee=vn[0]:ee=[j/z,K/z];var Zs=a.unproject(X(ee));return fe([Zs.lat+ae.lat,Zs.lng+ae.lng])}function Bs(r){for(var a=0,c=0,f=0,g=0;g<r.length;g++){var y=fe(r[g]);a+=y.lat,c+=y.lng,f++}return fe([a/f,c/f])}var js={__proto__:null,clipPolygon:zs,polygonCenter:Us,centroid:Bs};function Sa(r,a){if(!a||!r.length)return r.slice();var c=a*a;return r=xu(r,c),r=Pu(r,c),r}function Pa(r,a,c){return Math.sqrt(_n(r,a,c,!0))}function di(r,a,c){return _n(r,a,c)}function Pu(r,a){var c=r.length,f=typeof Uint8Array<"u"?Uint8Array:Array,g=new f(c);g[0]=g[c-1]=1,Ws(r,g,a,0,c-1);var y,k=[];for(y=0;y<c;y++)g[y]&&k.push(r[y]);return k}function Ws(r,a,c,f,g){var y=0,k,z,j;for(z=f+1;z<=g-1;z++)j=_n(r[z],r[f],r[g],!0),j>y&&(k=z,y=j);y>c&&(a[k]=1,Ws(r,a,c,f,k),Ws(r,a,c,k,g))}function xu(r,a){for(var c=[r[0]],f=1,g=0,y=r.length;f<y;f++)Au(r[f],r[g])>a&&(c.push(r[f]),g=f);return g<y-1&&c.push(r[y-1]),c}var xa;function Hr(r,a,c,f,g){var y=f?xa:Wn(r,c),k=Wn(a,c),z,j,K;for(xa=k;;){if(!(y|k))return[r,a];if(y&k)return!1;z=y||k,j=mt(r,a,z,c,g),K=Wn(j,c),z===y?(r=j,y=K):(a=j,k=K)}}function mt(r,a,c,f,g){var y=a.x-r.x,k=a.y-r.y,z=f.min,j=f.max,K,ee;return c&8?(K=r.x+y*(j.y-r.y)/k,ee=j.y):c&4?(K=r.x+y*(z.y-r.y)/k,ee=z.y):c&2?(K=j.x,ee=r.y+k*(j.x-r.x)/y):c&1&&(K=z.x,ee=r.y+k*(z.x-r.x)/y),new q(K,ee,g)}function Wn(r,a){var c=0;return r.x<a.min.x?c|=1:r.x>a.max.x&&(c|=2),r.y<a.min.y?c|=4:r.y>a.max.y&&(c|=8),c}function Au(r,a){var c=a.x-r.x,f=a.y-r.y;return c*c+f*f}function _n(r,a,c,f){var g=a.x,y=a.y,k=c.x-g,z=c.y-y,j=k*k+z*z,K;return j>0&&(K=((r.x-g)*k+(r.y-y)*z)/j,K>1?(g=c.x,y=c.y):K>0&&(g+=k*K,y+=z*K)),k=r.x-g,z=r.y-y,f?k*k+z*z:new q(g,y)}function u(r){return!N(r[0])||typeof r[0][0]!="object"&&typeof r[0][0]<"u"}function p(r){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),u(r)}function _(r,a){var c,f,g,y,k,z,j,K;if(!r||r.length===0)throw new Error("latlngs not passed");u(r)||(console.warn("latlngs are not flat! Only the first ring will be used"),r=r[0]);var ee=fe([0,0]),ae=Le(r),we=ae.getNorthWest().distanceTo(ae.getSouthWest())*ae.getNorthEast().distanceTo(ae.getNorthWest());we<1700&&(ee=Bs(r));var Ut=r.length,gt=[];for(c=0;c<Ut;c++){var vn=fe(r[c]);gt.push(a.project(fe([vn.lat-ee.lat,vn.lng-ee.lng])))}for(c=0,f=0;c<Ut-1;c++)f+=gt[c].distanceTo(gt[c+1])/2;if(f===0)K=gt[0];else for(c=0,y=0;c<Ut-1;c++)if(k=gt[c],z=gt[c+1],g=k.distanceTo(z),y+=g,y>f){j=(y-f)/g,K=[z.x-j*(z.x-k.x),z.y-j*(z.y-k.y)];break}var Gt=a.unproject(X(K));return fe([Gt.lat+ee.lat,Gt.lng+ee.lng])}var E={__proto__:null,simplify:Sa,pointToSegmentDistance:Pa,closestPointOnSegment:di,clipSegment:Hr,_getEdgeIntersection:mt,_getBitCode:Wn,_sqClosestPointOnSegment:_n,isFlat:u,_flat:p,polylineCenter:_},V={project:function(r){return new q(r.lng,r.lat)},unproject:function(r){return new ye(r.y,r.x)},bounds:new ce([-180,-90],[180,90])},W={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ce([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(r){var a=Math.PI/180,c=this.R,f=r.lat*a,g=this.R_MINOR/c,y=Math.sqrt(1-g*g),k=y*Math.sin(f),z=Math.tan(Math.PI/4-f/2)/Math.pow((1-k)/(1+k),y/2);return f=-c*Math.log(Math.max(z,1e-10)),new q(r.lng*a*c,f)},unproject:function(r){for(var a=180/Math.PI,c=this.R,f=this.R_MINOR/c,g=Math.sqrt(1-f*f),y=Math.exp(-r.y/c),k=Math.PI/2-2*Math.atan(y),z=0,j=.1,K;z<15&&Math.abs(j)>1e-7;z++)K=g*Math.sin(k),K=Math.pow((1-K)/(1+K),g/2),j=Math.PI/2-2*Math.atan(y*K)-k,k+=j;return new ye(k*a,r.x*a/c)}},J={__proto__:null,LonLat:V,Mercator:W,SphericalMercator:Fi},Ne=s({},Bn,{code:"EPSG:3395",projection:W,transformation:function(){var r=.5/(Math.PI*W.R);return ri(r,.5,-r,.5)}()}),st=s({},Bn,{code:"EPSG:4326",projection:V,transformation:ri(1/180,1,-1/180,.5)}),Ae=s({},ht,{projection:V,transformation:ri(1,0,-1,0),scale:function(r){return Math.pow(2,r)},zoom:function(r){return Math.log(r)/Math.LN2},distance:function(r,a){var c=a.lng-r.lng,f=a.lat-r.lat;return Math.sqrt(c*c+f*f)},infinite:!0});ht.Earth=Bn,ht.EPSG3395=Ne,ht.EPSG3857=Lr,ht.EPSG900913=Ko,ht.EPSG4326=st,ht.Simple=Ae;var Me=Ft.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(r){return r.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(r){return r&&r.removeLayer(this),this},getPane:function(r){return this._map.getPane(r?this.options[r]||r:this.options.pane)},addInteractiveTarget:function(r){return this._map._targets[d(r)]=this,this},removeInteractiveTarget:function(r){return delete this._map._targets[d(r)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(r){var a=r.target;if(a.hasLayer(this)){if(this._map=a,this._zoomAnimated=a._zoomAnimated,this.getEvents){var c=this.getEvents();a.on(c,this),this.once("remove",function(){a.off(c,this)},this)}this.onAdd(a),this.fire("add"),a.fire("layeradd",{layer:this})}}});Ee.include({addLayer:function(r){if(!r._layerAdd)throw new Error("The provided object is not a Layer.");var a=d(r);return this._layers[a]?this:(this._layers[a]=r,r._mapToAdd=this,r.beforeAdd&&r.beforeAdd(this),this.whenReady(r._layerAdd,r),this)},removeLayer:function(r){var a=d(r);return this._layers[a]?(this._loaded&&r.onRemove(this),delete this._layers[a],this._loaded&&(this.fire("layerremove",{layer:r}),r.fire("remove")),r._map=r._mapToAdd=null,this):this},hasLayer:function(r){return d(r)in this._layers},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},_addLayers:function(r){r=r?N(r)?r:[r]:[];for(var a=0,c=r.length;a<c;a++)this.addLayer(r[a])},_addZoomLimit:function(r){(!isNaN(r.options.maxZoom)||!isNaN(r.options.minZoom))&&(this._zoomBoundLayers[d(r)]=r,this._updateZoomLevels())},_removeZoomLimit:function(r){var a=d(r);this._zoomBoundLayers[a]&&(delete this._zoomBoundLayers[a],this._updateZoomLevels())},_updateZoomLevels:function(){var r=1/0,a=-1/0,c=this._getZoomSpan();for(var f in this._zoomBoundLayers){var g=this._zoomBoundLayers[f].options;r=g.minZoom===void 0?r:Math.min(r,g.minZoom),a=g.maxZoom===void 0?a:Math.max(a,g.maxZoom)}this._layersMaxZoom=a===-1/0?void 0:a,this._layersMinZoom=r===1/0?void 0:r,c!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var $e=Me.extend({initialize:function(r,a){B(this,a),this._layers={};var c,f;if(r)for(c=0,f=r.length;c<f;c++)this.addLayer(r[c])},addLayer:function(r){var a=this.getLayerId(r);return this._layers[a]=r,this._map&&this._map.addLayer(r),this},removeLayer:function(r){var a=r in this._layers?r:this.getLayerId(r);return this._map&&this._layers[a]&&this._map.removeLayer(this._layers[a]),delete this._layers[a],this},hasLayer:function(r){var a=typeof r=="number"?r:this.getLayerId(r);return a in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(r){var a=Array.prototype.slice.call(arguments,1),c,f;for(c in this._layers)f=this._layers[c],f[r]&&f[r].apply(f,a);return this},onAdd:function(r){this.eachLayer(r.addLayer,r)},onRemove:function(r){this.eachLayer(r.removeLayer,r)},eachLayer:function(r,a){for(var c in this._layers)r.call(a,this._layers[c]);return this},getLayer:function(r){return this._layers[r]},getLayers:function(){var r=[];return this.eachLayer(r.push,r),r},setZIndex:function(r){return this.invoke("setZIndex",r)},getLayerId:function(r){return d(r)}}),Gi=function(r,a){return new $e(r,a)},et=$e.extend({addLayer:function(r){return this.hasLayer(r)?this:(r.addEventParent(this),$e.prototype.addLayer.call(this,r),this.fire("layeradd",{layer:r}))},removeLayer:function(r){return this.hasLayer(r)?(r in this._layers&&(r=this._layers[r]),r.removeEventParent(this),$e.prototype.removeLayer.call(this,r),this.fire("layerremove",{layer:r})):this},setStyle:function(r){return this.invoke("setStyle",r)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var r=new Ie;for(var a in this._layers){var c=this._layers[a];r.extend(c.getBounds?c.getBounds():c.getLatLng())}return r}}),Hs=function(r,a){return new et(r,a)},Hn=Ye.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(r){B(this,r)},createIcon:function(r){return this._createIcon("icon",r)},createShadow:function(r){return this._createIcon("shadow",r)},_createIcon:function(r,a){var c=this._getIconUrl(r);if(!c){if(r==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var f=this._createImg(c,a&&a.tagName==="IMG"?a:null);return this._setIconStyles(f,r),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),f},_setIconStyles:function(r,a){var c=this.options,f=c[a+"Size"];typeof f=="number"&&(f=[f,f]);var g=X(f),y=X(a==="shadow"&&c.shadowAnchor||c.iconAnchor||g&&g.divideBy(2,!0));r.className="leaflet-marker-"+a+" "+(c.className||""),y&&(r.style.marginLeft=-y.x+"px",r.style.marginTop=-y.y+"px"),g&&(r.style.width=g.x+"px",r.style.height=g.y+"px")},_createImg:function(r,a){return a=a||document.createElement("img"),a.src=r,a},_getIconUrl:function(r){return re.retina&&this.options[r+"RetinaUrl"]||this.options[r+"Url"]}});function AT(r){return new Hn(r)}var Aa=Hn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(r){return typeof Aa.imagePath!="string"&&(Aa.imagePath=this._detectIconPath()),(this.options.imagePath||Aa.imagePath)+Hn.prototype._getIconUrl.call(this,r)},_stripUrl:function(r){var a=function(c,f,g){var y=f.exec(c);return y&&y[g]};return r=a(r,/^url\((['"])?(.+)\1\)$/,2),r&&a(r,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var r=Se("div","leaflet-default-icon-path",document.body),a=Bi(r,"background-image")||Bi(r,"backgroundImage");if(document.body.removeChild(r),a=this._stripUrl(a),a)return a;var c=document.querySelector('link[href$="leaflet.css"]');return c?c.href.substring(0,c.href.length-11-1):""}}),ng=nn.extend({initialize:function(r){this._marker=r},addHooks:function(){var r=this._marker._icon;this._draggable||(this._draggable=new Rn(r,r,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ge(r,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&je(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(r){var a=this._marker,c=a._map,f=this._marker.options.autoPanSpeed,g=this._marker.options.autoPanPadding,y=fn(a._icon),k=c.getPixelBounds(),z=c.getPixelOrigin(),j=ve(k.min._subtract(z).add(g),k.max._subtract(z).subtract(g));if(!j.contains(y)){var K=X((Math.max(j.max.x,y.x)-j.max.x)/(k.max.x-j.max.x)-(Math.min(j.min.x,y.x)-j.min.x)/(k.min.x-j.min.x),(Math.max(j.max.y,y.y)-j.max.y)/(k.max.y-j.max.y)-(Math.min(j.min.y,y.y)-j.min.y)/(k.min.y-j.min.y)).multiplyBy(f);c.panBy(K,{animate:!1}),this._draggable._newPos._add(K),this._draggable._startPos._add(K),he(a._icon,this._draggable._newPos),this._onDrag(r),this._panRequest=O(this._adjustPan.bind(this,r))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(r){this._marker.options.autoPan&&(M(this._panRequest),this._panRequest=O(this._adjustPan.bind(this,r)))},_onDrag:function(r){var a=this._marker,c=a._shadow,f=fn(a._icon),g=a._map.layerPointToLatLng(f);c&&he(c,f),a._latlng=g,r.latlng=g,r.oldLatLng=this._oldLatLng,a.fire("move",r).fire("drag",r)},_onDragEnd:function(r){M(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",r)}}),Cu=Me.extend({options:{icon:new Aa,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(r,a){B(this,a),this._latlng=fe(r)},onAdd:function(r){this._zoomAnimated=this._zoomAnimated&&r.options.markerZoomAnimation,this._zoomAnimated&&r.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(r){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&r.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(r){var a=this._latlng;return this._latlng=fe(r),this.update(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},setZIndexOffset:function(r){return this.options.zIndexOffset=r,this.update()},getIcon:function(){return this.options.icon},setIcon:function(r){return this.options.icon=r,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var r=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(r)}return this},_initIcon:function(){var r=this.options,a="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),c=r.icon.createIcon(this._icon),f=!1;c!==this._icon&&(this._icon&&this._removeIcon(),f=!0,r.title&&(c.title=r.title),c.tagName==="IMG"&&(c.alt=r.alt||"")),ge(c,a),r.keyboard&&(c.tabIndex="0",c.setAttribute("role","button")),this._icon=c,r.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&oe(c,"focus",this._panOnFocus,this);var g=r.icon.createShadow(this._shadow),y=!1;g!==this._shadow&&(this._removeShadow(),y=!0),g&&(ge(g,a),g.alt=""),this._shadow=g,r.opacity<1&&this._updateOpacity(),f&&this.getPane().appendChild(this._icon),this._initInteraction(),g&&y&&this.getPane(r.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&De(this._icon,"focus",this._panOnFocus,this),Ve(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ve(this._shadow),this._shadow=null},_setPos:function(r){this._icon&&he(this._icon,r),this._shadow&&he(this._shadow,r),this._zIndex=r.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(r){this._icon&&(this._icon.style.zIndex=this._zIndex+r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center).round();this._setPos(a)},_initInteraction:function(){if(this.options.interactive&&(ge(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),ng)){var r=this.options.draggable;this.dragging&&(r=this.dragging.enabled(),this.dragging.disable()),this.dragging=new ng(this),r&&this.dragging.enable()}},setOpacity:function(r){return this.options.opacity=r,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var r=this.options.opacity;this._icon&&Xe(this._icon,r),this._shadow&&Xe(this._shadow,r)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var r=this._map;if(r){var a=this.options.icon.options,c=a.iconSize?X(a.iconSize):X(0,0),f=a.iconAnchor?X(a.iconAnchor):X(0,0);r.panInside(this._latlng,{paddingTopLeft:f,paddingBottomRight:c.subtract(f)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function CT(r,a){return new Cu(r,a)}var Zi=Me.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(r){this._renderer=r.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(r){return B(this,r),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&r&&Object.prototype.hasOwnProperty.call(r,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),ku=Zi.extend({options:{fill:!0,radius:10},initialize:function(r,a){B(this,a),this._latlng=fe(r),this._radius=this.options.radius},setLatLng:function(r){var a=this._latlng;return this._latlng=fe(r),this.redraw(),this.fire("move",{oldLatLng:a,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(r){return this.options.radius=this._radius=r,this.redraw()},getRadius:function(){return this._radius},setStyle:function(r){var a=r&&r.radius||this._radius;return Zi.prototype.setStyle.call(this,r),this.setRadius(a),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var r=this._radius,a=this._radiusY||r,c=this._clickTolerance(),f=[r+c,a+c];this._pxBounds=new ce(this._point.subtract(f),this._point.add(f))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(r){return r.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function kT(r,a){return new ku(r,a)}var nd=ku.extend({initialize:function(r,a,c){if(typeof a=="number"&&(a=s({},c,{radius:a})),B(this,a),this._latlng=fe(r),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(r){return this._mRadius=r,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var r=[this._radius,this._radiusY||this._radius];return new Ie(this._map.layerPointToLatLng(this._point.subtract(r)),this._map.layerPointToLatLng(this._point.add(r)))},setStyle:Zi.prototype.setStyle,_project:function(){var r=this._latlng.lng,a=this._latlng.lat,c=this._map,f=c.options.crs;if(f.distance===Bn.distance){var g=Math.PI/180,y=this._mRadius/Bn.R/g,k=c.project([a+y,r]),z=c.project([a-y,r]),j=k.add(z).divideBy(2),K=c.unproject(j).lat,ee=Math.acos((Math.cos(y*g)-Math.sin(a*g)*Math.sin(K*g))/(Math.cos(a*g)*Math.cos(K*g)))/g;(isNaN(ee)||ee===0)&&(ee=y/Math.cos(Math.PI/180*a)),this._point=j.subtract(c.getPixelOrigin()),this._radius=isNaN(ee)?0:j.x-c.project([K,r-ee]).x,this._radiusY=j.y-k.y}else{var ae=f.unproject(f.project(this._latlng).subtract([this._mRadius,0]));this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(ae).x}this._updateBounds()}});function RT(r,a,c){return new nd(r,a,c)}var fi=Zi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(r,a){B(this,a),this._setLatLngs(r)},getLatLngs:function(){return this._latlngs},setLatLngs:function(r){return this._setLatLngs(r),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(r){for(var a=1/0,c=null,f=_n,g,y,k=0,z=this._parts.length;k<z;k++)for(var j=this._parts[k],K=1,ee=j.length;K<ee;K++){g=j[K-1],y=j[K];var ae=f(r,g,y,!0);ae<a&&(a=ae,c=f(r,g,y))}return c&&(c.distance=Math.sqrt(a)),c},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(r,a){return a=a||this._defaultShape(),r=fe(r),a.push(r),this._bounds.extend(r),this.redraw()},_setLatLngs:function(r){this._bounds=new Ie,this._latlngs=this._convertLatLngs(r)},_defaultShape:function(){return u(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(r){for(var a=[],c=u(r),f=0,g=r.length;f<g;f++)c?(a[f]=fe(r[f]),this._bounds.extend(a[f])):a[f]=this._convertLatLngs(r[f]);return a},_project:function(){var r=new ce;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,r),this._bounds.isValid()&&r.isValid()&&(this._rawPxBounds=r,this._updateBounds())},_updateBounds:function(){var r=this._clickTolerance(),a=new q(r,r);this._rawPxBounds&&(this._pxBounds=new ce([this._rawPxBounds.min.subtract(a),this._rawPxBounds.max.add(a)]))},_projectLatlngs:function(r,a,c){var f=r[0]instanceof ye,g=r.length,y,k;if(f){for(k=[],y=0;y<g;y++)k[y]=this._map.latLngToLayerPoint(r[y]),c.extend(k[y]);a.push(k)}else for(y=0;y<g;y++)this._projectLatlngs(r[y],a,c)},_clipPoints:function(){var r=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}var a=this._parts,c,f,g,y,k,z,j;for(c=0,g=0,y=this._rings.length;c<y;c++)for(j=this._rings[c],f=0,k=j.length;f<k-1;f++)z=Hr(j[f],j[f+1],r,f,!0),z&&(a[g]=a[g]||[],a[g].push(z[0]),(z[1]!==j[f+1]||f===k-2)&&(a[g].push(z[1]),g++))}},_simplifyPoints:function(){for(var r=this._parts,a=this.options.smoothFactor,c=0,f=r.length;c<f;c++)r[c]=Sa(r[c],a)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(r,a){var c,f,g,y,k,z,j=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(c=0,y=this._parts.length;c<y;c++)for(z=this._parts[c],f=0,k=z.length,g=k-1;f<k;g=f++)if(!(!a&&f===0)&&Pa(r,z[g],z[f])<=j)return!0;return!1}});function LT(r,a){return new fi(r,a)}fi._flat=p;var qs=fi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Us(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(r){var a=fi.prototype._convertLatLngs.call(this,r),c=a.length;return c>=2&&a[0]instanceof ye&&a[0].equals(a[c-1])&&a.pop(),a},_setLatLngs:function(r){fi.prototype._setLatLngs.call(this,r),u(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return u(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var r=this._renderer._bounds,a=this.options.weight,c=new q(a,a);if(r=new ce(r.min.subtract(c),r.max.add(c)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(r))){if(this.options.noClip){this._parts=this._rings;return}for(var f=0,g=this._rings.length,y;f<g;f++)y=zs(this._rings[f],r,!0),y.length&&this._parts.push(y)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(r){var a=!1,c,f,g,y,k,z,j,K;if(!this._pxBounds||!this._pxBounds.contains(r))return!1;for(y=0,j=this._parts.length;y<j;y++)for(c=this._parts[y],k=0,K=c.length,z=K-1;k<K;z=k++)f=c[k],g=c[z],f.y>r.y!=g.y>r.y&&r.x<(g.x-f.x)*(r.y-f.y)/(g.y-f.y)+f.x&&(a=!a);return a||fi.prototype._containsPoint.call(this,r,!0)}});function NT(r,a){return new qs(r,a)}var pi=et.extend({initialize:function(r,a){B(this,a),this._layers={},r&&this.addData(r)},addData:function(r){var a=N(r)?r:r.features,c,f,g;if(a){for(c=0,f=a.length;c<f;c++)g=a[c],(g.geometries||g.geometry||g.features||g.coordinates)&&this.addData(g);return this}var y=this.options;if(y.filter&&!y.filter(r))return this;var k=Ru(r,y);return k?(k.feature=bu(r),k.defaultOptions=k.options,this.resetStyle(k),y.onEachFeature&&y.onEachFeature(r,k),this.addLayer(k)):this},resetStyle:function(r){return r===void 0?this.eachLayer(this.resetStyle,this):(r.options=s({},r.defaultOptions),this._setLayerStyle(r,this.options.style),this)},setStyle:function(r){return this.eachLayer(function(a){this._setLayerStyle(a,r)},this)},_setLayerStyle:function(r,a){r.setStyle&&(typeof a=="function"&&(a=a(r.feature)),r.setStyle(a))}});function Ru(r,a){var c=r.type==="Feature"?r.geometry:r,f=c?c.coordinates:null,g=[],y=a&&a.pointToLayer,k=a&&a.coordsToLatLng||id,z,j,K,ee;if(!f&&!c)return null;switch(c.type){case"Point":return z=k(f),ig(y,r,z,a);case"MultiPoint":for(K=0,ee=f.length;K<ee;K++)z=k(f[K]),g.push(ig(y,r,z,a));return new et(g);case"LineString":case"MultiLineString":return j=Lu(f,c.type==="LineString"?0:1,k),new fi(j,a);case"Polygon":case"MultiPolygon":return j=Lu(f,c.type==="Polygon"?1:2,k),new qs(j,a);case"GeometryCollection":for(K=0,ee=c.geometries.length;K<ee;K++){var ae=Ru({geometry:c.geometries[K],type:"Feature",properties:r.properties},a);ae&&g.push(ae)}return new et(g);case"FeatureCollection":for(K=0,ee=c.features.length;K<ee;K++){var we=Ru(c.features[K],a);we&&g.push(we)}return new et(g);default:throw new Error("Invalid GeoJSON object.")}}function ig(r,a,c,f){return r?r(a,c):new Cu(c,f&&f.markersInheritOptions&&f)}function id(r){return new ye(r[1],r[0],r[2])}function Lu(r,a,c){for(var f=[],g=0,y=r.length,k;g<y;g++)k=a?Lu(r[g],a-1,c):(c||id)(r[g]),f.push(k);return f}function rd(r,a){return r=fe(r),r.alt!==void 0?[I(r.lng,a),I(r.lat,a),I(r.alt,a)]:[I(r.lng,a),I(r.lat,a)]}function Nu(r,a,c,f){for(var g=[],y=0,k=r.length;y<k;y++)g.push(a?Nu(r[y],u(r[y])?0:a-1,c,f):rd(r[y],f));return!a&&c&&g.length>0&&g.push(g[0].slice()),g}function $s(r,a){return r.feature?s({},r.feature,{geometry:a}):bu(a)}function bu(r){return r.type==="Feature"||r.type==="FeatureCollection"?r:{type:"Feature",properties:{},geometry:r}}var sd={toGeoJSON:function(r){return $s(this,{type:"Point",coordinates:rd(this.getLatLng(),r)})}};Cu.include(sd),nd.include(sd),ku.include(sd),fi.include({toGeoJSON:function(r){var a=!u(this._latlngs),c=Nu(this._latlngs,a?1:0,!1,r);return $s(this,{type:(a?"Multi":"")+"LineString",coordinates:c})}}),qs.include({toGeoJSON:function(r){var a=!u(this._latlngs),c=a&&!u(this._latlngs[0]),f=Nu(this._latlngs,c?2:a?1:0,!0,r);return a||(f=[f]),$s(this,{type:(c?"Multi":"")+"Polygon",coordinates:f})}}),$e.include({toMultiPoint:function(r){var a=[];return this.eachLayer(function(c){a.push(c.toGeoJSON(r).geometry.coordinates)}),$s(this,{type:"MultiPoint",coordinates:a})},toGeoJSON:function(r){var a=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(a==="MultiPoint")return this.toMultiPoint(r);var c=a==="GeometryCollection",f=[];return this.eachLayer(function(g){if(g.toGeoJSON){var y=g.toGeoJSON(r);if(c)f.push(y.geometry);else{var k=bu(y);k.type==="FeatureCollection"?f.push.apply(f,k.features):f.push(k)}}}),c?$s(this,{geometries:f,type:"GeometryCollection"}):{type:"FeatureCollection",features:f}}});function rg(r,a){return new pi(r,a)}var bT=rg,Ou=Me.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(r,a,c){this._url=r,this._bounds=Le(a),B(this,c)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ge(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ve(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(r){return this.options.opacity=r,this._image&&this._updateOpacity(),this},setStyle:function(r){return r.opacity&&this.setOpacity(r.opacity),this},bringToFront:function(){return this._map&&li(this._image),this},bringToBack:function(){return this._map&&ji(this._image),this},setUrl:function(r){return this._url=r,this._image&&(this._image.src=r),this},setBounds:function(r){return this._bounds=Le(r),this._map&&this._reset(),this},getEvents:function(){var r={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var r=this._url.tagName==="IMG",a=this._image=r?this._url:Se("img");if(ge(a,"leaflet-image-layer"),this._zoomAnimated&&ge(a,"leaflet-zoom-animated"),this.options.className&&ge(a,this.options.className),a.onselectstart=w,a.onmousemove=w,a.onload=l(this.fire,this,"load"),a.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(a.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),r){this._url=a.src;return}a.src=this._url,a.alt=this.options.alt},_animateZoom:function(r){var a=this._map.getZoomScale(r.zoom),c=this._map._latLngBoundsToNewLayerBounds(this._bounds,r.zoom,r.center).min;jn(this._image,c,a)},_reset:function(){var r=this._image,a=new ce(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),c=a.getSize();he(r,a.min),r.style.width=c.x+"px",r.style.height=c.y+"px"},_updateOpacity:function(){Xe(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var r=this.options.errorOverlayUrl;r&&this._url!==r&&(this._url=r,this._image.src=r)},getCenter:function(){return this._bounds.getCenter()}}),OT=function(r,a,c){return new Ou(r,a,c)},sg=Ou.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var r=this._url.tagName==="VIDEO",a=this._image=r?this._url:Se("video");if(ge(a,"leaflet-image-layer"),this._zoomAnimated&&ge(a,"leaflet-zoom-animated"),this.options.className&&ge(a,this.options.className),a.onselectstart=w,a.onmousemove=w,a.onloadeddata=l(this.fire,this,"load"),r){for(var c=a.getElementsByTagName("source"),f=[],g=0;g<c.length;g++)f.push(c[g].src);this._url=c.length>0?f:[a.src];return}N(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(a.style,"objectFit")&&(a.style.objectFit="fill"),a.autoplay=!!this.options.autoplay,a.loop=!!this.options.loop,a.muted=!!this.options.muted,a.playsInline=!!this.options.playsInline;for(var y=0;y<this._url.length;y++){var k=Se("source");k.src=this._url[y],a.appendChild(k)}}});function DT(r,a,c){return new sg(r,a,c)}var og=Ou.extend({_initImage:function(){var r=this._image=this._url;ge(r,"leaflet-image-layer"),this._zoomAnimated&&ge(r,"leaflet-zoom-animated"),this.options.className&&ge(r,this.options.className),r.onselectstart=w,r.onmousemove=w}});function MT(r,a,c){return new og(r,a,c)}var qn=Me.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(r,a){r&&(r instanceof ye||N(r))?(this._latlng=fe(r),B(this,a)):(B(this,r),this._source=a),this.options.content&&(this._content=this.options.content)},openOn:function(r){return r=arguments.length?r:this._source._map,r.hasLayer(this)||r.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(r){return this._map?this.close():(arguments.length?this._source=r:r=this._source,this._prepareOpen(),this.openOn(r._map)),this},onAdd:function(r){this._zoomAnimated=r._zoomAnimated,this._container||this._initLayout(),r._fadeAnimated&&Xe(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),r._fadeAnimated&&Xe(this._container,1),this.bringToFront(),this.options.interactive&&(ge(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(r){r._fadeAnimated?(Xe(this._container,0),this._removeTimeout=setTimeout(l(Ve,void 0,this._container),200)):Ve(this._container),this.options.interactive&&(je(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(r){return this._latlng=fe(r),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(r){return this._content=r,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var r={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&li(this._container),this},bringToBack:function(){return this._map&&ji(this._container),this},_prepareOpen:function(r){var a=this._source;if(!a._map)return!1;if(a instanceof et){a=null;var c=this._source._layers;for(var f in c)if(c[f]._map){a=c[f];break}if(!a)return!1;this._source=a}if(!r)if(a.getCenter)r=a.getCenter();else if(a.getLatLng)r=a.getLatLng();else if(a.getBounds)r=a.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(r),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var r=this._contentNode,a=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof a=="string")r.innerHTML=a;else{for(;r.hasChildNodes();)r.removeChild(r.firstChild);r.appendChild(a)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var r=this._map.latLngToLayerPoint(this._latlng),a=X(this.options.offset),c=this._getAnchor();this._zoomAnimated?he(this._container,r.add(c)):a=a.add(r).add(c);var f=this._containerBottom=-a.y,g=this._containerLeft=-Math.round(this._containerWidth/2)+a.x;this._container.style.bottom=f+"px",this._container.style.left=g+"px"}},_getAnchor:function(){return[0,0]}});Ee.include({_initOverlay:function(r,a,c,f){var g=a;return g instanceof r||(g=new r(f).setContent(a)),c&&g.setLatLng(c),g}}),Me.include({_initOverlay:function(r,a,c,f){var g=c;return g instanceof r?(B(g,f),g._source=this):(g=a&&!f?a:new r(f,this),g.setContent(c)),g}});var Du=qn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(r){return r=arguments.length?r:this._source._map,!r.hasLayer(this)&&r._popup&&r._popup.options.autoClose&&r.removeLayer(r._popup),r._popup=this,qn.prototype.openOn.call(this,r)},onAdd:function(r){qn.prototype.onAdd.call(this,r),r.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Zi||this._source.on("preclick",gn))},onRemove:function(r){qn.prototype.onRemove.call(this,r),r.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Zi||this._source.off("preclick",gn))},getEvents:function(){var r=qn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(r.preclick=this.close),this.options.keepInView&&(r.moveend=this._adjustPan),r},_initLayout:function(){var r="leaflet-popup",a=this._container=Se("div",r+" "+(this.options.className||"")+" leaflet-zoom-animated"),c=this._wrapper=Se("div",r+"-content-wrapper",a);if(this._contentNode=Se("div",r+"-content",c),qi(a),Hi(this._contentNode),oe(a,"contextmenu",gn),this._tipContainer=Se("div",r+"-tip-container",a),this._tip=Se("div",r+"-tip",this._tipContainer),this.options.closeButton){var f=this._closeButton=Se("a",r+"-close-button",a);f.setAttribute("role","button"),f.setAttribute("aria-label","Close popup"),f.href="#close",f.innerHTML='<span aria-hidden="true">&#215;</span>',oe(f,"click",function(g){qe(g),this.close()},this)}},_updateLayout:function(){var r=this._contentNode,a=r.style;a.width="",a.whiteSpace="nowrap";var c=r.offsetWidth;c=Math.min(c,this.options.maxWidth),c=Math.max(c,this.options.minWidth),a.width=c+1+"px",a.whiteSpace="",a.height="";var f=r.offsetHeight,g=this.options.maxHeight,y="leaflet-popup-scrolled";g&&f>g?(a.height=g+"px",ge(r,y)):je(r,y),this._containerWidth=this._container.offsetWidth},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center),c=this._getAnchor();he(this._container,a.add(c))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var r=this._map,a=parseInt(Bi(this._container,"marginBottom"),10)||0,c=this._container.offsetHeight+a,f=this._containerWidth,g=new q(this._containerLeft,-c-this._containerBottom);g._add(fn(this._container));var y=r.layerPointToContainerPoint(g),k=X(this.options.autoPanPadding),z=X(this.options.autoPanPaddingTopLeft||k),j=X(this.options.autoPanPaddingBottomRight||k),K=r.getSize(),ee=0,ae=0;y.x+f+j.x>K.x&&(ee=y.x+f-K.x+j.x),y.x-ee-z.x<0&&(ee=y.x-z.x),y.y+c+j.y>K.y&&(ae=y.y+c-K.y+j.y),y.y-ae-z.y<0&&(ae=y.y-z.y),(ee||ae)&&(this.options.keepInView&&(this._autopanning=!0),r.fire("autopanstart").panBy([ee,ae]))}},_getAnchor:function(){return X(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),VT=function(r,a){return new Du(r,a)};Ee.mergeOptions({closePopupOnClick:!0}),Ee.include({openPopup:function(r,a,c){return this._initOverlay(Du,r,a,c).openOn(this),this},closePopup:function(r){return r=arguments.length?r:this._popup,r&&r.close(),this}}),Me.include({bindPopup:function(r,a){return this._popup=this._initOverlay(Du,this._popup,r,a),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(r){return this._popup&&(this instanceof et||(this._popup._source=this),this._popup._prepareOpen(r||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(r){return this._popup&&this._popup.setContent(r),this},getPopup:function(){return this._popup},_openPopup:function(r){if(!(!this._popup||!this._map)){tn(r);var a=r.layer||r.target;if(this._popup._source===a&&!(a instanceof Zi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(r.latlng);return}this._popup._source=a,this.openPopup(r.latlng)}},_movePopup:function(r){this._popup.setLatLng(r.latlng)},_onKeyPress:function(r){r.originalEvent.keyCode===13&&this._openPopup(r)}});var Mu=qn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(r){qn.prototype.onAdd.call(this,r),this.setOpacity(this.options.opacity),r.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(r){qn.prototype.onRemove.call(this,r),r.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var r=qn.prototype.getEvents.call(this);return this.options.permanent||(r.preclick=this.close),r},_initLayout:function(){var r="leaflet-tooltip",a=r+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Se("div",a),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(r){var a,c,f=this._map,g=this._container,y=f.latLngToContainerPoint(f.getCenter()),k=f.layerPointToContainerPoint(r),z=this.options.direction,j=g.offsetWidth,K=g.offsetHeight,ee=X(this.options.offset),ae=this._getAnchor();z==="top"?(a=j/2,c=K):z==="bottom"?(a=j/2,c=0):z==="center"?(a=j/2,c=K/2):z==="right"?(a=0,c=K/2):z==="left"?(a=j,c=K/2):k.x<y.x?(z="right",a=0,c=K/2):(z="left",a=j+(ee.x+ae.x)*2,c=K/2),r=r.subtract(X(a,c,!0)).add(ee).add(ae),je(g,"leaflet-tooltip-right"),je(g,"leaflet-tooltip-left"),je(g,"leaflet-tooltip-top"),je(g,"leaflet-tooltip-bottom"),ge(g,"leaflet-tooltip-"+z),he(g,r)},_updatePosition:function(){var r=this._map.latLngToLayerPoint(this._latlng);this._setPosition(r)},setOpacity:function(r){this.options.opacity=r,this._container&&Xe(this._container,r)},_animateZoom:function(r){var a=this._map._latLngToNewLayerPoint(this._latlng,r.zoom,r.center);this._setPosition(a)},_getAnchor:function(){return X(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),FT=function(r,a){return new Mu(r,a)};Ee.include({openTooltip:function(r,a,c){return this._initOverlay(Mu,r,a,c).openOn(this),this},closeTooltip:function(r){return r.close(),this}}),Me.include({bindTooltip:function(r,a){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Mu,this._tooltip,r,a),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(r){if(!(!r&&this._tooltipHandlersAdded)){var a=r?"off":"on",c={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?c.add=this._openTooltip:(c.mouseover=this._openTooltip,c.mouseout=this.closeTooltip,c.click=this._openTooltip,this._map?this._addFocusListeners():c.add=this._addFocusListeners),this._tooltip.options.sticky&&(c.mousemove=this._moveTooltip),this[a](c),this._tooltipHandlersAdded=!r}},openTooltip:function(r){return this._tooltip&&(this instanceof et||(this._tooltip._source=this),this._tooltip._prepareOpen(r)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(r){return this._tooltip&&this._tooltip.setContent(r),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&(oe(a,"focus",function(){this._tooltip._source=r,this.openTooltip()},this),oe(a,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(r){var a=typeof r.getElement=="function"&&r.getElement();a&&a.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(r){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var a=this;this._map.once("moveend",function(){a._openOnceFlag=!1,a._openTooltip(r)});return}this._tooltip._source=r.layer||r.target,this.openTooltip(this._tooltip.options.sticky?r.latlng:void 0)}},_moveTooltip:function(r){var a=r.latlng,c,f;this._tooltip.options.sticky&&r.originalEvent&&(c=this._map.mouseEventToContainerPoint(r.originalEvent),f=this._map.containerPointToLayerPoint(c),a=this._map.layerPointToLatLng(f)),this._tooltip.setLatLng(a)}});var ag=Hn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(r){var a=r&&r.tagName==="DIV"?r:document.createElement("div"),c=this.options;if(c.html instanceof Element?(jr(a),a.appendChild(c.html)):a.innerHTML=c.html!==!1?c.html:"",c.bgPos){var f=X(c.bgPos);a.style.backgroundPosition=-f.x+"px "+-f.y+"px"}return this._setIconStyles(a,"icon"),a},createShadow:function(){return null}});function zT(r){return new ag(r)}Hn.Default=Aa;var Ca=Me.extend({options:{tileSize:256,opacity:1,updateWhenIdle:re.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(r){B(this,r)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(r){r._addZoomLimit(this)},onRemove:function(r){this._removeAllTiles(),Ve(this._container),r._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(li(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ji(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(r){return this.options.opacity=r,this._updateOpacity(),this},setZIndex:function(r){return this.options.zIndex=r,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var r=this._clampZoom(this._map.getZoom());r!==this._tileZoom&&(this._tileZoom=r,this._updateLevels()),this._update()}return this},getEvents:function(){var r={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),r.move=this._onMove),this._zoomAnimated&&(r.zoomanim=this._animateZoom),r},createTile:function(){return document.createElement("div")},getTileSize:function(){var r=this.options.tileSize;return r instanceof q?r:new q(r,r)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(r){for(var a=this.getPane().children,c=-r(-1/0,1/0),f=0,g=a.length,y;f<g;f++)y=a[f].style.zIndex,a[f]!==this._container&&y&&(c=r(c,+y));isFinite(c)&&(this.options.zIndex=c+r(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!re.ielt9){Xe(this._container,this.options.opacity);var r=+new Date,a=!1,c=!1;for(var f in this._tiles){var g=this._tiles[f];if(!(!g.current||!g.loaded)){var y=Math.min(1,(r-g.loaded)/200);Xe(g.el,y),y<1?a=!0:(g.active?c=!0:this._onOpaqueTile(g),g.active=!0)}}c&&!this._noPrune&&this._pruneTiles(),a&&(M(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=Se("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var r=this._tileZoom,a=this.options.maxZoom;if(r!==void 0){for(var c in this._levels)c=Number(c),this._levels[c].el.children.length||c===r?(this._levels[c].el.style.zIndex=a-Math.abs(r-c),this._onUpdateLevel(c)):(Ve(this._levels[c].el),this._removeTilesAtZoom(c),this._onRemoveLevel(c),delete this._levels[c]);var f=this._levels[r],g=this._map;return f||(f=this._levels[r]={},f.el=Se("div","leaflet-tile-container leaflet-zoom-animated",this._container),f.el.style.zIndex=a,f.origin=g.project(g.unproject(g.getPixelOrigin()),r).round(),f.zoom=r,this._setZoomTransform(f,g.getCenter(),g.getZoom()),w(f.el.offsetWidth),this._onCreateLevel(f)),this._level=f,f}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var r,a,c=this._map.getZoom();if(c>this.options.maxZoom||c<this.options.minZoom){this._removeAllTiles();return}for(r in this._tiles)a=this._tiles[r],a.retain=a.current;for(r in this._tiles)if(a=this._tiles[r],a.current&&!a.active){var f=a.coords;this._retainParent(f.x,f.y,f.z,f.z-5)||this._retainChildren(f.x,f.y,f.z,f.z+2)}for(r in this._tiles)this._tiles[r].retain||this._removeTile(r)}},_removeTilesAtZoom:function(r){for(var a in this._tiles)this._tiles[a].coords.z===r&&this._removeTile(a)},_removeAllTiles:function(){for(var r in this._tiles)this._removeTile(r)},_invalidateAll:function(){for(var r in this._levels)Ve(this._levels[r].el),this._onRemoveLevel(Number(r)),delete this._levels[r];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(r,a,c,f){var g=Math.floor(r/2),y=Math.floor(a/2),k=c-1,z=new q(+g,+y);z.z=+k;var j=this._tileCoordsToKey(z),K=this._tiles[j];return K&&K.active?(K.retain=!0,!0):(K&&K.loaded&&(K.retain=!0),k>f?this._retainParent(g,y,k,f):!1)},_retainChildren:function(r,a,c,f){for(var g=2*r;g<2*r+2;g++)for(var y=2*a;y<2*a+2;y++){var k=new q(g,y);k.z=c+1;var z=this._tileCoordsToKey(k),j=this._tiles[z];if(j&&j.active){j.retain=!0;continue}else j&&j.loaded&&(j.retain=!0);c+1<f&&this._retainChildren(g,y,c+1,f)}},_resetView:function(r){var a=r&&(r.pinch||r.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),a,a)},_animateZoom:function(r){this._setView(r.center,r.zoom,!0,r.noUpdate)},_clampZoom:function(r){var a=this.options;return a.minNativeZoom!==void 0&&r<a.minNativeZoom?a.minNativeZoom:a.maxNativeZoom!==void 0&&a.maxNativeZoom<r?a.maxNativeZoom:r},_setView:function(r,a,c,f){var g=Math.round(a);this.options.maxZoom!==void 0&&g>this.options.maxZoom||this.options.minZoom!==void 0&&g<this.options.minZoom?g=void 0:g=this._clampZoom(g);var y=this.options.updateWhenZooming&&g!==this._tileZoom;(!f||y)&&(this._tileZoom=g,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),g!==void 0&&this._update(r),c||this._pruneTiles(),this._noPrune=!!c),this._setZoomTransforms(r,a)},_setZoomTransforms:function(r,a){for(var c in this._levels)this._setZoomTransform(this._levels[c],r,a)},_setZoomTransform:function(r,a,c){var f=this._map.getZoomScale(c,r.zoom),g=r.origin.multiplyBy(f).subtract(this._map._getNewPixelOrigin(a,c)).round();re.any3d?jn(r.el,g,f):he(r.el,g)},_resetGrid:function(){var r=this._map,a=r.options.crs,c=this._tileSize=this.getTileSize(),f=this._tileZoom,g=this._map.getPixelWorldBounds(this._tileZoom);g&&(this._globalTileRange=this._pxBoundsToTileRange(g)),this._wrapX=a.wrapLng&&!this.options.noWrap&&[Math.floor(r.project([0,a.wrapLng[0]],f).x/c.x),Math.ceil(r.project([0,a.wrapLng[1]],f).x/c.y)],this._wrapY=a.wrapLat&&!this.options.noWrap&&[Math.floor(r.project([a.wrapLat[0],0],f).y/c.x),Math.ceil(r.project([a.wrapLat[1],0],f).y/c.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(r){var a=this._map,c=a._animatingZoom?Math.max(a._animateToZoom,a.getZoom()):a.getZoom(),f=a.getZoomScale(c,this._tileZoom),g=a.project(r,this._tileZoom).floor(),y=a.getSize().divideBy(f*2);return new ce(g.subtract(y),g.add(y))},_update:function(r){var a=this._map;if(a){var c=this._clampZoom(a.getZoom());if(r===void 0&&(r=a.getCenter()),this._tileZoom!==void 0){var f=this._getTiledPixelBounds(r),g=this._pxBoundsToTileRange(f),y=g.getCenter(),k=[],z=this.options.keepBuffer,j=new ce(g.getBottomLeft().subtract([z,-z]),g.getTopRight().add([z,-z]));if(!(isFinite(g.min.x)&&isFinite(g.min.y)&&isFinite(g.max.x)&&isFinite(g.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var K in this._tiles){var ee=this._tiles[K].coords;(ee.z!==this._tileZoom||!j.contains(new q(ee.x,ee.y)))&&(this._tiles[K].current=!1)}if(Math.abs(c-this._tileZoom)>1){this._setView(r,c);return}for(var ae=g.min.y;ae<=g.max.y;ae++)for(var we=g.min.x;we<=g.max.x;we++){var Ut=new q(we,ae);if(Ut.z=this._tileZoom,!!this._isValidTile(Ut)){var gt=this._tiles[this._tileCoordsToKey(Ut)];gt?gt.current=!0:k.push(Ut)}}if(k.sort(function(Gt,Zs){return Gt.distanceTo(y)-Zs.distanceTo(y)}),k.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var vn=document.createDocumentFragment();for(we=0;we<k.length;we++)this._addTile(k[we],vn);this._level.el.appendChild(vn)}}}},_isValidTile:function(r){var a=this._map.options.crs;if(!a.infinite){var c=this._globalTileRange;if(!a.wrapLng&&(r.x<c.min.x||r.x>c.max.x)||!a.wrapLat&&(r.y<c.min.y||r.y>c.max.y))return!1}if(!this.options.bounds)return!0;var f=this._tileCoordsToBounds(r);return Le(this.options.bounds).overlaps(f)},_keyToBounds:function(r){return this._tileCoordsToBounds(this._keyToTileCoords(r))},_tileCoordsToNwSe:function(r){var a=this._map,c=this.getTileSize(),f=r.scaleBy(c),g=f.add(c),y=a.unproject(f,r.z),k=a.unproject(g,r.z);return[y,k]},_tileCoordsToBounds:function(r){var a=this._tileCoordsToNwSe(r),c=new Ie(a[0],a[1]);return this.options.noWrap||(c=this._map.wrapLatLngBounds(c)),c},_tileCoordsToKey:function(r){return r.x+":"+r.y+":"+r.z},_keyToTileCoords:function(r){var a=r.split(":"),c=new q(+a[0],+a[1]);return c.z=+a[2],c},_removeTile:function(r){var a=this._tiles[r];a&&(Ve(a.el),delete this._tiles[r],this.fire("tileunload",{tile:a.el,coords:this._keyToTileCoords(r)}))},_initTile:function(r){ge(r,"leaflet-tile");var a=this.getTileSize();r.style.width=a.x+"px",r.style.height=a.y+"px",r.onselectstart=w,r.onmousemove=w,re.ielt9&&this.options.opacity<1&&Xe(r,this.options.opacity)},_addTile:function(r,a){var c=this._getTilePos(r),f=this._tileCoordsToKey(r),g=this.createTile(this._wrapCoords(r),l(this._tileReady,this,r));this._initTile(g),this.createTile.length<2&&O(l(this._tileReady,this,r,null,g)),he(g,c),this._tiles[f]={el:g,coords:r,current:!0},a.appendChild(g),this.fire("tileloadstart",{tile:g,coords:r})},_tileReady:function(r,a,c){a&&this.fire("tileerror",{error:a,tile:c,coords:r});var f=this._tileCoordsToKey(r);c=this._tiles[f],c&&(c.loaded=+new Date,this._map._fadeAnimated?(Xe(c.el,0),M(this._fadeFrame),this._fadeFrame=O(this._updateOpacity,this)):(c.active=!0,this._pruneTiles()),a||(ge(c.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:c.el,coords:r})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),re.ielt9||!this._map._fadeAnimated?O(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(r){return r.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(r){var a=new q(this._wrapX?v(r.x,this._wrapX):r.x,this._wrapY?v(r.y,this._wrapY):r.y);return a.z=r.z,a},_pxBoundsToTileRange:function(r){var a=this.getTileSize();return new ce(r.min.unscaleBy(a).floor(),r.max.unscaleBy(a).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var r in this._tiles)if(!this._tiles[r].loaded)return!1;return!0}});function UT(r){return new Ca(r)}var Gs=Ca.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(r,a){this._url=r,a=B(this,a),a.detectRetina&&re.retina&&a.maxZoom>0?(a.tileSize=Math.floor(a.tileSize/2),a.zoomReverse?(a.zoomOffset--,a.minZoom=Math.min(a.maxZoom,a.minZoom+1)):(a.zoomOffset++,a.maxZoom=Math.max(a.minZoom,a.maxZoom-1)),a.minZoom=Math.max(0,a.minZoom)):a.zoomReverse?a.minZoom=Math.min(a.maxZoom,a.minZoom):a.maxZoom=Math.max(a.minZoom,a.maxZoom),typeof a.subdomains=="string"&&(a.subdomains=a.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(r,a){return this._url===r&&a===void 0&&(a=!0),this._url=r,a||this.redraw(),this},createTile:function(r,a){var c=document.createElement("img");return oe(c,"load",l(this._tileOnLoad,this,a,c)),oe(c,"error",l(this._tileOnError,this,a,c)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(c.referrerPolicy=this.options.referrerPolicy),c.alt="",c.src=this.getTileUrl(r),c},getTileUrl:function(r){var a={r:re.retina?"@2x":"",s:this._getSubdomain(r),x:r.x,y:r.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var c=this._globalTileRange.max.y-r.y;this.options.tms&&(a.y=c),a["-y"]=c}return x(this._url,s(a,this.options))},_tileOnLoad:function(r,a){re.ielt9?setTimeout(l(r,this,null,a),0):r(null,a)},_tileOnError:function(r,a,c){var f=this.options.errorTileUrl;f&&a.getAttribute("src")!==f&&(a.src=f),r(c,a)},_onTileRemove:function(r){r.tile.onload=null},_getZoomForUrl:function(){var r=this._tileZoom,a=this.options.maxZoom,c=this.options.zoomReverse,f=this.options.zoomOffset;return c&&(r=a-r),r+f},_getSubdomain:function(r){var a=Math.abs(r.x+r.y)%this.options.subdomains.length;return this.options.subdomains[a]},_abortLoading:function(){var r,a;for(r in this._tiles)if(this._tiles[r].coords.z!==this._tileZoom&&(a=this._tiles[r].el,a.onload=w,a.onerror=w,!a.complete)){a.src=H;var c=this._tiles[r].coords;Ve(a),delete this._tiles[r],this.fire("tileabort",{tile:a,coords:c})}},_removeTile:function(r){var a=this._tiles[r];if(a)return a.el.setAttribute("src",H),Ca.prototype._removeTile.call(this,r)},_tileReady:function(r,a,c){if(!(!this._map||c&&c.getAttribute("src")===H))return Ca.prototype._tileReady.call(this,r,a,c)}});function lg(r,a){return new Gs(r,a)}var ug=Gs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(r,a){this._url=r;var c=s({},this.defaultWmsParams);for(var f in a)f in this.options||(c[f]=a[f]);a=B(this,a);var g=a.detectRetina&&re.retina?2:1,y=this.getTileSize();c.width=y.x*g,c.height=y.y*g,this.wmsParams=c},onAdd:function(r){this._crs=this.options.crs||r.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var a=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[a]=this._crs.code,Gs.prototype.onAdd.call(this,r)},getTileUrl:function(r){var a=this._tileCoordsToNwSe(r),c=this._crs,f=ve(c.project(a[0]),c.project(a[1])),g=f.min,y=f.max,k=(this._wmsVersion>=1.3&&this._crs===st?[g.y,g.x,y.y,y.x]:[g.x,g.y,y.x,y.y]).join(","),z=Gs.prototype.getTileUrl.call(this,r);return z+Z(this.wmsParams,z,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+k},setParams:function(r,a){return s(this.wmsParams,r),a||this.redraw(),this}});function BT(r,a){return new ug(r,a)}Gs.WMS=ug,lg.wms=BT;var mi=Me.extend({options:{padding:.1},initialize:function(r){B(this,r),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ge(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var r={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(r.zoomanim=this._onAnimZoom),r},_onAnimZoom:function(r){this._updateTransform(r.center,r.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(r,a){var c=this._map.getZoomScale(a,this._zoom),f=this._map.getSize().multiplyBy(.5+this.options.padding),g=this._map.project(this._center,a),y=f.multiplyBy(-c).add(g).subtract(this._map._getNewPixelOrigin(r,a));re.any3d?jn(this._container,y,c):he(this._container,y)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var r in this._layers)this._layers[r]._reset()},_onZoomEnd:function(){for(var r in this._layers)this._layers[r]._project()},_updatePaths:function(){for(var r in this._layers)this._layers[r]._update()},_update:function(){var r=this.options.padding,a=this._map.getSize(),c=this._map.containerPointToLayerPoint(a.multiplyBy(-r)).round();this._bounds=new ce(c,c.add(a.multiplyBy(1+r*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),cg=mi.extend({options:{tolerance:0},getEvents:function(){var r=mi.prototype.getEvents.call(this);return r.viewprereset=this._onViewPreReset,r},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){mi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var r=this._container=document.createElement("canvas");oe(r,"mousemove",this._onMouseMove,this),oe(r,"click dblclick mousedown mouseup contextmenu",this._onClick,this),oe(r,"mouseout",this._handleMouseOut,this),r._leaflet_disable_events=!0,this._ctx=r.getContext("2d")},_destroyContainer:function(){M(this._redrawRequest),delete this._ctx,Ve(this._container),De(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var r;this._redrawBounds=null;for(var a in this._layers)r=this._layers[a],r._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){mi.prototype._update.call(this);var r=this._bounds,a=this._container,c=r.getSize(),f=re.retina?2:1;he(a,r.min),a.width=f*c.x,a.height=f*c.y,a.style.width=c.x+"px",a.style.height=c.y+"px",re.retina&&this._ctx.scale(2,2),this._ctx.translate(-r.min.x,-r.min.y),this.fire("update")}},_reset:function(){mi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(r){this._updateDashArray(r),this._layers[d(r)]=r;var a=r._order={layer:r,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=a),this._drawLast=a,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(r){this._requestRedraw(r)},_removePath:function(r){var a=r._order,c=a.next,f=a.prev;c?c.prev=f:this._drawLast=f,f?f.next=c:this._drawFirst=c,delete r._order,delete this._layers[d(r)],this._requestRedraw(r)},_updatePath:function(r){this._extendRedrawBounds(r),r._project(),r._update(),this._requestRedraw(r)},_updateStyle:function(r){this._updateDashArray(r),this._requestRedraw(r)},_updateDashArray:function(r){if(typeof r.options.dashArray=="string"){var a=r.options.dashArray.split(/[, ]+/),c=[],f,g;for(g=0;g<a.length;g++){if(f=Number(a[g]),isNaN(f))return;c.push(f)}r.options._dashArray=c}else r.options._dashArray=r.options.dashArray},_requestRedraw:function(r){this._map&&(this._extendRedrawBounds(r),this._redrawRequest=this._redrawRequest||O(this._redraw,this))},_extendRedrawBounds:function(r){if(r._pxBounds){var a=(r.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ce,this._redrawBounds.extend(r._pxBounds.min.subtract([a,a])),this._redrawBounds.extend(r._pxBounds.max.add([a,a]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var r=this._redrawBounds;if(r){var a=r.getSize();this._ctx.clearRect(r.min.x,r.min.y,a.x,a.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var r,a=this._redrawBounds;if(this._ctx.save(),a){var c=a.getSize();this._ctx.beginPath(),this._ctx.rect(a.min.x,a.min.y,c.x,c.y),this._ctx.clip()}this._drawing=!0;for(var f=this._drawFirst;f;f=f.next)r=f.layer,(!a||r._pxBounds&&r._pxBounds.intersects(a))&&r._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(r,a){if(this._drawing){var c,f,g,y,k=r._parts,z=k.length,j=this._ctx;if(z){for(j.beginPath(),c=0;c<z;c++){for(f=0,g=k[c].length;f<g;f++)y=k[c][f],j[f?"lineTo":"moveTo"](y.x,y.y);a&&j.closePath()}this._fillStroke(j,r)}}},_updateCircle:function(r){if(!(!this._drawing||r._empty())){var a=r._point,c=this._ctx,f=Math.max(Math.round(r._radius),1),g=(Math.max(Math.round(r._radiusY),1)||f)/f;g!==1&&(c.save(),c.scale(1,g)),c.beginPath(),c.arc(a.x,a.y/g,f,0,Math.PI*2,!1),g!==1&&c.restore(),this._fillStroke(c,r)}},_fillStroke:function(r,a){var c=a.options;c.fill&&(r.globalAlpha=c.fillOpacity,r.fillStyle=c.fillColor||c.color,r.fill(c.fillRule||"evenodd")),c.stroke&&c.weight!==0&&(r.setLineDash&&r.setLineDash(a.options&&a.options._dashArray||[]),r.globalAlpha=c.opacity,r.lineWidth=c.weight,r.strokeStyle=c.color,r.lineCap=c.lineCap,r.lineJoin=c.lineJoin,r.stroke())},_onClick:function(r){for(var a=this._map.mouseEventToLayerPoint(r),c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(!(r.type==="click"||r.type==="preclick")||!this._map._draggableMoved(c))&&(f=c);this._fireEvent(f?[f]:!1,r)},_onMouseMove:function(r){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var a=this._map.mouseEventToLayerPoint(r);this._handleMouseHover(r,a)}},_handleMouseOut:function(r){var a=this._hoveredLayer;a&&(je(this._container,"leaflet-interactive"),this._fireEvent([a],r,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(r,a){if(!this._mouseHoverThrottled){for(var c,f,g=this._drawFirst;g;g=g.next)c=g.layer,c.options.interactive&&c._containsPoint(a)&&(f=c);f!==this._hoveredLayer&&(this._handleMouseOut(r),f&&(ge(this._container,"leaflet-interactive"),this._fireEvent([f],r,"mouseover"),this._hoveredLayer=f)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,r),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(r,a,c){this._map._fireDOMEvent(a,c||a.type,r)},_bringToFront:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(c)c.prev=f;else return;f?f.next=c:c&&(this._drawFirst=c),a.prev=this._drawLast,this._drawLast.next=a,a.next=null,this._drawLast=a,this._requestRedraw(r)}},_bringToBack:function(r){var a=r._order;if(a){var c=a.next,f=a.prev;if(f)f.next=c;else return;c?c.prev=f:f&&(this._drawLast=f),a.prev=null,a.next=this._drawFirst,this._drawFirst.prev=a,this._drawFirst=a,this._requestRedraw(r)}}});function hg(r){return re.canvas?new cg(r):null}var ka=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(r){return document.createElement("<lvml:"+r+' class="lvml">')}}catch{}return function(r){return document.createElement("<"+r+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),jT={_initContainer:function(){this._container=Se("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(mi.prototype._update.call(this),this.fire("update"))},_initPath:function(r){var a=r._container=ka("shape");ge(a,"leaflet-vml-shape "+(this.options.className||"")),a.coordsize="1 1",r._path=ka("path"),a.appendChild(r._path),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){var a=r._container;this._container.appendChild(a),r.options.interactive&&r.addInteractiveTarget(a)},_removePath:function(r){var a=r._container;Ve(a),r.removeInteractiveTarget(a),delete this._layers[d(r)]},_updateStyle:function(r){var a=r._stroke,c=r._fill,f=r.options,g=r._container;g.stroked=!!f.stroke,g.filled=!!f.fill,f.stroke?(a||(a=r._stroke=ka("stroke")),g.appendChild(a),a.weight=f.weight+"px",a.color=f.color,a.opacity=f.opacity,f.dashArray?a.dashStyle=N(f.dashArray)?f.dashArray.join(" "):f.dashArray.replace(/( *, *)/g," "):a.dashStyle="",a.endcap=f.lineCap.replace("butt","flat"),a.joinstyle=f.lineJoin):a&&(g.removeChild(a),r._stroke=null),f.fill?(c||(c=r._fill=ka("fill")),g.appendChild(c),c.color=f.fillColor||f.color,c.opacity=f.fillOpacity):c&&(g.removeChild(c),r._fill=null)},_updateCircle:function(r){var a=r._point.round(),c=Math.round(r._radius),f=Math.round(r._radiusY||c);this._setPath(r,r._empty()?"M0 0":"AL "+a.x+","+a.y+" "+c+","+f+" 0,"+65535*360)},_setPath:function(r,a){r._path.v=a},_bringToFront:function(r){li(r._container)},_bringToBack:function(r){ji(r._container)}},Vu=re.vml?ka:vs,Ra=mi.extend({_initContainer:function(){this._container=Vu("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Vu("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ve(this._container),De(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){mi.prototype._update.call(this);var r=this._bounds,a=r.getSize(),c=this._container;(!this._svgSize||!this._svgSize.equals(a))&&(this._svgSize=a,c.setAttribute("width",a.x),c.setAttribute("height",a.y)),he(c,r.min),c.setAttribute("viewBox",[r.min.x,r.min.y,a.x,a.y].join(" ")),this.fire("update")}},_initPath:function(r){var a=r._path=Vu("path");r.options.className&&ge(a,r.options.className),r.options.interactive&&ge(a,"leaflet-interactive"),this._updateStyle(r),this._layers[d(r)]=r},_addPath:function(r){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(r._path),r.addInteractiveTarget(r._path)},_removePath:function(r){Ve(r._path),r.removeInteractiveTarget(r._path),delete this._layers[d(r)]},_updatePath:function(r){r._project(),r._update()},_updateStyle:function(r){var a=r._path,c=r.options;a&&(c.stroke?(a.setAttribute("stroke",c.color),a.setAttribute("stroke-opacity",c.opacity),a.setAttribute("stroke-width",c.weight),a.setAttribute("stroke-linecap",c.lineCap),a.setAttribute("stroke-linejoin",c.lineJoin),c.dashArray?a.setAttribute("stroke-dasharray",c.dashArray):a.removeAttribute("stroke-dasharray"),c.dashOffset?a.setAttribute("stroke-dashoffset",c.dashOffset):a.removeAttribute("stroke-dashoffset")):a.setAttribute("stroke","none"),c.fill?(a.setAttribute("fill",c.fillColor||c.color),a.setAttribute("fill-opacity",c.fillOpacity),a.setAttribute("fill-rule",c.fillRule||"evenodd")):a.setAttribute("fill","none"))},_updatePoly:function(r,a){this._setPath(r,Qo(r._parts,a))},_updateCircle:function(r){var a=r._point,c=Math.max(Math.round(r._radius),1),f=Math.max(Math.round(r._radiusY),1)||c,g="a"+c+","+f+" 0 1,0 ",y=r._empty()?"M0 0":"M"+(a.x-c)+","+a.y+g+c*2+",0 "+g+-c*2+",0 ";this._setPath(r,y)},_setPath:function(r,a){r._path.setAttribute("d",a)},_bringToFront:function(r){li(r._path)},_bringToBack:function(r){ji(r._path)}});re.vml&&Ra.include(jT);function dg(r){return re.svg||re.vml?new Ra(r):null}Ee.include({getRenderer:function(r){var a=r.options.renderer||this._getPaneRenderer(r.options.pane)||this.options.renderer||this._renderer;return a||(a=this._renderer=this._createRenderer()),this.hasLayer(a)||this.addLayer(a),a},_getPaneRenderer:function(r){if(r==="overlayPane"||r===void 0)return!1;var a=this._paneRenderers[r];return a===void 0&&(a=this._createRenderer({pane:r}),this._paneRenderers[r]=a),a},_createRenderer:function(r){return this.options.preferCanvas&&hg(r)||dg(r)}});var fg=qs.extend({initialize:function(r,a){qs.prototype.initialize.call(this,this._boundsToLatLngs(r),a)},setBounds:function(r){return this.setLatLngs(this._boundsToLatLngs(r))},_boundsToLatLngs:function(r){return r=Le(r),[r.getSouthWest(),r.getNorthWest(),r.getNorthEast(),r.getSouthEast()]}});function WT(r,a){return new fg(r,a)}Ra.create=Vu,Ra.pointsToPath=Qo,pi.geometryToLayer=Ru,pi.coordsToLatLng=id,pi.coordsToLatLngs=Lu,pi.latLngToCoords=rd,pi.latLngsToCoords=Nu,pi.getFeature=$s,pi.asFeature=bu,Ee.mergeOptions({boxZoom:!0});var pg=nn.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane,this._resetStateTimeout=0,r.on("unload",this._destroy,this)},addHooks:function(){oe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){De(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ve(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(r){if(!r.shiftKey||r.which!==1&&r.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Cn(),fa(),this._startPoint=this._map.mouseEventToContainerPoint(r),oe(document,{contextmenu:tn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(r){this._moved||(this._moved=!0,this._box=Se("div","leaflet-zoom-box",this._container),ge(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(r);var a=new ce(this._point,this._startPoint),c=a.getSize();he(this._box,a.min),this._box.style.width=c.x+"px",this._box.style.height=c.y+"px"},_finish:function(){this._moved&&(Ve(this._box),je(this._container,"leaflet-crosshair")),kn(),pa(),De(document,{contextmenu:tn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(r){if(!(r.which!==1&&r.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var a=new Ie(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(a).fire("boxzoomend",{boxZoomBounds:a})}},_onKeyDown:function(r){r.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ee.addInitHook("addHandler","boxZoom",pg),Ee.mergeOptions({doubleClickZoom:!0});var mg=nn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(r){var a=this._map,c=a.getZoom(),f=a.options.zoomDelta,g=r.originalEvent.shiftKey?c-f:c+f;a.options.doubleClickZoom==="center"?a.setZoom(g):a.setZoomAround(r.containerPoint,g)}});Ee.addInitHook("addHandler","doubleClickZoom",mg),Ee.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var gg=nn.extend({addHooks:function(){if(!this._draggable){var r=this._map;this._draggable=new Rn(r._mapPane,r._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),r.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),r.on("zoomend",this._onZoomEnd,this),r.whenReady(this._onZoomEnd,this))}ge(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){je(this._map._container,"leaflet-grab"),je(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var r=this._map;if(r._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var a=Le(this._map.options.maxBounds);this._offsetLimit=ve(this._map.latLngToContainerPoint(a.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(a.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;r.fire("movestart").fire("dragstart"),r.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(r){if(this._map.options.inertia){var a=this._lastTime=+new Date,c=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(c),this._times.push(a),this._prunePositions(a)}this._map.fire("move",r).fire("drag",r)},_prunePositions:function(r){for(;this._positions.length>1&&r-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var r=this._map.getSize().divideBy(2),a=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=a.subtract(r).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(r,a){return r-(r-a)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var r=this._draggable._newPos.subtract(this._draggable._startPos),a=this._offsetLimit;r.x<a.min.x&&(r.x=this._viscousLimit(r.x,a.min.x)),r.y<a.min.y&&(r.y=this._viscousLimit(r.y,a.min.y)),r.x>a.max.x&&(r.x=this._viscousLimit(r.x,a.max.x)),r.y>a.max.y&&(r.y=this._viscousLimit(r.y,a.max.y)),this._draggable._newPos=this._draggable._startPos.add(r)}},_onPreDragWrap:function(){var r=this._worldWidth,a=Math.round(r/2),c=this._initialWorldOffset,f=this._draggable._newPos.x,g=(f-a+c)%r+a-c,y=(f+a+c)%r-a-c,k=Math.abs(g+c)<Math.abs(y+c)?g:y;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=k},_onDragEnd:function(r){var a=this._map,c=a.options,f=!c.inertia||r.noInertia||this._times.length<2;if(a.fire("dragend",r),f)a.fire("moveend");else{this._prunePositions(+new Date);var g=this._lastPos.subtract(this._positions[0]),y=(this._lastTime-this._times[0])/1e3,k=c.easeLinearity,z=g.multiplyBy(k/y),j=z.distanceTo([0,0]),K=Math.min(c.inertiaMaxSpeed,j),ee=z.multiplyBy(K/j),ae=K/(c.inertiaDeceleration*k),we=ee.multiplyBy(-ae/2).round();!we.x&&!we.y?a.fire("moveend"):(we=a._limitOffset(we,a.options.maxBounds),O(function(){a.panBy(we,{duration:ae,easeLinearity:k,noMoveStart:!0,animate:!0})}))}}});Ee.addInitHook("addHandler","dragging",gg),Ee.mergeOptions({keyboard:!0,keyboardPanDelta:80});var _g=nn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(r){this._map=r,this._setPanDelta(r.options.keyboardPanDelta),this._setZoomDelta(r.options.zoomDelta)},addHooks:function(){var r=this._map._container;r.tabIndex<=0&&(r.tabIndex="0"),oe(r,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),De(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var r=document.body,a=document.documentElement,c=r.scrollTop||a.scrollTop,f=r.scrollLeft||a.scrollLeft;this._map._container.focus(),window.scrollTo(f,c)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(r){var a=this._panKeys={},c=this.keyCodes,f,g;for(f=0,g=c.left.length;f<g;f++)a[c.left[f]]=[-1*r,0];for(f=0,g=c.right.length;f<g;f++)a[c.right[f]]=[r,0];for(f=0,g=c.down.length;f<g;f++)a[c.down[f]]=[0,r];for(f=0,g=c.up.length;f<g;f++)a[c.up[f]]=[0,-1*r]},_setZoomDelta:function(r){var a=this._zoomKeys={},c=this.keyCodes,f,g;for(f=0,g=c.zoomIn.length;f<g;f++)a[c.zoomIn[f]]=r;for(f=0,g=c.zoomOut.length;f<g;f++)a[c.zoomOut[f]]=-r},_addHooks:function(){oe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){De(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(r){if(!(r.altKey||r.ctrlKey||r.metaKey)){var a=r.keyCode,c=this._map,f;if(a in this._panKeys){if(!c._panAnim||!c._panAnim._inProgress)if(f=this._panKeys[a],r.shiftKey&&(f=X(f).multiplyBy(3)),c.options.maxBounds&&(f=c._limitOffset(X(f),c.options.maxBounds)),c.options.worldCopyJump){var g=c.wrapLatLng(c.unproject(c.project(c.getCenter()).add(f)));c.panTo(g)}else c.panBy(f)}else if(a in this._zoomKeys)c.setZoom(c.getZoom()+(r.shiftKey?3:1)*this._zoomKeys[a]);else if(a===27&&c._popup&&c._popup.options.closeOnEscapeKey)c.closePopup();else return;tn(r)}}});Ee.addInitHook("addHandler","keyboard",_g),Ee.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var vg=nn.extend({addHooks:function(){oe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){De(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(r){var a=Eu(r),c=this._map.options.wheelDebounceTime;this._delta+=a,this._lastMousePos=this._map.mouseEventToContainerPoint(r),this._startTime||(this._startTime=+new Date);var f=Math.max(c-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),f),tn(r)},_performZoom:function(){var r=this._map,a=r.getZoom(),c=this._map.options.zoomSnap||0;r._stop();var f=this._delta/(this._map.options.wheelPxPerZoomLevel*4),g=4*Math.log(2/(1+Math.exp(-Math.abs(f))))/Math.LN2,y=c?Math.ceil(g/c)*c:g,k=r._limitZoom(a+(this._delta>0?y:-y))-a;this._delta=0,this._startTime=null,k&&(r.options.scrollWheelZoom==="center"?r.setZoom(a+k):r.setZoomAround(this._lastMousePos,a+k))}});Ee.addInitHook("addHandler","scrollWheelZoom",vg);var HT=600;Ee.mergeOptions({tapHold:re.touchNative&&re.safari&&re.mobile,tapTolerance:15});var yg=nn.extend({addHooks:function(){oe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){De(this._map._container,"touchstart",this._onDown,this)},_onDown:function(r){if(clearTimeout(this._holdTimeout),r.touches.length===1){var a=r.touches[0];this._startPos=this._newPos=new q(a.clientX,a.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(oe(document,"touchend",qe),oe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",a))},this),HT),oe(document,"touchend touchcancel contextmenu",this._cancel,this),oe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function r(){De(document,"touchend",qe),De(document,"touchend touchcancel",r)},_cancel:function(){clearTimeout(this._holdTimeout),De(document,"touchend touchcancel contextmenu",this._cancel,this),De(document,"touchmove",this._onMove,this)},_onMove:function(r){var a=r.touches[0];this._newPos=new q(a.clientX,a.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(r,a){var c=new MouseEvent(r,{bubbles:!0,cancelable:!0,view:window,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY});c._simulated=!0,a.target.dispatchEvent(c)}});Ee.addInitHook("addHandler","tapHold",yg),Ee.mergeOptions({touchZoom:re.touch,bounceAtZoomLimits:!0});var wg=nn.extend({addHooks:function(){ge(this._map._container,"leaflet-touch-zoom"),oe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){je(this._map._container,"leaflet-touch-zoom"),De(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(r){var a=this._map;if(!(!r.touches||r.touches.length!==2||a._animatingZoom||this._zooming)){var c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]);this._centerPoint=a.getSize()._divideBy(2),this._startLatLng=a.containerPointToLatLng(this._centerPoint),a.options.touchZoom!=="center"&&(this._pinchStartLatLng=a.containerPointToLatLng(c.add(f)._divideBy(2))),this._startDist=c.distanceTo(f),this._startZoom=a.getZoom(),this._moved=!1,this._zooming=!0,a._stop(),oe(document,"touchmove",this._onTouchMove,this),oe(document,"touchend touchcancel",this._onTouchEnd,this),qe(r)}},_onTouchMove:function(r){if(!(!r.touches||r.touches.length!==2||!this._zooming)){var a=this._map,c=a.mouseEventToContainerPoint(r.touches[0]),f=a.mouseEventToContainerPoint(r.touches[1]),g=c.distanceTo(f)/this._startDist;if(this._zoom=a.getScaleZoom(g,this._startZoom),!a.options.bounceAtZoomLimits&&(this._zoom<a.getMinZoom()&&g<1||this._zoom>a.getMaxZoom()&&g>1)&&(this._zoom=a._limitZoom(this._zoom)),a.options.touchZoom==="center"){if(this._center=this._startLatLng,g===1)return}else{var y=c._add(f)._divideBy(2)._subtract(this._centerPoint);if(g===1&&y.x===0&&y.y===0)return;this._center=a.unproject(a.project(this._pinchStartLatLng,this._zoom).subtract(y),this._zoom)}this._moved||(a._moveStart(!0,!1),this._moved=!0),M(this._animRequest);var k=l(a._move,a,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=O(k,this,!0),qe(r)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,M(this._animRequest),De(document,"touchmove",this._onTouchMove,this),De(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ee.addInitHook("addHandler","touchZoom",wg),Ee.BoxZoom=pg,Ee.DoubleClickZoom=mg,Ee.Drag=gg,Ee.Keyboard=_g,Ee.ScrollWheelZoom=vg,Ee.TapHold=yg,Ee.TouchZoom=wg,n.Bounds=ce,n.Browser=re,n.CRS=ht,n.Canvas=cg,n.Circle=nd,n.CircleMarker=ku,n.Class=Ye,n.Control=$t,n.DivIcon=ag,n.DivOverlay=qn,n.DomEvent=Tu,n.DomUtil=yu,n.Draggable=Rn,n.Evented=Ft,n.FeatureGroup=et,n.GeoJSON=pi,n.GridLayer=Ca,n.Handler=nn,n.Icon=Hn,n.ImageOverlay=Ou,n.LatLng=ye,n.LatLngBounds=Ie,n.Layer=Me,n.LayerGroup=$e,n.LineUtil=E,n.Map=Ee,n.Marker=Cu,n.Mixin=Wr,n.Path=Zi,n.Point=q,n.PolyUtil=js,n.Polygon=qs,n.Polyline=fi,n.Popup=Du,n.PosAnimation=Ea,n.Projection=J,n.Rectangle=fg,n.Renderer=mi,n.SVG=Ra,n.SVGOverlay=og,n.TileLayer=Gs,n.Tooltip=Mu,n.Transformation=zi,n.Util=A,n.VideoOverlay=sg,n.bind=l,n.bounds=ve,n.canvas=hg,n.circle=RT,n.circleMarker=kT,n.control=zt,n.divIcon=zT,n.extend=s,n.featureGroup=Hs,n.geoJSON=rg,n.geoJson=bT,n.gridLayer=UT,n.icon=AT,n.imageOverlay=OT,n.latLng=fe,n.latLngBounds=Le,n.layerGroup=Gi,n.map=Ms,n.marker=CT,n.point=X,n.polygon=NT,n.polyline=LT,n.popup=VT,n.rectangle=WT,n.setOptions=B,n.stamp=d,n.svg=dg,n.svgOverlay=MT,n.tileLayer=lg,n.tooltip=FT,n.transformation=ri,n.version=i,n.videoOverlay=DT;var qT=window.L;n.noConflict=function(){return window.L=qT,this},window.L=n})})(jf,jf.exports);var bP=jf.exports;const za=Kv(bP),OP=({visits:t})=>{const e=_e.useRef(null),n=_e.useRef(null);return _e.useEffect(()=>{if(!(!e.current||n.current))return n.current=za.map(e.current).setView([-18.9186,-48.2772],6),za.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap"}).addTo(n.current),()=>{var i;(i=n.current)==null||i.remove(),n.current=null}},[]),_e.useEffect(()=>{if(!n.current)return;n.current.eachLayer(s=>{var o;s instanceof za.Marker&&((o=n.current)==null||o.removeLayer(s))});const i=[];t.forEach(s=>{s.location&&(za.marker([s.location.latitude,s.location.longitude]).bindPopup(`<b>${s.cooperado.name}</b><br>${s.summary}`).addTo(n.current),i.push([s.location.latitude,s.location.longitude]))}),i.length>0&&n.current.fitBounds(za.latLngBounds(i),{padding:[20,20]})},[t]),b.jsx("div",{ref:e,className:"w-full h-full"})},DP=({user:t,onSave:e,onClose:n})=>{const[i,s]=_e.useState({name:"",email:"",password:"",role:"Gerente",agency:""});_e.useEffect(()=>{t&&s({name:t.name,email:t.email,password:t.password,role:t.role,agency:t.agency})},[t]);const o=m=>{const{name:v,value:w}=m.target;s(I=>({...I,[v]:w}))},l=m=>{m.preventDefault(),e(t?{...i,id:t.id}:{...i,id:""})},h={backgroundColor:"#4b5563",color:"white",border:"none",borderRadius:"0.25rem",padding:"0.5rem 0.75rem",width:"100%",boxSizing:"border-box"},d={display:"block",color:"#d1d5db",fontSize:"0.875rem",fontWeight:700,marginBottom:"0.5rem"};return b.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:50,padding:"1rem"},children:b.jsx("div",{style:{backgroundColor:"#374151",borderRadius:"0.5rem",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)",width:"100%",maxWidth:"32rem"},children:b.jsxs("form",{onSubmit:l,style:{padding:"1.5rem",color:"white"},children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[b.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"#e5e7eb",margin:0},children:t?"Editar Usurio":"Novo Usurio"}),b.jsx("button",{type:"button",onClick:n,style:{color:"#9ca3af",background:"none",border:"none",cursor:"pointer",fontSize:"1.25rem"},children:"X"})]}),b.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[b.jsxs("div",{children:[b.jsx("label",{style:d,children:"Nome"}),b.jsx("input",{type:"text",name:"name",value:i.name,onChange:o,required:!0,style:h})]}),b.jsxs("div",{children:[b.jsx("label",{style:d,children:"Email"}),b.jsx("input",{type:"email",name:"email",value:i.email,onChange:o,required:!0,style:h})]}),!t&&b.jsxs("div",{children:[b.jsx("label",{style:d,children:"Senha Provisria"}),b.jsx("input",{type:"password",name:"password",value:i.password,onChange:o,required:!0,style:h})]}),b.jsxs("div",{children:[b.jsx("label",{style:d,children:"Nvel de Acesso"}),b.jsxs("select",{name:"role",value:i.role,onChange:o,style:h,children:[b.jsx("option",{value:"Gerente",children:"Gerente"}),b.jsx("option",{value:"Desenvolvedor",children:"Desenvolvedor"})]})]}),b.jsxs("div",{children:[b.jsx("label",{style:d,children:"Agncia (PA)"}),b.jsx("input",{type:"text",name:"agency",value:i.agency,onChange:o,required:!0,style:h})]})]}),b.jsxs("div",{style:{marginTop:"2rem",display:"flex",justifyContent:"flex-end",gap:"1rem"},children:[b.jsx("button",{type:"button",onClick:n,style:{backgroundColor:"#6b7280",color:"white",fontWeight:"bold",padding:"0.5rem 1rem",borderRadius:"0.25rem",border:"none",cursor:"pointer"},children:"Cancelar"}),b.jsx("button",{type:"submit",style:{backgroundColor:"#16a34a",color:"white",fontWeight:"bold",padding:"0.5rem 1rem",borderRadius:"0.25rem",border:"none",cursor:"pointer"},children:"Salvar"})]})]})})})},MP=({cooperado:t,managers:e,onSave:n,onClose:i})=>{const[s,o]=_e.useState({name:"",document:"",isPortfolio:!0,managerName:""});_e.useEffect(()=>{o(t?{name:t.name,document:t.document,isPortfolio:t.isPortfolio,managerName:t.managerName||""}:{name:"",document:"",isPortfolio:!0,managerName:""})},[t]);const l=w=>{const{name:I,value:D}=w.target;o(U=>({...U,[I]:D}))},h=w=>{o(I=>({...I,isPortfolio:w.target.checked}))},d=w=>{w.preventDefault(),n({...s})},m={backgroundColor:"#4b5563",color:"white",border:"none",borderRadius:"0.25rem",padding:"0.5rem 0.75rem",width:"100%",boxSizing:"border-box"},v={display:"block",color:"#d1d5db",fontSize:"0.875rem",fontWeight:700,marginBottom:"0.5rem"};return b.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:50,padding:"1rem"},children:b.jsx("div",{style:{backgroundColor:"#374151",borderRadius:"0.5rem",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1)",width:"100%",maxWidth:"32rem"},children:b.jsxs("form",{onSubmit:d,style:{padding:"1.5rem",color:"white"},children:[b.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"1rem"},children:[b.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:700,color:"#e5e7eb",margin:0},children:t?"Editar Cooperado":"Novo Cooperado"}),b.jsx("button",{type:"button",onClick:i,style:{color:"#9ca3af",background:"none",border:"none",cursor:"pointer",fontSize:"1.25rem"},children:"X"})]}),b.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1rem"},children:[b.jsxs("div",{children:[b.jsx("label",{style:v,children:"Nome / Razo Social"}),b.jsx("input",{type:"text",name:"name",value:s.name,onChange:l,required:!0,style:m})]}),b.jsxs("div",{children:[b.jsx("label",{style:v,children:"CPF / CNPJ"}),b.jsx("input",{type:"text",name:"document",value:s.document,onChange:l,required:!0,style:m})]}),b.jsxs("div",{children:[b.jsx("label",{style:v,children:"Gerente Responsvel"}),b.jsxs("select",{name:"managerName",value:s.managerName,onChange:l,style:m,children:[b.jsx("option",{value:"",children:"Selecione um gerente..."}),e.map(w=>b.jsxs("option",{value:w.name,children:[w.name," (",w.agency,")"]},w.id))]})]}),b.jsxs("div",{style:{display:"flex",alignItems:"center",marginTop:"0.5rem"},children:[b.jsx("input",{type:"checkbox",id:"isPortfolio",checked:s.isPortfolio,onChange:h,style:{height:"1.2rem",width:"1.2rem",cursor:"pointer"}}),b.jsx("label",{htmlFor:"isPortfolio",style:{marginLeft:"0.75rem",display:"block",color:"#d1d5db",fontSize:"0.9rem",cursor:"pointer"},children:"Cooperado de Carteira (Monitorado)"})]})]}),b.jsxs("div",{style:{marginTop:"2rem",display:"flex",justifyContent:"flex-end",gap:"1rem"},children:[b.jsx("button",{type:"button",onClick:i,style:{backgroundColor:"#6b7280",color:"white",fontWeight:"bold",padding:"0.6rem 1.2rem",borderRadius:"0.25rem",border:"none",cursor:"pointer"},children:"Cancelar"}),b.jsx("button",{type:"submit",style:{backgroundColor:"#16a34a",color:"white",fontWeight:"bold",padding:"0.6rem 1.2rem",borderRadius:"0.25rem",border:"none",cursor:"pointer"},children:"Salvar Alteraes"})]})]})})})},VP=t=>{const[e,n]=_e.useState("map"),[i,s]=_e.useState(null),[o,l]=_e.useState(!1),[h,d]=_e.useState(null),[m,v]=_e.useState(!1);return b.jsxs("div",{className:"min-h-screen bg-[#111827] text-white font-sans",children:[b.jsxs("header",{className:"bg-[#1f2937] border-b border-gray-700 h-16 flex items-center px-6 justify-between sticky top-0 z-50",children:[b.jsxs("div",{className:"flex items-center gap-4",children:[b.jsx(Nh,{style:{filter:"brightness(1.5)",height:"32px"}}),b.jsx("h1",{className:"font-bold text-lg hidden sm:block",children:"Console Sicoob Dev"})]}),b.jsxs("div",{className:"flex gap-2",children:[b.jsx("button",{onClick:t.onGenerateAISuggestions,title:t.hasAIKey?"Gerar sugestes com IA":"IA no configurada",className:`${t.hasAIKey?"bg-purple-600 hover:bg-purple-700":"bg-gray-600 cursor-not-allowed opacity-50"} text-xs px-4 py-2 rounded-lg font-bold transition-all shadow-lg`,children:t.hasAIKey?" Analisar com IA":" IA Indisponvel"}),b.jsx("button",{onClick:t.onLogout,className:"bg-red-600 hover:bg-red-700 text-xs px-4 py-2 rounded-lg font-bold",children:"Sair"})]})]}),b.jsxs("nav",{className:"flex bg-[#1f2937] border-b border-gray-700 sticky top-16 z-40",children:[b.jsx("button",{onClick:()=>n("map"),className:`px-6 py-4 text-sm font-bold border-b-2 transition-colors ${e==="map"?"border-blue-500 text-blue-500":"border-transparent text-gray-400 hover:text-white"}`,children:" Mapa Global"}),b.jsx("button",{onClick:()=>n("users"),className:`px-6 py-4 text-sm font-bold border-b-2 transition-colors ${e==="users"?"border-blue-500 text-blue-500":"border-transparent text-gray-400 hover:text-white"}`,children:" Gesto de Acessos"}),b.jsx("button",{onClick:()=>n("cooperados"),className:`px-6 py-4 text-sm font-bold border-b-2 transition-colors ${e==="cooperados"?"border-blue-500 text-blue-500":"border-transparent text-gray-400 hover:text-white"}`,children:" Base de Dados"})]}),b.jsxs("main",{className:"p-6 max-w-7xl mx-auto",children:[e==="map"&&b.jsx("div",{className:"bg-[#1f2937] rounded-2xl border border-gray-700 overflow-hidden shadow-2xl h-[70vh]",children:b.jsx(OP,{visits:t.visits})}),e==="users"&&b.jsxs("div",{className:"bg-[#1f2937] rounded-2xl border border-gray-700 p-8",children:[b.jsxs("div",{className:"flex justify-between items-center mb-8",children:[b.jsx("h2",{className:"text-2xl font-bold",children:"Gesto de Usurios"}),b.jsx("button",{onClick:()=>{s(null),l(!0)},className:"bg-green-600 hover:bg-green-700 px-6 py-2 rounded-xl font-bold text-sm",children:"+ Novo Usurio"})]}),b.jsx("div",{className:"overflow-x-auto",children:b.jsxs("table",{className:"w-full text-left",children:[b.jsx("thead",{className:"text-gray-400 text-xs uppercase tracking-widest border-b border-gray-700",children:b.jsxs("tr",{children:[b.jsx("th",{className:"py-4",children:"Nome"}),b.jsx("th",{className:"py-4",children:"Email"}),b.jsx("th",{className:"py-4",children:"Agncia"}),b.jsx("th",{className:"py-4 text-right",children:"Aes"})]})}),b.jsx("tbody",{className:"divide-y divide-gray-800",children:t.users.map(w=>b.jsxs("tr",{className:"hover:bg-gray-800/50 transition-colors",children:[b.jsx("td",{className:"py-4 font-bold",children:w.name}),b.jsx("td",{className:"py-4 text-gray-400 text-sm",children:w.email}),b.jsx("td",{className:"py-4 text-sm",children:w.agency}),b.jsxs("td",{className:"py-4 text-right space-x-4",children:[b.jsx("button",{onClick:()=>{s(w),l(!0)},className:"text-blue-400 hover:text-blue-300 font-bold text-xs",children:"EDITAR"}),b.jsx("button",{onClick:()=>t.onDeleteUser(w.id),className:"text-red-500 hover:text-red-400 font-bold text-xs",children:"EXCLUIR"})]})]},w.id))})]})})]}),e==="cooperados"&&b.jsxs("div",{className:"bg-[#1f2937] rounded-2xl border border-gray-700 p-8",children:[b.jsxs("div",{className:"flex justify-between items-center mb-8",children:[b.jsx("h2",{className:"text-2xl font-bold",children:"Cooperados"}),b.jsx("button",{onClick:()=>{d(null),v(!0)},className:"bg-green-600 hover:bg-green-700 px-6 py-2 rounded-xl font-bold text-sm",children:"+ Novo Cooperado"})]}),b.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.cooperados.map(w=>b.jsxs("div",{className:"p-5 bg-gray-800 rounded-xl border border-gray-700 hover:border-blue-500/50 transition-all cursor-pointer group",onClick:()=>{d(w),v(!0)},children:[b.jsx("p",{className:"font-bold text-lg group-hover:text-blue-400 transition-colors",children:w.name}),b.jsx("p",{className:"text-xs font-mono text-gray-500 mt-1 uppercase",children:w.document}),b.jsxs("p",{className:"text-xs text-gray-400 mt-4 border-t border-gray-700 pt-3",children:["Gerente: ",b.jsx("span",{className:"text-gray-200",children:w.managerName||"No atribudo"})]})]},w.id))})]})]}),o&&b.jsx(DP,{user:i,onSave:w=>{i?t.onUpdateUser(i.id,w):t.onAddUser(w),l(!1)},onClose:()=>l(!1)}),m&&b.jsx(MP,{cooperado:h,managers:t.users,onSave:w=>{h?t.onUpdateCooperado(h.id,w):t.onAddCooperado(w),v(!1)},onClose:()=>v(!1)})]})},FP=({user:t,onSave:e,onClose:n})=>{const[i,s]=_e.useState(""),[o,l]=_e.useState(""),[h,d]=_e.useState(""),m=v=>{if(v.preventDefault(),i!==o){d("Senhas no coincidem.");return}if(i.length<6){d("Mnimo 6 caracteres.");return}e(t.id,i)};return b.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center p-4 z-50",children:b.jsxs("div",{className:"bg-[#1f2937] rounded-xl shadow-2xl w-full max-w-sm p-6 text-white",children:[b.jsxs("div",{className:"flex justify-between mb-4",children:[b.jsxs("h2",{className:"text-lg font-bold",children:["Alterar Senha: ",t.name]}),b.jsx("button",{onClick:n,className:"text-gray-400",children:""})]}),h&&b.jsx("p",{className:"text-red-400 text-xs mb-3",children:h}),b.jsxs("form",{onSubmit:m,className:"space-y-4",children:[b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:"Nova Senha"}),b.jsx("input",{type:"password",className:"w-full bg-gray-700 p-2 rounded outline-none focus:ring-1 focus:ring-yellow-500",value:i,onChange:v=>s(v.target.value),required:!0})]}),b.jsxs("div",{children:[b.jsx("label",{className:"block text-xs font-bold text-gray-400 mb-1",children:"Confirmar Senha"}),b.jsx("input",{type:"password",className:"w-full bg-gray-700 p-2 rounded outline-none focus:ring-1 focus:ring-yellow-500",value:o,onChange:v=>l(v.target.value),required:!0})]}),b.jsxs("div",{className:"flex gap-2 pt-2",children:[b.jsx("button",{type:"button",onClick:n,className:"flex-1 bg-gray-600 py-2 rounded font-bold text-sm",children:"Cancelar"}),b.jsx("button",{type:"submit",className:"flex-1 bg-yellow-600 py-2 rounded font-bold text-sm text-gray-900",children:"Salvar"})]})]})]})})};var b_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u0=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let s=t.charCodeAt(i);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},zP=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[i++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],l=t[n++],h=t[n++],d=((s&7)<<18|(o&63)<<12|(l&63)<<6|h&63)-65536;e[i++]=String.fromCharCode(55296+(d>>10)),e[i++]=String.fromCharCode(56320+(d&1023))}else{const o=t[n++],l=t[n++];e[i++]=String.fromCharCode((s&15)<<12|(o&63)<<6|l&63)}}return e.join("")},c0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<t.length;s+=3){const o=t[s],l=s+1<t.length,h=l?t[s+1]:0,d=s+2<t.length,m=d?t[s+2]:0,v=o>>2,w=(o&3)<<4|h>>4;let I=(h&15)<<2|m>>6,D=m&63;d||(D=64,l||(I=64)),i.push(n[v],n[w],n[I],n[D])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(u0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):zP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],h=s<t.length?n[t.charAt(s)]:0;++s;const m=s<t.length?n[t.charAt(s)]:64;++s;const w=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||h==null||m==null||w==null)throw new UP;const I=o<<2|h>>4;if(i.push(I),m!==64){const D=h<<4&240|m>>2;if(i.push(D),w!==64){const U=m<<6&192|w;i.push(U)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class UP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BP=function(t){const e=u0(t);return c0.encodeByteArray(e,!0)},eh=function(t){return BP(t).replace(/\./g,"")},h0=function(t){try{return c0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WP=()=>jP().__FIREBASE_DEFAULTS__,HP=()=>{if(typeof process>"u"||typeof b_>"u")return;const t=b_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},qP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&h0(t[1]);return e&&JSON.parse(e)},bh=()=>{try{return WP()||HP()||qP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},d0=t=>{var e,n;return(n=(e=bh())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},$P=t=>{const e=d0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},f0=()=>{var t;return(t=bh())===null||t===void 0?void 0:t.config},p0=t=>{var e;return(e=bh())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZP(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[eh(JSON.stringify(n)),eh(JSON.stringify(l)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function KP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vt())}function QP(){var t;const e=(t=bh())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function YP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function XP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function JP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ex(){const t=Vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function tx(){return!QP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function nx(){try{return typeof indexedDB=="object"}catch{return!1}}function ix(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="FirebaseError";class Vi extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=rx,Object.setPrototypeOf(this,Vi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Wl.prototype.create)}}class Wl{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],l=o?sx(o,i):"Error",h=`${this.serviceName}: ${l} (${s}).`;return new Vi(s,h,i)}}function sx(t,e){return t.replace(ox,(n,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const ox=/\{\$([^}]+)}/g;function ax(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function th(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const s of n){if(!i.includes(s))return!1;const o=t[s],l=e[s];if(O_(o)&&O_(l)){if(!th(o,l))return!1}else if(o!==l)return!1}for(const s of i)if(!n.includes(s))return!1;return!0}function O_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function $a(t){const e={};return t.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,o]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(o)}}),e}function Ga(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function lx(t,e){const n=new ux(t,e);return n.subscribe.bind(n)}class ux{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,i){let s;if(e===void 0&&n===void 0&&i===void 0)throw new Error("Missing Observer.");cx(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:i},s.next===void 0&&(s.next=bd),s.error===void 0&&(s.error=bd),s.complete===void 0&&(s.complete=bd);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cx(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function bd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t){return t&&t._delegate?t._delegate:t}class os{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new GP;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(fx(e))try{this.getOrInitializeService({instanceIdentifier:Gr})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});i.resolve(o)}catch{}}}}clearInstance(e=Gr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Gr){return this.instances.has(e)}getOptions(e=Gr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[o,l]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(o);i===h&&l.resolve(s)}return s}onInit(e,n){var i;const s=this.normalizeInstanceIdentifier(n),o=(i=this.onInitCallbacks.get(s))!==null&&i!==void 0?i:new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const s of i)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:dx(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Gr){return this.component?this.component.multipleInstances?e:Gr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function dx(t){return t===Gr?void 0:t}function fx(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class px{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new hx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const mx={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},gx=xe.INFO,_x={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},vx=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),s=_x[e];if(s)console[s](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class um{constructor(e){this.name=e,this._logLevel=gx,this._logHandler=vx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?mx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const yx=(t,e)=>e.some(n=>t instanceof n);let D_,M_;function wx(){return D_||(D_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Ex(){return M_||(M_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const m0=new WeakMap,Wf=new WeakMap,g0=new WeakMap,Od=new WeakMap,cm=new WeakMap;function Tx(t){const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",l)},o=()=>{n(gr(t.result)),s()},l=()=>{i(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",l)});return e.then(n=>{n instanceof IDBCursor&&m0.set(n,t)}).catch(()=>{}),cm.set(e,t),e}function Ix(t){if(Wf.has(t))return;const e=new Promise((n,i)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",l),t.removeEventListener("abort",l)},o=()=>{n(),s()},l=()=>{i(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",l),t.addEventListener("abort",l)});Wf.set(t,e)}let Hf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||g0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return gr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Sx(t){Hf=t(Hf)}function Px(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(Dd(this),e,...n);return g0.set(i,e.sort?e.sort():[e]),gr(i)}:Ex().includes(t)?function(...e){return t.apply(Dd(this),e),gr(m0.get(this))}:function(...e){return gr(t.apply(Dd(this),e))}}function xx(t){return typeof t=="function"?Px(t):(t instanceof IDBTransaction&&Ix(t),yx(t,wx())?new Proxy(t,Hf):t)}function gr(t){if(t instanceof IDBRequest)return Tx(t);if(Od.has(t))return Od.get(t);const e=xx(t);return e!==t&&(Od.set(t,e),cm.set(e,t)),e}const Dd=t=>cm.get(t);function Ax(t,e,{blocked:n,upgrade:i,blocking:s,terminated:o}={}){const l=indexedDB.open(t,e),h=gr(l);return i&&l.addEventListener("upgradeneeded",d=>{i(gr(l.result),d.oldVersion,d.newVersion,gr(l.transaction),d)}),n&&l.addEventListener("blocked",d=>n(d.oldVersion,d.newVersion,d)),h.then(d=>{o&&d.addEventListener("close",()=>o()),s&&d.addEventListener("versionchange",m=>s(m.oldVersion,m.newVersion,m))}).catch(()=>{}),h}const Cx=["get","getKey","getAll","getAllKeys","count"],kx=["put","add","delete","clear"],Md=new Map;function V_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Md.get(e))return Md.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,s=kx.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(s||Cx.includes(n)))return;const o=async function(l,...h){const d=this.transaction(l,s?"readwrite":"readonly");let m=d.store;return i&&(m=m.index(h.shift())),(await Promise.all([m[n](...h),s&&d.done]))[0]};return Md.set(e,o),o}Sx(t=>({...t,get:(e,n,i)=>V_(e,n)||t.get(e,n,i),has:(e,n)=>!!V_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Lx(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function Lx(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qf="@firebase/app",F_="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ni=new um("@firebase/app"),Nx="@firebase/app-compat",bx="@firebase/analytics-compat",Ox="@firebase/analytics",Dx="@firebase/app-check-compat",Mx="@firebase/app-check",Vx="@firebase/auth",Fx="@firebase/auth-compat",zx="@firebase/database",Ux="@firebase/data-connect",Bx="@firebase/database-compat",jx="@firebase/functions",Wx="@firebase/functions-compat",Hx="@firebase/installations",qx="@firebase/installations-compat",$x="@firebase/messaging",Gx="@firebase/messaging-compat",Zx="@firebase/performance",Kx="@firebase/performance-compat",Qx="@firebase/remote-config",Yx="@firebase/remote-config-compat",Xx="@firebase/storage",Jx="@firebase/storage-compat",eA="@firebase/firestore",tA="@firebase/vertexai-preview",nA="@firebase/firestore-compat",iA="firebase",rA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f="[DEFAULT]",sA={[qf]:"fire-core",[Nx]:"fire-core-compat",[Ox]:"fire-analytics",[bx]:"fire-analytics-compat",[Mx]:"fire-app-check",[Dx]:"fire-app-check-compat",[Vx]:"fire-auth",[Fx]:"fire-auth-compat",[zx]:"fire-rtdb",[Ux]:"fire-data-connect",[Bx]:"fire-rtdb-compat",[jx]:"fire-fn",[Wx]:"fire-fn-compat",[Hx]:"fire-iid",[qx]:"fire-iid-compat",[$x]:"fire-fcm",[Gx]:"fire-fcm-compat",[Zx]:"fire-perf",[Kx]:"fire-perf-compat",[Qx]:"fire-rc",[Yx]:"fire-rc-compat",[Xx]:"fire-gcs",[Jx]:"fire-gcs-compat",[eA]:"fire-fst",[nA]:"fire-fst-compat",[tA]:"fire-vertex","fire-js":"fire-js",[iA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lo=new Map,Gf=new Map,Zf=new Map;function z_(t,e){try{t.container.addComponent(e)}catch(n){Ni.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function No(t){const e=t.name;if(Zf.has(e))return Ni.debug(`There were multiple attempts to register component ${e}.`),!1;Zf.set(e,t);for(const n of Lo.values())z_(n,t);for(const n of Gf.values())z_(n,t);return!0}function hm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Kn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_r=new Wl("app","Firebase",oA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new os("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=rA;function dm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:$f,automaticDataCollectionEnabled:!1},e),s=i.name;if(typeof s!="string"||!s)throw _r.create("bad-app-name",{appName:String(s)});if(n||(n=f0()),!n)throw _r.create("no-options");const o=Lo.get(s);if(o){if(th(n,o.options)&&th(i,o.config))return o;throw _r.create("duplicate-app",{appName:s})}const l=new px(s);for(const d of Zf.values())l.addComponent(d);const h=new aA(n,i,l);return Lo.set(s,h),h}function _0(t=$f){const e=Lo.get(t);if(!e&&t===$f&&f0())return dm();if(!e)throw _r.create("no-app",{appName:t});return e}async function lA(t){let e=!1;const n=t.name;Lo.has(n)?(e=!0,Lo.delete(n)):Gf.has(n)&&t.decRefCount()<=0&&(Gf.delete(n),e=!0),e&&(await Promise.all(t.container.getProviders().map(i=>i.delete())),t.isDeleted=!0)}function vr(t,e,n){var i;let s=(i=sA[t])!==null&&i!==void 0?i:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const h=[`Unable to register library "${s}" with version "${e}":`];o&&h.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&h.push("and"),l&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ni.warn(h.join(" "));return}No(new os(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uA="firebase-heartbeat-database",cA=1,kl="firebase-heartbeat-store";let Vd=null;function v0(){return Vd||(Vd=Ax(uA,cA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(kl)}catch(n){console.warn(n)}}}}).catch(t=>{throw _r.create("idb-open",{originalErrorMessage:t.message})})),Vd}async function hA(t){try{const n=(await v0()).transaction(kl),i=await n.objectStore(kl).get(y0(t));return await n.done,i}catch(e){if(e instanceof Vi)Ni.warn(e.message);else{const n=_r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ni.warn(n.message)}}}async function U_(t,e){try{const i=(await v0()).transaction(kl,"readwrite");await i.objectStore(kl).put(e,y0(t)),await i.done}catch(n){if(n instanceof Vi)Ni.warn(n.message);else{const i=_r.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ni.warn(i.message)}}}function y0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=1024,fA=30*24*60*60*1e3;class pA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=B_();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(l=>l.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(l=>{const h=new Date(l.date).valueOf();return Date.now()-h<=fA}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Ni.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=B_(),{heartbeatsToSend:i,unsentEntries:s}=mA(this._heartbeatsCache.heartbeats),o=eh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return Ni.warn(n),""}}}function B_(){return new Date().toISOString().substring(0,10)}function mA(t,e=dA){const n=[];let i=t.slice();for(const s of t){const o=n.find(l=>l.agent===s.agent);if(o){if(o.dates.push(s.date),j_(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),j_(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class gA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nx()?ix().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return U_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return U_(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function j_(t){return eh(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _A(t){No(new os("platform-logger",e=>new Rx(e),"PRIVATE")),No(new os("heartbeat",e=>new pA(e),"PRIVATE")),vr(qf,F_,t),vr(qf,F_,"esm2017"),vr("fire-js","")}_A("");var vA="firebase",yA="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vr(vA,yA,"app");function fm(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&Object.prototype.propertyIsEnumerable.call(t,i[s])&&(n[i[s]]=t[i[s]]);return n}function w0(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wA=w0,E0=new Wl("auth","Firebase",w0());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh=new um("@firebase/auth");function EA(t,...e){nh.logLevel<=xe.WARN&&nh.warn(`Auth (${Wo}): ${t}`,...e)}function Ec(t,...e){nh.logLevel<=xe.ERROR&&nh.error(`Auth (${Wo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t,...e){throw pm(t,...e)}function Xn(t,...e){return pm(t,...e)}function T0(t,e,n){const i=Object.assign(Object.assign({},wA()),{[e]:n});return new Wl("auth","Firebase",i).create(e,{appName:t.name})}function xi(t){return T0(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function pm(t,...e){if(typeof t!="string"){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return E0.create(t,...e)}function ue(t,e,...n){if(!t)throw pm(e,...n)}function Ti(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ec(e),new Error(e)}function bi(t,e){t||Ti(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function TA(){return W_()==="http:"||W_()==="https:"}function W_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TA()||XP()||"connection"in navigator)?navigator.onLine:!0}function SA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,n){this.shortDelay=e,this.longDelay=n,bi(n>e,"Short delay should be less than long delay!"),this.isMobile=KP()||JP()}get(){return IA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mm(t,e){bi(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{static initialize(e,n,i){this.fetchImpl=e,n&&(this.headersImpl=n),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA=new ql(3e4,6e4);function Cr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function kr(t,e,n,i,s={}){return S0(t,s,async()=>{let o={},l={};i&&(e==="GET"?l=i:o={body:JSON.stringify(i)});const h=Hl(Object.assign({key:t.config.apiKey},l)).slice(1),d=await t._getAdditionalHeaders();d["Content-Type"]="application/json",t.languageCode&&(d["X-Firebase-Locale"]=t.languageCode);const m=Object.assign({method:e,headers:d},o);return YP()||(m.referrerPolicy="no-referrer"),I0.fetch()(P0(t,t.config.apiHost,n,h),m)})}async function S0(t,e,n){t._canInitEmulator=!1;const i=Object.assign(Object.assign({},PA),e);try{const s=new CA(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const l=await o.json();if("needConfirmation"in l)throw nc(t,"account-exists-with-different-credential",l);if(o.ok&&!("errorMessage"in l))return l;{const h=o.ok?l.errorMessage:l.error.message,[d,m]=h.split(" : ");if(d==="FEDERATED_USER_ID_ALREADY_LINKED")throw nc(t,"credential-already-in-use",l);if(d==="EMAIL_EXISTS")throw nc(t,"email-already-in-use",l);if(d==="USER_DISABLED")throw nc(t,"user-disabled",l);const v=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-");if(m)throw T0(t,v,m);Fn(t,v)}}catch(s){if(s instanceof Vi)throw s;Fn(t,"network-request-failed",{message:String(s)})}}async function $l(t,e,n,i,s={}){const o=await kr(t,e,n,i,s);return"mfaPendingCredential"in o&&Fn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function P0(t,e,n,i){const s=`${e}${n}?${i}`;return t.config.emulator?mm(t.config,s):`${t.config.apiScheme}://${s}`}function AA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class CA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,i)=>{this.timer=setTimeout(()=>i(Xn(this.auth,"network-request-failed")),xA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function nc(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const s=Xn(t,e,i);return s.customData._tokenResponse=n,s}function H_(t){return t!==void 0&&t.enterprise!==void 0}class kA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return AA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function RA(t,e){return kr(t,"GET","/v2/recaptchaConfig",Cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LA(t,e){return kr(t,"POST","/v1/accounts:delete",e)}async function x0(t,e){return kr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function NA(t,e=!1){const n=wt(t),i=await n.getIdToken(e),s=gm(i);ue(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,l=o==null?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:al(Fd(s.auth_time)),issuedAtTime:al(Fd(s.iat)),expirationTime:al(Fd(s.exp)),signInProvider:l||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Fd(t){return Number(t)*1e3}function gm(t){const[e,n,i]=t.split(".");if(e===void 0||n===void 0||i===void 0)return Ec("JWT malformed, contained fewer than 3 sections"),null;try{const s=h0(n);return s?JSON.parse(s):(Ec("Failed to decode base64 JWT payload"),null)}catch(s){return Ec("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function q_(t){const e=gm(t);return ue(e,"internal-error"),ue(typeof e.exp<"u","internal-error"),ue(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rl(t,e,n=!1){if(n)return e;try{return await e}catch(i){throw i instanceof Vi&&bA(i)&&t.auth.currentUser===t&&await t.auth.signOut(),i}}function bA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=al(this.lastLoginAt),this.creationTime=al(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ih(t){var e;const n=t.auth,i=await t.getIdToken(),s=await Rl(t,x0(n,{idToken:i}));ue(s==null?void 0:s.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const l=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?A0(o.providerUserInfo):[],h=MA(t.providerData,l),d=t.isAnonymous,m=!(t.email&&o.passwordHash)&&!(h!=null&&h.length),v=d?m:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:h,metadata:new Qf(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(t,w)}async function DA(t){const e=wt(t);await ih(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function MA(t,e){return[...t.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function A0(t){return t.map(e=>{var{providerId:n}=e,i=fm(e,["providerId"]);return{providerId:n,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VA(t,e){const n=await S0(t,{},async()=>{const i=Hl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,l=P0(t,s,"/v1/token",`key=${o}`),h=await t._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",I0.fetch()(l,{method:"POST",headers:h,body:i})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function FA(t,e){return kr(t,"POST","/v2/accounts:revokeToken",Cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ue(e.idToken,"internal-error"),ue(typeof e.idToken<"u","internal-error"),ue(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):q_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ue(e.length!==0,"internal-error");const n=q_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ue(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:i,refreshToken:s,expiresIn:o}=await VA(e,n);this.updateTokensAndExpiration(i,s,Number(o))}updateTokensAndExpiration(e,n,i){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,n){const{refreshToken:i,accessToken:s,expirationTime:o}=n,l=new wo;return i&&(ue(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),s&&(ue(typeof s=="string","internal-error",{appName:e}),l.accessToken=s),o&&(ue(typeof o=="number","internal-error",{appName:e}),l.expirationTime=o),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wo,this.toJSON())}_performRefresh(){return Ti("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qi(t,e){ue(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ii{constructor(e){var{uid:n,auth:i,stsTokenManager:s}=e,o=fm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new OA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=i,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Qf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Rl(this,this.stsTokenManager.getToken(this.auth,e));return ue(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return NA(this,e)}reload(){return DA(this)}_assign(e){this!==e&&(ue(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ii(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),n&&await ih(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kn(this.auth.app))return Promise.reject(xi(this.auth));const e=await this.getIdToken();return await Rl(this,LA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var i,s,o,l,h,d,m,v;const w=(i=n.displayName)!==null&&i!==void 0?i:void 0,I=(s=n.email)!==null&&s!==void 0?s:void 0,D=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,U=(l=n.photoURL)!==null&&l!==void 0?l:void 0,B=(h=n.tenantId)!==null&&h!==void 0?h:void 0,Z=(d=n._redirectEventId)!==null&&d!==void 0?d:void 0,R=(m=n.createdAt)!==null&&m!==void 0?m:void 0,x=(v=n.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:N,emailVerified:F,isAnonymous:H,providerData:$,stsTokenManager:S}=n;ue(N&&S,e,"internal-error");const T=wo.fromJSON(this.name,S);ue(typeof N=="string",e,"internal-error"),Qi(w,e.name),Qi(I,e.name),ue(typeof F=="boolean",e,"internal-error"),ue(typeof H=="boolean",e,"internal-error"),Qi(D,e.name),Qi(U,e.name),Qi(B,e.name),Qi(Z,e.name),Qi(R,e.name),Qi(x,e.name);const P=new Ii({uid:N,auth:e,email:I,emailVerified:F,displayName:w,isAnonymous:H,photoURL:U,phoneNumber:D,tenantId:B,stsTokenManager:T,createdAt:R,lastLoginAt:x});return $&&Array.isArray($)&&(P.providerData=$.map(C=>Object.assign({},C))),Z&&(P._redirectEventId=Z),P}static async _fromIdTokenResponse(e,n,i=!1){const s=new wo;s.updateFromServerResponse(n);const o=new Ii({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await ih(o),o}static async _fromGetAccountInfoResponse(e,n,i){const s=n.users[0];ue(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?A0(s.providerUserInfo):[],l=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),h=new wo;h.updateFromIdToken(i);const d=new Ii({uid:s.localId,auth:e,stsTokenManager:h,isAnonymous:l}),m={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Qf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(d,m),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_=new Map;function Si(t){bi(t instanceof Function,"Expected a class definition");let e=$_.get(t);return e?(bi(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,$_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}C0.type="NONE";const G_=C0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(t,e,n){return`firebase:${t}:${e}:${n}`}class Eo{constructor(e,n,i){this.persistence=e,this.auth=n,this.userKey=i;const{config:s,name:o}=this.auth;this.fullUserKey=Tc(this.userKey,s.apiKey,o),this.fullPersistenceKey=Tc("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ii._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,i="authUser"){if(!n.length)return new Eo(Si(G_),e,i);const s=(await Promise.all(n.map(async m=>{if(await m._isAvailable())return m}))).filter(m=>m);let o=s[0]||Si(G_);const l=Tc(i,e.config.apiKey,e.name);let h=null;for(const m of n)try{const v=await m._get(l);if(v){const w=Ii._fromJSON(e,v);m!==o&&(h=w),o=m;break}}catch{}const d=s.filter(m=>m._shouldAllowMigration);return!o._shouldAllowMigration||!d.length?new Eo(o,e,i):(o=d[0],h&&await o._set(l,h.toJSON()),await Promise.all(n.map(async m=>{if(m!==o)try{await m._remove(l)}catch{}})),new Eo(o,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(N0(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(k0(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(O0(e))return"Blackberry";if(D0(e))return"Webos";if(R0(e))return"Safari";if((e.includes("chrome/")||L0(e))&&!e.includes("edge/"))return"Chrome";if(b0(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=t.match(n);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function k0(t=Vt()){return/firefox\//i.test(t)}function R0(t=Vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function L0(t=Vt()){return/crios\//i.test(t)}function N0(t=Vt()){return/iemobile/i.test(t)}function b0(t=Vt()){return/android/i.test(t)}function O0(t=Vt()){return/blackberry/i.test(t)}function D0(t=Vt()){return/webos/i.test(t)}function _m(t=Vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function zA(t=Vt()){var e;return _m(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function UA(){return ex()&&document.documentMode===10}function M0(t=Vt()){return _m(t)||b0(t)||D0(t)||O0(t)||/windows phone/i.test(t)||N0(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V0(t,e=[]){let n;switch(t){case"Browser":n=Z_(Vt());break;case"Worker":n=`${Z_(Vt())}-${t}`;break;default:n=t}const i=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Wo}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const i=o=>new Promise((l,h)=>{try{const d=e(o);l(d)}catch(d){h(d)}});i.onAbort=n,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const i of this.queue)await i(e),i.onAbort&&n.push(i.onAbort)}catch(i){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jA(t,e={}){return kr(t,"GET","/v2/passwordPolicy",Cr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=6;class HA{constructor(e){var n,i,s,o;const l=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=l.minPasswordLength)!==null&&n!==void 0?n:WA,l.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=l.maxPasswordLength),l.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=l.containsLowercaseCharacter),l.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=l.containsUppercaseCharacter),l.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=l.containsNumericCharacter),l.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=l.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,i,s,o,l,h;const d={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,d),this.validatePasswordCharacterOptions(e,d),d.isValid&&(d.isValid=(n=d.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),d.isValid&&(d.isValid=(i=d.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),d.isValid&&(d.isValid=(s=d.containsLowercaseLetter)!==null&&s!==void 0?s:!0),d.isValid&&(d.isValid=(o=d.containsUppercaseLetter)!==null&&o!==void 0?o:!0),d.isValid&&(d.isValid=(l=d.containsNumericCharacter)!==null&&l!==void 0?l:!0),d.isValid&&(d.isValid=(h=d.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),d}validatePasswordLengthOptions(e,n){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(n.meetsMinPasswordLength=e.length>=i),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,n,i,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,n,i,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new K_(this),this.idTokenSubscription=new K_(this),this.beforeStateQueue=new BA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=E0,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Si(n)),this._initializationPromise=this.queue(async()=>{var i,s;if(!this._deleted&&(this.persistenceManager=await Eo.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await x0(this,{idToken:e}),i=await Ii._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(i)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Kn(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(h,h))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let s=i,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=s==null?void 0:s._redirectEventId,d=await this.tryRedirectSignIn(e);(!l||l===h)&&(d!=null&&d.user)&&(s=d.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ue(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ih(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kn(this.app))return Promise.reject(xi(this));const n=e?wt(e):null;return n&&ue(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ue(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kn(this.app)?Promise.reject(xi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kn(this.app)?Promise.reject(xi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Si(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jA(this),n=new HA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Wl("auth","Firebase",e())}onAuthStateChanged(e,n,i){return this.registerStateListener(this.authStateSubscription,e,n,i)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,i){return this.registerStateListener(this.idTokenSubscription,e,n,i)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(i.tenantId=this.tenantId),await FA(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const i=await this.getOrInitRedirectPersistenceManager(n);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Si(e)||this._popupRedirectResolver;ue(n,this,"argument-error"),this.redirectPersistenceManager=await Eo.create(this,[Si(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,i;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,i,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let l=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ue(h,this,"internal-error"),h.then(()=>{l||o(this.currentUser)}),typeof n=="function"){const d=e.addObserver(n,i,s);return()=>{l=!0,d()}}else{const d=e.addObserver(n);return()=>{l=!0,d()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=V0(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(n["X-Firebase-Client"]=i);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&EA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function ps(t){return wt(t)}class K_{constructor(e){this.auth=e,this.observer=null,this.addObserver=lx(n=>this.observer=n)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $A(t){Oh=t}function F0(t){return Oh.loadJS(t)}function GA(){return Oh.recaptchaEnterpriseScript}function ZA(){return Oh.gapiScript}function KA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const QA="recaptcha-enterprise",YA="NO_RECAPTCHA";class XA{constructor(e){this.type=QA,this.auth=ps(e)}async verify(e="verify",n=!1){async function i(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(l,h)=>{RA(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(d=>{if(d.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const m=new kA(d);return o.tenantId==null?o._agentRecaptchaConfig=m:o._tenantRecaptchaConfigs[o.tenantId]=m,l(m.siteKey)}}).catch(d=>{h(d)})})}function s(o,l,h){const d=window.grecaptcha;H_(d)?d.enterprise.ready(()=>{d.enterprise.execute(o,{action:e}).then(m=>{l(m)}).catch(()=>{l(YA)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,l)=>{i(this.auth).then(h=>{if(!n&&H_(window.grecaptcha))s(h,o,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let d=GA();d.length!==0&&(d+=h),F0(d).then(()=>{s(h,o,l)}).catch(m=>{l(m)})}}).catch(h=>{l(h)})})}}async function Q_(t,e,n,i=!1){const s=new XA(t);let o;try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const l=Object.assign({},e);return i?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Yf(t,e,n,i){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Q_(t,e,n,n==="getOobCode");return i(t,o)}else return i(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Q_(t,e,n,n==="getOobCode");return i(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JA(t,e){const n=hm(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(th(o,e??{}))return s;Fn(s,"already-initialized")}return n.initialize({options:e})}function eC(t,e){const n=(e==null?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(Si);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function tC(t,e,n){const i=ps(t);ue(i._canInitEmulator,i,"emulator-config-failed"),ue(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,o=z0(e),{host:l,port:h}=nC(e),d=h===null?"":`:${h}`;i.config.emulator={url:`${o}//${l}${d}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:l,port:h,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})}),iC()}function z0(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function nC(t){const e=z0(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const o=s[1];return{host:o,port:Y_(i.substr(o.length+1))}}else{const[o,l]=i.split(":");return{host:o,port:Y_(l)}}}function Y_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function iC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ti("not implemented")}_getIdTokenResponse(e){return Ti("not implemented")}_linkToIdToken(e,n){return Ti("not implemented")}_getReauthenticationResolver(e){return Ti("not implemented")}}async function rC(t,e){return kr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sC(t,e){return $l(t,"POST","/v1/accounts:signInWithPassword",Cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oC(t,e){return $l(t,"POST","/v1/accounts:signInWithEmailLink",Cr(t,e))}async function aC(t,e){return $l(t,"POST","/v1/accounts:signInWithEmailLink",Cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll extends vm{constructor(e,n,i,s=null){super("password",i),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ll(e,n,"password")}static _fromEmailAndCode(e,n,i=null){return new Ll(e,n,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yf(e,n,"signInWithPassword",sC);case"emailLink":return oC(e,{email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const i={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yf(e,i,"signUpPassword",rC);case"emailLink":return aC(e,{idToken:n,email:this._email,oobCode:this._password});default:Fn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(t,e){return $l(t,"POST","/v1/accounts:signInWithIdp",Cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="http://localhost";class as extends vm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new as(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Fn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s}=n,o=fm(n,["providerId","signInMethod"]);if(!i||!s)return null;const l=new as(i,s);return l.idToken=o.idToken||void 0,l.accessToken=o.accessToken||void 0,l.secret=o.secret,l.nonce=o.nonce,l.pendingToken=o.pendingToken||null,l}_getIdTokenResponse(e){const n=this.buildRequest();return To(e,n)}_linkToIdToken(e,n){const i=this.buildRequest();return i.idToken=n,To(e,i)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,To(e,n)}buildRequest(){const e={requestUri:lC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Hl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function cC(t){const e=$a(Ga(t)).link,n=e?$a(Ga(e)).deep_link_id:null,i=$a(Ga(t)).deep_link_id;return(i?$a(Ga(i)).link:null)||i||n||e||t}class ym{constructor(e){var n,i,s,o,l,h;const d=$a(Ga(e)),m=(n=d.apiKey)!==null&&n!==void 0?n:null,v=(i=d.oobCode)!==null&&i!==void 0?i:null,w=uC((s=d.mode)!==null&&s!==void 0?s:null);ue(m&&v&&w,"argument-error"),this.apiKey=m,this.operation=w,this.code=v,this.continueUrl=(o=d.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(l=d.languageCode)!==null&&l!==void 0?l:null,this.tenantId=(h=d.tenantId)!==null&&h!==void 0?h:null}static parseLink(e){const n=cC(e);try{return new ym(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.providerId=Ho.PROVIDER_ID}static credential(e,n){return Ll._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const i=ym.parseLink(n);return ue(i,"argument-error"),Ll._fromEmailAndCode(e,i.code,i.tenantId)}}Ho.PROVIDER_ID="password";Ho.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ho.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U0{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gl extends U0{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr extends Gl{constructor(){super("facebook.com")}static credential(e){return as._fromParams({providerId:tr.PROVIDER_ID,signInMethod:tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tr.credentialFromTaggedObject(e)}static credentialFromError(e){return tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return tr.credential(e.oauthAccessToken)}catch{return null}}}tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr extends Gl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return as._fromParams({providerId:nr.PROVIDER_ID,signInMethod:nr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return nr.credentialFromTaggedObject(e)}static credentialFromError(e){return nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:i}=e;if(!n&&!i)return null;try{return nr.credential(n,i)}catch{return null}}}nr.GOOGLE_SIGN_IN_METHOD="google.com";nr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ir extends Gl{constructor(){super("github.com")}static credential(e){return as._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.GITHUB_SIGN_IN_METHOD="github.com";ir.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr extends Gl{constructor(){super("twitter.com")}static credential(e,n){return as._fromParams({providerId:rr.PROVIDER_ID,signInMethod:rr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return rr.credentialFromTaggedObject(e)}static credentialFromError(e){return rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:i}=e;if(!n||!i)return null;try{return rr.credential(n,i)}catch{return null}}}rr.TWITTER_SIGN_IN_METHOD="twitter.com";rr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hC(t,e){return $l(t,"POST","/v1/accounts:signUp",Cr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,i,s=!1){const o=await Ii._fromIdTokenResponse(e,i,s),l=X_(i);return new ls({user:o,providerId:l,_tokenResponse:i,operationType:n})}static async _forOperation(e,n,i){await e._updateTokensIfNecessary(i,!0);const s=X_(i);return new ls({user:e,providerId:s,_tokenResponse:i,operationType:n})}}function X_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh extends Vi{constructor(e,n,i,s){var o;super(n.code,n.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,rh.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,n,i,s){return new rh(e,n,i,s)}}function B0(t,e,n,i){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?rh._fromErrorAndOperation(t,o,e,i):o})}async function dC(t,e,n=!1){const i=await Rl(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ls._forOperation(t,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fC(t,e,n=!1){const{auth:i}=t;if(Kn(i.app))return Promise.reject(xi(i));const s="reauthenticate";try{const o=await Rl(t,B0(i,s,e,t),n);ue(o.idToken,i,"internal-error");const l=gm(o.idToken);ue(l,i,"internal-error");const{sub:h}=l;return ue(t.uid===h,i,"user-mismatch"),ls._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Fn(i,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j0(t,e,n=!1){if(Kn(t.app))return Promise.reject(xi(t));const i="signIn",s=await B0(t,i,e),o=await ls._fromIdTokenResponse(t,i,s);return n||await t._updateCurrentUser(o.user),o}async function pC(t,e){return j0(ps(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W0(t){const e=ps(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function mC(t,e,n){if(Kn(t.app))return Promise.reject(xi(t));const i=ps(t),l=await Yf(i,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hC).catch(d=>{throw d.code==="auth/password-does-not-meet-requirements"&&W0(t),d}),h=await ls._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(h.user),h}function gC(t,e,n){return Kn(t.app)?Promise.reject(xi(t)):pC(wt(t),Ho.credential(e,n)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&W0(t),i})}function _C(t,e,n,i){return wt(t).onIdTokenChanged(e,n,i)}function vC(t,e,n){return wt(t).beforeAuthStateChanged(e,n)}function yC(t,e,n,i){return wt(t).onAuthStateChanged(e,n,i)}function zd(t){return wt(t).signOut()}const sh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H0{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sh,"1"),this.storage.removeItem(sh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=1e3,EC=10;class q0 extends H0{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=M0(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const i=this.storage.getItem(n),s=this.localCache[n];i!==s&&e(n,s,i)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((l,h,d)=>{this.notifyListeners(l,d)});return}const i=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const l=this.storage.getItem(i);!n&&this.localCache[i]===l||this.notifyListeners(i,l)},o=this.storage.getItem(i);UA()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,EC):s()}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:i}),!0)})},wC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}q0.type="LOCAL";const TC=q0;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0 extends H0{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}$0.type="SESSION";const G0=$0;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const i=new Dh(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:i,eventType:s,data:o}=n.data,l=this.handlersMap[s];if(!(l!=null&&l.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const h=Array.from(l).map(async m=>m(n.origin,o)),d=await IC(h);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:d})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wm(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,l;return new Promise((h,d)=>{const m=wm("",20);s.port1.start();const v=setTimeout(()=>{d(new Error("unsupported_event"))},i);l={messageChannel:s,onMessage(w){const I=w;if(I.data.eventId===m)switch(I.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{d(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),h(I.data.response);break;default:clearTimeout(v),clearTimeout(o),d(new Error("invalid_response"));break}}},this.handlers.add(l),s.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:m,data:n},[s.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jn(){return window}function PC(t){Jn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(){return typeof Jn().WorkerGlobalScope<"u"&&typeof Jn().importScripts=="function"}async function xC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function CC(){return Z0()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K0="firebaseLocalStorageDb",kC=1,oh="firebaseLocalStorage",Q0="fbase_key";class Zl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Mh(t,e){return t.transaction([oh],e?"readwrite":"readonly").objectStore(oh)}function RC(){const t=indexedDB.deleteDatabase(K0);return new Zl(t).toPromise()}function Xf(){const t=indexedDB.open(K0,kC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const i=t.result;try{i.createObjectStore(oh,{keyPath:Q0})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const i=t.result;i.objectStoreNames.contains(oh)?e(i):(i.close(),await RC(),e(await Xf()))})})}async function J_(t,e,n){const i=Mh(t,!0).put({[Q0]:e,value:n});return new Zl(i).toPromise()}async function LC(t,e){const n=Mh(t,!1).get(e),i=await new Zl(n).toPromise();return i===void 0?null:i.value}function ev(t,e){const n=Mh(t,!0).delete(e);return new Zl(n).toPromise()}const NC=800,bC=3;class Y0{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Xf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(n++>bC)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Z0()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dh._getInstance(CC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await xC(),!this.activeServiceWorker)return;this.sender=new SC(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((n=i[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Xf();return await J_(e,sh,"1"),await ev(e,sh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(i=>J_(i,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(i=>LC(i,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ev(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Mh(s,!1).getAll();return new Zl(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),NC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Y0.type="LOCAL";const OC=Y0;new ql(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DC(t,e){return e?Si(e):(ue(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em extends vm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return To(e,this._buildIdpRequest())}_linkToIdToken(e,n){return To(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return To(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function MC(t){return j0(t.auth,new Em(t),t.bypassAuthState)}function VC(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),fC(n,new Em(t),t.bypassAuthState)}async function FC(t){const{auth:e,user:n}=t;return ue(n,e,"internal-error"),dC(n,new Em(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,n,i,s,o=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:i,postBody:s,tenantId:o,error:l,type:h}=e;if(l){this.reject(l);return}const d={auth:this.auth,requestUri:n,sessionId:i,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(d))}catch(m){this.reject(m)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return MC;case"linkViaPopup":case"linkViaRedirect":return FC;case"reauthViaPopup":case"reauthViaRedirect":return VC;default:Fn(this.auth,"internal-error")}}resolve(e){bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){bi(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zC=new ql(2e3,1e4);class fo extends X0{constructor(e,n,i,s,o){super(e,n,s,o),this.provider=i,this.authWindow=null,this.pollId=null,fo.currentPopupAction&&fo.currentPopupAction.cancel(),fo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ue(e,this.auth,"internal-error"),e}async onExecution(){bi(this.filter.length===1,"Popup operations only handle one event");const e=wm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,fo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,i;if(!((i=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,zC.get())};e()}}fo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UC="pendingRedirect",Ic=new Map;class BC extends X0{constructor(e,n,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,i),this.eventId=null}async execute(){let e=Ic.get(this.auth._key());if(!e){try{const i=await jC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(n){e=()=>Promise.reject(n)}Ic.set(this.auth._key(),e)}return this.bypassAuthState||Ic.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function jC(t,e){const n=qC(e),i=HC(t);if(!await i._isAvailable())return!1;const s=await i._get(n)==="true";return await i._remove(n),s}function WC(t,e){Ic.set(t._key(),e)}function HC(t){return Si(t._redirectPersistence)}function qC(t){return Tc(UC,t.config.apiKey,t.name)}async function $C(t,e,n=!1){if(Kn(t.app))return Promise.reject(xi(t));const i=ps(t),s=DC(i,e),l=await new BC(i,s,n).execute();return l&&!n&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=10*60*1e3;class ZC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(n=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!KC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var i;if(e.error&&!J0(e)){const s=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";n.onError(Xn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const i=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=GC&&this.cachedEventUids.clear(),this.cachedEventUids.has(tv(e))}saveEventToCache(e){this.cachedEventUids.add(tv(e)),this.lastProcessedEventTime=Date.now()}}function tv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function J0({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function KC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return J0(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QC(t,e={}){return kr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,XC=/^https?/;async function JC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await QC(t);for(const n of e)try{if(ek(n))return}catch{}Fn(t,"unauthorized-domain")}function ek(t){const e=Kf(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const l=new URL(t);return l.hostname===""&&i===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&l.hostname===i}if(!XC.test(n))return!1;if(YC.test(t))return i===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk=new ql(3e4,6e4);function nv(){const t=Jn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function nk(t){return new Promise((e,n)=>{var i,s,o;function l(){nv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nv(),n(Xn(t,"network-request-failed"))},timeout:tk.get()})}if(!((s=(i=Jn().gapi)===null||i===void 0?void 0:i.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Jn().gapi)===null||o===void 0)&&o.load)l();else{const h=KA("iframefcb");return Jn()[h]=()=>{gapi.load?l():n(Xn(t,"network-request-failed"))},F0(`${ZA()}?onload=${h}`).catch(d=>n(d))}}).catch(e=>{throw Sc=null,e})}let Sc=null;function ik(t){return Sc=Sc||nk(t),Sc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk=new ql(5e3,15e3),sk="__/auth/iframe",ok="emulator/auth/iframe",ak={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function uk(t){const e=t.config;ue(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?mm(e,ok):`https://${t.config.authDomain}/${sk}`,i={apiKey:e.apiKey,appName:t.name,v:Wo},s=lk.get(t.config.apiHost);s&&(i.eid=s);const o=t._getFrameworks();return o.length&&(i.fw=o.join(",")),`${n}?${Hl(i).slice(1)}`}async function ck(t){const e=await ik(t),n=Jn().gapi;return ue(n,t,"internal-error"),e.open({where:document.body,url:uk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ak,dontclear:!0},i=>new Promise(async(s,o)=>{await i.restyle({setHideOnLeave:!1});const l=Xn(t,"network-request-failed"),h=Jn().setTimeout(()=>{o(l)},rk.get());function d(){Jn().clearTimeout(h),s(i)}i.ping(d).then(d,()=>{o(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dk=500,fk=600,pk="_blank",mk="http://localhost";class iv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gk(t,e,n,i=dk,s=fk){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let h="";const d=Object.assign(Object.assign({},hk),{width:i.toString(),height:s.toString(),top:o,left:l}),m=Vt().toLowerCase();n&&(h=L0(m)?pk:n),k0(m)&&(e=e||mk,d.scrollbars="yes");const v=Object.entries(d).reduce((I,[D,U])=>`${I}${D}=${U},`,"");if(zA(m)&&h!=="_self")return _k(e||"",h),new iv(null);const w=window.open(e||"",h,v);ue(w,t,"popup-blocked");try{w.focus()}catch{}return new iv(w)}function _k(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk="__/auth/handler",yk="emulator/auth/handler",wk=encodeURIComponent("fac");async function rv(t,e,n,i,s,o){ue(t.config.authDomain,t,"auth-domain-config-required"),ue(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:i,v:Wo,eventId:s};if(e instanceof U0){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",ax(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[v,w]of Object.entries({}))l[v]=w}if(e instanceof Gl){const v=e.getScopes().filter(w=>w!=="");v.length>0&&(l.scopes=v.join(","))}t.tenantId&&(l.tid=t.tenantId);const h=l;for(const v of Object.keys(h))h[v]===void 0&&delete h[v];const d=await t._getAppCheckToken(),m=d?`#${wk}=${encodeURIComponent(d)}`:"";return`${Ek(t)}?${Hl(h).slice(1)}${m}`}function Ek({config:t}){return t.emulator?mm(t,yk):`https://${t.authDomain}/${vk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ud="webStorageSupport";class Tk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=G0,this._completeRedirectFn=$C,this._overrideRedirectResult=WC}async _openPopup(e,n,i,s){var o;bi((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const l=await rv(e,n,i,Kf(),s);return gk(e,l,wm())}async _openRedirect(e,n,i,s){await this._originValidation(e);const o=await rv(e,n,i,Kf(),s);return PC(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(bi(o,"If manager is not set, promise should be"),o)}const i=this.initAndGetManager(e);return this.eventManagers[n]={promise:i},i.catch(()=>{delete this.eventManagers[n]}),i}async initAndGetManager(e){const n=await ck(e),i=new ZC(e);return n.register("authEvent",s=>(ue(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=n,i}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Ud,{type:Ud},s=>{var o;const l=(o=s==null?void 0:s[0])===null||o===void 0?void 0:o[Ud];l!==void 0&&n(!!l),Fn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=JC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return M0()||R0()||_m()}}const Ik=Tk;var sv="@firebase/auth",ov="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xk(t){No(new os("auth",(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:l,authDomain:h}=i.options;ue(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const d={apiKey:l,authDomain:h,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:V0(t)},m=new qA(i,s,o,d);return eC(m,n),m},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,i)=>{e.getProvider("auth-internal").initialize()})),No(new os("auth-internal",e=>{const n=ps(e.getProvider("auth").getImmediate());return(i=>new Sk(i))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vr(sv,ov,Pk(t)),vr(sv,ov,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=5*60,Ck=p0("authIdTokenMaxAge")||Ak;let av=null;const kk=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Ck)return;const s=n==null?void 0:n.token;av!==s&&(av=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function eE(t=_0()){const e=hm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=JA(t,{popupRedirectResolver:Ik,persistence:[OC,TC,G0]}),i=p0("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(i,location.origin);if(location.origin===o.origin){const l=kk(o.toString());vC(n,l,()=>l(n.currentUser)),_C(n,h=>l(h))}}const s=d0("auth");return s&&tC(n,`http://${s}`),n}function Rk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}$A({loadJS(t){return new Promise((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=s=>{const o=Xn("internal-error");o.customData=s,n(o)},i.type="text/javascript",i.charset="UTF-8",Rk().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xk("Browser");var lv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var es,tE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(S,T){function P(){}P.prototype=T.prototype,S.D=T.prototype,S.prototype=new P,S.prototype.constructor=S,S.C=function(C,O,M){for(var A=Array(arguments.length-2),Ye=2;Ye<arguments.length;Ye++)A[Ye-2]=arguments[Ye];return T.prototype[O].apply(C,A)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(S,T,P){P||(P=0);var C=Array(16);if(typeof T=="string")for(var O=0;16>O;++O)C[O]=T.charCodeAt(P++)|T.charCodeAt(P++)<<8|T.charCodeAt(P++)<<16|T.charCodeAt(P++)<<24;else for(O=0;16>O;++O)C[O]=T[P++]|T[P++]<<8|T[P++]<<16|T[P++]<<24;T=S.g[0],P=S.g[1],O=S.g[2];var M=S.g[3],A=T+(M^P&(O^M))+C[0]+3614090360&4294967295;T=P+(A<<7&4294967295|A>>>25),A=M+(O^T&(P^O))+C[1]+3905402710&4294967295,M=T+(A<<12&4294967295|A>>>20),A=O+(P^M&(T^P))+C[2]+606105819&4294967295,O=M+(A<<17&4294967295|A>>>15),A=P+(T^O&(M^T))+C[3]+3250441966&4294967295,P=O+(A<<22&4294967295|A>>>10),A=T+(M^P&(O^M))+C[4]+4118548399&4294967295,T=P+(A<<7&4294967295|A>>>25),A=M+(O^T&(P^O))+C[5]+1200080426&4294967295,M=T+(A<<12&4294967295|A>>>20),A=O+(P^M&(T^P))+C[6]+2821735955&4294967295,O=M+(A<<17&4294967295|A>>>15),A=P+(T^O&(M^T))+C[7]+4249261313&4294967295,P=O+(A<<22&4294967295|A>>>10),A=T+(M^P&(O^M))+C[8]+1770035416&4294967295,T=P+(A<<7&4294967295|A>>>25),A=M+(O^T&(P^O))+C[9]+2336552879&4294967295,M=T+(A<<12&4294967295|A>>>20),A=O+(P^M&(T^P))+C[10]+4294925233&4294967295,O=M+(A<<17&4294967295|A>>>15),A=P+(T^O&(M^T))+C[11]+2304563134&4294967295,P=O+(A<<22&4294967295|A>>>10),A=T+(M^P&(O^M))+C[12]+1804603682&4294967295,T=P+(A<<7&4294967295|A>>>25),A=M+(O^T&(P^O))+C[13]+4254626195&4294967295,M=T+(A<<12&4294967295|A>>>20),A=O+(P^M&(T^P))+C[14]+2792965006&4294967295,O=M+(A<<17&4294967295|A>>>15),A=P+(T^O&(M^T))+C[15]+1236535329&4294967295,P=O+(A<<22&4294967295|A>>>10),A=T+(O^M&(P^O))+C[1]+4129170786&4294967295,T=P+(A<<5&4294967295|A>>>27),A=M+(P^O&(T^P))+C[6]+3225465664&4294967295,M=T+(A<<9&4294967295|A>>>23),A=O+(T^P&(M^T))+C[11]+643717713&4294967295,O=M+(A<<14&4294967295|A>>>18),A=P+(M^T&(O^M))+C[0]+3921069994&4294967295,P=O+(A<<20&4294967295|A>>>12),A=T+(O^M&(P^O))+C[5]+3593408605&4294967295,T=P+(A<<5&4294967295|A>>>27),A=M+(P^O&(T^P))+C[10]+38016083&4294967295,M=T+(A<<9&4294967295|A>>>23),A=O+(T^P&(M^T))+C[15]+3634488961&4294967295,O=M+(A<<14&4294967295|A>>>18),A=P+(M^T&(O^M))+C[4]+3889429448&4294967295,P=O+(A<<20&4294967295|A>>>12),A=T+(O^M&(P^O))+C[9]+568446438&4294967295,T=P+(A<<5&4294967295|A>>>27),A=M+(P^O&(T^P))+C[14]+3275163606&4294967295,M=T+(A<<9&4294967295|A>>>23),A=O+(T^P&(M^T))+C[3]+4107603335&4294967295,O=M+(A<<14&4294967295|A>>>18),A=P+(M^T&(O^M))+C[8]+1163531501&4294967295,P=O+(A<<20&4294967295|A>>>12),A=T+(O^M&(P^O))+C[13]+2850285829&4294967295,T=P+(A<<5&4294967295|A>>>27),A=M+(P^O&(T^P))+C[2]+4243563512&4294967295,M=T+(A<<9&4294967295|A>>>23),A=O+(T^P&(M^T))+C[7]+1735328473&4294967295,O=M+(A<<14&4294967295|A>>>18),A=P+(M^T&(O^M))+C[12]+2368359562&4294967295,P=O+(A<<20&4294967295|A>>>12),A=T+(P^O^M)+C[5]+4294588738&4294967295,T=P+(A<<4&4294967295|A>>>28),A=M+(T^P^O)+C[8]+2272392833&4294967295,M=T+(A<<11&4294967295|A>>>21),A=O+(M^T^P)+C[11]+1839030562&4294967295,O=M+(A<<16&4294967295|A>>>16),A=P+(O^M^T)+C[14]+4259657740&4294967295,P=O+(A<<23&4294967295|A>>>9),A=T+(P^O^M)+C[1]+2763975236&4294967295,T=P+(A<<4&4294967295|A>>>28),A=M+(T^P^O)+C[4]+1272893353&4294967295,M=T+(A<<11&4294967295|A>>>21),A=O+(M^T^P)+C[7]+4139469664&4294967295,O=M+(A<<16&4294967295|A>>>16),A=P+(O^M^T)+C[10]+3200236656&4294967295,P=O+(A<<23&4294967295|A>>>9),A=T+(P^O^M)+C[13]+681279174&4294967295,T=P+(A<<4&4294967295|A>>>28),A=M+(T^P^O)+C[0]+3936430074&4294967295,M=T+(A<<11&4294967295|A>>>21),A=O+(M^T^P)+C[3]+3572445317&4294967295,O=M+(A<<16&4294967295|A>>>16),A=P+(O^M^T)+C[6]+76029189&4294967295,P=O+(A<<23&4294967295|A>>>9),A=T+(P^O^M)+C[9]+3654602809&4294967295,T=P+(A<<4&4294967295|A>>>28),A=M+(T^P^O)+C[12]+3873151461&4294967295,M=T+(A<<11&4294967295|A>>>21),A=O+(M^T^P)+C[15]+530742520&4294967295,O=M+(A<<16&4294967295|A>>>16),A=P+(O^M^T)+C[2]+3299628645&4294967295,P=O+(A<<23&4294967295|A>>>9),A=T+(O^(P|~M))+C[0]+4096336452&4294967295,T=P+(A<<6&4294967295|A>>>26),A=M+(P^(T|~O))+C[7]+1126891415&4294967295,M=T+(A<<10&4294967295|A>>>22),A=O+(T^(M|~P))+C[14]+2878612391&4294967295,O=M+(A<<15&4294967295|A>>>17),A=P+(M^(O|~T))+C[5]+4237533241&4294967295,P=O+(A<<21&4294967295|A>>>11),A=T+(O^(P|~M))+C[12]+1700485571&4294967295,T=P+(A<<6&4294967295|A>>>26),A=M+(P^(T|~O))+C[3]+2399980690&4294967295,M=T+(A<<10&4294967295|A>>>22),A=O+(T^(M|~P))+C[10]+4293915773&4294967295,O=M+(A<<15&4294967295|A>>>17),A=P+(M^(O|~T))+C[1]+2240044497&4294967295,P=O+(A<<21&4294967295|A>>>11),A=T+(O^(P|~M))+C[8]+1873313359&4294967295,T=P+(A<<6&4294967295|A>>>26),A=M+(P^(T|~O))+C[15]+4264355552&4294967295,M=T+(A<<10&4294967295|A>>>22),A=O+(T^(M|~P))+C[6]+2734768916&4294967295,O=M+(A<<15&4294967295|A>>>17),A=P+(M^(O|~T))+C[13]+1309151649&4294967295,P=O+(A<<21&4294967295|A>>>11),A=T+(O^(P|~M))+C[4]+4149444226&4294967295,T=P+(A<<6&4294967295|A>>>26),A=M+(P^(T|~O))+C[11]+3174756917&4294967295,M=T+(A<<10&4294967295|A>>>22),A=O+(T^(M|~P))+C[2]+718787259&4294967295,O=M+(A<<15&4294967295|A>>>17),A=P+(M^(O|~T))+C[9]+3951481745&4294967295,S.g[0]=S.g[0]+T&4294967295,S.g[1]=S.g[1]+(O+(A<<21&4294967295|A>>>11))&4294967295,S.g[2]=S.g[2]+O&4294967295,S.g[3]=S.g[3]+M&4294967295}i.prototype.u=function(S,T){T===void 0&&(T=S.length);for(var P=T-this.blockSize,C=this.B,O=this.h,M=0;M<T;){if(O==0)for(;M<=P;)s(this,S,M),M+=this.blockSize;if(typeof S=="string"){for(;M<T;)if(C[O++]=S.charCodeAt(M++),O==this.blockSize){s(this,C),O=0;break}}else for(;M<T;)if(C[O++]=S[M++],O==this.blockSize){s(this,C),O=0;break}}this.h=O,this.o+=T},i.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var T=1;T<S.length-8;++T)S[T]=0;var P=8*this.o;for(T=S.length-8;T<S.length;++T)S[T]=P&255,P/=256;for(this.u(S),S=Array(16),T=P=0;4>T;++T)for(var C=0;32>C;C+=8)S[P++]=this.g[T]>>>C&255;return S};function o(S,T){var P=h;return Object.prototype.hasOwnProperty.call(P,S)?P[S]:P[S]=T(S)}function l(S,T){this.h=T;for(var P=[],C=!0,O=S.length-1;0<=O;O--){var M=S[O]|0;C&&M==T||(P[O]=M,C=!1)}this.g=P}var h={};function d(S){return-128<=S&&128>S?o(S,function(T){return new l([T|0],0>T?-1:0)}):new l([S|0],0>S?-1:0)}function m(S){if(isNaN(S)||!isFinite(S))return w;if(0>S)return Z(m(-S));for(var T=[],P=1,C=0;S>=P;C++)T[C]=S/P|0,P*=4294967296;return new l(T,0)}function v(S,T){if(S.length==0)throw Error("number format error: empty string");if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(S.charAt(0)=="-")return Z(v(S.substring(1),T));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=m(Math.pow(T,8)),C=w,O=0;O<S.length;O+=8){var M=Math.min(8,S.length-O),A=parseInt(S.substring(O,O+M),T);8>M?(M=m(Math.pow(T,M)),C=C.j(M).add(m(A))):(C=C.j(P),C=C.add(m(A)))}return C}var w=d(0),I=d(1),D=d(16777216);t=l.prototype,t.m=function(){if(B(this))return-Z(this).m();for(var S=0,T=1,P=0;P<this.g.length;P++){var C=this.i(P);S+=(0<=C?C:4294967296+C)*T,T*=4294967296}return S},t.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(U(this))return"0";if(B(this))return"-"+Z(this).toString(S);for(var T=m(Math.pow(S,6)),P=this,C="";;){var O=F(P,T).g;P=R(P,O.j(T));var M=((0<P.g.length?P.g[0]:P.h)>>>0).toString(S);if(P=O,U(P))return M+C;for(;6>M.length;)M="0"+M;C=M+C}},t.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function U(S){if(S.h!=0)return!1;for(var T=0;T<S.g.length;T++)if(S.g[T]!=0)return!1;return!0}function B(S){return S.h==-1}t.l=function(S){return S=R(this,S),B(S)?-1:U(S)?0:1};function Z(S){for(var T=S.g.length,P=[],C=0;C<T;C++)P[C]=~S.g[C];return new l(P,~S.h).add(I)}t.abs=function(){return B(this)?Z(this):this},t.add=function(S){for(var T=Math.max(this.g.length,S.g.length),P=[],C=0,O=0;O<=T;O++){var M=C+(this.i(O)&65535)+(S.i(O)&65535),A=(M>>>16)+(this.i(O)>>>16)+(S.i(O)>>>16);C=A>>>16,M&=65535,A&=65535,P[O]=A<<16|M}return new l(P,P[P.length-1]&-2147483648?-1:0)};function R(S,T){return S.add(Z(T))}t.j=function(S){if(U(this)||U(S))return w;if(B(this))return B(S)?Z(this).j(Z(S)):Z(Z(this).j(S));if(B(S))return Z(this.j(Z(S)));if(0>this.l(D)&&0>S.l(D))return m(this.m()*S.m());for(var T=this.g.length+S.g.length,P=[],C=0;C<2*T;C++)P[C]=0;for(C=0;C<this.g.length;C++)for(var O=0;O<S.g.length;O++){var M=this.i(C)>>>16,A=this.i(C)&65535,Ye=S.i(O)>>>16,ii=S.i(O)&65535;P[2*C+2*O]+=A*ii,x(P,2*C+2*O),P[2*C+2*O+1]+=M*ii,x(P,2*C+2*O+1),P[2*C+2*O+1]+=A*Ye,x(P,2*C+2*O+1),P[2*C+2*O+2]+=M*Ye,x(P,2*C+2*O+2)}for(C=0;C<T;C++)P[C]=P[2*C+1]<<16|P[2*C];for(C=T;C<2*T;C++)P[C]=0;return new l(P,0)};function x(S,T){for(;(S[T]&65535)!=S[T];)S[T+1]+=S[T]>>>16,S[T]&=65535,T++}function N(S,T){this.g=S,this.h=T}function F(S,T){if(U(T))throw Error("division by zero");if(U(S))return new N(w,w);if(B(S))return T=F(Z(S),T),new N(Z(T.g),Z(T.h));if(B(T))return T=F(S,Z(T)),new N(Z(T.g),T.h);if(30<S.g.length){if(B(S)||B(T))throw Error("slowDivide_ only works with positive integers.");for(var P=I,C=T;0>=C.l(S);)P=H(P),C=H(C);var O=$(P,1),M=$(C,1);for(C=$(C,2),P=$(P,2);!U(C);){var A=M.add(C);0>=A.l(S)&&(O=O.add(P),M=A),C=$(C,1),P=$(P,1)}return T=R(S,O.j(T)),new N(O,T)}for(O=w;0<=S.l(T);){for(P=Math.max(1,Math.floor(S.m()/T.m())),C=Math.ceil(Math.log(P)/Math.LN2),C=48>=C?1:Math.pow(2,C-48),M=m(P),A=M.j(T);B(A)||0<A.l(S);)P-=C,M=m(P),A=M.j(T);U(M)&&(M=I),O=O.add(M),S=R(S,A)}return new N(O,S)}t.A=function(S){return F(this,S).h},t.and=function(S){for(var T=Math.max(this.g.length,S.g.length),P=[],C=0;C<T;C++)P[C]=this.i(C)&S.i(C);return new l(P,this.h&S.h)},t.or=function(S){for(var T=Math.max(this.g.length,S.g.length),P=[],C=0;C<T;C++)P[C]=this.i(C)|S.i(C);return new l(P,this.h|S.h)},t.xor=function(S){for(var T=Math.max(this.g.length,S.g.length),P=[],C=0;C<T;C++)P[C]=this.i(C)^S.i(C);return new l(P,this.h^S.h)};function H(S){for(var T=S.g.length+1,P=[],C=0;C<T;C++)P[C]=S.i(C)<<1|S.i(C-1)>>>31;return new l(P,S.h)}function $(S,T){var P=T>>5;T%=32;for(var C=S.g.length-P,O=[],M=0;M<C;M++)O[M]=0<T?S.i(M+P)>>>T|S.i(M+P+1)<<32-T:S.i(M+P);return new l(O,S.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,tE=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.A,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=m,l.fromString=v,es=l}).apply(typeof lv<"u"?lv:typeof self<"u"?self:typeof window<"u"?window:{});var ic=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var nE,Za,iE,Pc,Jf,rE,sE,oE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,p,_){return u==Array.prototype||u==Object.prototype||(u[p]=_.value),u};function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof ic=="object"&&ic];for(var p=0;p<u.length;++p){var _=u[p];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var i=n(this);function s(u,p){if(p)e:{var _=i;u=u.split(".");for(var E=0;E<u.length-1;E++){var V=u[E];if(!(V in _))break e;_=_[V]}u=u[u.length-1],E=_[u],p=p(E),p!=E&&p!=null&&e(_,u,{configurable:!0,writable:!0,value:p})}}function o(u,p){u instanceof String&&(u+="");var _=0,E=!1,V={next:function(){if(!E&&_<u.length){var W=_++;return{value:p(W,u[W]),done:!1}}return E=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(u){return u||function(){return o(this,function(p,_){return _})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},h=this||self;function d(u){var p=typeof u;return p=p!="object"?p:u?Array.isArray(u)?"array":p:"null",p=="array"||p=="object"&&typeof u.length=="number"}function m(u){var p=typeof u;return p=="object"&&u!=null||p=="function"}function v(u,p,_){return u.call.apply(u.bind,arguments)}function w(u,p,_){if(!u)throw Error();if(2<arguments.length){var E=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,E),u.apply(p,V)}}return function(){return u.apply(p,arguments)}}function I(u,p,_){return I=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:w,I.apply(null,arguments)}function D(u,p){var _=Array.prototype.slice.call(arguments,1);return function(){var E=_.slice();return E.push.apply(E,arguments),u.apply(this,E)}}function U(u,p){function _(){}_.prototype=p.prototype,u.aa=p.prototype,u.prototype=new _,u.prototype.constructor=u,u.Qb=function(E,V,W){for(var J=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)J[Ne-2]=arguments[Ne];return p.prototype[V].apply(E,J)}}function B(u){const p=u.length;if(0<p){const _=Array(p);for(let E=0;E<p;E++)_[E]=u[E];return _}return[]}function Z(u,p){for(let _=1;_<arguments.length;_++){const E=arguments[_];if(d(E)){const V=u.length||0,W=E.length||0;u.length=V+W;for(let J=0;J<W;J++)u[V+J]=E[J]}else u.push(E)}}class R{constructor(p,_){this.i=p,this.j=_,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function x(u){return/^[\s\xa0]*$/.test(u)}function N(){var u=h.navigator;return u&&(u=u.userAgent)?u:""}function F(u){return F[" "](u),u}F[" "]=function(){};var H=N().indexOf("Gecko")!=-1&&!(N().toLowerCase().indexOf("webkit")!=-1&&N().indexOf("Edge")==-1)&&!(N().indexOf("Trident")!=-1||N().indexOf("MSIE")!=-1)&&N().indexOf("Edge")==-1;function $(u,p,_){for(const E in u)p.call(_,u[E],E,u)}function S(u,p){for(const _ in u)p.call(void 0,u[_],_,u)}function T(u){const p={};for(const _ in u)p[_]=u[_];return p}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function C(u,p){let _,E;for(let V=1;V<arguments.length;V++){E=arguments[V];for(_ in E)u[_]=E[_];for(let W=0;W<P.length;W++)_=P[W],Object.prototype.hasOwnProperty.call(E,_)&&(u[_]=E[_])}}function O(u){var p=1;u=u.split(":");const _=[];for(;0<p&&u.length;)_.push(u.shift()),p--;return u.length&&_.push(u.join(":")),_}function M(u){h.setTimeout(()=>{throw u},0)}function A(){var u=le;let p=null;return u.g&&(p=u.g,u.g=u.g.next,u.g||(u.h=null),p.next=null),p}class Ye{constructor(){this.h=this.g=null}add(p,_){const E=ii.get();E.set(p,_),this.h?this.h.next=E:this.g=E,this.h=E}}var ii=new R(()=>new ct,u=>u.reset());class ct{constructor(){this.next=this.g=this.h=null}set(p,_){this.h=p,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let Ft,q=!1,le=new Ye,X=()=>{const u=h.Promise.resolve(void 0);Ft=()=>{u.then(ce)}};var ce=()=>{for(var u;u=A();){try{u.h.call(u.g)}catch(_){M(_)}var p=ii;p.j(u),100>p.h&&(p.h++,u.next=p.g,p.g=u)}q=!1};function ve(){this.s=this.s,this.C=this.C}ve.prototype.s=!1,ve.prototype.ma=function(){this.s||(this.s=!0,this.N())},ve.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ie(u,p){this.type=u,this.g=this.target=p,this.defaultPrevented=!1}Ie.prototype.h=function(){this.defaultPrevented=!0};var Le=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var u=!1,p=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};h.addEventListener("test",_,p),h.removeEventListener("test",_,p)}catch{}return u}();function ye(u,p){if(Ie.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var _=this.type=u.type,E=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=p,p=u.relatedTarget){if(H){e:{try{F(p.nodeName);var V=!0;break e}catch{}V=!1}V||(p=null)}}else _=="mouseover"?p=u.fromElement:_=="mouseout"&&(p=u.toElement);this.relatedTarget=p,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:fe[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&ye.aa.h.call(this)}}U(ye,Ie);var fe={2:"touch",3:"pen",4:"mouse"};ye.prototype.h=function(){ye.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ht="closure_listenable_"+(1e6*Math.random()|0),Bn=0;function iu(u,p,_,E,V){this.listener=u,this.proxy=null,this.src=p,this.type=_,this.capture=!!E,this.ha=V,this.key=++Bn,this.da=this.fa=!1}function Fi(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function zi(u){this.src=u,this.g={},this.h=0}zi.prototype.add=function(u,p,_,E,V){var W=u.toString();u=this.g[W],u||(u=this.g[W]=[],this.h++);var J=Lr(u,p,E,V);return-1<J?(p=u[J],_||(p.fa=!1)):(p=new iu(p,this.src,W,!!E,V),p.fa=_,u.push(p)),p};function ri(u,p){var _=p.type;if(_ in u.g){var E=u.g[_],V=Array.prototype.indexOf.call(E,p,void 0),W;(W=0<=V)&&Array.prototype.splice.call(E,V,1),W&&(Fi(p),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Lr(u,p,_,E){for(var V=0;V<u.length;++V){var W=u[V];if(!W.da&&W.listener==p&&W.capture==!!_&&W.ha==E)return V}return-1}var Ko="closure_lm_"+(1e6*Math.random()|0),vs={};function Qo(u,p,_,E,V){if(Array.isArray(p)){for(var W=0;W<p.length;W++)Qo(u,p[W],_,E,V);return null}return _=ou(_),u&&u[ht]?u.K(p,_,m(E)?!!E.capture:!1,V):Yo(u,p,_,!1,E,V)}function Yo(u,p,_,E,V,W){if(!p)throw Error("Invalid event type");var J=m(V)?!!V.capture:!!V,Ne=Ts(u);if(Ne||(u[Ko]=Ne=new zi(u)),_=Ne.add(p,_,E,J,W),_.proxy)return _;if(E=ys(),_.proxy=E,E.src=u,E.listener=_,u.addEventListener)Le||(V=J),V===void 0&&(V=!1),u.addEventListener(p.toString(),E,V);else if(u.attachEvent)u.attachEvent(Es(p.toString()),E);else if(u.addListener&&u.removeListener)u.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return _}function ys(){function u(_){return p.call(u.src,u.listener,_)}const p=su;return u}function ru(u,p,_,E,V){if(Array.isArray(p))for(var W=0;W<p.length;W++)ru(u,p[W],_,E,V);else E=m(E)?!!E.capture:!!E,_=ou(_),u&&u[ht]?(u=u.i,p=String(p).toString(),p in u.g&&(W=u.g[p],_=Lr(W,_,E,V),-1<_&&(Fi(W[_]),Array.prototype.splice.call(W,_,1),W.length==0&&(delete u.g[p],u.h--)))):u&&(u=Ts(u))&&(p=u.g[p.toString()],u=-1,p&&(u=Lr(p,_,E,V)),(_=-1<u?p[u]:null)&&ws(_))}function ws(u){if(typeof u!="number"&&u&&!u.da){var p=u.src;if(p&&p[ht])ri(p.i,u);else{var _=u.type,E=u.proxy;p.removeEventListener?p.removeEventListener(_,E,u.capture):p.detachEvent?p.detachEvent(Es(_),E):p.addListener&&p.removeListener&&p.removeListener(E),(_=Ts(p))?(ri(_,u),_.h==0&&(_.src=null,p[Ko]=null)):Fi(u)}}}function Es(u){return u in vs?vs[u]:vs[u]="on"+u}function su(u,p){if(u.da)u=!0;else{p=new ye(p,this);var _=u.listener,E=u.ha||u.src;u.fa&&ws(u),u=_.call(E,p)}return u}function Ts(u){return u=u[Ko],u instanceof zi?u:null}var Xo="__closure_events_fn_"+(1e9*Math.random()>>>0);function ou(u){return typeof u=="function"?u:(u[Xo]||(u[Xo]=function(p){return u.handleEvent(p)}),u[Xo])}function rt(){ve.call(this),this.i=new zi(this),this.M=this,this.F=null}U(rt,ve),rt.prototype[ht]=!0,rt.prototype.removeEventListener=function(u,p,_,E){ru(this,u,p,_,E)};function pt(u,p){var _,E=u.F;if(E)for(_=[];E;E=E.F)_.push(E);if(u=u.M,E=p.type||p,typeof p=="string")p=new Ie(p,u);else if(p instanceof Ie)p.target=p.target||u;else{var V=p;p=new Ie(E,u),C(p,V)}if(V=!0,_)for(var W=_.length-1;0<=W;W--){var J=p.g=_[W];V=Nr(J,E,!0,p)&&V}if(J=p.g=u,V=Nr(J,E,!0,p)&&V,V=Nr(J,E,!1,p)&&V,_)for(W=0;W<_.length;W++)J=p.g=_[W],V=Nr(J,E,!1,p)&&V}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var u=this.i,p;for(p in u.g){for(var _=u.g[p],E=0;E<_.length;E++)Fi(_[E]);delete u.g[p],u.h--}}this.F=null},rt.prototype.K=function(u,p,_,E){return this.i.add(String(u),p,!1,_,E)},rt.prototype.L=function(u,p,_,E){return this.i.add(String(u),p,!0,_,E)};function Nr(u,p,_,E){if(p=u.i.g[String(p)],!p)return!0;p=p.concat();for(var V=!0,W=0;W<p.length;++W){var J=p[W];if(J&&!J.da&&J.capture==_){var Ne=J.listener,st=J.ha||J.src;J.fa&&ri(u.i,J),V=Ne.call(st,E)!==!1&&V}}return V&&!E.defaultPrevented}function au(u,p,_){if(typeof u=="function")_&&(u=I(u,_));else if(u&&typeof u.handleEvent=="function")u=I(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:h.setTimeout(u,p||0)}function Jo(u){u.g=au(()=>{u.g=null,u.i&&(u.i=!1,Jo(u))},u.l);const p=u.h;u.h=null,u.m.apply(null,p)}class lu extends ve{constructor(p,_){super(),this.m=p,this.l=_,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Jo(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function br(u){ve.call(this),this.h=u,this.g={}}U(br,ve);var ea=[];function Is(u){$(u.g,function(p,_){this.g.hasOwnProperty(_)&&ws(p)},u),u.g={}}br.prototype.N=function(){br.aa.N.call(this),Is(this)},br.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ss=h.JSON.stringify,Jh=h.JSON.parse,Or=class{stringify(u){return h.JSON.stringify(u,void 0)}parse(u){return h.JSON.parse(u,void 0)}};function ta(){}ta.prototype.h=null;function uu(u){return u.h||(u.h=u.i())}function na(){}var Ui={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ps(){Ie.call(this,"d")}U(Ps,Ie);function ia(){Ie.call(this,"c")}U(ia,Ie);var si={},cu=null;function xs(){return cu=cu||new rt}si.La="serverreachability";function hu(u){Ie.call(this,si.La,u)}U(hu,Ie);function Dr(u){const p=xs();pt(p,new hu(p))}si.STAT_EVENT="statevent";function As(u,p){Ie.call(this,si.STAT_EVENT,u),this.stat=p}U(As,Ie);function Et(u){const p=xs();pt(p,new As(p,u))}si.Ma="timingevent";function du(u,p){Ie.call(this,si.Ma,u),this.size=p}U(du,Ie);function Mr(u,p){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){u()},p)}function Vr(){this.g=!0}Vr.prototype.xa=function(){this.g=!1};function hn(u,p,_,E,V,W){u.info(function(){if(u.g)if(W)for(var J="",Ne=W.split("&"),st=0;st<Ne.length;st++){var Ae=Ne[st].split("=");if(1<Ae.length){var Me=Ae[0];Ae=Ae[1];var $e=Me.split("_");J=2<=$e.length&&$e[1]=="type"?J+(Me+"="+Ae+"&"):J+(Me+"=redacted&")}}else J=null;else J=W;return"XMLHTTP REQ ("+E+") [attempt "+V+"]: "+p+`
`+_+`
`+J})}function re(u,p,_,E,V,W,J){u.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+V+"]: "+p+`
`+_+`
`+W+" "+J})}function oi(u,p,_,E){u.info(function(){return"XMLHTTP TEXT ("+p+"): "+pu(u,_)+(E?" "+E:"")})}function fu(u,p){u.info(function(){return"TIMEOUT: "+p})}Vr.prototype.info=function(){};function pu(u,p){if(!u.g)return p;if(!p)return null;try{var _=JSON.parse(p);if(_){for(u=0;u<_.length;u++)if(Array.isArray(_[u])){var E=_[u];if(!(2>E.length)){var V=E[1];if(Array.isArray(V)&&!(1>V.length)){var W=V[0];if(W!="noop"&&W!="stop"&&W!="close")for(var J=1;J<V.length;J++)V[J]=""}}}}return Ss(_)}catch{return p}}var Fr={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Cs={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ks;function xn(){}U(xn,ta),xn.prototype.g=function(){return new XMLHttpRequest},xn.prototype.i=function(){return{}},ks=new xn;function An(u,p,_,E){this.j=u,this.i=p,this.l=_,this.R=E||1,this.U=new br(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mu}function mu(){this.i=null,this.g="",this.h=!1}var gu={},ra={};function sa(u,p,_){u.L=1,u.v=fn(Xe(p)),u.m=_,u.P=!0,oa(u,null)}function oa(u,p){u.F=Date.now(),Ls(u),u.A=Xe(u.v);var _=u.A,E=u.R;Array.isArray(E)||(E=[String(E)]),yu(_.i,"t",E),u.C=0,_=u.j.J,u.h=new mu,u.g=xu(u.j,_?p:null,!u.m),0<u.O&&(u.M=new lu(I(u.Y,u,u.g),u.O)),p=u.U,_=u.g,E=u.ca;var V="readystatechange";Array.isArray(V)||(V&&(ea[0]=V.toString()),V=ea);for(var W=0;W<V.length;W++){var J=Qo(_,V[W],E||p.handleEvent,!1,p.h||p);if(!J)break;p.g[J.key]=J}p=u.H?T(u.H):{},u.m?(u.u||(u.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,p)):(u.u="GET",u.g.ea(u.A,u.u,null,p)),Dr(),hn(u.i,u.u,u.A,u.l,u.R,u.m)}An.prototype.ca=function(u){u=u.target;const p=this.M;p&&zt(u)==3?p.j():this.Y(u)},An.prototype.Y=function(u){try{if(u==this.g)e:{const $e=zt(this.g);var p=this.g.Ba();const Gi=this.g.Z();if(!(3>$e)&&($e!=3||this.g&&(this.h.h||this.g.oa()||Ta(this.g)))){this.J||$e!=4||p==7||(p==8||0>=Gi?Dr(3):Dr(2)),aa(this);var _=this.g.Z();this.X=_;t:if(_u(this)){var E=Ta(this.g);u="";var V=E.length,W=zt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ai(this),zr(this);var J="";break t}this.h.i=new h.TextDecoder}for(p=0;p<V;p++)this.h.h=!0,u+=this.h.i.decode(E[p],{stream:!(W&&p==V-1)});E.length=0,this.h.g+=u,this.C=0,J=this.h.g}else J=this.g.oa();if(this.o=_==200,re(this.i,this.u,this.A,this.l,this.R,$e,_),this.o){if(this.T&&!this.K){t:{if(this.g){var Ne,st=this.g;if((Ne=st.g?st.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(Ne)){var Ae=Ne;break t}}Ae=null}if(_=Ae)oi(this.i,this.l,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ur(this,_);else{this.o=!1,this.s=3,Et(12),ai(this),zr(this);break e}}if(this.P){_=!0;let et;for(;!this.J&&this.C<J.length;)if(et=Rs(this,J),et==ra){$e==4&&(this.s=4,Et(14),_=!1),oi(this.i,this.l,null,"[Incomplete Response]");break}else if(et==gu){this.s=4,Et(15),oi(this.i,this.l,J,"[Invalid Chunk]"),_=!1;break}else oi(this.i,this.l,et,null),Ur(this,et);if(_u(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$e!=4||J.length!=0||this.h.h||(this.s=1,Et(16),_=!1),this.o=this.o&&_,!_)oi(this.i,this.l,J,"[Invalid Chunked Response]"),ai(this),zr(this);else if(0<J.length&&!this.W){this.W=!0;var Me=this.j;Me.g==this&&Me.ba&&!Me.M&&(Me.j.info("Great, no buffering proxy detected. Bytes received: "+J.length),Us(Me),Me.M=!0,Et(11))}}else oi(this.i,this.l,J,null),Ur(this,J);$e==4&&ai(this),this.o&&!this.J&&($e==4?Sa(this.j,this):(this.o=!1,Ls(this)))}else ed(this.g),_==400&&0<J.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),ai(this),zr(this)}}}catch{}finally{}};function _u(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function Rs(u,p){var _=u.C,E=p.indexOf(`
`,_);return E==-1?ra:(_=Number(p.substring(_,E)),isNaN(_)?gu:(E+=1,E+_>p.length?ra:(p=p.slice(E,E+_),u.C=E+_,p)))}An.prototype.cancel=function(){this.J=!0,ai(this)};function Ls(u){u.S=Date.now()+u.I,vu(u,u.I)}function vu(u,p){if(u.B!=null)throw Error("WatchDog timer not null");u.B=Mr(I(u.ba,u),p)}function aa(u){u.B&&(h.clearTimeout(u.B),u.B=null)}An.prototype.ba=function(){this.B=null;const u=Date.now();0<=u-this.S?(fu(this.i,this.A),this.L!=2&&(Dr(),Et(17)),ai(this),this.s=2,zr(this)):vu(this,this.S-u)};function zr(u){u.j.G==0||u.J||Sa(u.j,u)}function ai(u){aa(u);var p=u.M;p&&typeof p.ma=="function"&&p.ma(),u.M=null,Is(u.U),u.g&&(p=u.g,u.g=null,p.abort(),p.ma())}function Ur(u,p){try{var _=u.j;if(_.G!=0&&(_.g==u||Se(_.h,u))){if(!u.K&&Se(_.h,u)&&_.G==3){try{var E=_.Da.g.parse(p)}catch{E=null}if(Array.isArray(E)&&E.length==3){var V=E;if(V[0]==0){e:if(!_.u){if(_.g)if(_.g.F+3e3<u.F)js(_),Fs(_);else break e;zs(_),Et(18)}}else _.za=V[1],0<_.za-_.T&&37500>V[2]&&_.F&&_.v==0&&!_.C&&(_.C=Mr(I(_.Za,_),6e3));if(1>=Bi(_.h)&&_.ca){try{_.ca()}catch{}_.ca=void 0}}else di(_,11)}else if((u.K||_.g==u)&&js(_),!x(p))for(V=_.Da.g.parse(p),p=0;p<V.length;p++){let Ae=V[p];if(_.T=Ae[0],Ae=Ae[1],_.G==2)if(Ae[0]=="c"){_.K=Ae[1],_.ia=Ae[2];const Me=Ae[3];Me!=null&&(_.la=Me,_.j.info("VER="+_.la));const $e=Ae[4];$e!=null&&(_.Aa=$e,_.j.info("SVER="+_.Aa));const Gi=Ae[5];Gi!=null&&typeof Gi=="number"&&0<Gi&&(E=1.5*Gi,_.L=E,_.j.info("backChannelRequestTimeoutMs_="+E)),E=_;const et=u.g;if(et){const Hs=et.g?et.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Hs){var W=E.h;W.g||Hs.indexOf("spdy")==-1&&Hs.indexOf("quic")==-1&&Hs.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(Ve(W,W.h),W.h=null))}if(E.D){const Hn=et.g?et.g.getResponseHeader("X-HTTP-Session-Id"):null;Hn&&(E.ya=Hn,he(E.I,E.D,Hn))}}_.G=3,_.l&&_.l.ua(),_.ba&&(_.R=Date.now()-u.F,_.j.info("Handshake RTT: "+_.R+"ms")),E=_;var J=u;if(E.qa=Ws(E,E.J?E.ia:null,E.W),J.K){jr(E.h,J);var Ne=J,st=E.L;st&&(Ne.I=st),Ne.B&&(aa(Ne),Ls(Ne)),E.g=J}else Rn(E);0<_.i.length&&$i(_)}else Ae[0]!="stop"&&Ae[0]!="close"||di(_,7);else _.G==3&&(Ae[0]=="stop"||Ae[0]=="close"?Ae[0]=="stop"?di(_,7):Vs(_):Ae[0]!="noop"&&_.l&&_.l.ta(Ae),_.v=0)}}Dr(4)}catch{}}var Br=class{constructor(u,p){this.g=u,this.map=p}};function la(u){this.l=u||10,h.PerformanceNavigationTiming?(u=h.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ua(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Bi(u){return u.h?1:u.g?u.g.size:0}function Se(u,p){return u.h?u.h==p:u.g?u.g.has(p):!1}function Ve(u,p){u.g?u.g.add(p):u.h=p}function jr(u,p){u.h&&u.h==p?u.h=null:u.g&&u.g.has(p)&&u.g.delete(p)}la.prototype.cancel=function(){if(this.i=li(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function li(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let p=u.i;for(const _ of u.g.values())p=p.concat(_.D);return p}return B(u.i)}function ji(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(d(u)){for(var p=[],_=u.length,E=0;E<_;E++)p.push(u[E]);return p}p=[],_=0;for(E in u)p[_++]=u[E];return p}function ca(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(d(u)||typeof u=="string"){var p=[];u=u.length;for(var _=0;_<u;_++)p.push(_);return p}p=[],_=0;for(const E in u)p[_++]=E;return p}}}function ge(u,p){if(u.forEach&&typeof u.forEach=="function")u.forEach(p,void 0);else if(d(u)||typeof u=="string")Array.prototype.forEach.call(u,p,void 0);else for(var _=ca(u),E=ji(u),V=E.length,W=0;W<V;W++)p.call(void 0,E[W],_&&_[W],u)}var je=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ha(u,p){if(u){u=u.split("&");for(var _=0;_<u.length;_++){var E=u[_].indexOf("="),V=null;if(0<=E){var W=u[_].substring(0,E);V=u[_].substring(E+1)}else W=u[_];p(W,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function dn(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof dn){this.h=u.h,Ns(this,u.j),this.o=u.o,this.g=u.g,ui(this,u.s),this.l=u.l;var p=u.i,_=new ci;_.i=p.i,p.g&&(_.g=new Map(p.g),_.h=p.h),jn(this,_),this.m=u.m}else u&&(p=String(u).match(je))?(this.h=!1,Ns(this,p[1]||"",!0),this.o=Cn(p[2]||""),this.g=Cn(p[3]||"",!0),ui(this,p[4]),this.l=Cn(p[5]||"",!0),jn(this,p[6]||"",!0),this.m=Cn(p[7]||"")):(this.h=!1,this.i=new ci(null,this.h))}dn.prototype.toString=function(){var u=[],p=this.j;p&&u.push(kn(p,Wi,!0),":");var _=this.g;return(_||p=="file")&&(u.push("//"),(p=this.o)&&u.push(kn(p,Wi,!0),"@"),u.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.s,_!=null&&u.push(":",String(_))),(_=this.l)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(kn(_,_.charAt(0)=="/"?pa:fa,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",kn(_,ma)),u.join("")};function Xe(u){return new dn(u)}function Ns(u,p,_){u.j=_?Cn(p,!0):p,u.j&&(u.j=u.j.replace(/:$/,""))}function ui(u,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);u.s=p}else u.s=null}function jn(u,p,_){p instanceof ci?(u.i=p,pn(u.i,u.h)):(_||(p=kn(p,bs)),u.i=new ci(p,u.h))}function he(u,p,_){u.i.set(p,_)}function fn(u){return he(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Cn(u,p){return u?p?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function kn(u,p,_){return typeof u=="string"?(u=encodeURI(u).replace(p,da),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function da(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Wi=/[#\/\?@]/g,fa=/[#\?:]/g,pa=/[#\?]/g,bs=/[#\?@]/g,ma=/#/g;function ci(u,p){this.h=this.g=null,this.i=u||null,this.j=!!p}function en(u){u.g||(u.g=new Map,u.h=0,u.i&&ha(u.i,function(p,_){u.add(decodeURIComponent(p.replace(/\+/g," ")),_)}))}t=ci.prototype,t.add=function(u,p){en(this),this.i=null,u=oe(this,u);var _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(p),this.h+=1,this};function ga(u,p){en(u),p=oe(u,p),u.g.has(p)&&(u.i=null,u.h-=u.g.get(p).length,u.g.delete(p))}function Os(u,p){return en(u),p=oe(u,p),u.g.has(p)}t.forEach=function(u,p){en(this),this.g.forEach(function(_,E){_.forEach(function(V){u.call(p,V,E,this)},this)},this)},t.na=function(){en(this);const u=Array.from(this.g.values()),p=Array.from(this.g.keys()),_=[];for(let E=0;E<p.length;E++){const V=u[E];for(let W=0;W<V.length;W++)_.push(p[E])}return _},t.V=function(u){en(this);let p=[];if(typeof u=="string")Os(this,u)&&(p=p.concat(this.g.get(oe(this,u))));else{u=Array.from(this.g.values());for(let _=0;_<u.length;_++)p=p.concat(u[_])}return p},t.set=function(u,p){return en(this),this.i=null,u=oe(this,u),Os(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[p]),this.h+=1,this},t.get=function(u,p){return u?(u=this.V(u),0<u.length?String(u[0]):p):p};function yu(u,p,_){ga(u,p),0<_.length&&(u.i=null,u.g.set(oe(u,p),B(_)),u.h+=_.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],p=Array.from(this.g.keys());for(var _=0;_<p.length;_++){var E=p[_];const W=encodeURIComponent(String(E)),J=this.V(E);for(E=0;E<J.length;E++){var V=W;J[E]!==""&&(V+="="+encodeURIComponent(String(J[E]))),u.push(V)}}return this.i=u.join("&")};function oe(u,p){return p=String(p),u.j&&(p=p.toLowerCase()),p}function pn(u,p){p&&!u.j&&(en(u),u.i=null,u.g.forEach(function(_,E){var V=E.toLowerCase();E!=V&&(ga(this,E),yu(this,V,_))},u)),u.j=p}function De(u,p){const _=new Vr;if(h.Image){const E=new Image;E.onload=D(mn,_,"TestLoadImage: loaded",!0,p,E),E.onerror=D(mn,_,"TestLoadImage: error",!1,p,E),E.onabort=D(mn,_,"TestLoadImage: abort",!1,p,E),E.ontimeout=D(mn,_,"TestLoadImage: timeout",!1,p,E),h.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=u}else p(!1)}function wu(u,p){const _=new Vr,E=new AbortController,V=setTimeout(()=>{E.abort(),mn(_,"TestPingServer: timeout",!1,p)},1e4);fetch(u,{signal:E.signal}).then(W=>{clearTimeout(V),W.ok?mn(_,"TestPingServer: ok",!0,p):mn(_,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(V),mn(_,"TestPingServer: error",!1,p)})}function mn(u,p,_,E,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),E(_)}catch{}}function _a(){this.g=new Or}function va(u,p,_){const E=_||"";try{ge(u,function(V,W){let J=V;m(V)&&(J=Ss(V)),p.push(E+W+"="+encodeURIComponent(J))})}catch(V){throw p.push(E+"type="+encodeURIComponent("_badmap")),V}}function gn(u){this.l=u.Ub||null,this.j=u.eb||!1}U(gn,ta),gn.prototype.g=function(){return new Hi(this.l,this.j)},gn.prototype.i=function(u){return function(){return u}}({});function Hi(u,p){rt.call(this),this.D=u,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}U(Hi,rt),t=Hi.prototype,t.open=function(u,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=p,this.readyState=1,tn(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(p.body=u),(this.D||h).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,qe(this)),this.readyState=0},t.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,tn(this)),this.g&&(this.readyState=3,tn(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qi(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function qi(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}t.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var p=u.value?u.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!u.done}))&&(this.response=this.responseText+=p)}u.done?qe(this):tn(this),this.readyState==3&&qi(this)}},t.Ra=function(u){this.g&&(this.response=this.responseText=u,qe(this))},t.Qa=function(u){this.g&&(this.response=u,qe(this))},t.ga=function(){this.g&&qe(this)};function qe(u){u.readyState=4,u.l=null,u.j=null,u.v=null,tn(u)}t.setRequestHeader=function(u,p){this.u.append(u,p)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],p=this.h.entries();for(var _=p.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=p.next();return u.join(`\r
`)};function tn(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Hi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function ya(u){let p="";return $(u,function(_,E){p+=E,p+=":",p+=_,p+=`\r
`}),p}function Ds(u,p,_){e:{for(E in _){var E=!1;break e}E=!0}E||(_=ya(_),typeof u=="string"?_!=null&&encodeURIComponent(String(_)):he(u,p,_))}function We(u){rt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}U(We,rt);var Eu=/^https?$/i,wa=["POST","PUT"];t=We.prototype,t.Ha=function(u){this.J=u},t.ea=function(u,p,_,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);p=p?p.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ks.g(),this.v=this.o?uu(this.o):uu(ks),this.g.onreadystatechange=I(this.Ea,this);try{this.B=!0,this.g.open(p,String(u),!0),this.B=!1}catch(W){Tu(this,W);return}if(u=_||"",_=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var V in E)_.set(V,E[V]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const W of E.keys())_.set(W,E.get(W));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(_.keys()).find(W=>W.toLowerCase()=="content-type"),V=h.FormData&&u instanceof h.FormData,!(0<=Array.prototype.indexOf.call(wa,p,void 0))||E||V||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,J]of _)this.g.setRequestHeader(W,J);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{$t(this),this.u=!0,this.g.send(u),this.u=!1}catch(W){Tu(this,W)}};function Tu(u,p){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=p,u.m=5,Ea(u),Ms(u)}function Ea(u){u.A||(u.A=!0,pt(u,"complete"),pt(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,pt(this,"complete"),pt(this,"abort"),Ms(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ms(this,!0)),We.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ee(this):this.bb())},t.bb=function(){Ee(this)};function Ee(u){if(u.h&&typeof l<"u"&&(!u.v[1]||zt(u)!=4||u.Z()!=2)){if(u.u&&zt(u)==4)au(u.Ea,0,u);else if(pt(u,"readystatechange"),zt(u)==4){u.h=!1;try{const J=u.Z();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var _;if(!(_=p)){var E;if(E=J===0){var V=String(u.D).match(je)[1]||null;!V&&h.self&&h.self.location&&(V=h.self.location.protocol.slice(0,-1)),E=!Eu.test(V?V.toLowerCase():"")}_=E}if(_)pt(u,"complete"),pt(u,"success");else{u.m=6;try{var W=2<zt(u)?u.g.statusText:""}catch{W=""}u.l=W+" ["+u.Z()+"]",Ea(u)}}finally{Ms(u)}}}}function Ms(u,p){if(u.g){$t(u);const _=u.g,E=u.v[0]?()=>{}:null;u.g=null,u.v=null,p||pt(u,"ready");try{_.onreadystatechange=E}catch{}}}function $t(u){u.I&&(h.clearTimeout(u.I),u.I=null)}t.isActive=function(){return!!this.g};function zt(u){return u.g?u.g.readyState:0}t.Z=function(){try{return 2<zt(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(u){if(this.g){var p=this.g.responseText;return u&&p.indexOf(u)==0&&(p=p.substring(u.length)),Jh(p)}};function Ta(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ed(u){const p={};u=(u.g&&2<=zt(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<u.length;E++){if(x(u[E]))continue;var _=O(u[E]);const V=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const W=p[V]||[];p[V]=W,W.push(_)}S(p,function(E){return E.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function hi(u,p,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||p}function Iu(u){this.Aa=0,this.i=[],this.j=new Vr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=hi("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=hi("baseRetryDelayMs",5e3,u),this.cb=hi("retryDelaySeedMs",1e4,u),this.Wa=hi("forwardChannelMaxRetries",2,u),this.wa=hi("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new la(u&&u.concurrentRequestLimit),this.Da=new _a,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Iu.prototype,t.la=8,t.G=1,t.connect=function(u,p,_,E){Et(0),this.W=u,this.H=p||{},_&&E!==void 0&&(this.H.OSID=_,this.H.OAID=E),this.F=this.X,this.I=Ws(this,null,this.W),$i(this)};function Vs(u){if(Su(u),u.G==3){var p=u.U++,_=Xe(u.I);if(he(_,"SID",u.K),he(_,"RID",p),he(_,"TYPE","terminate"),Wr(u,_),p=new An(u,u.j,p),p.L=2,p.v=fn(Xe(_)),_=!1,h.navigator&&h.navigator.sendBeacon)try{_=h.navigator.sendBeacon(p.v.toString(),"")}catch{}!_&&h.Image&&(new Image().src=p.v,_=!0),_||(p.g=xu(p.j,null),p.g.ea(p.v)),p.F=Date.now(),Ls(p)}Pu(u)}function Fs(u){u.g&&(Us(u),u.g.cancel(),u.g=null)}function Su(u){Fs(u),u.u&&(h.clearTimeout(u.u),u.u=null),js(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&h.clearTimeout(u.s),u.s=null)}function $i(u){if(!ua(u.h)&&!u.s){u.s=!0;var p=u.Ga;Ft||X(),q||(Ft(),q=!0),le.add(p,u),u.B=0}}function td(u,p){return Bi(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=p.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=Mr(I(u.Ga,u,p),Pa(u,u.B)),u.B++,!0)}t.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;const V=new An(this,this.j,u);let W=this.o;if(this.S&&(W?(W=T(W),C(W,this.S)):W=this.S),this.m!==null||this.O||(V.H=W,W=null),this.P)e:{for(var p=0,_=0;_<this.i.length;_++){t:{var E=this.i[_];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(p+=E,4096<p){p=_;break e}if(p===4096||_===this.i.length-1){p=_+1;break e}}p=1e3}else p=1e3;p=Ia(this,V,p),_=Xe(this.I),he(_,"RID",u),he(_,"CVER",22),this.D&&he(_,"X-HTTP-Session-Id",this.D),Wr(this,_),W&&(this.O?p="headers="+encodeURIComponent(String(ya(W)))+"&"+p:this.m&&Ds(_,this.m,W)),Ve(this.h,V),this.Ua&&he(_,"TYPE","init"),this.P?(he(_,"$req",p),he(_,"SID","null"),V.T=!0,sa(V,_,null)):sa(V,_,p),this.G=2}}else this.G==3&&(u?nn(this,u):this.i.length==0||ua(this.h)||nn(this))};function nn(u,p){var _;p?_=p.l:_=u.U++;const E=Xe(u.I);he(E,"SID",u.K),he(E,"RID",_),he(E,"AID",u.T),Wr(u,E),u.m&&u.o&&Ds(E,u.m,u.o),_=new An(u,u.j,_,u.B+1),u.m===null&&(_.H=u.o),p&&(u.i=p.D.concat(u.i)),p=Ia(u,_,1e3),_.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Ve(u.h,_),sa(_,E,p)}function Wr(u,p){u.H&&$(u.H,function(_,E){he(p,E,_)}),u.l&&ge({},function(_,E){he(p,E,_)})}function Ia(u,p,_){_=Math.min(u.i.length,_);var E=u.l?I(u.l.Na,u.l,u):null;e:{var V=u.i;let W=-1;for(;;){const J=["count="+_];W==-1?0<_?(W=V[0].g,J.push("ofs="+W)):W=0:J.push("ofs="+W);let Ne=!0;for(let st=0;st<_;st++){let Ae=V[st].g;const Me=V[st].map;if(Ae-=W,0>Ae)W=Math.max(0,V[st].g-100),Ne=!1;else try{va(Me,J,"req"+Ae+"_")}catch{E&&E(Me)}}if(Ne){E=J.join("&");break e}}}return u=u.i.splice(0,_),p.D=u,E}function Rn(u){if(!u.g&&!u.u){u.Y=1;var p=u.Fa;Ft||X(),q||(Ft(),q=!0),le.add(p,u),u.v=0}}function zs(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=Mr(I(u.Fa,u),Pa(u,u.v)),u.v++,!0)}t.Fa=function(){if(this.u=null,Bs(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=Mr(I(this.ab,this),u)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),Fs(this),Bs(this))};function Us(u){u.A!=null&&(h.clearTimeout(u.A),u.A=null)}function Bs(u){u.g=new An(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var p=Xe(u.qa);he(p,"RID","rpc"),he(p,"SID",u.K),he(p,"AID",u.T),he(p,"CI",u.F?"0":"1"),!u.F&&u.ja&&he(p,"TO",u.ja),he(p,"TYPE","xmlhttp"),Wr(u,p),u.m&&u.o&&Ds(p,u.m,u.o),u.L&&(u.g.I=u.L);var _=u.g;u=u.ia,_.L=1,_.v=fn(Xe(p)),_.m=null,_.P=!0,oa(_,u)}t.Za=function(){this.C!=null&&(this.C=null,Fs(this),zs(this),Et(19))};function js(u){u.C!=null&&(h.clearTimeout(u.C),u.C=null)}function Sa(u,p){var _=null;if(u.g==p){js(u),Us(u),u.g=null;var E=2}else if(Se(u.h,p))_=p.D,jr(u.h,p),E=1;else return;if(u.G!=0){if(p.o)if(E==1){_=p.m?p.m.length:0,p=Date.now()-p.F;var V=u.B;E=xs(),pt(E,new du(E,_)),$i(u)}else Rn(u);else if(V=p.s,V==3||V==0&&0<p.X||!(E==1&&td(u,p)||E==2&&zs(u)))switch(_&&0<_.length&&(p=u.h,p.i=p.i.concat(_)),V){case 1:di(u,5);break;case 4:di(u,10);break;case 3:di(u,6);break;default:di(u,2)}}}function Pa(u,p){let _=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(_*=2),_*p}function di(u,p){if(u.j.info("Error code "+p),p==2){var _=I(u.fb,u),E=u.Xa;const V=!E;E=new dn(E||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ns(E,"https"),fn(E),V?De(E.toString(),_):wu(E.toString(),_)}else Et(2);u.G=0,u.l&&u.l.sa(p),Pu(u),Su(u)}t.fb=function(u){u?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function Pu(u){if(u.G=0,u.ka=[],u.l){const p=li(u.h);(p.length!=0||u.i.length!=0)&&(Z(u.ka,p),Z(u.ka,u.i),u.h.i.length=0,B(u.i),u.i.length=0),u.l.ra()}}function Ws(u,p,_){var E=_ instanceof dn?Xe(_):new dn(_);if(E.g!="")p&&(E.g=p+"."+E.g),ui(E,E.s);else{var V=h.location;E=V.protocol,p=p?p+"."+V.hostname:V.hostname,V=+V.port;var W=new dn(null);E&&Ns(W,E),p&&(W.g=p),V&&ui(W,V),_&&(W.l=_),E=W}return _=u.D,p=u.ya,_&&p&&he(E,_,p),he(E,"VER",u.la),Wr(u,E),E}function xu(u,p,_){if(p&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=u.Ca&&!u.pa?new We(new gn({eb:_})):new We(u.pa),p.Ha(u.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function xa(){}t=xa.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Hr(){}Hr.prototype.g=function(u,p){return new mt(u,p)};function mt(u,p){rt.call(this),this.g=new Iu(p),this.l=u,this.h=p&&p.messageUrlParams||null,u=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(u?u["X-WebChannel-Content-Type"]=p.messageContentType:u={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(u?u["X-WebChannel-Client-Profile"]=p.va:u={"X-WebChannel-Client-Profile":p.va}),this.g.S=u,(u=p&&p.Sb)&&!x(u)&&(this.g.m=u),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!x(p)&&(this.g.D=p,u=this.h,u!==null&&p in u&&(u=this.h,p in u&&delete u[p])),this.j=new _n(this)}U(mt,rt),mt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mt.prototype.close=function(){Vs(this.g)},mt.prototype.o=function(u){var p=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.u&&(_={},_.__data__=Ss(u),u=_);p.i.push(new Br(p.Ya++,u)),p.G==3&&$i(p)},mt.prototype.N=function(){this.g.l=null,delete this.j,Vs(this.g),delete this.g,mt.aa.N.call(this)};function Wn(u){Ps.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var p=u.__sm__;if(p){e:{for(const _ in p){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,p=p!==null&&u in p?p[u]:void 0),this.data=p}else this.data=u}U(Wn,Ps);function Au(){ia.call(this),this.status=1}U(Au,ia);function _n(u){this.g=u}U(_n,xa),_n.prototype.ua=function(){pt(this.g,"a")},_n.prototype.ta=function(u){pt(this.g,new Wn(u))},_n.prototype.sa=function(u){pt(this.g,new Au)},_n.prototype.ra=function(){pt(this.g,"b")},Hr.prototype.createWebChannel=Hr.prototype.g,mt.prototype.send=mt.prototype.o,mt.prototype.open=mt.prototype.m,mt.prototype.close=mt.prototype.close,oE=function(){return new Hr},sE=function(){return xs()},rE=si,Jf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fr.NO_ERROR=0,Fr.TIMEOUT=8,Fr.HTTP_ERROR=6,Pc=Fr,Cs.COMPLETE="complete",iE=Cs,na.EventType=Ui,Ui.OPEN="a",Ui.CLOSE="b",Ui.ERROR="c",Ui.MESSAGE="d",rt.prototype.listen=rt.prototype.K,Za=na,We.prototype.listenOnce=We.prototype.L,We.prototype.getLastError=We.prototype.Ka,We.prototype.getLastErrorCode=We.prototype.Ba,We.prototype.getStatus=We.prototype.Z,We.prototype.getResponseJson=We.prototype.Oa,We.prototype.getResponseText=We.prototype.oa,We.prototype.send=We.prototype.ea,We.prototype.setWithCredentials=We.prototype.Ha,nE=We}).apply(typeof ic<"u"?ic:typeof self<"u"?self:typeof window<"u"?window:{});const uv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}bt.UNAUTHENTICATED=new bt(null),bt.GOOGLE_CREDENTIALS=new bt("google-credentials-uid"),bt.FIRST_PARTY=new bt("first-party-uid"),bt.MOCK_USER=new bt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us=new um("@firebase/firestore");function Ua(){return us.logLevel}function ie(t,...e){if(us.logLevel<=xe.DEBUG){const n=e.map(Tm);us.debug(`Firestore (${qo}): ${t}`,...n)}}function Oi(t,...e){if(us.logLevel<=xe.ERROR){const n=e.map(Tm);us.error(`Firestore (${qo}): ${t}`,...n)}}function bo(t,...e){if(us.logLevel<=xe.WARN){const n=e.map(Tm);us.warn(`Firestore (${qo}): ${t}`,...n)}}function Tm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function de(t="Unexpected state"){const e=`FIRESTORE (${qo}) INTERNAL ASSERTION FAILED: `+t;throw Oi(e),new Error(e)}function Oe(t,e){t||de()}function me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ne extends Vi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Lk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(bt.UNAUTHENTICATED))}shutdown(){}}class Nk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class bk{constructor(e){this.t=e,this.currentUser=bt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Oe(this.o===void 0);let i=this.i;const s=d=>this.i!==i?(i=this.i,n(d)):Promise.resolve();let o=new Ai;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new Ai,e.enqueueRetryable(()=>s(this.currentUser))};const l=()=>{const d=o;e.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},h=d=>{ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=d,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit(d=>h(d)),setTimeout(()=>{if(!this.auth){const d=this.t.getImmediate({optional:!0});d?h(d):(ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new Ai)}},0),l()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(i=>this.i!==e?(ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Oe(typeof i.accessToken=="string"),new aE(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Oe(e===null||typeof e=="string"),new bt(e)}}class Ok{constructor(e,n,i){this.l=e,this.h=n,this.P=i,this.type="FirstParty",this.user=bt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Dk{constructor(e,n,i){this.l=e,this.h=n,this.P=i}getToken(){return Promise.resolve(new Ok(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(bt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Mk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Vk{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){Oe(this.o===void 0);const i=o=>{o.error!=null&&ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const l=o.token!==this.R;return this.R=o.token,ie("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>i(o))};const s=o=>{ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?s(o):ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Oe(typeof n.token=="string"),this.R=n.token,new Mk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=Fk(40);for(let o=0;o<s.length;++o)i.length<20&&s[o]<n&&(i+=e.charAt(s[o]%e.length))}return i}}function Re(t,e){return t<e?-1:t>e?1:0}function Oo(t,e,n){return t.length===e.length&&t.every((i,s)=>n(i,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ne(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ne(G.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ne(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ne(G.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return it.fromMillis(Date.now())}static fromDate(e){return it.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*n));return new it(n,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Re(this.nanoseconds,e.nanoseconds):Re(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new pe(e)}static min(){return new pe(new it(0,0))}static max(){return new pe(new it(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n,i){n===void 0?n=0:n>e.length&&de(),i===void 0?i=e.length-n:i>e.length-n&&de(),this.segments=e,this.offset=n,this.len=i}get length(){return this.len}isEqual(e){return Nl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Nl?e.forEach(i=>{n.push(i)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,i=this.limit();n<i;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const i=Math.min(e.length,n.length);for(let s=0;s<i;s++){const o=e.get(s),l=n.get(s);if(o<l)return-1;if(o>l)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ue extends Nl{construct(e,n,i){return new Ue(e,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const i of e){if(i.indexOf("//")>=0)throw new ne(G.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter(s=>s.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const zk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Pt extends Nl{construct(e,n,i){return new Pt(e,n,i)}static isValidIdentifier(e){return zk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Pt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Pt(["__name__"])}static fromServerFormat(e){const n=[];let i="",s=0;const o=()=>{if(i.length===0)throw new ne(G.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let l=!1;for(;s<e.length;){const h=e[s];if(h==="\\"){if(s+1===e.length)throw new ne(G.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const d=e[s+1];if(d!=="\\"&&d!=="."&&d!=="`")throw new ne(G.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=d,s+=2}else h==="`"?(l=!l,s++):h!=="."||l?(i+=h,s++):(o(),s++)}if(o(),l)throw new ne(G.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Pt(n)}static emptyPath(){return new Pt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(e){this.path=e}static fromPath(e){return new se(Ue.fromString(e))}static fromName(e){return new se(Ue.fromString(e).popFirst(5))}static empty(){return new se(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new se(new Ue(e.slice()))}}function Uk(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,s=pe.fromTimestamp(i===1e9?new it(n+1,0):new it(n,i));return new Tr(s,se.empty(),e)}function Bk(t){return new Tr(t.readTime,t.key,-1)}class Tr{constructor(e,n,i){this.readTime=e,this.documentKey=n,this.largestBatchId=i}static min(){return new Tr(pe.min(),se.empty(),-1)}static max(){return new Tr(pe.max(),se.empty(),-1)}}function jk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=se.comparator(t.documentKey,e.documentKey),n!==0?n:Re(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kl(t){if(t.code!==G.FAILED_PRECONDITION||t.message!==Wk)throw t;ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&de(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Q((i,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(i,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(i,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Q?n:Q.resolve(n)}catch(n){return Q.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Q.reject(n)}static resolve(e){return new Q((n,i)=>{n(e)})}static reject(e){return new Q((n,i)=>{i(e)})}static waitFor(e){return new Q((n,i)=>{let s=0,o=0,l=!1;e.forEach(h=>{++s,h.next(()=>{++o,l&&o===s&&n()},d=>i(d))}),l=!0,o===s&&n()})}static or(e){let n=Q.resolve(!1);for(const i of e)n=n.next(s=>s?Q.resolve(s):i());return n}static forEach(e,n){const i=[];return e.forEach((s,o)=>{i.push(n.call(this,s,o))}),this.waitFor(i)}static mapArray(e,n){return new Q((i,s)=>{const o=e.length,l=new Array(o);let h=0;for(let d=0;d<o;d++){const m=d;n(e[m]).next(v=>{l[m]=v,++h,h===o&&i(l)},v=>s(v))}})}static doWhile(e,n){return new Q((i,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):i()};o()})}}function qk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ql(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=i=>this.ie(i),this.se=i=>n.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Im.oe=-1;function Vh(t){return t==null}function ah(t){return t===0&&1/t==-1/0}function $k(t){return typeof t=="number"&&Number.isInteger(t)&&!ah(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ms(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function uE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e,n){this.comparator=e,this.root=n||St.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,St.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,St.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(e){let n=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return n+i.left.size;s<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,i)=>(e(n,i),!1))}toString(){const e=[];return this.inorderTraversal((n,i)=>(e.push(`${n}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new rc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new rc(this.root,e,this.comparator,!1)}getReverseIterator(){return new rc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new rc(this.root,e,this.comparator,!0)}}class rc{constructor(e,n,i,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?i(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class St{constructor(e,n,i,s,o){this.key=e,this.value=n,this.color=i??St.RED,this.left=s??St.EMPTY,this.right=o??St.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,i,s,o){return new St(e??this.key,n??this.value,i??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let s=this;const o=i(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,i),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return St.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let i,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return St.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,St.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,St.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw de();const e=this.left.check();if(e!==this.right.check())throw de();return e+(this.isRed()?0:1)}}St.EMPTY=null,St.RED=!0,St.BLACK=!1;St.EMPTY=new class{constructor(){this.size=0}get key(){throw de()}get value(){throw de()}get color(){throw de()}get left(){throw de()}get right(){throw de()}copy(e,n,i,s,o){return this}insert(e,n,i){return new St(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,i)=>(e(n),!1))}forEachInRange(e,n){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new hv(this.data.getIterator())}getIteratorFrom(e){return new hv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(i=>{n=n.add(i)}),n}isEqual(e){if(!(e instanceof At)||this.size!==e.size)return!1;const n=this.data.getIterator(),i=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new At(this.comparator);return n.data=e,n}}class hv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.fields=e,e.sort(Pt.comparator)}static empty(){return new on([])}unionWith(e){let n=new At(Pt.comparator);for(const i of this.fields)n=n.add(i);for(const i of e)n=n.add(i);return new on(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oo(this.fields,e.fields,(n,i)=>n.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new cE("Invalid base64 string: "+o):o}}(e);return new kt(n)}static fromUint8Array(e){const n=function(s){let o="";for(let l=0;l<s.length;++l)o+=String.fromCharCode(s[l]);return o}(e);return new kt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const i=new Uint8Array(n.length);for(let s=0;s<n.length;s++)i[s]=n.charCodeAt(s);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Re(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const Gk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ir(t){if(Oe(!!t),typeof t=="string"){let e=0;const n=Gk.exec(t);if(Oe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:tt(t.seconds),nanos:tt(t.nanos)}}function tt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function cs(t){return typeof t=="string"?kt.fromBase64String(t):kt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Pm(t){const e=t.mapValue.fields.__previous_value__;return Sm(e)?Pm(e):e}function bl(t){const e=Ir(t.mapValue.fields.__local_write_time__.timestampValue);return new it(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(e,n,i,s,o,l,h,d,m){this.databaseId=e,this.appId=n,this.persistenceKey=i,this.host=s,this.ssl=o,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=d,this.useFetchStreams=m}}class Ol{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ol("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ol&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sc={mapValue:{}};function hs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Sm(t)?4:Qk(t)?9007199254740991:Kk(t)?10:11:de()}function ni(t,e){if(t===e)return!0;const n=hs(t);if(n!==hs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return bl(t).isEqual(bl(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const l=Ir(s.timestampValue),h=Ir(o.timestampValue);return l.seconds===h.seconds&&l.nanos===h.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return cs(s.bytesValue).isEqual(cs(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return tt(s.geoPointValue.latitude)===tt(o.geoPointValue.latitude)&&tt(s.geoPointValue.longitude)===tt(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return tt(s.integerValue)===tt(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const l=tt(s.doubleValue),h=tt(o.doubleValue);return l===h?ah(l)===ah(h):isNaN(l)&&isNaN(h)}return!1}(t,e);case 9:return Oo(t.arrayValue.values||[],e.arrayValue.values||[],ni);case 10:case 11:return function(s,o){const l=s.mapValue.fields||{},h=o.mapValue.fields||{};if(cv(l)!==cv(h))return!1;for(const d in l)if(l.hasOwnProperty(d)&&(h[d]===void 0||!ni(l[d],h[d])))return!1;return!0}(t,e);default:return de()}}function Dl(t,e){return(t.values||[]).find(n=>ni(n,e))!==void 0}function Do(t,e){if(t===e)return 0;const n=hs(t),i=hs(e);if(n!==i)return Re(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return Re(t.booleanValue,e.booleanValue);case 2:return function(o,l){const h=tt(o.integerValue||o.doubleValue),d=tt(l.integerValue||l.doubleValue);return h<d?-1:h>d?1:h===d?0:isNaN(h)?isNaN(d)?0:-1:1}(t,e);case 3:return dv(t.timestampValue,e.timestampValue);case 4:return dv(bl(t),bl(e));case 5:return Re(t.stringValue,e.stringValue);case 6:return function(o,l){const h=cs(o),d=cs(l);return h.compareTo(d)}(t.bytesValue,e.bytesValue);case 7:return function(o,l){const h=o.split("/"),d=l.split("/");for(let m=0;m<h.length&&m<d.length;m++){const v=Re(h[m],d[m]);if(v!==0)return v}return Re(h.length,d.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,l){const h=Re(tt(o.latitude),tt(l.latitude));return h!==0?h:Re(tt(o.longitude),tt(l.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return fv(t.arrayValue,e.arrayValue);case 10:return function(o,l){var h,d,m,v;const w=o.fields||{},I=l.fields||{},D=(h=w.value)===null||h===void 0?void 0:h.arrayValue,U=(d=I.value)===null||d===void 0?void 0:d.arrayValue,B=Re(((m=D==null?void 0:D.values)===null||m===void 0?void 0:m.length)||0,((v=U==null?void 0:U.values)===null||v===void 0?void 0:v.length)||0);return B!==0?B:fv(D,U)}(t.mapValue,e.mapValue);case 11:return function(o,l){if(o===sc.mapValue&&l===sc.mapValue)return 0;if(o===sc.mapValue)return 1;if(l===sc.mapValue)return-1;const h=o.fields||{},d=Object.keys(h),m=l.fields||{},v=Object.keys(m);d.sort(),v.sort();for(let w=0;w<d.length&&w<v.length;++w){const I=Re(d[w],v[w]);if(I!==0)return I;const D=Do(h[d[w]],m[v[w]]);if(D!==0)return D}return Re(d.length,v.length)}(t.mapValue,e.mapValue);default:throw de()}}function dv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Re(t,e);const n=Ir(t),i=Ir(e),s=Re(n.seconds,i.seconds);return s!==0?s:Re(n.nanos,i.nanos)}function fv(t,e){const n=t.values||[],i=e.values||[];for(let s=0;s<n.length&&s<i.length;++s){const o=Do(n[s],i[s]);if(o)return o}return Re(n.length,i.length)}function Mo(t){return ep(t)}function ep(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const i=Ir(n);return`time(${i.seconds},${i.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return cs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return se.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let i="[",s=!0;for(const o of n.values||[])s?s=!1:i+=",",i+=ep(o);return i+"]"}(t.arrayValue):"mapValue"in t?function(n){const i=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const l of i)o?o=!1:s+=",",s+=`${l}:${ep(n.fields[l])}`;return s+"}"}(t.mapValue):de()}function pv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function tp(t){return!!t&&"integerValue"in t}function xm(t){return!!t&&"arrayValue"in t}function mv(t){return!!t&&"nullValue"in t}function gv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xc(t){return!!t&&"mapValue"in t}function Kk(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ll(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ms(t.mapValue.fields,(n,i)=>e.mapValue.fields[n]=ll(i)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ll(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Qk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e){this.value=e}static empty(){return new Kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let i=0;i<e.length-1;++i)if(n=(n.mapValue.fields||{})[e.get(i)],!xc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ll(n)}setAll(e){let n=Pt.emptyPath(),i={},s=[];e.forEach((l,h)=>{if(!n.isImmediateParentOf(h)){const d=this.getFieldsMap(n);this.applyChanges(d,i,s),i={},s=[],n=h.popLast()}l?i[h.lastSegment()]=ll(l):s.push(h.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,i,s)}delete(e){const n=this.field(e.popLast());xc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return ni(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=n.mapValue.fields[e.get(i)];xc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(i)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,i){ms(n,(s,o)=>e[s]=o);for(const s of i)delete e[s]}clone(){return new Kt(ll(this.value))}}function hE(t){const e=[];return ms(t.fields,(n,i)=>{const s=new Pt([n]);if(xc(i)){const o=hE(i.mapValue).fields;if(o.length===0)e.push(s);else for(const l of o)e.push(s.child(l))}else e.push(s)}),new on(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,n,i,s,o,l,h){this.key=e,this.documentType=n,this.version=i,this.readTime=s,this.createTime=o,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Dt(e,0,pe.min(),pe.min(),pe.min(),Kt.empty(),0)}static newFoundDocument(e,n,i,s){return new Dt(e,1,n,pe.min(),i,s,0)}static newNoDocument(e,n){return new Dt(e,2,n,pe.min(),pe.min(),Kt.empty(),0)}static newUnknownDocument(e,n){return new Dt(e,3,n,pe.min(),pe.min(),Kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(pe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e,n){this.position=e,this.inclusive=n}}function _v(t,e,n){let i=0;for(let s=0;s<t.position.length;s++){const o=e[s],l=t.position[s];if(o.field.isKeyField()?i=se.comparator(se.fromName(l.referenceValue),n.key):i=Do(l,n.data.field(o.field)),o.dir==="desc"&&(i*=-1),i!==0)break}return i}function vv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ni(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,n="asc"){this.field=e,this.dir=n}}function Yk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{}class ut extends dE{constructor(e,n,i){super(),this.field=e,this.op=n,this.value=i}static create(e,n,i){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,i):new Jk(e,n,i):n==="array-contains"?new nR(e,i):n==="in"?new iR(e,i):n==="not-in"?new rR(e,i):n==="array-contains-any"?new sR(e,i):new ut(e,n,i)}static createKeyFieldInFilter(e,n,i){return n==="in"?new eR(e,i):new tR(e,i)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Do(n,this.value)):n!==null&&hs(this.value)===hs(n)&&this.matchesComparison(Do(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return de()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zn extends dE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new zn(e,n)}matches(e){return fE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function fE(t){return t.op==="and"}function pE(t){return Xk(t)&&fE(t)}function Xk(t){for(const e of t.filters)if(e instanceof zn)return!1;return!0}function np(t){if(t instanceof ut)return t.field.canonicalString()+t.op.toString()+Mo(t.value);if(pE(t))return t.filters.map(e=>np(e)).join(",");{const e=t.filters.map(n=>np(n)).join(",");return`${t.op}(${e})`}}function mE(t,e){return t instanceof ut?function(i,s){return s instanceof ut&&i.op===s.op&&i.field.isEqual(s.field)&&ni(i.value,s.value)}(t,e):t instanceof zn?function(i,s){return s instanceof zn&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce((o,l,h)=>o&&mE(l,s.filters[h]),!0):!1}(t,e):void de()}function gE(t){return t instanceof ut?function(n){return`${n.field.canonicalString()} ${n.op} ${Mo(n.value)}`}(t):t instanceof zn?function(n){return n.op.toString()+" {"+n.getFilters().map(gE).join(" ,")+"}"}(t):"Filter"}class Jk extends ut{constructor(e,n,i){super(e,n,i),this.key=se.fromName(i.referenceValue)}matches(e){const n=se.comparator(e.key,this.key);return this.matchesComparison(n)}}class eR extends ut{constructor(e,n){super(e,"in",n),this.keys=_E("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class tR extends ut{constructor(e,n){super(e,"not-in",n),this.keys=_E("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function _E(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(i=>se.fromName(i.referenceValue))}class nR extends ut{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return xm(n)&&Dl(n.arrayValue,this.value)}}class iR extends ut{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Dl(this.value.arrayValue,n)}}class rR extends ut{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Dl(this.value.arrayValue,n)}}class sR extends ut{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!xm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(i=>Dl(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n=null,i=[],s=[],o=null,l=null,h=null){this.path=e,this.collectionGroup=n,this.orderBy=i,this.filters=s,this.limit=o,this.startAt=l,this.endAt=h,this.ue=null}}function yv(t,e=null,n=[],i=[],s=null,o=null,l=null){return new oR(t,e,n,i,s,o,l)}function Am(t){const e=me(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(i=>np(i)).join(","),n+="|ob:",n+=e.orderBy.map(i=>function(o){return o.field.canonicalString()+o.dir}(i)).join(","),Vh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(i=>Mo(i)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(i=>Mo(i)).join(",")),e.ue=n}return e.ue}function Cm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Yk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vv(t.startAt,e.startAt)&&vv(t.endAt,e.endAt)}function ip(t){return se.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(e,n=null,i=[],s=[],o=null,l="F",h=null,d=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=s,this.limit=o,this.limitType=l,this.startAt=h,this.endAt=d,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function aR(t,e,n,i,s,o,l,h){return new Yl(t,e,n,i,s,o,l,h)}function km(t){return new Yl(t)}function wv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function vE(t){return t.collectionGroup!==null}function ul(t){const e=me(t);if(e.ce===null){e.ce=[];const n=new Set;for(const o of e.explicitOrderBy)e.ce.push(o),n.add(o.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let h=new At(Pt.comparator);return l.filters.forEach(d=>{d.getFlattenedFilters().forEach(m=>{m.isInequality()&&(h=h.add(m.field))})}),h})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.ce.push(new uh(o,i))}),n.has(Pt.keyField().canonicalString())||e.ce.push(new uh(Pt.keyField(),i))}return e.ce}function ei(t){const e=me(t);return e.le||(e.le=lR(e,ul(t))),e.le}function lR(t,e){if(t.limitType==="F")return yv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new uh(s.field,o)});const n=t.endAt?new lh(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new lh(t.startAt.position,t.startAt.inclusive):null;return yv(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function rp(t,e){const n=t.filters.concat([e]);return new Yl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function sp(t,e,n){return new Yl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Fh(t,e){return Cm(ei(t),ei(e))&&t.limitType===e.limitType}function yE(t){return`${Am(ei(t))}|lt:${t.limitType}`}function Ys(t){return`Query(target=${function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map(s=>gE(s)).join(", ")}]`),Vh(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map(s=>function(l){return`${l.field.canonicalString()} (${l.dir})`}(s)).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map(s=>Mo(s)).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map(s=>Mo(s)).join(",")),`Target(${i})`}(ei(t))}; limitType=${t.limitType})`}function zh(t,e){return e.isFoundDocument()&&function(i,s){const o=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(o):se.isDocumentKey(i.path)?i.path.isEqual(o):i.path.isImmediateParentOf(o)}(t,e)&&function(i,s){for(const o of ul(i))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(i,s){for(const o of i.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(i,s){return!(i.startAt&&!function(l,h,d){const m=_v(l,h,d);return l.inclusive?m<=0:m<0}(i.startAt,ul(i),s)||i.endAt&&!function(l,h,d){const m=_v(l,h,d);return l.inclusive?m>=0:m>0}(i.endAt,ul(i),s))}(t,e)}function uR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wE(t){return(e,n)=>{let i=!1;for(const s of ul(t)){const o=cR(s,e,n);if(o!==0)return o;i=i||s.field.isKeyField()}return 0}}function cR(t,e,n){const i=t.field.isKeyField()?se.comparator(e.key,n.key):function(o,l,h){const d=l.data.field(o),m=h.data.field(o);return d!==null&&m!==null?Do(d,m):de()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return de()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i!==void 0){for(const[s,o]of i)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),i=this.inner[n];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[n]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){ms(this.inner,(n,i)=>{for(const[s,o]of i)e(s,o)})}isEmpty(){return uE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=new Qe(se.comparator);function Di(){return hR}const EE=new Qe(se.comparator);function Ka(...t){let e=EE;for(const n of t)e=e.insert(n.key,n);return e}function TE(t){let e=EE;return t.forEach((n,i)=>e=e.insert(n,i.overlayedDocument)),e}function Yr(){return cl()}function IE(){return cl()}function cl(){return new $o(t=>t.toString(),(t,e)=>t.isEqual(e))}const dR=new Qe(se.comparator),fR=new At(se.comparator);function Pe(...t){let e=fR;for(const n of t)e=e.add(n);return e}const pR=new At(Re);function mR(){return pR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ah(e)?"-0":e}}function SE(t){return{integerValue:""+t}}function gR(t,e){return $k(e)?SE(e):Rm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uh{constructor(){this._=void 0}}function _R(t,e,n){return t instanceof ch?function(s,o){const l={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Sm(o)&&(o=Pm(o)),o&&(l.fields.__previous_value__=o),{mapValue:l}}(n,e):t instanceof Ml?xE(t,e):t instanceof Vl?AE(t,e):function(s,o){const l=PE(s,o),h=Ev(l)+Ev(s.Pe);return tp(l)&&tp(s.Pe)?SE(h):Rm(s.serializer,h)}(t,e)}function vR(t,e,n){return t instanceof Ml?xE(t,e):t instanceof Vl?AE(t,e):n}function PE(t,e){return t instanceof hh?function(i){return tp(i)||function(o){return!!o&&"doubleValue"in o}(i)}(e)?e:{integerValue:0}:null}class ch extends Uh{}class Ml extends Uh{constructor(e){super(),this.elements=e}}function xE(t,e){const n=CE(e);for(const i of t.elements)n.some(s=>ni(s,i))||n.push(i);return{arrayValue:{values:n}}}class Vl extends Uh{constructor(e){super(),this.elements=e}}function AE(t,e){let n=CE(e);for(const i of t.elements)n=n.filter(s=>!ni(s,i));return{arrayValue:{values:n}}}class hh extends Uh{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Ev(t){return tt(t.integerValue||t.doubleValue)}function CE(t){return xm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function yR(t,e){return t.field.isEqual(e.field)&&function(i,s){return i instanceof Ml&&s instanceof Ml||i instanceof Vl&&s instanceof Vl?Oo(i.elements,s.elements,ni):i instanceof hh&&s instanceof hh?ni(i.Pe,s.Pe):i instanceof ch&&s instanceof ch}(t.transform,e.transform)}class wR{constructor(e,n){this.version=e,this.transformResults=n}}class In{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new In}static exists(e){return new In(void 0,e)}static updateTime(e){return new In(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ac(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Bh{}function kE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Lm(t.key,In.none()):new Xl(t.key,t.data,In.none());{const n=t.data,i=Kt.empty();let s=new At(Pt.comparator);for(let o of e.fields)if(!s.has(o)){let l=n.field(o);l===null&&o.length>1&&(o=o.popLast(),l=n.field(o)),l===null?i.delete(o):i.set(o,l),s=s.add(o)}return new Rr(t.key,i,new on(s.toArray()),In.none())}}function ER(t,e,n){t instanceof Xl?function(s,o,l){const h=s.value.clone(),d=Iv(s.fieldTransforms,o,l.transformResults);h.setAll(d),o.convertToFoundDocument(l.version,h).setHasCommittedMutations()}(t,e,n):t instanceof Rr?function(s,o,l){if(!Ac(s.precondition,o))return void o.convertToUnknownDocument(l.version);const h=Iv(s.fieldTransforms,o,l.transformResults),d=o.data;d.setAll(RE(s)),d.setAll(h),o.convertToFoundDocument(l.version,d).setHasCommittedMutations()}(t,e,n):function(s,o,l){o.convertToNoDocument(l.version).setHasCommittedMutations()}(0,e,n)}function hl(t,e,n,i){return t instanceof Xl?function(o,l,h,d){if(!Ac(o.precondition,l))return h;const m=o.value.clone(),v=Sv(o.fieldTransforms,d,l);return m.setAll(v),l.convertToFoundDocument(l.version,m).setHasLocalMutations(),null}(t,e,n,i):t instanceof Rr?function(o,l,h,d){if(!Ac(o.precondition,l))return h;const m=Sv(o.fieldTransforms,d,l),v=l.data;return v.setAll(RE(o)),v.setAll(m),l.convertToFoundDocument(l.version,v).setHasLocalMutations(),h===null?null:h.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(w=>w.field))}(t,e,n,i):function(o,l,h){return Ac(o.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):h}(t,e,n)}function TR(t,e){let n=null;for(const i of t.fieldTransforms){const s=e.data.field(i.field),o=PE(i.transform,s||null);o!=null&&(n===null&&(n=Kt.empty()),n.set(i.field,o))}return n||null}function Tv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&Oo(i,s,(o,l)=>yR(o,l))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Xl extends Bh{constructor(e,n,i,s=[]){super(),this.key=e,this.value=n,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Rr extends Bh{constructor(e,n,i,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=i,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function RE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}}),e}function Iv(t,e,n){const i=new Map;Oe(t.length===n.length);for(let s=0;s<n.length;s++){const o=t[s],l=o.transform,h=e.data.field(o.field);i.set(o.field,vR(l,h,n[s]))}return i}function Sv(t,e,n){const i=new Map;for(const s of t){const o=s.transform,l=n.data.field(s.field);i.set(s.field,_R(o,l,e))}return i}class Lm extends Bh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class IR extends Bh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(e,n,i,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,n){const i=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&ER(o,e,i[s])}}applyToLocalView(e,n){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(n=hl(i,e,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(n=hl(i,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const i=IE();return this.mutations.forEach(s=>{const o=e.get(s.key),l=o.overlayedDocument;let h=this.applyToLocalView(l,o.mutatedFields);h=n.has(s.key)?null:h;const d=kE(l,h);d!==null&&i.set(s.key,d),l.isValidDocument()||l.convertToNoDocument(pe.min())}),i}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Pe())}isEqual(e){return this.batchId===e.batchId&&Oo(this.mutations,e.mutations,(n,i)=>Tv(n,i))&&Oo(this.baseMutations,e.baseMutations,(n,i)=>Tv(n,i))}}class Nm{constructor(e,n,i,s){this.batch=e,this.commitVersion=n,this.mutationResults=i,this.docVersions=s}static from(e,n,i){Oe(e.mutations.length===i.length);let s=function(){return dR}();const o=e.mutations;for(let l=0;l<o.length;l++)s=s.insert(o[l].key,i[l].version);return new Nm(e,n,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at,Ce;function AR(t){switch(t){default:return de();case G.CANCELLED:case G.UNKNOWN:case G.DEADLINE_EXCEEDED:case G.RESOURCE_EXHAUSTED:case G.INTERNAL:case G.UNAVAILABLE:case G.UNAUTHENTICATED:return!1;case G.INVALID_ARGUMENT:case G.NOT_FOUND:case G.ALREADY_EXISTS:case G.PERMISSION_DENIED:case G.FAILED_PRECONDITION:case G.ABORTED:case G.OUT_OF_RANGE:case G.UNIMPLEMENTED:case G.DATA_LOSS:return!0}}function LE(t){if(t===void 0)return Oi("GRPC error has no .code"),G.UNKNOWN;switch(t){case at.OK:return G.OK;case at.CANCELLED:return G.CANCELLED;case at.UNKNOWN:return G.UNKNOWN;case at.DEADLINE_EXCEEDED:return G.DEADLINE_EXCEEDED;case at.RESOURCE_EXHAUSTED:return G.RESOURCE_EXHAUSTED;case at.INTERNAL:return G.INTERNAL;case at.UNAVAILABLE:return G.UNAVAILABLE;case at.UNAUTHENTICATED:return G.UNAUTHENTICATED;case at.INVALID_ARGUMENT:return G.INVALID_ARGUMENT;case at.NOT_FOUND:return G.NOT_FOUND;case at.ALREADY_EXISTS:return G.ALREADY_EXISTS;case at.PERMISSION_DENIED:return G.PERMISSION_DENIED;case at.FAILED_PRECONDITION:return G.FAILED_PRECONDITION;case at.ABORTED:return G.ABORTED;case at.OUT_OF_RANGE:return G.OUT_OF_RANGE;case at.UNIMPLEMENTED:return G.UNIMPLEMENTED;case at.DATA_LOSS:return G.DATA_LOSS;default:return de()}}(Ce=at||(at={}))[Ce.OK=0]="OK",Ce[Ce.CANCELLED=1]="CANCELLED",Ce[Ce.UNKNOWN=2]="UNKNOWN",Ce[Ce.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ce[Ce.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ce[Ce.NOT_FOUND=5]="NOT_FOUND",Ce[Ce.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ce[Ce.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ce[Ce.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ce[Ce.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ce[Ce.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ce[Ce.ABORTED=10]="ABORTED",Ce[Ce.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ce[Ce.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ce[Ce.INTERNAL=13]="INTERNAL",Ce[Ce.UNAVAILABLE=14]="UNAVAILABLE",Ce[Ce.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=new es([4294967295,4294967295],0);function Pv(t){const e=CR().encode(t),n=new tE;return n.update(e),new Uint8Array(n.digest())}function xv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new es([n,i],0),new es([s,o],0)]}class bm{constructor(e,n,i){if(this.bitmap=e,this.padding=n,this.hashCount=i,n<0||n>=8)throw new Qa(`Invalid padding: ${n}`);if(i<0)throw new Qa(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Qa(`Invalid hash count: ${i}`);if(e.length===0&&n!==0)throw new Qa(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=es.fromNumber(this.Ie)}Ee(e,n,i){let s=e.add(n.multiply(es.fromNumber(i)));return s.compare(kR)===1&&(s=new es([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=Pv(e),[i,s]=xv(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,s,o);if(!this.de(l))return!1}return!0}static create(e,n,i){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),l=new bm(o,s,n);return i.forEach(h=>l.insert(h)),l}insert(e){if(this.Ie===0)return;const n=Pv(e),[i,s]=xv(n);for(let o=0;o<this.hashCount;o++){const l=this.Ee(i,s,o);this.Ae(l)}}Ae(e){const n=Math.floor(e/8),i=e%8;this.bitmap[n]|=1<<i}}class Qa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(e,n,i,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,i){const s=new Map;return s.set(e,Jl.createSynthesizedTargetChangeForCurrentChange(e,n,i)),new jh(pe.min(),s,new Qe(Re),Di(),Pe())}}class Jl{constructor(e,n,i,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,i){return new Jl(i,n,Pe(),Pe(),Pe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(e,n,i,s){this.Re=e,this.removedTargetIds=n,this.key=i,this.Ve=s}}class NE{constructor(e,n){this.targetId=e,this.me=n}}class bE{constructor(e,n,i=kt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=i,this.cause=s}}class Av{constructor(){this.fe=0,this.ge=kv(),this.pe=kt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Pe(),n=Pe(),i=Pe();return this.ge.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:i=i.add(s);break;default:de()}}),new Jl(this.pe,this.ye,e,n,i)}Ce(){this.we=!1,this.ge=kv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Oe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class RR{constructor(e){this.Le=e,this.Be=new Map,this.ke=Di(),this.qe=Cv(),this.Qe=new Qe(Re)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const i=this.Ge(n);switch(e.state){case 0:this.ze(n)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),i.De(e.resumeToken));break;default:de()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((i,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,i=e.me.count,s=this.Je(n);if(s){const o=s.target;if(ip(o))if(i===0){const l=new se(o.path);this.Ue(n,l,Dt.newNoDocument(l,pe.min()))}else Oe(i===1);else{const l=this.Ye(n);if(l!==i){const h=this.Ze(e),d=h?this.Xe(h,e,l):1;if(d!==0){this.je(n);const m=d===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,m)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let l,h;try{l=cs(i).toUint8Array()}catch(d){if(d instanceof cE)return bo("Decoding the base64 bloom filter in existence filter failed ("+d.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw d}try{h=new bm(l,s,o)}catch(d){return bo(d instanceof Qa?"BloomFilter error: ":"Applying bloom filter failed: ",d),null}return h.Ie===0?null:h}Xe(e,n,i){return n.me.count===i-this.nt(e,n.targetId)?0:2}nt(e,n){const i=this.Le.getRemoteKeysForTarget(n);let s=0;return i.forEach(o=>{const l=this.Le.tt(),h=`projects/${l.projectId}/databases/${l.database}/documents/${o.path.canonicalString()}`;e.mightContain(h)||(this.Ue(n,o,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((o,l)=>{const h=this.Je(l);if(h){if(o.current&&ip(h.target)){const d=new se(h.target.path);this.ke.get(d)!==null||this.it(l,d)||this.Ue(l,d,Dt.newNoDocument(d,e))}o.be&&(n.set(l,o.ve()),o.Ce())}});let i=Pe();this.qe.forEach((o,l)=>{let h=!0;l.forEachWhile(d=>{const m=this.Je(d);return!m||m.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)}),h&&(i=i.add(o))}),this.ke.forEach((o,l)=>l.setReadTime(e));const s=new jh(e,n,this.Qe,this.ke,i);return this.ke=Di(),this.qe=Cv(),this.Qe=new Qe(Re),s}$e(e,n){if(!this.ze(e))return;const i=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,i),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,i){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),i&&(this.ke=this.ke.insert(n,i))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new Av,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new At(Re),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||ie("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new Av),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function Cv(){return new Qe(se.comparator)}function kv(){return new Qe(se.comparator)}const LR={asc:"ASCENDING",desc:"DESCENDING"},NR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},bR={and:"AND",or:"OR"};class OR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function op(t,e){return t.useProto3Json||Vh(e)?e:{value:e}}function dh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function OE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function DR(t,e){return dh(t,e.toTimestamp())}function ti(t){return Oe(!!t),pe.fromTimestamp(function(n){const i=Ir(n);return new it(i.seconds,i.nanos)}(t))}function Om(t,e){return ap(t,e).canonicalString()}function ap(t,e){const n=function(s){return new Ue(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function DE(t){const e=Ue.fromString(t);return Oe(UE(e)),e}function lp(t,e){return Om(t.databaseId,e.path)}function Bd(t,e){const n=DE(e);if(n.get(1)!==t.databaseId.projectId)throw new ne(G.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ne(G.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new se(VE(n))}function ME(t,e){return Om(t.databaseId,e)}function MR(t){const e=DE(t);return e.length===4?Ue.emptyPath():VE(e)}function up(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function VE(t){return Oe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function Rv(t,e,n){return{name:lp(t,e),fields:n.value.mapValue.fields}}function VR(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(m){return m==="NO_CHANGE"?0:m==="ADD"?1:m==="REMOVE"?2:m==="CURRENT"?3:m==="RESET"?4:de()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(m,v){return m.useProto3Json?(Oe(v===void 0||typeof v=="string"),kt.fromBase64String(v||"")):(Oe(v===void 0||v instanceof Buffer||v instanceof Uint8Array),kt.fromUint8Array(v||new Uint8Array))}(t,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(m){const v=m.code===void 0?G.UNKNOWN:LE(m.code);return new ne(v,m.message||"")}(l);n=new bE(i,s,o,h||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=Bd(t,i.document.name),o=ti(i.document.updateTime),l=i.document.createTime?ti(i.document.createTime):pe.min(),h=new Kt({mapValue:{fields:i.document.fields}}),d=Dt.newFoundDocument(s,o,l,h),m=i.targetIds||[],v=i.removedTargetIds||[];n=new Cc(m,v,d.key,d)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=Bd(t,i.document),o=i.readTime?ti(i.readTime):pe.min(),l=Dt.newNoDocument(s,o),h=i.removedTargetIds||[];n=new Cc([],h,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=Bd(t,i.document),o=i.removedTargetIds||[];n=new Cc([],o,s,null)}else{if(!("filter"in e))return de();{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:o}=i,l=new xR(s,o),h=i.targetId;n=new NE(h,l)}}return n}function FR(t,e){let n;if(e instanceof Xl)n={update:Rv(t,e.key,e.value)};else if(e instanceof Lm)n={delete:lp(t,e.key)};else if(e instanceof Rr)n={update:Rv(t,e.key,e.data),updateMask:GR(e.fieldMask)};else{if(!(e instanceof IR))return de();n={verify:lp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(i=>function(o,l){const h=l.transform;if(h instanceof ch)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof Ml)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Vl)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof hh)return{fieldPath:l.field.canonicalString(),increment:h.Pe};throw de()}(0,i))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:DR(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:de()}(t,e.precondition)),n}function zR(t,e){return t&&t.length>0?(Oe(e!==void 0),t.map(n=>function(s,o){let l=s.updateTime?ti(s.updateTime):ti(o);return l.isEqual(pe.min())&&(l=ti(o)),new wR(l,s.transformResults||[])}(n,e))):[]}function UR(t,e){return{documents:[ME(t,e.path)]}}function BR(t,e){const n={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=ME(t,s);const o=function(m){if(m.length!==0)return zE(zn.create(m,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const l=function(m){if(m.length!==0)return m.map(v=>function(I){return{field:Xs(I.field),direction:HR(I.dir)}}(v))}(e.orderBy);l&&(n.structuredQuery.orderBy=l);const h=op(t,e.limit);return h!==null&&(n.structuredQuery.limit=h),e.startAt&&(n.structuredQuery.startAt=function(m){return{before:m.inclusive,values:m.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(m){return{before:!m.inclusive,values:m.position}}(e.endAt)),{_t:n,parent:s}}function jR(t){let e=MR(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let s=null;if(i>0){Oe(i===1);const v=n.from[0];v.allDescendants?s=v.collectionId:e=e.child(v.collectionId)}let o=[];n.where&&(o=function(w){const I=FE(w);return I instanceof zn&&pE(I)?I.getFilters():[I]}(n.where));let l=[];n.orderBy&&(l=function(w){return w.map(I=>function(U){return new uh(Js(U.field),function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(U.direction))}(I))}(n.orderBy));let h=null;n.limit&&(h=function(w){let I;return I=typeof w=="object"?w.value:w,Vh(I)?null:I}(n.limit));let d=null;n.startAt&&(d=function(w){const I=!!w.before,D=w.values||[];return new lh(D,I)}(n.startAt));let m=null;return n.endAt&&(m=function(w){const I=!w.before,D=w.values||[];return new lh(D,I)}(n.endAt)),aR(e,s,l,o,h,"F",d,m)}function WR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return de()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Js(n.unaryFilter.field);return ut.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Js(n.unaryFilter.field);return ut.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Js(n.unaryFilter.field);return ut.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=Js(n.unaryFilter.field);return ut.create(l,"!=",{nullValue:"NULL_VALUE"});default:return de()}}(t):t.fieldFilter!==void 0?function(n){return ut.create(Js(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return de()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return zn.create(n.compositeFilter.filters.map(i=>FE(i)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return de()}}(n.compositeFilter.op))}(t):de()}function HR(t){return LR[t]}function qR(t){return NR[t]}function $R(t){return bR[t]}function Xs(t){return{fieldPath:t.canonicalString()}}function Js(t){return Pt.fromServerFormat(t.fieldPath)}function zE(t){return t instanceof ut?function(n){if(n.op==="=="){if(gv(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NAN"}};if(mv(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gv(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NOT_NAN"}};if(mv(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xs(n.field),op:qR(n.op),value:n.value}}}(t):t instanceof zn?function(n){const i=n.getFilters().map(s=>zE(s));return i.length===1?i[0]:{compositeFilter:{op:$R(n.op),filters:i}}}(t):de()}function GR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function UE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e,n,i,s,o=pe.min(),l=pe.min(),h=kt.EMPTY_BYTE_STRING,d=null){this.target=e,this.targetId=n,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=d}withSequenceNumber(e){return new ar(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ar(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.ct=e}}function KR(t){const e=jR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?sp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this.un=new YR}addToCollectionParentIndex(e,n){return this.un.add(n),Q.resolve()}getCollectionParents(e,n){return Q.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return Q.resolve()}deleteFieldIndex(e,n){return Q.resolve()}deleteAllFieldIndexes(e){return Q.resolve()}createTargetIndexes(e,n){return Q.resolve()}getDocumentsMatchingTarget(e,n){return Q.resolve(null)}getIndexType(e,n){return Q.resolve(0)}getFieldIndexes(e,n){return Q.resolve([])}getNextCollectionGroupToUpdate(e){return Q.resolve(null)}getMinOffset(e,n){return Q.resolve(Tr.min())}getMinOffsetFromCollectionGroup(e,n){return Q.resolve(Tr.min())}updateCollectionGroup(e,n,i){return Q.resolve()}updateIndexEntries(e,n){return Q.resolve()}}class YR{constructor(){this.index={}}add(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n]||new At(Ue.comparator),o=!s.has(i);return this.index[n]=s.add(i),o}has(e){const n=e.lastSegment(),i=e.popLast(),s=this.index[n];return s&&s.has(i)}getEntries(e){return(this.index[e]||new At(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Vo(0)}static kn(){return new Vo(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(){this.changes=new $o(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?Q.resolve(i):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,n,i,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,n){let i=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(i=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(i!==null&&hl(i.mutation,s,on.empty(),it.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.getLocalViewOfDocuments(e,i,Pe()).next(()=>i))}getLocalViewOfDocuments(e,n,i=Pe()){const s=Yr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,i).next(o=>{let l=Ka();return o.forEach((h,d)=>{l=l.insert(h,d.overlayedDocument)}),l}))}getOverlayedDocuments(e,n){const i=Yr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,Pe()))}populateOverlays(e,n,i){const s=[];return i.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((l,h)=>{n.set(l,h)})})}computeViews(e,n,i,s){let o=Di();const l=cl(),h=function(){return cl()}();return n.forEach((d,m)=>{const v=i.get(m.key);s.has(m.key)&&(v===void 0||v.mutation instanceof Rr)?o=o.insert(m.key,m):v!==void 0?(l.set(m.key,v.mutation.getFieldMask()),hl(v.mutation,m,v.mutation.getFieldMask(),it.now())):l.set(m.key,on.empty())}),this.recalculateAndSaveOverlays(e,o).next(d=>(d.forEach((m,v)=>l.set(m,v)),n.forEach((m,v)=>{var w;return h.set(m,new JR(v,(w=l.get(m))!==null&&w!==void 0?w:null))}),h))}recalculateAndSaveOverlays(e,n){const i=cl();let s=new Qe((l,h)=>l-h),o=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(l=>{for(const h of l)h.keys().forEach(d=>{const m=n.get(d);if(m===null)return;let v=i.get(d)||on.empty();v=h.applyToLocalView(m,v),i.set(d,v);const w=(s.get(h.batchId)||Pe()).add(d);s=s.insert(h.batchId,w)})}).next(()=>{const l=[],h=s.getReverseIterator();for(;h.hasNext();){const d=h.getNext(),m=d.key,v=d.value,w=IE();v.forEach(I=>{if(!o.has(I)){const D=kE(n.get(I),i.get(I));D!==null&&w.set(I,D),o=o.add(I)}}),l.push(this.documentOverlayCache.saveOverlays(e,m,w))}return Q.waitFor(l)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,n,i,s){return function(l){return se.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):vE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,i,s):this.getDocumentsMatchingCollectionQuery(e,n,i,s)}getNextDocuments(e,n,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,i,s).next(o=>{const l=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,i.largestBatchId,s-o.size):Q.resolve(Yr());let h=-1,d=o;return l.next(m=>Q.forEach(m,(v,w)=>(h<w.largestBatchId&&(h=w.largestBatchId),o.get(v)?Q.resolve():this.remoteDocumentCache.getEntry(e,v).next(I=>{d=d.insert(v,I)}))).next(()=>this.populateOverlays(e,m,o)).next(()=>this.computeViews(e,d,m,Pe())).next(v=>({batchId:h,changes:TE(v)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new se(n)).next(i=>{let s=Ka();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,i,s){const o=n.collectionGroup;let l=Ka();return this.indexManager.getCollectionParents(e,o).next(h=>Q.forEach(h,d=>{const m=function(w,I){return new Yl(I,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt)}(n,d.child(o));return this.getDocumentsMatchingCollectionQuery(e,m,i,s).next(v=>{v.forEach((w,I)=>{l=l.insert(w,I)})})}).next(()=>l))}getDocumentsMatchingCollectionQuery(e,n,i,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,i.largestBatchId).next(l=>(o=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,i,o,s))).next(l=>{o.forEach((d,m)=>{const v=m.getKey();l.get(v)===null&&(l=l.insert(v,Dt.newInvalidDocument(v)))});let h=Ka();return l.forEach((d,m)=>{const v=o.get(d);v!==void 0&&hl(v.mutation,m,on.empty(),it.now()),zh(n,m)&&(h=h.insert(d,m))}),h})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return Q.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:ti(s.createTime)}}(n)),Q.resolve()}getNamedQuery(e,n){return Q.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:KR(s.bundledQuery),readTime:ti(s.readTime)}}(n)),Q.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(){this.overlays=new Qe(se.comparator),this.Ir=new Map}getOverlay(e,n){return Q.resolve(this.overlays.get(n))}getOverlays(e,n){const i=Yr();return Q.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&i.set(s,o)})).next(()=>i)}saveOverlays(e,n,i){return i.forEach((s,o)=>{this.ht(e,n,o)}),Q.resolve()}removeOverlaysForBatchId(e,n,i){const s=this.Ir.get(i);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(i)),Q.resolve()}getOverlaysForCollection(e,n,i){const s=Yr(),o=n.length+1,l=new se(n.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const d=h.getNext().value,m=d.getKey();if(!n.isPrefixOf(m.path))break;m.path.length===o&&d.largestBatchId>i&&s.set(d.getKey(),d)}return Q.resolve(s)}getOverlaysForCollectionGroup(e,n,i,s){let o=new Qe((m,v)=>m-v);const l=this.overlays.getIterator();for(;l.hasNext();){const m=l.getNext().value;if(m.getKey().getCollectionGroup()===n&&m.largestBatchId>i){let v=o.get(m.largestBatchId);v===null&&(v=Yr(),o=o.insert(m.largestBatchId,v)),v.set(m.getKey(),m)}}const h=Yr(),d=o.getIterator();for(;d.hasNext()&&(d.getNext().value.forEach((m,v)=>h.set(m,v)),!(h.size()>=s)););return Q.resolve(h)}ht(e,n,i){const s=this.overlays.get(i.key);if(s!==null){const l=this.Ir.get(s.largestBatchId).delete(i.key);this.Ir.set(s.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new PR(n,i));let o=this.Ir.get(n);o===void 0&&(o=Pe(),this.Ir.set(n,o)),this.Ir.set(n,o.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return Q.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Q.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(){this.Tr=new At(_t.Er),this.dr=new At(_t.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const i=new _t(e,n);this.Tr=this.Tr.add(i),this.dr=this.dr.add(i)}Rr(e,n){e.forEach(i=>this.addReference(i,n))}removeReference(e,n){this.Vr(new _t(e,n))}mr(e,n){e.forEach(i=>this.removeReference(i,n))}gr(e){const n=new se(new Ue([])),i=new _t(n,e),s=new _t(n,e+1),o=[];return this.dr.forEachInRange([i,s],l=>{this.Vr(l),o.push(l.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new se(new Ue([])),i=new _t(n,e),s=new _t(n,e+1);let o=Pe();return this.dr.forEachInRange([i,s],l=>{o=o.add(l.key)}),o}containsKey(e){const n=new _t(e,0),i=this.Tr.firstAfterOrEqual(n);return i!==null&&e.isEqual(i.key)}}class _t{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return se.comparator(e.key,n.key)||Re(e.wr,n.wr)}static Ar(e,n){return Re(e.wr,n.wr)||se.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new At(_t.Er)}checkEmpty(e){return Q.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,i,s){const o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new SR(o,n,i,s);this.mutationQueue.push(l);for(const h of s)this.br=this.br.add(new _t(h.key,o)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return Q.resolve(l)}lookupMutationBatch(e,n){return Q.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const i=n+1,s=this.vr(i),o=s<0?0:s;return Q.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return Q.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const i=new _t(n,0),s=new _t(n,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([i,s],l=>{const h=this.Dr(l.wr);o.push(h)}),Q.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let i=new At(Re);return n.forEach(s=>{const o=new _t(s,0),l=new _t(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,l],h=>{i=i.add(h.wr)})}),Q.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,n){const i=n.path,s=i.length+1;let o=i;se.isDocumentKey(o)||(o=o.child(""));const l=new _t(new se(o),0);let h=new At(Re);return this.br.forEachWhile(d=>{const m=d.key.path;return!!i.isPrefixOf(m)&&(m.length===s&&(h=h.add(d.wr)),!0)},l),Q.resolve(this.Cr(h))}Cr(e){const n=[];return e.forEach(i=>{const s=this.Dr(i);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){Oe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let i=this.br;return Q.forEach(n.mutations,s=>{const o=new _t(s.key,n.batchId);return i=i.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=i})}On(e){}containsKey(e,n){const i=new _t(n,0),s=this.br.firstAfterOrEqual(i);return Q.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Q.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e){this.Mr=e,this.docs=function(){return new Qe(se.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const i=n.key,s=this.docs.get(i),o=s?s.size:0,l=this.Mr(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:l}),this.size+=l-o,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const i=this.docs.get(n);return Q.resolve(i?i.document.mutableCopy():Dt.newInvalidDocument(n))}getEntries(e,n){let i=Di();return n.forEach(s=>{const o=this.docs.get(s);i=i.insert(s,o?o.document.mutableCopy():Dt.newInvalidDocument(s))}),Q.resolve(i)}getDocumentsMatchingQuery(e,n,i,s){let o=Di();const l=n.path,h=new se(l.child("")),d=this.docs.getIteratorFrom(h);for(;d.hasNext();){const{key:m,value:{document:v}}=d.getNext();if(!l.isPrefixOf(m.path))break;m.path.length>l.length+1||jk(Bk(v),i)<=0||(s.has(v.key)||zh(n,v))&&(o=o.insert(v.key,v.mutableCopy()))}return Q.resolve(o)}getAllFromCollectionGroup(e,n,i,s){de()}Or(e,n){return Q.forEach(this.docs,i=>n(i))}newChangeBuffer(e){return new o1(this)}getSize(e){return Q.resolve(this.size)}}class o1 extends XR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(i)}),Q.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a1{constructor(e){this.persistence=e,this.Nr=new $o(n=>Am(n),Cm),this.lastRemoteSnapshotVersion=pe.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Dm,this.targetCount=0,this.kr=Vo.Bn()}forEachTarget(e,n){return this.Nr.forEach((i,s)=>n(s)),Q.resolve()}getLastRemoteSnapshotVersion(e){return Q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Q.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Q.resolve(this.highestTargetId)}setTargetsMetadata(e,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.Lr&&(this.Lr=n),Q.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Vo(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,Q.resolve()}updateTargetData(e,n){return this.Kn(n),Q.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,Q.resolve()}removeTargets(e,n,i){let s=0;const o=[];return this.Nr.forEach((l,h)=>{h.sequenceNumber<=n&&i.get(h.targetId)===null&&(this.Nr.delete(l),o.push(this.removeMatchingKeysForTargetId(e,h.targetId)),s++)}),Q.waitFor(o).next(()=>s)}getTargetCount(e){return Q.resolve(this.targetCount)}getTargetData(e,n){const i=this.Nr.get(n)||null;return Q.resolve(i)}addMatchingKeys(e,n,i){return this.Br.Rr(n,i),Q.resolve()}removeMatchingKeys(e,n,i){this.Br.mr(n,i);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(l=>{o.push(s.markPotentiallyOrphaned(e,l))}),Q.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),Q.resolve()}getMatchingKeysForTargetId(e,n){const i=this.Br.yr(n);return Q.resolve(i)}containsKey(e,n){return Q.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Im(0),this.Kr=!1,this.Kr=!0,this.$r=new i1,this.referenceDelegate=e(this),this.Ur=new a1(this),this.indexManager=new QR,this.remoteDocumentCache=function(s){return new s1(s)}(i=>this.referenceDelegate.Wr(i)),this.serializer=new ZR(n),this.Gr=new t1(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new n1,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let i=this.qr[e.toKey()];return i||(i=new r1(n,this.referenceDelegate),this.qr[e.toKey()]=i),i}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,i){ie("MemoryPersistence","Starting transaction:",e);const s=new u1(this.Qr.next());return this.referenceDelegate.zr(),i(s).next(o=>this.referenceDelegate.jr(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Hr(e,n){return Q.or(Object.values(this.qr).map(i=>()=>i.containsKey(e,n)))}}class u1 extends Hk{constructor(e){super(),this.currentSequenceNumber=e}}class Mm{constructor(e){this.persistence=e,this.Jr=new Dm,this.Yr=null}static Zr(e){return new Mm(e)}get Xr(){if(this.Yr)return this.Yr;throw de()}addReference(e,n,i){return this.Jr.addReference(i,n),this.Xr.delete(i.toString()),Q.resolve()}removeReference(e,n,i){return this.Jr.removeReference(i,n),this.Xr.add(i.toString()),Q.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),Q.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.Xr.add(o.toString()))}).next(()=>i.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Q.forEach(this.Xr,i=>{const s=se.fromPath(i);return this.ei(e,s).next(o=>{o||n.removeEntry(s,pe.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(i=>{i?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return Q.or([()=>Q.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n,i,s){this.targetId=e,this.fromCache=n,this.$i=i,this.Ui=s}static Wi(e,n){let i=Pe(),s=Pe();for(const o of n.docChanges)switch(o.type){case 0:i=i.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Vm(e,n.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return tx()?8:qk(Vt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,i,s){const o={result:null};return this.Yi(e,n).next(l=>{o.result=l}).next(()=>{if(!o.result)return this.Zi(e,n,s,i).next(l=>{o.result=l})}).next(()=>{if(o.result)return;const l=new c1;return this.Xi(e,n,l).next(h=>{if(o.result=h,this.zi)return this.es(e,n,l,h.size)})}).next(()=>o.result)}es(e,n,i,s){return i.documentReadCount<this.ji?(Ua()<=xe.DEBUG&&ie("QueryEngine","SDK will not create cache indexes for query:",Ys(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Q.resolve()):(Ua()<=xe.DEBUG&&ie("QueryEngine","Query:",Ys(n),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.Hi*s?(Ua()<=xe.DEBUG&&ie("QueryEngine","The SDK decides to create cache indexes for query:",Ys(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ei(n))):Q.resolve())}Yi(e,n){if(wv(n))return Q.resolve(null);let i=ei(n);return this.indexManager.getIndexType(e,i).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=sp(n,null,"F"),i=ei(n)),this.indexManager.getDocumentsMatchingTarget(e,i).next(o=>{const l=Pe(...o);return this.Ji.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,i).next(d=>{const m=this.ts(n,h);return this.ns(n,m,l,d.readTime)?this.Yi(e,sp(n,null,"F")):this.rs(e,m,n,d)}))})))}Zi(e,n,i,s){return wv(n)||s.isEqual(pe.min())?Q.resolve(null):this.Ji.getDocuments(e,i).next(o=>{const l=this.ts(n,o);return this.ns(n,l,i,s)?Q.resolve(null):(Ua()<=xe.DEBUG&&ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ys(n)),this.rs(e,l,n,Uk(s,-1)).next(h=>h))})}ts(e,n){let i=new At(wE(e));return n.forEach((s,o)=>{zh(e,o)&&(i=i.add(o))}),i}ns(e,n,i,s){if(e.limit===null)return!1;if(i.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Xi(e,n,i){return Ua()<=xe.DEBUG&&ie("QueryEngine","Using full collection scan to execute query:",Ys(n)),this.Ji.getDocumentsMatchingQuery(e,n,Tr.min(),i)}rs(e,n,i,s){return this.Ji.getDocumentsMatchingQuery(e,i,s).next(o=>(n.forEach(l=>{o=o.insert(l.key,l)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e,n,i,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Qe(Re),this._s=new $o(o=>Am(o),Cm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(i)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new e1(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function f1(t,e,n,i){return new d1(t,e,n,i)}async function BE(t,e){const n=me(t);return await n.persistence.runTransaction("Handle user change","readonly",i=>{let s;return n.mutationQueue.getAllMutationBatches(i).next(o=>(s=o,n.ls(e),n.mutationQueue.getAllMutationBatches(i))).next(o=>{const l=[],h=[];let d=Pe();for(const m of s){l.push(m.batchId);for(const v of m.mutations)d=d.add(v.key)}for(const m of o){h.push(m.batchId);for(const v of m.mutations)d=d.add(v.key)}return n.localDocuments.getDocuments(i,d).next(m=>({hs:m,removedBatchIds:l,addedBatchIds:h}))})})}function p1(t,e){const n=me(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),o=n.cs.newChangeBuffer({trackRemovals:!0});return function(h,d,m,v){const w=m.batch,I=w.keys();let D=Q.resolve();return I.forEach(U=>{D=D.next(()=>v.getEntry(d,U)).next(B=>{const Z=m.docVersions.get(U);Oe(Z!==null),B.version.compareTo(Z)<0&&(w.applyToRemoteDocument(B,m),B.isValidDocument()&&(B.setReadTime(m.commitVersion),v.addEntry(B)))})}),D.next(()=>h.mutationQueue.removeMutationBatch(d,w))}(n,i,e,o).next(()=>o.apply(i)).next(()=>n.mutationQueue.performConsistencyCheck(i)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(h){let d=Pe();for(let m=0;m<h.mutationResults.length;++m)h.mutationResults[m].transformResults.length>0&&(d=d.add(h.batch.mutations[m].key));return d}(e))).next(()=>n.localDocuments.getDocuments(i,s))})}function jE(t){const e=me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function m1(t,e){const n=me(t),i=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const l=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const h=[];e.targetChanges.forEach((v,w)=>{const I=s.get(w);if(!I)return;h.push(n.Ur.removeMatchingKeys(o,v.removedDocuments,w).next(()=>n.Ur.addMatchingKeys(o,v.addedDocuments,w)));let D=I.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(w)!==null?D=D.withResumeToken(kt.EMPTY_BYTE_STRING,pe.min()).withLastLimboFreeSnapshotVersion(pe.min()):v.resumeToken.approximateByteSize()>0&&(D=D.withResumeToken(v.resumeToken,i)),s=s.insert(w,D),function(B,Z,R){return B.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-B.snapshotVersion.toMicroseconds()>=3e8?!0:R.addedDocuments.size+R.modifiedDocuments.size+R.removedDocuments.size>0}(I,D,v)&&h.push(n.Ur.updateTargetData(o,D))});let d=Di(),m=Pe();if(e.documentUpdates.forEach(v=>{e.resolvedLimboDocuments.has(v)&&h.push(n.persistence.referenceDelegate.updateLimboDocument(o,v))}),h.push(g1(o,l,e.documentUpdates).next(v=>{d=v.Ps,m=v.Is})),!i.isEqual(pe.min())){const v=n.Ur.getLastRemoteSnapshotVersion(o).next(w=>n.Ur.setTargetsMetadata(o,o.currentSequenceNumber,i));h.push(v)}return Q.waitFor(h).next(()=>l.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,d,m)).next(()=>d)}).then(o=>(n.os=s,o))}function g1(t,e,n){let i=Pe(),s=Pe();return n.forEach(o=>i=i.add(o)),e.getEntries(t,i).next(o=>{let l=Di();return n.forEach((h,d)=>{const m=o.get(h);d.isFoundDocument()!==m.isFoundDocument()&&(s=s.add(h)),d.isNoDocument()&&d.version.isEqual(pe.min())?(e.removeEntry(h,d.readTime),l=l.insert(h,d)):!m.isValidDocument()||d.version.compareTo(m.version)>0||d.version.compareTo(m.version)===0&&m.hasPendingWrites?(e.addEntry(d),l=l.insert(h,d)):ie("LocalStore","Ignoring outdated watch update for ",h,". Current version:",m.version," Watch version:",d.version)}),{Ps:l,Is:s}})}function _1(t,e){const n=me(t);return n.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function v1(t,e){const n=me(t);return n.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return n.Ur.getTargetData(i,e).next(o=>o?(s=o,Q.resolve(s)):n.Ur.allocateTargetId(i).next(l=>(s=new ar(e,l,"TargetPurposeListen",i.currentSequenceNumber),n.Ur.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=n.os.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(i.targetId,i),n._s.set(e,i.targetId)),i})}async function cp(t,e,n){const i=me(t),s=i.os.get(e),o=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",o,l=>i.persistence.referenceDelegate.removeTarget(l,s))}catch(l){if(!Ql(l))throw l;ie("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}i.os=i.os.remove(e),i._s.delete(s.target)}function Lv(t,e,n){const i=me(t);let s=pe.min(),o=Pe();return i.persistence.runTransaction("Execute query","readwrite",l=>function(d,m,v){const w=me(d),I=w._s.get(v);return I!==void 0?Q.resolve(w.os.get(I)):w.Ur.getTargetData(m,v)}(i,l,ei(e)).next(h=>{if(h)return s=h.lastLimboFreeSnapshotVersion,i.Ur.getMatchingKeysForTargetId(l,h.targetId).next(d=>{o=d})}).next(()=>i.ss.getDocumentsMatchingQuery(l,e,n?s:pe.min(),n?o:Pe())).next(h=>(y1(i,uR(e),h),{documents:h,Ts:o})))}function y1(t,e,n){let i=t.us.get(e)||pe.min();n.forEach((s,o)=>{o.readTime.compareTo(i)>0&&(i=o.readTime)}),t.us.set(e,i)}class Nv{constructor(){this.activeTargetIds=mR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class w1{constructor(){this.so=new Nv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,i){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,i){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Nv,Promise.resolve()}handleUserChange(e,n,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){ie("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){ie("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oc=null;function jd(){return oc===null?oc=function(){return 268435456+Math.round(2147483648*Math.random())}():oc++,"0x"+oc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="WebChannelConnection";class S1 extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const i=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=i+"://"+n.host,this.vo=`projects/${s}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${o}`}get Fo(){return!1}Mo(n,i,s,o,l){const h=jd(),d=this.xo(n,i.toUriEncodedString());ie("RestConnection",`Sending RPC '${n}' ${h}:`,d,s);const m={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(m,o,l),this.No(n,d,m,s).then(v=>(ie("RestConnection",`Received RPC '${n}' ${h}: `,v),v),v=>{throw bo("RestConnection",`RPC '${n}' ${h} failed with error: `,v,"url: ",d,"request:",s),v})}Lo(n,i,s,o,l,h){return this.Mo(n,i,s,o,l)}Oo(n,i,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+qo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((o,l)=>n[l]=o),s&&s.headers.forEach((o,l)=>n[l]=o)}xo(n,i){const s=T1[n];return`${this.Do}/v1/${i}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,i,s){const o=jd();return new Promise((l,h)=>{const d=new nE;d.setWithCredentials(!0),d.listenOnce(iE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Pc.NO_ERROR:const v=d.getResponseJson();ie(Nt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(v)),l(v);break;case Pc.TIMEOUT:ie(Nt,`RPC '${e}' ${o} timed out`),h(new ne(G.DEADLINE_EXCEEDED,"Request time out"));break;case Pc.HTTP_ERROR:const w=d.getStatus();if(ie(Nt,`RPC '${e}' ${o} failed with status:`,w,"response text:",d.getResponseText()),w>0){let I=d.getResponseJson();Array.isArray(I)&&(I=I[0]);const D=I==null?void 0:I.error;if(D&&D.status&&D.message){const U=function(Z){const R=Z.toLowerCase().replace(/_/g,"-");return Object.values(G).indexOf(R)>=0?R:G.UNKNOWN}(D.status);h(new ne(U,D.message))}else h(new ne(G.UNKNOWN,"Server responded with status "+d.getStatus()))}else h(new ne(G.UNAVAILABLE,"Connection failed."));break;default:de()}}finally{ie(Nt,`RPC '${e}' ${o} completed.`)}});const m=JSON.stringify(s);ie(Nt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",m,i,15)})}Bo(e,n,i){const s=jd(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=oE(),h=sE(),d={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},m=this.longPollingOptions.timeoutSeconds;m!==void 0&&(d.longPollingTimeout=Math.round(1e3*m)),this.useFetchStreams&&(d.useFetchStreams=!0),this.Oo(d.initMessageHeaders,n,i),d.encodeInitMessageHeaders=!0;const v=o.join("");ie(Nt,`Creating RPC '${e}' stream ${s}: ${v}`,d);const w=l.createWebChannel(v,d);let I=!1,D=!1;const U=new I1({Io:Z=>{D?ie(Nt,`Not sending because RPC '${e}' stream ${s} is closed:`,Z):(I||(ie(Nt,`Opening RPC '${e}' stream ${s} transport.`),w.open(),I=!0),ie(Nt,`RPC '${e}' stream ${s} sending:`,Z),w.send(Z))},To:()=>w.close()}),B=(Z,R,x)=>{Z.listen(R,N=>{try{x(N)}catch(F){setTimeout(()=>{throw F},0)}})};return B(w,Za.EventType.OPEN,()=>{D||(ie(Nt,`RPC '${e}' stream ${s} transport opened.`),U.yo())}),B(w,Za.EventType.CLOSE,()=>{D||(D=!0,ie(Nt,`RPC '${e}' stream ${s} transport closed`),U.So())}),B(w,Za.EventType.ERROR,Z=>{D||(D=!0,bo(Nt,`RPC '${e}' stream ${s} transport errored:`,Z),U.So(new ne(G.UNAVAILABLE,"The operation could not be completed")))}),B(w,Za.EventType.MESSAGE,Z=>{var R;if(!D){const x=Z.data[0];Oe(!!x);const N=x,F=N.error||((R=N[0])===null||R===void 0?void 0:R.error);if(F){ie(Nt,`RPC '${e}' stream ${s} received error:`,F);const H=F.status;let $=function(P){const C=at[P];if(C!==void 0)return LE(C)}(H),S=F.message;$===void 0&&($=G.INTERNAL,S="Unknown error status: "+H+" with message "+F.message),D=!0,U.So(new ne($,S)),w.close()}else ie(Nt,`RPC '${e}' stream ${s} received:`,x),U.bo(x)}}),B(h,rE.STAT_EVENT,Z=>{Z.stat===Jf.PROXY?ie(Nt,`RPC '${e}' stream ${s} detected buffering proxy`):Z.stat===Jf.NOPROXY&&ie(Nt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{U.wo()},0),U}}function Wd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wh(t){return new OR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(e,n,i=1e3,s=1.5,o=6e4){this.ui=e,this.timerId=n,this.ko=i,this.qo=s,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),i=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-i);s>0&&ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,n,i,s,o,l,h,d){this.ui=e,this.Ho=i,this.Jo=s,this.connection=o,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=d,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new WE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===G.RESOURCE_EXHAUSTED?(Oi(n.toString()),Oi("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===G.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.Yo===n&&this.P_(i,s)},i=>{e(()=>{const s=new ne(G.UNKNOWN,"Fetching auth token failed: "+i.message);return this.I_(s)})})}P_(e,n){const i=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{i(()=>this.listener.Eo())}),this.stream.Ro(()=>{i(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{i(()=>this.I_(s))}),this.stream.onMessage(s=>{i(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return ie("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(ie("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class P1 extends HE{constructor(e,n,i,s,o,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=VR(this.serializer,e),i=function(o){if(!("targetChange"in o))return pe.min();const l=o.targetChange;return l.targetIds&&l.targetIds.length?pe.min():l.readTime?ti(l.readTime):pe.min()}(e);return this.listener.d_(n,i)}A_(e){const n={};n.database=up(this.serializer),n.addTarget=function(o,l){let h;const d=l.target;if(h=ip(d)?{documents:UR(o,d)}:{query:BR(o,d)._t},h.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){h.resumeToken=OE(o,l.resumeToken);const m=op(o,l.expectedCount);m!==null&&(h.expectedCount=m)}else if(l.snapshotVersion.compareTo(pe.min())>0){h.readTime=dh(o,l.snapshotVersion.toTimestamp());const m=op(o,l.expectedCount);m!==null&&(h.expectedCount=m)}return h}(this.serializer,e);const i=WR(this.serializer,e);i&&(n.labels=i),this.a_(n)}R_(e){const n={};n.database=up(this.serializer),n.removeTarget=e,this.a_(n)}}class x1 extends HE{constructor(e,n,i,s,o,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,s,l),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,Oe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){Oe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=zR(e.writeResults,e.commitTime),i=ti(e.commitTime);return this.listener.g_(i,n)}p_(){const e={};e.database=up(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(i=>FR(this.serializer,i))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1 extends class{}{constructor(e,n,i,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=i,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new ne(G.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,i,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Mo(e,ap(n,i),s,o,l)).catch(o=>{throw o.name==="FirebaseError"?(o.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ne(G.UNKNOWN,o.toString())})}Lo(e,n,i,s,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,h])=>this.connection.Lo(e,ap(n,i),s,l,h,o)).catch(l=>{throw l.name==="FirebaseError"?(l.code===G.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ne(G.UNKNOWN,l.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class C1{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Oi(n),this.D_=!1):ie("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{constructor(e,n,i,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(l=>{i.enqueueAndForget(async()=>{gs(this)&&(ie("RemoteStore","Restarting streams for network reachability change."),await async function(d){const m=me(d);m.L_.add(4),await eu(m),m.q_.set("Unknown"),m.L_.delete(4),await Hh(m)}(this))})}),this.q_=new C1(i,s)}}async function Hh(t){if(gs(t))for(const e of t.B_)await e(!0)}async function eu(t){for(const e of t.B_)await e(!1)}function qE(t,e){const n=me(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Bm(n)?Um(n):Go(n).r_()&&zm(n,e))}function Fm(t,e){const n=me(t),i=Go(n);n.N_.delete(e),i.r_()&&$E(n,e),n.N_.size===0&&(i.r_()?i.o_():gs(n)&&n.q_.set("Unknown"))}function zm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(pe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Go(t).A_(e)}function $E(t,e){t.Q_.xe(e),Go(t).R_(e)}function Um(t){t.Q_=new RR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Go(t).start(),t.q_.v_()}function Bm(t){return gs(t)&&!Go(t).n_()&&t.N_.size>0}function gs(t){return me(t).L_.size===0}function GE(t){t.Q_=void 0}async function R1(t){t.q_.set("Online")}async function L1(t){t.N_.forEach((e,n)=>{zm(t,e)})}async function N1(t,e){GE(t),Bm(t)?(t.q_.M_(e),Um(t)):t.q_.set("Unknown")}async function b1(t,e,n){if(t.q_.set("Online"),e instanceof bE&&e.state===2&&e.cause)try{await async function(s,o){const l=o.cause;for(const h of o.targetIds)s.N_.has(h)&&(await s.remoteSyncer.rejectListen(h,l),s.N_.delete(h),s.Q_.removeTarget(h))}(t,e)}catch(i){ie("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await fh(t,i)}else if(e instanceof Cc?t.Q_.Ke(e):e instanceof NE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(pe.min()))try{const i=await jE(t.localStore);n.compareTo(i)>=0&&await function(o,l){const h=o.Q_.rt(l);return h.targetChanges.forEach((d,m)=>{if(d.resumeToken.approximateByteSize()>0){const v=o.N_.get(m);v&&o.N_.set(m,v.withResumeToken(d.resumeToken,l))}}),h.targetMismatches.forEach((d,m)=>{const v=o.N_.get(d);if(!v)return;o.N_.set(d,v.withResumeToken(kt.EMPTY_BYTE_STRING,v.snapshotVersion)),$E(o,d);const w=new ar(v.target,d,m,v.sequenceNumber);zm(o,w)}),o.remoteSyncer.applyRemoteEvent(h)}(t,n)}catch(i){ie("RemoteStore","Failed to raise snapshot:",i),await fh(t,i)}}async function fh(t,e,n){if(!Ql(e))throw e;t.L_.add(1),await eu(t),t.q_.set("Offline"),n||(n=()=>jE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{ie("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Hh(t)})}function ZE(t,e){return e().catch(n=>fh(t,n,e))}async function qh(t){const e=me(t),n=Sr(e);let i=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;O1(e);)try{const s=await _1(e.localStore,i);if(s===null){e.O_.length===0&&n.o_();break}i=s.batchId,D1(e,s)}catch(s){await fh(e,s)}KE(e)&&QE(e)}function O1(t){return gs(t)&&t.O_.length<10}function D1(t,e){t.O_.push(e);const n=Sr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function KE(t){return gs(t)&&!Sr(t).n_()&&t.O_.length>0}function QE(t){Sr(t).start()}async function M1(t){Sr(t).p_()}async function V1(t){const e=Sr(t);for(const n of t.O_)e.m_(n.mutations)}async function F1(t,e,n){const i=t.O_.shift(),s=Nm.from(i,e,n);await ZE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await qh(t)}async function z1(t,e){e&&Sr(t).V_&&await async function(i,s){if(function(l){return AR(l)&&l!==G.ABORTED}(s.code)){const o=i.O_.shift();Sr(i).s_(),await ZE(i,()=>i.remoteSyncer.rejectFailedWrite(o.batchId,s)),await qh(i)}}(t,e),KE(t)&&QE(t)}async function Ov(t,e){const n=me(t);n.asyncQueue.verifyOperationInProgress(),ie("RemoteStore","RemoteStore received new credentials");const i=gs(n);n.L_.add(3),await eu(n),i&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Hh(n)}async function U1(t,e){const n=me(t);e?(n.L_.delete(2),await Hh(n)):e||(n.L_.add(2),await eu(n),n.q_.set("Unknown"))}function Go(t){return t.K_||(t.K_=function(n,i,s){const o=me(n);return o.w_(),new P1(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Eo:R1.bind(null,t),Ro:L1.bind(null,t),mo:N1.bind(null,t),d_:b1.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Bm(t)?Um(t):t.q_.set("Unknown")):(await t.K_.stop(),GE(t))})),t.K_}function Sr(t){return t.U_||(t.U_=function(n,i,s){const o=me(n);return o.w_(),new x1(i,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:M1.bind(null,t),mo:z1.bind(null,t),f_:V1.bind(null,t),g_:F1.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await qh(t)):(await t.U_.stop(),t.O_.length>0&&(ie("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n,i,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=i,this.op=s,this.removalCallback=o,this.deferred=new Ai,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,i,s,o){const l=Date.now()+i,h=new jm(e,n,l,s,o);return h.start(i),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ne(G.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wm(t,e){if(Oi("AsyncQueue",`${e}: ${t}`),Ql(t))return new ne(G.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e){this.comparator=e?(n,i)=>e(n,i)||se.comparator(n.key,i.key):(n,i)=>se.comparator(n.key,i.key),this.keyedMap=Ka(),this.sortedSet=new Qe(this.comparator)}static emptySet(e){return new Io(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,i)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Io)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=i.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const i=new Io;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dv{constructor(){this.W_=new Qe(se.comparator)}track(e){const n=e.doc.key,i=this.W_.get(n);i?e.type!==0&&i.type===3?this.W_=this.W_.insert(n,e):e.type===3&&i.type!==1?this.W_=this.W_.insert(n,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.W_=this.W_.remove(n):e.type===1&&i.type===2?this.W_=this.W_.insert(n,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):de():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,i)=>{e.push(i)}),e}}class Fo{constructor(e,n,i,s,o,l,h,d,m){this.query=e,this.docs=n,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=o,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=d,this.hasCachedResults=m}static fromInitialDocuments(e,n,i,s,o){const l=[];return n.forEach(h=>{l.push({type:0,doc:h})}),new Fo(e,n,Io.emptySet(n),l,i,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Fh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,i=e.docChanges;if(n.length!==i.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==i[s].type||!n[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B1{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class j1{constructor(){this.queries=Mv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,i){const s=me(n),o=s.queries;s.queries=Mv(),o.forEach((l,h)=>{for(const d of h.j_)d.onError(i)})})(this,new ne(G.ABORTED,"Firestore shutting down"))}}function Mv(){return new $o(t=>yE(t),Fh)}async function YE(t,e){const n=me(t);let i=3;const s=e.query;let o=n.queries.get(s);o?!o.H_()&&e.J_()&&(i=2):(o=new B1,i=e.J_()?0:1);try{switch(i){case 0:o.z_=await n.onListen(s,!0);break;case 1:o.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(l){const h=Wm(l,`Initialization of query '${Ys(e.query)}' failed`);return void e.onError(h)}n.queries.set(s,o),o.j_.push(e),e.Z_(n.onlineState),o.z_&&e.X_(o.z_)&&Hm(n)}async function XE(t,e){const n=me(t),i=e.query;let s=3;const o=n.queries.get(i);if(o){const l=o.j_.indexOf(e);l>=0&&(o.j_.splice(l,1),o.j_.length===0?s=e.J_()?0:1:!o.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function W1(t,e){const n=me(t);let i=!1;for(const s of e){const o=s.query,l=n.queries.get(o);if(l){for(const h of l.j_)h.X_(s)&&(i=!0);l.z_=s}}i&&Hm(n)}function H1(t,e,n){const i=me(t),s=i.queries.get(e);if(s)for(const o of s.j_)o.onError(n);i.queries.delete(e)}function Hm(t){t.Y_.forEach(e=>{e.next()})}var hp,Vv;(Vv=hp||(hp={})).ea="default",Vv.Cache="cache";class JE{constructor(e,n,i){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=i||{}}X_(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new Fo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const i=n!=="Offline";return(!this.options._a||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Fo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==hp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{constructor(e){this.key=e}}class tT{constructor(e){this.key=e}}class q1{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Pe(),this.mutatedKeys=Pe(),this.Aa=wE(e),this.Ra=new Io(this.Aa)}get Va(){return this.Ta}ma(e,n){const i=n?n.fa:new Dv,s=n?n.Ra:this.Ra;let o=n?n.mutatedKeys:this.mutatedKeys,l=s,h=!1;const d=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,m=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((v,w)=>{const I=s.get(v),D=zh(this.query,w)?w:null,U=!!I&&this.mutatedKeys.has(I.key),B=!!D&&(D.hasLocalMutations||this.mutatedKeys.has(D.key)&&D.hasCommittedMutations);let Z=!1;I&&D?I.data.isEqual(D.data)?U!==B&&(i.track({type:3,doc:D}),Z=!0):this.ga(I,D)||(i.track({type:2,doc:D}),Z=!0,(d&&this.Aa(D,d)>0||m&&this.Aa(D,m)<0)&&(h=!0)):!I&&D?(i.track({type:0,doc:D}),Z=!0):I&&!D&&(i.track({type:1,doc:I}),Z=!0,(d||m)&&(h=!0)),Z&&(D?(l=l.add(D),o=B?o.add(v):o.delete(v)):(l=l.delete(v),o=o.delete(v)))}),this.query.limit!==null)for(;l.size>this.query.limit;){const v=this.query.limitType==="F"?l.last():l.first();l=l.delete(v.key),o=o.delete(v.key),i.track({type:1,doc:v})}return{Ra:l,fa:i,ns:h,mutatedKeys:o}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,i,s){const o=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const l=e.fa.G_();l.sort((v,w)=>function(D,U){const B=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return de()}};return B(D)-B(U)}(v.type,w.type)||this.Aa(v.doc,w.doc)),this.pa(i),s=s!=null&&s;const h=n&&!s?this.ya():[],d=this.da.size===0&&this.current&&!s?1:0,m=d!==this.Ea;return this.Ea=d,l.length!==0||m?{snapshot:new Fo(this.query,e.Ra,o,l,e.mutatedKeys,d===0,m,!1,!!i&&i.resumeToken.approximateByteSize()>0),wa:h}:{wa:h}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Dv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Pe(),this.Ra.forEach(i=>{this.Sa(i.key)&&(this.da=this.da.add(i.key))});const n=[];return e.forEach(i=>{this.da.has(i)||n.push(new tT(i))}),this.da.forEach(i=>{e.has(i)||n.push(new eT(i))}),n}ba(e){this.Ta=e.Ts,this.da=Pe();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Fo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class $1{constructor(e,n,i){this.query=e,this.targetId=n,this.view=i}}class G1{constructor(e){this.key=e,this.va=!1}}class Z1{constructor(e,n,i,s,o,l){this.localStore=e,this.remoteStore=n,this.eventManager=i,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=l,this.Ca={},this.Fa=new $o(h=>yE(h),Fh),this.Ma=new Map,this.xa=new Set,this.Oa=new Qe(se.comparator),this.Na=new Map,this.La=new Dm,this.Ba={},this.ka=new Map,this.qa=Vo.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function K1(t,e,n=!0){const i=aT(t);let s;const o=i.Fa.get(e);return o?(i.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.Da()):s=await nT(i,e,n,!0),s}async function Q1(t,e){const n=aT(t);await nT(n,e,!0,!1)}async function nT(t,e,n,i){const s=await v1(t.localStore,ei(e)),o=s.targetId,l=t.sharedClientState.addLocalQueryTarget(o,n);let h;return i&&(h=await Y1(t,e,o,l==="current",s.resumeToken)),t.isPrimaryClient&&n&&qE(t.remoteStore,s),h}async function Y1(t,e,n,i,s){t.Ka=(w,I,D)=>async function(B,Z,R,x){let N=Z.view.ma(R);N.ns&&(N=await Lv(B.localStore,Z.query,!1).then(({documents:S})=>Z.view.ma(S,N)));const F=x&&x.targetChanges.get(Z.targetId),H=x&&x.targetMismatches.get(Z.targetId)!=null,$=Z.view.applyChanges(N,B.isPrimaryClient,F,H);return zv(B,Z.targetId,$.wa),$.snapshot}(t,w,I,D);const o=await Lv(t.localStore,e,!0),l=new q1(e,o.Ts),h=l.ma(o.documents),d=Jl.createSynthesizedTargetChangeForCurrentChange(n,i&&t.onlineState!=="Offline",s),m=l.applyChanges(h,t.isPrimaryClient,d);zv(t,n,m.wa);const v=new $1(e,n,l);return t.Fa.set(e,v),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),m.snapshot}async function X1(t,e,n){const i=me(t),s=i.Fa.get(e),o=i.Ma.get(s.targetId);if(o.length>1)return i.Ma.set(s.targetId,o.filter(l=>!Fh(l,e))),void i.Fa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await cp(i.localStore,s.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(s.targetId),n&&Fm(i.remoteStore,s.targetId),dp(i,s.targetId)}).catch(Kl)):(dp(i,s.targetId),await cp(i.localStore,s.targetId,!0))}async function J1(t,e){const n=me(t),i=n.Fa.get(e),s=n.Ma.get(i.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),Fm(n.remoteStore,i.targetId))}async function eL(t,e,n){const i=aL(t);try{const s=await function(l,h){const d=me(l),m=it.now(),v=h.reduce((D,U)=>D.add(U.key),Pe());let w,I;return d.persistence.runTransaction("Locally write mutations","readwrite",D=>{let U=Di(),B=Pe();return d.cs.getEntries(D,v).next(Z=>{U=Z,U.forEach((R,x)=>{x.isValidDocument()||(B=B.add(R))})}).next(()=>d.localDocuments.getOverlayedDocuments(D,U)).next(Z=>{w=Z;const R=[];for(const x of h){const N=TR(x,w.get(x.key).overlayedDocument);N!=null&&R.push(new Rr(x.key,N,hE(N.value.mapValue),In.exists(!0)))}return d.mutationQueue.addMutationBatch(D,m,R,h)}).next(Z=>{I=Z;const R=Z.applyToLocalDocumentSet(w,B);return d.documentOverlayCache.saveOverlays(D,Z.batchId,R)})}).then(()=>({batchId:I.batchId,changes:TE(w)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(l,h,d){let m=l.Ba[l.currentUser.toKey()];m||(m=new Qe(Re)),m=m.insert(h,d),l.Ba[l.currentUser.toKey()]=m}(i,s.batchId,n),await tu(i,s.changes),await qh(i.remoteStore)}catch(s){const o=Wm(s,"Failed to persist write");n.reject(o)}}async function iT(t,e){const n=me(t);try{const i=await m1(n.localStore,e);e.targetChanges.forEach((s,o)=>{const l=n.Na.get(o);l&&(Oe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?l.va=!0:s.modifiedDocuments.size>0?Oe(l.va):s.removedDocuments.size>0&&(Oe(l.va),l.va=!1))}),await tu(n,i,e)}catch(i){await Kl(i)}}function Fv(t,e,n){const i=me(t);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const s=[];i.Fa.forEach((o,l)=>{const h=l.view.Z_(e);h.snapshot&&s.push(h.snapshot)}),function(l,h){const d=me(l);d.onlineState=h;let m=!1;d.queries.forEach((v,w)=>{for(const I of w.j_)I.Z_(h)&&(m=!0)}),m&&Hm(d)}(i.eventManager,e),s.length&&i.Ca.d_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function tL(t,e,n){const i=me(t);i.sharedClientState.updateQueryState(e,"rejected",n);const s=i.Na.get(e),o=s&&s.key;if(o){let l=new Qe(se.comparator);l=l.insert(o,Dt.newNoDocument(o,pe.min()));const h=Pe().add(o),d=new jh(pe.min(),new Map,new Qe(Re),l,h);await iT(i,d),i.Oa=i.Oa.remove(o),i.Na.delete(e),qm(i)}else await cp(i.localStore,e,!1).then(()=>dp(i,e,n)).catch(Kl)}async function nL(t,e){const n=me(t),i=e.batch.batchId;try{const s=await p1(n.localStore,e);sT(n,i,null),rT(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await tu(n,s)}catch(s){await Kl(s)}}async function iL(t,e,n){const i=me(t);try{const s=await function(l,h){const d=me(l);return d.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let v;return d.mutationQueue.lookupMutationBatch(m,h).next(w=>(Oe(w!==null),v=w.keys(),d.mutationQueue.removeMutationBatch(m,w))).next(()=>d.mutationQueue.performConsistencyCheck(m)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(m,v,h)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,v)).next(()=>d.localDocuments.getDocuments(m,v))})}(i.localStore,e);sT(i,e,n),rT(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await tu(i,s)}catch(s){await Kl(s)}}function rT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function sT(t,e,n){const i=me(t);let s=i.Ba[i.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),i.Ba[i.currentUser.toKey()]=s}}function dp(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.Ma.get(e))t.Fa.delete(i),n&&t.Ca.$a(i,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(i=>{t.La.containsKey(i)||oT(t,i)})}function oT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Fm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),qm(t))}function zv(t,e,n){for(const i of n)i instanceof eT?(t.La.addReference(i.key,e),rL(t,i)):i instanceof tT?(ie("SyncEngine","Document no longer in limbo: "+i.key),t.La.removeReference(i.key,e),t.La.containsKey(i.key)||oT(t,i.key)):de()}function rL(t,e){const n=e.key,i=n.path.canonicalString();t.Oa.get(n)||t.xa.has(i)||(ie("SyncEngine","New document in limbo: "+n),t.xa.add(i),qm(t))}function qm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new se(Ue.fromString(e)),i=t.qa.next();t.Na.set(i,new G1(n)),t.Oa=t.Oa.insert(n,i),qE(t.remoteStore,new ar(ei(km(n.path)),i,"TargetPurposeLimboResolution",Im.oe))}}async function tu(t,e,n){const i=me(t),s=[],o=[],l=[];i.Fa.isEmpty()||(i.Fa.forEach((h,d)=>{l.push(i.Ka(d,e,n).then(m=>{var v;if((m||n)&&i.isPrimaryClient){const w=m?!m.fromCache:(v=n==null?void 0:n.targetChanges.get(d.targetId))===null||v===void 0?void 0:v.current;i.sharedClientState.updateQueryState(d.targetId,w?"current":"not-current")}if(m){s.push(m);const w=Vm.Wi(d.targetId,m);o.push(w)}}))}),await Promise.all(l),i.Ca.d_(s),await async function(d,m){const v=me(d);try{await v.persistence.runTransaction("notifyLocalViewChanges","readwrite",w=>Q.forEach(m,I=>Q.forEach(I.$i,D=>v.persistence.referenceDelegate.addReference(w,I.targetId,D)).next(()=>Q.forEach(I.Ui,D=>v.persistence.referenceDelegate.removeReference(w,I.targetId,D)))))}catch(w){if(!Ql(w))throw w;ie("LocalStore","Failed to update sequence numbers: "+w)}for(const w of m){const I=w.targetId;if(!w.fromCache){const D=v.os.get(I),U=D.snapshotVersion,B=D.withLastLimboFreeSnapshotVersion(U);v.os=v.os.insert(I,B)}}}(i.localStore,o))}async function sL(t,e){const n=me(t);if(!n.currentUser.isEqual(e)){ie("SyncEngine","User change. New user:",e.toKey());const i=await BE(n.localStore,e);n.currentUser=e,function(o,l){o.ka.forEach(h=>{h.forEach(d=>{d.reject(new ne(G.CANCELLED,l))})}),o.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await tu(n,i.hs)}}function oL(t,e){const n=me(t),i=n.Na.get(e);if(i&&i.va)return Pe().add(i.key);{let s=Pe();const o=n.Ma.get(e);if(!o)return s;for(const l of o){const h=n.Fa.get(l);s=s.unionWith(h.view.Va)}return s}}function aT(t){const e=me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=iT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=oL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=tL.bind(null,e),e.Ca.d_=W1.bind(null,e.eventManager),e.Ca.$a=H1.bind(null,e.eventManager),e}function aL(t){const e=me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=nL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=iL.bind(null,e),e}class ph{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wh(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return f1(this.persistence,new h1,e.initialUser,this.serializer)}Ga(e){return new l1(Mm.Zr,this.serializer)}Wa(e){return new w1}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ph.provider={build:()=>new ph};class fp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Fv(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=sL.bind(null,this.syncEngine),await U1(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new j1}()}createDatastore(e){const n=Wh(e.databaseInfo.databaseId),i=function(o){return new S1(o)}(e.databaseInfo);return function(o,l,h,d){return new A1(o,l,h,d)}(e.authCredentials,e.appCheckCredentials,i,n)}createRemoteStore(e){return function(i,s,o,l,h){return new k1(i,s,o,l,h)}(this.localStore,this.datastore,e.asyncQueue,n=>Fv(this.syncEngine,n,0),function(){return bv.D()?new bv:new E1}())}createSyncEngine(e,n){return function(s,o,l,h,d,m,v){const w=new Z1(s,o,l,h,d,m);return v&&(w.Qa=!0),w}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=me(s);ie("RemoteStore","RemoteStore shutting down."),o.L_.add(5),await eu(o),o.k_.shutdown(),o.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}fp.provider={build:()=>new fp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Oi("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(e,n,i,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=s,this.user=bt.UNAUTHENTICATED,this.clientId=lE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(i,async l=>{ie("FirestoreClient","Received user=",l.uid),await this.authCredentialListener(l),this.user=l}),this.appCheckCredentials.start(i,l=>(ie("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ai;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const i=Wm(n,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function Hd(t,e){t.asyncQueue.verifyOperationInProgress(),ie("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener(async s=>{i.isEqual(s)||(await BE(e.localStore,s),i=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Uv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await uL(t);ie("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(i=>Ov(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>Ov(e.remoteStore,s)),t._onlineComponents=e}async function uL(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){ie("FirestoreClient","Using user provided OfflineComponentProvider");try{await Hd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===G.FAILED_PRECONDITION||s.code===G.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;bo("Error using user provided cache. Falling back to memory cache: "+n),await Hd(t,new ph)}}else ie("FirestoreClient","Using default OfflineComponentProvider"),await Hd(t,new ph);return t._offlineComponents}async function uT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(ie("FirestoreClient","Using user provided OnlineComponentProvider"),await Uv(t,t._uninitializedComponentsProvider._online)):(ie("FirestoreClient","Using default OnlineComponentProvider"),await Uv(t,new fp))),t._onlineComponents}function cL(t){return uT(t).then(e=>e.syncEngine)}async function cT(t){const e=await uT(t),n=e.eventManager;return n.onListen=K1.bind(null,e.syncEngine),n.onUnlisten=X1.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Q1.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=J1.bind(null,e.syncEngine),n}function hL(t,e,n={}){const i=new Ai;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,m){const v=new lT({next:I=>{v.Za(),l.enqueueAndForget(()=>XE(o,w));const D=I.docs.has(h);!D&&I.fromCache?m.reject(new ne(G.UNAVAILABLE,"Failed to get document because the client is offline.")):D&&I.fromCache&&d&&d.source==="server"?m.reject(new ne(G.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(I)},error:I=>m.reject(I)}),w=new JE(km(h.path),v,{includeMetadataChanges:!0,_a:!0});return YE(o,w)}(await cT(t),t.asyncQueue,e,n,i)),i.promise}function dL(t,e,n={}){const i=new Ai;return t.asyncQueue.enqueueAndForget(async()=>function(o,l,h,d,m){const v=new lT({next:I=>{v.Za(),l.enqueueAndForget(()=>XE(o,w)),I.fromCache&&d.source==="server"?m.reject(new ne(G.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(I)},error:I=>m.reject(I)}),w=new JE(h,v,{includeMetadataChanges:!0,_a:!0});return YE(o,w)}(await cT(t),t.asyncQueue,e,n,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(t,e,n){if(!n)throw new ne(G.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function fL(t,e,n,i){if(e===!0&&i===!0)throw new ne(G.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function jv(t){if(!se.isDocumentKey(t))throw new ne(G.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Wv(t){if(se.isDocumentKey(t))throw new ne(G.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function $h(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":de()}function Un(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ne(G.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$h(t);throw new ne(G.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hv{constructor(e){var n,i;if(e.host===void 0){if(e.ssl!==void 0)throw new ne(G.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ne(G.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=hT((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ne(G.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,s){return i.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gh{constructor(e,n,i,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ne(G.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ne(G.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hv(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Lk;switch(i.type){case"firstParty":return new Dk(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ne(G.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const i=Bv.get(n);i&&(ie("ComponentProvider","Removing Datastore"),Bv.delete(n),i.terminate())}(this),Promise.resolve()}}function pL(t,e,n,i={}){var s;const o=(t=Un(t,Gh))._getSettings(),l=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==l&&bo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:l,ssl:!1})),i.mockUserToken){let h,d;if(typeof i.mockUserToken=="string")h=i.mockUserToken,d=bt.MOCK_USER;else{h=ZP(i.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const m=i.mockUserToken.sub||i.mockUserToken.user_id;if(!m)throw new ne(G.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");d=new bt(m)}t._authCredentials=new Nk(new aE(h,d))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Zo(this.firestore,e,this._query)}}class Wt{constructor(e,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Wt(this.firestore,e,this._key)}}class yr extends Zo{constructor(e,n,i){super(e,n,km(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Wt(this.firestore,null,new se(e))}withConverter(e){return new yr(this.firestore,e,this._path)}}function gi(t,e,...n){if(t=wt(t),dT("collection","path",e),t instanceof Gh){const i=Ue.fromString(e,...n);return Wv(i),new yr(t,null,i)}{if(!(t instanceof Wt||t instanceof yr))throw new ne(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ue.fromString(e,...n));return Wv(i),new yr(t.firestore,null,i)}}function _i(t,e,...n){if(t=wt(t),arguments.length===1&&(e=lE.newId()),dT("doc","path",e),t instanceof Gh){const i=Ue.fromString(e,...n);return jv(i),new Wt(t,null,new se(i))}{if(!(t instanceof Wt||t instanceof yr))throw new ne(G.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Ue.fromString(e,...n));return jv(i),new Wt(t.firestore,t instanceof yr?t.converter:null,new se(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new WE(this,"async_queue_retry"),this.Vu=()=>{const i=Wd();i&&ie("AsyncQueue","Visibility state changed to "+i.visibilityState),this.t_.jo()},this.mu=e;const n=Wd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Wd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Ai;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ql(e))throw e;ie("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(i=>{this.Eu=i,this.du=!1;const s=function(l){let h=l.message||"";return l.stack&&(h=l.stack.includes(l.message)?l.stack:l.message+`
`+l.stack),h}(i);throw Oi("INTERNAL UNHANDLED ERROR: ",s),i}).then(i=>(this.du=!1,i))));return this.mu=n,n}enqueueAfterDelay(e,n,i){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=jm.createAndSchedule(this,e,n,i,o=>this.yu(o));return this.Tu.push(s),s}fu(){this.Eu&&de()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,i)=>n.targetTimeMs-i.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class _s extends Gh{constructor(e,n,i,s){super(e,n,i,s),this.type="firestore",this._queue=new qv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new qv(e),this._firestoreClient=void 0,await e}}}function mL(t,e){const n=typeof t=="object"?t:_0(),i=typeof t=="string"?t:"(default)",s=hm(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const o=$P("firestore");o&&pL(s,...o)}return s}function $m(t){if(t._terminated)throw new ne(G.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||gL(t),t._firestoreClient}function gL(t){var e,n,i;const s=t._freezeSettings(),o=function(h,d,m,v){return new Zk(h,d,m,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,hT(v.experimentalLongPollingOptions),v.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((i=s.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new lL(t._authCredentials,t._appCheckCredentials,t._queue,o,t._componentsProvider&&function(h){const d=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zo(kt.fromBase64String(e))}catch(n){throw new ne(G.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zo(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ne(G.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Pt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ne(G.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ne(G.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Re(this._lat,e._lat)||Re(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,s){if(i.length!==s.length)return!1;for(let o=0;o<i.length;++o)if(i[o]!==s[o])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L=/^__.*__$/;class vL{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return this.fieldMask!==null?new Rr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Xl(e,this.data,n,this.fieldTransforms)}}class fT{constructor(e,n,i){this.data=e,this.fieldMask=n,this.fieldTransforms=i}toMutation(e,n){return new Rr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function pT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw de()}}class Qm{constructor(e,n,i,s,o,l){this.settings=e,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=s,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Qm(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:i,xu:!1});return s.Ou(e),s}Nu(e){var n;const i=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:i,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return mh(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(pT(this.Cu)&&_L.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class yL{constructor(e,n,i){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=i||Wh(e)}Qu(e,n,i,s=!1){return new Qm({Cu:e,methodName:n,qu:i,path:Pt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Kh(t){const e=t._freezeSettings(),n=Wh(t._databaseId);return new yL(t._databaseId,!!e.ignoreUndefinedProperties,n)}function mT(t,e,n,i,s,o={}){const l=t.Qu(o.merge||o.mergeFields?2:0,e,n,s);Ym("Data must be an object, but it was:",l,i);const h=gT(i,l);let d,m;if(o.merge)d=new on(l.fieldMask),m=l.fieldTransforms;else if(o.mergeFields){const v=[];for(const w of o.mergeFields){const I=pp(e,w,n);if(!l.contains(I))throw new ne(G.INVALID_ARGUMENT,`Field '${I}' is specified in your field mask but missing from your input data.`);vT(v,I)||v.push(I)}d=new on(v),m=l.fieldTransforms.filter(w=>d.covers(w.field))}else d=null,m=l.fieldTransforms;return new vL(new Kt(h),d,m)}class Qh extends Gm{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qh}}function wL(t,e,n,i){const s=t.Qu(1,e,n);Ym("Data must be an object, but it was:",s,i);const o=[],l=Kt.empty();ms(i,(d,m)=>{const v=Xm(e,d,n);m=wt(m);const w=s.Nu(v);if(m instanceof Qh)o.push(v);else{const I=nu(m,w);I!=null&&(o.push(v),l.set(v,I))}});const h=new on(o);return new fT(l,h,s.fieldTransforms)}function EL(t,e,n,i,s,o){const l=t.Qu(1,e,n),h=[pp(e,i,n)],d=[s];if(o.length%2!=0)throw new ne(G.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let I=0;I<o.length;I+=2)h.push(pp(e,o[I])),d.push(o[I+1]);const m=[],v=Kt.empty();for(let I=h.length-1;I>=0;--I)if(!vT(m,h[I])){const D=h[I];let U=d[I];U=wt(U);const B=l.Nu(D);if(U instanceof Qh)m.push(D);else{const Z=nu(U,B);Z!=null&&(m.push(D),v.set(D,Z))}}const w=new on(m);return new fT(v,w,l.fieldTransforms)}function TL(t,e,n,i=!1){return nu(n,t.Qu(i?4:3,e))}function nu(t,e){if(_T(t=wt(t)))return Ym("Unsupported field value:",e,t),gT(t,e);if(t instanceof Gm)return function(i,s){if(!pT(s.Cu))throw s.Bu(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${i._methodName}() is not currently supported inside arrays`);const o=i._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(i,s){const o=[];let l=0;for(const h of i){let d=nu(h,s.Lu(l));d==null&&(d={nullValue:"NULL_VALUE"}),o.push(d),l++}return{arrayValue:{values:o}}}(t,e)}return function(i,s){if((i=wt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return gR(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const o=it.fromDate(i);return{timestampValue:dh(s.serializer,o)}}if(i instanceof it){const o=new it(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:dh(s.serializer,o)}}if(i instanceof Zm)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof zo)return{bytesValue:OE(s.serializer,i._byteString)};if(i instanceof Wt){const o=s.databaseId,l=i.firestore._databaseId;if(!l.isEqual(o))throw s.Bu(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Om(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof Km)return function(l,h){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:l.toArray().map(d=>{if(typeof d!="number")throw h.Bu("VectorValues must only contain numeric values.");return Rm(h.serializer,d)})}}}}}}(i,s);throw s.Bu(`Unsupported field value: ${$h(i)}`)}(t,e)}function gT(t,e){const n={};return uE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ms(t,(i,s)=>{const o=nu(s,e.Mu(i));o!=null&&(n[i]=o)}),{mapValue:{fields:n}}}function _T(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof it||t instanceof Zm||t instanceof zo||t instanceof Wt||t instanceof Gm||t instanceof Km)}function Ym(t,e,n){if(!_T(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const i=$h(n);throw i==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+i)}}function pp(t,e,n){if((e=wt(e))instanceof Zh)return e._internalPath;if(typeof e=="string")return Xm(t,e);throw mh("Field path arguments must be of type string or ",t,!1,void 0,n)}const IL=new RegExp("[~\\*/\\[\\]]");function Xm(t,e,n){if(e.search(IL)>=0)throw mh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Zh(...e.split("."))._internalPath}catch{throw mh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function mh(t,e,n,i,s){const o=i&&!i.isEmpty(),l=s!==void 0;let h=`Function ${e}() called with invalid data`;n&&(h+=" (via `toFirestore()`)"),h+=". ";let d="";return(o||l)&&(d+=" (found",o&&(d+=` in field ${i}`),l&&(d+=` in document ${s}`),d+=")"),new ne(G.INVALID_ARGUMENT,h+t+d)}function vT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,n,i,s,o){this._firestore=e,this._userDataWriter=n,this._key=i,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Wt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Jm("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class SL extends yT{data(){return super.data()}}function Jm(t,e){return typeof e=="string"?Xm(t,e):e instanceof Zh?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new ne(G.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class eg{}class xL extends eg{}function ac(t,e,...n){let i=[];e instanceof eg&&i.push(e),i=i.concat(n),function(o){const l=o.filter(d=>d instanceof tg).length,h=o.filter(d=>d instanceof Yh).length;if(l>1||l>0&&h>0)throw new ne(G.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const s of i)t=s._apply(t);return t}class Yh extends xL{constructor(e,n,i){super(),this._field=e,this._op=n,this._value=i,this.type="where"}static _create(e,n,i){return new Yh(e,n,i)}_apply(e){const n=this._parse(e);return wT(e._query,n),new Zo(e.firestore,e.converter,rp(e._query,n))}_parse(e){const n=Kh(e.firestore);return function(o,l,h,d,m,v,w){let I;if(m.isKeyField()){if(v==="array-contains"||v==="array-contains-any")throw new ne(G.INVALID_ARGUMENT,`Invalid Query. You can't perform '${v}' queries on documentId().`);if(v==="in"||v==="not-in"){Zv(w,v);const D=[];for(const U of w)D.push(Gv(d,o,U));I={arrayValue:{values:D}}}else I=Gv(d,o,w)}else v!=="in"&&v!=="not-in"&&v!=="array-contains-any"||Zv(w,v),I=TL(h,l,w,v==="in"||v==="not-in");return ut.create(m,v,I)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function $v(t,e,n){const i=e,s=Jm("where",t);return Yh._create(s,i,n)}class tg extends eg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new tg(e,n)}_parse(e){const n=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return n.length===1?n[0]:zn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,o){let l=s;const h=o.getFlattenedFilters();for(const d of h)wT(l,d),l=rp(l,d)}(e._query,n),new Zo(e.firestore,e.converter,rp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Gv(t,e,n){if(typeof(n=wt(n))=="string"){if(n==="")throw new ne(G.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vE(e)&&n.indexOf("/")!==-1)throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Ue.fromString(n));if(!se.isDocumentKey(i))throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return pv(t,new se(i))}if(n instanceof Wt)return pv(t,n._key);throw new ne(G.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${$h(n)}.`)}function Zv(t,e){if(!Array.isArray(t)||t.length===0)throw new ne(G.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function wT(t,e){const n=function(s,o){for(const l of s)for(const h of l.getFlattenedFilters())if(o.indexOf(h.op)>=0)return h.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new ne(G.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ne(G.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class AL{convertValue(e,n="none"){switch(hs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw de()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const i={};return ms(e,(s,o)=>{i[s]=this.convertValue(o,n)}),i}convertVectorValue(e){var n,i,s;const o=(s=(i=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||i===void 0?void 0:i.values)===null||s===void 0?void 0:s.map(l=>tt(l.doubleValue));return new Km(o)}convertGeoPoint(e){return new Zm(tt(e.latitude),tt(e.longitude))}convertArray(e,n){return(e.values||[]).map(i=>this.convertValue(i,n))}convertServerTimestamp(e,n){switch(n){case"previous":const i=Pm(e);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(bl(e));default:return null}}convertTimestamp(e){const n=Ir(e);return new it(n.seconds,n.nanos)}convertDocumentKey(e,n){const i=Ue.fromString(e);Oe(UE(i));const s=new Ol(i.get(1),i.get(3)),o=new se(i.popFirst(5));return s.isEqual(n)||Oi(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ET(t,e,n){let i;return i=t?t.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class TT extends yT{constructor(e,n,i,s,o,l){super(e,n,i,s,l),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new kc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const i=this._document.data.field(Jm("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}}class kc extends TT{data(e={}){return super.data(e)}}class CL{constructor(e,n,i,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ya(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(i=>{e.call(n,new kc(this._firestore,this._userDataWriter,i.key,i,new Ya(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ne(G.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let l=0;return s._snapshot.docChanges.map(h=>{const d=new kc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Ya(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);return h.doc,{type:"added",doc:d,oldIndex:-1,newIndex:l++}})}{let l=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(h=>o||h.type!==3).map(h=>{const d=new kc(s._firestore,s._userDataWriter,h.doc.key,h.doc,new Ya(s._snapshot.mutatedKeys.has(h.doc.key),s._snapshot.fromCache),s.query.converter);let m=-1,v=-1;return h.type!==0&&(m=l.indexOf(h.doc.key),l=l.delete(h.doc.key)),h.type!==1&&(l=l.add(h.doc),v=l.indexOf(h.doc.key)),{type:kL(h.type),doc:d,oldIndex:m,newIndex:v}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function kL(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return de()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RL(t){t=Un(t,Wt);const e=Un(t.firestore,_s);return hL($m(e),t._key).then(n=>NL(e,t,n))}class IT extends AL{constructor(e){super(),this.firestore=e}convertBytes(e){return new zo(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Wt(this.firestore,null,n)}}function lc(t){t=Un(t,Zo);const e=Un(t.firestore,_s),n=$m(e),i=new IT(e);return PL(t._query),dL(n,t._query).then(s=>new CL(e,i,t,s))}function LL(t,e,n){t=Un(t,Wt);const i=Un(t.firestore,_s),s=ET(t.converter,e);return Xh(i,[mT(Kh(i),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,In.none())])}function qd(t,e,n,...i){t=Un(t,Wt);const s=Un(t.firestore,_s),o=Kh(s);let l;return l=typeof(e=wt(e))=="string"||e instanceof Zh?EL(o,"updateDoc",t._key,e,n,i):wL(o,"updateDoc",t._key,e),Xh(s,[l.toMutation(t._key,In.exists(!0))])}function $d(t){return Xh(Un(t.firestore,_s),[new Lm(t._key,In.none())])}function Gd(t,e){const n=Un(t.firestore,_s),i=_i(t),s=ET(t.converter,e);return Xh(n,[mT(Kh(t.firestore),"addDoc",i._key,s,t.converter!==null,{}).toMutation(i._key,In.exists(!1))]).then(()=>i)}function Xh(t,e){return function(i,s){const o=new Ai;return i.asyncQueue.enqueueAndForget(async()=>eL(await cL(i),s,o)),o.promise}($m(t),e)}function NL(t,e,n){const i=n.docs.get(e._key),s=new IT(t);return new TT(t,s,e._key,i,new Ya(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){qo=s})(Wo),No(new os("firestore",(i,{instanceIdentifier:s,options:o})=>{const l=i.getProvider("app").getImmediate(),h=new _s(new bk(i.getProvider("auth-internal")),new Vk(i.getProvider("app-check-internal")),function(m,v){if(!Object.prototype.hasOwnProperty.apply(m.options,["projectId"]))throw new ne(G.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ol(m.options.projectId,v)}(l,s),l);return o=Object.assign({useFetchStreams:n},o),h._setSettings(o),h},"PUBLIC").setMultipleInstances(!0)),vr(uv,"4.7.3",e),vr(uv,"4.7.3","esm2017")})();const ST={apiKey:"AIzaSyCynuJgfPszmLQ6eiH7x26jg_bMwxj991Q",authDomain:"projetocooprem.firebaseapp.com",projectId:"projetocooprem"},PT=dm(ST),Ba=eE(PT),Tt=mL(PT);function Qs(t){return t?t instanceof Date?t:t!=null&&t.toDate?t.toDate():new Date(t):new Date}const bL=()=>{const[t,e]=_e.useState(null),[n,i]=_e.useState(null),[s,o]=_e.useState(!0),[l,h]=_e.useState([]),[d,m]=_e.useState([]),[v,w]=_e.useState([]),[I,D]=_e.useState([]),U=!1,B=_e.useCallback(async F=>{o(!0);try{const H=F.role==="Desenvolvedor"||F.role==="Admin",$=await lc(gi(Tt,"users")),S=await lc(gi(Tt,"cooperados")),T=H?ac(gi(Tt,"visits")):ac(gi(Tt,"visits"),$v("manager.id","==",F.id)),P=H?ac(gi(Tt,"suggestedVisits")):ac(gi(Tt,"suggestedVisits"),$v("manager.id","==",F.id)),[C,O]=await Promise.all([lc(T),lc(P)]);h($.docs.map(M=>({...M.data(),id:M.id}))),m(S.docs.map(M=>({...M.data(),id:M.id}))),w(C.docs.map(M=>{const A=M.data();return{...A,id:M.id,date:Qs(A.date)}}).sort((M,A)=>A.date.getTime()-M.date.getTime())),D(O.docs.map(M=>{const A=M.data();return{...A,id:M.id,suggestedAt:Qs(A.suggestedAt)}}))}finally{o(!1)}},[]);_e.useEffect(()=>{const F=yC(Ba,async H=>{if(!H){e(null),o(!1);return}const $=_i(Tt,"users",H.uid),S=await RL($);if(!S.exists()){await zd(Ba),e(null),o(!1);return}const T={...S.data(),id:H.uid};e(T),await B(T)});return()=>F()},[B]);const Z=async(F,H)=>{try{return await gC(Ba,F,H),!0}catch{return!1}},R=async F=>{if(!t)return;const H={...F,date:it.fromDate(Qs(F.date)),manager:{id:t.id,name:t.name,agency:t.agency}},$=await Gd(gi(Tt,"visits"),H);w(S=>[{...H,id:$.id,date:Qs(F.date)},...S])},x=async()=>{alert("IA desativada por enquanto.")};if(s)return b.jsxs("div",{className:"h-screen flex flex-col items-center justify-center bg-[#005058] text-white",children:[b.jsx(Nh,{style:{height:"60px",marginBottom:"20px",filter:"brightness(1.5)"}}),b.jsxs("div",{className:"flex items-center gap-3",children:[b.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),b.jsx("p",{className:"font-bold",children:"Sicoob Cooprem - Sincronizando..."})]})]});if(!t)return b.jsx(CP,{onLogin:Z});const N=t.role==="Desenvolvedor"||t.role==="Admin";return b.jsxs("div",{className:"min-h-screen bg-gray-100 selection:bg-[#005058] selection:text-white",children:[N?b.jsx(VP,{users:l,cooperados:d,visits:v,suggestedVisits:I,onLogout:()=>zd(Ba),hasAIKey:U,onAddUser:async F=>{const H=dm(ST,`Sec_${Date.now()}`),$=eE(H),S=await mC($,F.email,F.password||"123456");await LL(_i(Tt,"users",S.user.uid),{...F,password:F.password||"123456"}),h(T=>[...T,{...F,id:S.user.uid}]),await lA(H)},onDeleteUser:async F=>{confirm("Remover este usurio?")&&(await $d(_i(Tt,"users",F)),h(H=>H.filter($=>$.id!==F)))},onAddCooperado:async F=>{const H=await Gd(gi(Tt,"cooperados"),F);m($=>[...$,{...F,id:H.id}])},onGenerateAISuggestions:x,onOpenChangePassword:i,onAddSuggestion:async F=>{const H={...F,suggestedAt:it.fromDate(Qs(F.suggestedAt||new Date))},$=await Gd(gi(Tt,"suggestedVisits"),H);D(S=>[...S,{...H,id:$.id,suggestedAt:Qs(H.suggestedAt)}])},onRemoveSuggestion:async F=>{await $d(_i(Tt,"suggestedVisits",F)),D(H=>H.filter($=>$.id!==F))},onUpdateUser:async(F,H)=>{await qd(_i(Tt,"users",F),H),h($=>$.map(S=>S.id===F?{...S,...H}:S))},onUpdateCooperado:async(F,H)=>{await qd(_i(Tt,"cooperados",F),H),m($=>$.map(S=>S.id===F?{...S,...H}:S))},onDeleteCooperado:async F=>{confirm("Excluir cooperado?")&&(await $d(_i(Tt,"cooperados",F)),m(H=>H.filter($=>$.id!==F)))}}):b.jsx(NP,{user:t,visits:v,cooperados:d,suggestedVisits:I,onLogout:()=>zd(Ba),addVisit:R}),n&&b.jsx(FP,{user:n,onSave:async(F,H)=>{await qd(_i(Tt,"users",F),{password:H}),h($=>$.map(S=>S.id===F?{...S,password:H}:S)),i($=>$&&$.id===F?{...$,password:H}:$),i(null)},onClose:()=>i(null)})]})},xT=document.getElementById("root");if(!xT)throw new Error("Elemento root no encontrado");Zd.createRoot(xT).render(b.jsx(gI.StrictMode,{children:b.jsx(bL,{})}));
